/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function j(a,n){var m=a.nodeName.toLowerCase();if("area"===m){var l=a.parentNode,k=l.name,d;return !a.href||!k||l.nodeName.toLowerCase()!=="map"?!1:(d=f("img[usemap=#"+k+"]")[0],!!d&&h(d))}return(/input|select|textarea|button|object/.test(m)?!a.disabled:"a"==m?a.href||n:n)&&h(a)}function h(a){return !f(a).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(a,d){return typeof a=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?f(document):a},zIndex:function(l){if(l!==e){return this.css("zIndex",l)}if(this.length){var k=f(this[0]),b,a;while(k.length&&k[0]!==document){b=k.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){a=parseInt(k.css("zIndex"),10);if(!isNaN(a)&&a!==0){return a}}k=k.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(n,m){function a(o,s,r,q){return f.each(l,function(){s-=parseFloat(f.curCSS(o,"padding"+this,!0))||0,r&&(s-=parseFloat(f.curCSS(o,"border"+this+"Width",!0))||0),q&&(s-=parseFloat(f.curCSS(o,"margin"+this,!0))||0)}),s}var l=m==="Width"?["Left","Right"]:["Top","Bottom"],k=m.toLowerCase(),b={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+m]=function(d){return d===e?b["inner"+m].call(this):this.each(function(){f(this).css(k,a(this,d)+"px")})},f.fn["outer"+m]=function(d,o){return typeof d!="number"?b["outer"+m].call(this,d):this.each(function(){f(this).css(k,a(this,d,!0,o)+"px")})}}),f.extend(f.expr[":"],{data:function(a,l,k){return !!f.data(a,k[3])},focusable:function(a){return j(a,!isNaN(f.attr(a,"tabindex")))},tabbable:function(a){var k=f.attr(a,"tabindex"),c=isNaN(k);return(c||k>=0)&&j(a,!c)}}),f(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));d.offsetHeight,f.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=d.offsetHeight===100,f.support.selectstart="onselectstart" in d,a.removeChild(d).style.display="none"}),f.extend(f.ui,{plugin:{add:function(a,n,m){var l=f.ui[a].prototype;for(var k in m){l.plugins[k]=l.plugins[k]||[],l.plugins[k].push([n,m[k]])}},call:function(l,k,o){var n=l.plugins[k];if(!n||!l.element[0].parentNode){return}for(var m=0;m<n.length;m++){l.options[n[m][0]]&&n[m][1].apply(l.element,o)}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(a,m){if(f(a).css("overflow")==="hidden"){return !1}var l=m&&m==="left"?"scrollLeft":"scrollTop",k=!1;return a[l]>0?!0:(a[l]=1,k=a[l]>0,a[l]=0,k)},isOverAxis:function(k,d,l){return k>d&&k<d+l},isOver:function(a,o,n,m,l,k){return f.ui.isOverAxis(a,n,l)&&f.ui.isOverAxis(o,m,k)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var j=f.cleanData;f.cleanData=function(a){for(var l=0,k;(k=a[l])!=null;l++){try{f(k).triggerHandler("remove")}catch(c){}}j(a)}}else{var h=f.fn.remove;f.fn.remove=function(a,d){return this.each(function(){return d||(!a||f.filter(a,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(c){}}),h.call(f(this),a,d)})}}f.widget=function(a,o,n){var m=a.split(".")[0],l;a=a.split(".")[1],l=m+"-"+a,n||(n=o,o=f.Widget),f.expr[":"][l]=function(b){return !!f.data(b,a)},f[m]=f[m]||{},f[m][a]=function(d,c){arguments.length&&this._createWidget(d,c)};var k=new o;k.options=f.extend(!0,{},k.options),f[m][a].prototype=f.extend(!0,k,{namespace:m,widgetName:a,widgetEventPrefix:f[m][a].prototype.widgetEventPrefix||a,widgetBaseClass:l},n),f.widget.bridge(a,f[m][a])},f.widget.bridge=function(b,a){f.fn[b]=function(l){var k=typeof l=="string",d=Array.prototype.slice.call(arguments,1),c=this;return l=!k&&d.length?f.extend.apply(null,[!0,l].concat(d)):l,k&&l.charAt(0)==="_"?c:(k?this.each(function(){var n=f.data(this,b),m=n&&f.isFunction(n[l])?n[l].apply(n,d):n;if(m!==n&&m!==e){return c=m,!1}}):this.each(function(){var m=f.data(this,b);m?m.option(l||{})._init():f.data(this,b,new a(l,this))}),c)}},f.Widget=function(d,c){arguments.length&&this._createWidget(d,c)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,l){f.data(l,this.widgetName,this),this.element=f(l),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),a);var k=this;this.element.bind("remove."+this.widgetName,function(){k.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(k,b){var a=k;if(arguments.length===0){return f.extend({},this.options)}if(typeof k=="string"){if(b===e){return this.options[k]}a={},a[k]=b}return this._setOptions(a),this},_setOptions:function(a){var d=this;return f.each(a,function(k,c){d._setOption(k,c)}),this},_setOption:function(d,c){return this.options[d]=c,d==="disabled"&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,o,n){var m,l,k=this.options[a];n=n||{},o=f.Event(o),o.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),o.target=this.element[0],l=o.originalEvent;if(l){for(m in l){m in o||(o[m]=l[m])}}return this.element.trigger(o,n),!(f.isFunction(k)&&k.call(this.element[0],o,n)===!1||o.isDefaultPrevented())}}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=!1;e(document).mouseup(function(b){f=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,a.widgetName+".preventClickEvent")){return e.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(f){return}this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var j=this,h=a.which==1,c=typeof this.options.cancel=="string"&&a.target.nodeName?e(a.target).closest(this.options.cancel).length:!1;if(!h||c||!this._mouseCapture(a)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){j.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted){return a.preventDefault(),!0}}return !0===e.data(a.target,this.widgetName+".preventClickEvent")&&e.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return j._mouseMove(b)},this._mouseUpDelegate=function(b){return j._mouseUp(b)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),f=!0,!0},_mouseMove:function(a){return !e.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&e.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(k,j){k.ui=k.ui||{};var r=/left|center|right/,q=/top|center|bottom/,o="center",n={},m=k.fn.position,l=k.fn.offset;k.fn.position=function(c){if(!c||!c.of){return m.apply(this,arguments)}c=k.extend({},c);var t=k(c.of),s=t[0],f=(c.collision||"flip").split(" "),e=c.offset?c.offset.split(" "):[0,0],d,a,u;return s.nodeType===9?(d=t.width(),a=t.height(),u={top:0,left:0}):s.setTimeout?(d=t.width(),a=t.height(),u={top:t.scrollTop(),left:t.scrollLeft()}):s.preventDefault?(c.at="left top",d=a=0,u={top:c.of.pageY,left:c.of.pageX}):(d=t.outerWidth(),a=t.outerHeight(),u=t.offset()),k.each(["my","at"],function(){var b=(c[this]||"").split(" ");b.length===1&&(b=r.test(b[0])?b.concat([o]):q.test(b[0])?[o].concat(b):[o,o]),b[0]=r.test(b[0])?b[0]:o,b[1]=q.test(b[1])?b[1]:o,c[this]=b}),f.length===1&&(f[1]=f[0]),e[0]=parseInt(e[0],10)||0,e.length===1&&(e[1]=e[0]),e[1]=parseInt(e[1],10)||0,c.at[0]==="right"?u.left+=d:c.at[0]===o&&(u.left+=d/2),c.at[1]==="bottom"?u.top+=a:c.at[1]===o&&(u.top+=a/2),u.left+=e[0],u.top+=e[1],this.each(function(){var C=k(this),B=C.outerWidth(),A=C.outerHeight(),z=parseInt(k.curCSS(this,"marginLeft",!0))||0,y=parseInt(k.curCSS(this,"marginTop",!0))||0,x=B+z+(parseInt(k.curCSS(this,"marginRight",!0))||0),w=A+y+(parseInt(k.curCSS(this,"marginBottom",!0))||0),v=k.extend({},u),b;c.my[0]==="right"?v.left-=B:c.my[0]===o&&(v.left-=B/2),c.my[1]==="bottom"?v.top-=A:c.my[1]===o&&(v.top-=A/2),n.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),b={left:v.left-z,top:v.top-y},k.each(["left","top"],function(D,h){k.ui.position[f[D]]&&k.ui.position[f[D]][h](v,{targetWidth:d,targetHeight:a,elemWidth:B,elemHeight:A,collisionPosition:b,collisionWidth:x,collisionHeight:w,offset:e,my:c.my,at:c.at})}),k.fn.bgiframe&&C.bgiframe(),C.offset(k.extend(v,{using:c.using}))})},k.ui.position={fit:{left:function(a,s){var h=k(window),f=s.collisionPosition.left+s.collisionWidth-h.width()-h.scrollLeft();a.left=f>0?a.left-f:Math.max(a.left-s.collisionPosition.left,a.left)},top:function(a,s){var h=k(window),f=s.collisionPosition.top+s.collisionHeight-h.height()-h.scrollTop();a.top=f>0?a.top-f:Math.max(a.top-s.collisionPosition.top,a.top)}},flip:{left:function(a,w){if(w.at[0]===o){return}var v=k(window),u=w.collisionPosition.left+w.collisionWidth-v.width()-v.scrollLeft(),t=w.my[0]==="left"?-w.elemWidth:w.my[0]==="right"?w.elemWidth:0,s=w.at[0]==="left"?w.targetWidth:-w.targetWidth,e=-2*w.offset[0];a.left+=w.collisionPosition.left<0?t+s+e:u>0?t+s+e:0},top:function(a,w){if(w.at[1]===o){return}var v=k(window),u=w.collisionPosition.top+w.collisionHeight-v.height()-v.scrollTop(),t=w.my[1]==="top"?-w.elemHeight:w.my[1]==="bottom"?w.elemHeight:0,s=w.at[1]==="top"?w.targetHeight:-w.targetHeight,e=-2*w.offset[1];a.top+=w.collisionPosition.top<0?t+s+e:u>0?t+s+e:0}}},k.offset.setOffset||(k.offset.setOffset=function(a,x){/static/.test(k.curCSS(a,"position"))&&(a.style.position="relative");var w=k(a),v=w.offset(),u=parseInt(k.curCSS(a,"top",!0),10)||0,t=parseInt(k.curCSS(a,"left",!0),10)||0,s={top:x.top-v.top+u,left:x.left-v.left+t};"using" in x?x.using.call(a,s):w.css(s)},k.fn.offset=function(a){var d=this[0];return !d||!d.ownerDocument?null:a?k.isFunction(a)?this.each(function(b){k(this).offset(a.call(this,b,k(this).offset()))}):this.each(function(){k.offset.setOffset(this,a)}):l.call(this)}),function(){var a=document.getElementsByTagName("body")[0],x=document.createElement("div"),w,v,u,t,s;w=document.createElement(a?"div":"body"),u={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&k.extend(u,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in u){w.style[f]=u[f]}w.appendChild(x),v=a||document.documentElement,v.insertBefore(w,v.firstChild),x.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",t=k(x).offset(function(d,c){return c}).offset(),w.innerHTML="",v.removeChild(w),s=t.top+t.left+(a?2000:0),n.fractions=s>21&&s<22}()})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var e=this.options;return this.helper||e.disabled||d(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(e.iframeFix&&d(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(d(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var e=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),d.ui.ddmanager&&(d.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),d.ui.ddmanager&&!e.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,!0),d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,f){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",a,e)===!1){return this._mouseUp({}),!1}this.position=e.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return d.ui.ddmanager&&d.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var l=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(l=d.ui.ddmanager.drop(this,a)),this.dropped&&(l=this.dropped,this.dropped=!1);var k=this.element[0],j=!1;while(k&&(k=k.parentNode)){k==document&&(j=!0)}if(!j&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!l||this.options.revert=="valid"&&l||this.options.revert===!0||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,l)){var h=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){h._trigger("stop",a)!==!1&&h._clear()})}else{this._trigger("stop",a)!==!1&&this._clear()}return !1},_mouseUp:function(a){return this.options.iframeFix===!0&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a),d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var e=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;return d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(e=!0)}),e},_createHelper:function(a){var f=this.options,e=d.isFunction(f.helper)?d(f.helper.apply(this.element[0],[a])):f.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo(f.appendTo=="parent"?this.element[0].parentNode:f.appendTo),e[0]!=this.element[0]&&!/(fixed|absolute)/.test(e.css("position"))&&e.css("position","absolute"),e},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),d.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[a.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var l=d(a.containment),k=l[0];if(!k){return}var j=l.offset(),h=d(k).css("overflow")!="hidden";this.containment=[(parseInt(d(k).css("borderLeftWidth"),10)||0)+(parseInt(d(k).css("paddingLeft"),10)||0),(parseInt(d(k).css("borderTopWidth"),10)||0)+(parseInt(d(k).css("paddingTop"),10)||0),(h?Math.max(k.scrollWidth,k.offsetWidth):k.offsetWidth)-(parseInt(d(k).css("borderLeftWidth"),10)||0)-(parseInt(d(k).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(h?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(d(k).css("borderTopWidth"),10)||0)-(parseInt(d(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=l}else{a.containment.constructor==Array&&(this.containment=a.containment)}},_convertPositionTo:function(a,m){m||(m=this.position);var l=a=="absolute"?1:-1,k=this.options,j=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(j[0].tagName);return{top:m.top+this.offset.relative.top*l+this.offset.parent.top*l-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:j.scrollTop())*l),left:m.left+this.offset.relative.left*l+this.offset.parent.left*l-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:j.scrollLeft())*l)}},_generatePosition:function(u){var t=this.options,s=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,r=/(html|body)/i.test(s[0].tagName),q=u.pageX,o=u.pageY;if(this.originalPosition){var n;if(this.containment){if(this.relative_container){var m=this.relative_container.offset();n=[this.containment[0]+m.left,this.containment[1]+m.top,this.containment[2]+m.left,this.containment[3]+m.top]}else{n=this.containment}u.pageX-this.offset.click.left<n[0]&&(q=n[0]+this.offset.click.left),u.pageY-this.offset.click.top<n[1]&&(o=n[1]+this.offset.click.top),u.pageX-this.offset.click.left>n[2]&&(q=n[2]+this.offset.click.left),u.pageY-this.offset.click.top>n[3]&&(o=n[3]+this.offset.click.top)}if(t.grid){var l=t.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/t.grid[1])*t.grid[1]:this.originalPageY;o=n?l-this.offset.click.top<n[1]||l-this.offset.click.top>n[3]?l-this.offset.click.top<n[1]?l+t.grid[1]:l-t.grid[1]:l:l;var a=t.grid[0]?this.originalPageX+Math.round((q-this.originalPageX)/t.grid[0])*t.grid[0]:this.originalPageX;q=n?a-this.offset.click.left<n[0]||a-this.offset.click.left>n[2]?a-this.offset.click.left<n[0]?a+t.grid[0]:a-t.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():r?0:s.scrollTop()),left:q-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,f,e){return e=e||this._uiHash(),d.ui.plugin.call(this,a,[f,e]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),d.Widget.prototype._trigger.call(this,a,f,e)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),d.extend(d.ui.draggable,{version:"1.8.21"}),d.ui.plugin.add("draggable","connectToSortable",{start:function(a,l){var k=d(this).data("draggable"),j=k.options,h=d.extend({},l,{item:k.element});k.sortables=[],d(j.connectToSortable).each(function(){var b=d.data(this,"sortable");b&&!b.options.disabled&&(k.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,h))})},stop:function(a,j){var h=d(this).data("draggable"),f=d.extend({},j,{item:h.element});d.each(h.sortables,function(){this.instance.isOver?(this.instance.isOver=0,h.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,f))})},drag:function(a,l){var k=d(this).data("draggable"),j=this,h=function(v){var u=this.offset.click.top,t=this.offset.click.left,s=this.positionAbs.top,r=this.positionAbs.left,q=v.height,o=v.width,n=v.top,m=v.left;return d.ui.isOver(s+u,r+t,n,m,q,o)};d.each(k.sortables,function(b){this.instance.positionAbs=k.positionAbs,this.instance.helperProportions=k.helperProportions,this.instance.offset.click=k.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(j).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return l.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=k.offset.click.top,this.instance.offset.click.left=k.offset.click.left,this.instance.offset.parent.left-=k.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=k.offset.parent.top-this.instance.offset.parent.top,k._trigger("toSortable",a),k.dropped=this.instance.element,k.currentItem=k.element,this.instance.fromOutside=k),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),k._trigger("fromSortable",a),k.dropped=!1)})}}),d.ui.plugin.add("draggable","cursor",{start:function(a,j){var h=d("body"),f=d(this).data("draggable").options;h.css("cursor")&&(f._cursor=h.css("cursor")),h.css("cursor",f.cursor)},stop:function(a,f){var e=d(this).data("draggable").options;e._cursor&&d("body").css("cursor",e._cursor)}}),d.ui.plugin.add("draggable","opacity",{start:function(a,j){var h=d(j.helper),f=d(this).data("draggable").options;h.css("opacity")&&(f._opacity=h.css("opacity")),h.css("opacity",f.opacity)},stop:function(a,f){var e=d(this).data("draggable").options;e._opacity&&d(f.helper).css("opacity",e._opacity)}}),d.ui.plugin.add("draggable","scroll",{start:function(a,f){var e=d(this).data("draggable");e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"&&(e.overflowOffset=e.scrollParent.offset())},drag:function(a,l){var k=d(this).data("draggable"),j=k.options,h=!1;if(k.scrollParent[0]!=document&&k.scrollParent[0].tagName!="HTML"){if(!j.axis||j.axis!="x"){k.overflowOffset.top+k.scrollParent[0].offsetHeight-a.pageY<j.scrollSensitivity?k.scrollParent[0].scrollTop=h=k.scrollParent[0].scrollTop+j.scrollSpeed:a.pageY-k.overflowOffset.top<j.scrollSensitivity&&(k.scrollParent[0].scrollTop=h=k.scrollParent[0].scrollTop-j.scrollSpeed)}if(!j.axis||j.axis!="y"){k.overflowOffset.left+k.scrollParent[0].offsetWidth-a.pageX<j.scrollSensitivity?k.scrollParent[0].scrollLeft=h=k.scrollParent[0].scrollLeft+j.scrollSpeed:a.pageX-k.overflowOffset.left<j.scrollSensitivity&&(k.scrollParent[0].scrollLeft=h=k.scrollParent[0].scrollLeft-j.scrollSpeed)}}else{if(!j.axis||j.axis!="x"){a.pageY-d(document).scrollTop()<j.scrollSensitivity?h=d(document).scrollTop(d(document).scrollTop()-j.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<j.scrollSensitivity&&(h=d(document).scrollTop(d(document).scrollTop()+j.scrollSpeed))}if(!j.axis||j.axis!="y"){a.pageX-d(document).scrollLeft()<j.scrollSensitivity?h=d(document).scrollLeft(d(document).scrollLeft()-j.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<j.scrollSensitivity&&(h=d(document).scrollLeft(d(document).scrollLeft()+j.scrollSpeed))}}h!==!1&&d.ui.ddmanager&&!j.dropBehaviour&&d.ui.ddmanager.prepareOffsets(k,a)}}),d.ui.plugin.add("draggable","snap",{start:function(a,j){var h=d(this).data("draggable"),f=h.options;h.snapElements=[],d(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var e=d(this),k=e.offset();this!=h.element[0]&&h.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:k.top,left:k.left})})},drag:function(L,K){var J=d(this).data("draggable"),I=J.options,H=I.snapTolerance,G=K.offset.left,F=G+J.helperProportions.width,E=K.offset.top,D=E+J.helperProportions.height;for(var C=J.snapElements.length-1;C>=0;C--){var B=J.snapElements[C].left,A=B+J.snapElements[C].width,z=J.snapElements[C].top,y=z+J.snapElements[C].height;if(!(B-H<G&&G<A+H&&z-H<E&&E<y+H||B-H<G&&G<A+H&&z-H<D&&D<y+H||B-H<F&&F<A+H&&z-H<E&&E<y+H||B-H<F&&F<A+H&&z-H<D&&D<y+H)){J.snapElements[C].snapping&&J.options.snap.release&&J.options.snap.release.call(J.element,L,d.extend(J._uiHash(),{snapItem:J.snapElements[C].item})),J.snapElements[C].snapping=!1;continue}if(I.snapMode!="inner"){var x=Math.abs(z-D)<=H,w=Math.abs(y-E)<=H,v=Math.abs(B-F)<=H,u=Math.abs(A-G)<=H;x&&(K.position.top=J._convertPositionTo("relative",{top:z-J.helperProportions.height,left:0}).top-J.margins.top),w&&(K.position.top=J._convertPositionTo("relative",{top:y,left:0}).top-J.margins.top),v&&(K.position.left=J._convertPositionTo("relative",{top:0,left:B-J.helperProportions.width}).left-J.margins.left),u&&(K.position.left=J._convertPositionTo("relative",{top:0,left:A}).left-J.margins.left)}var a=x||w||v||u;if(I.snapMode!="outer"){var x=Math.abs(z-E)<=H,w=Math.abs(y-D)<=H,v=Math.abs(B-G)<=H,u=Math.abs(A-F)<=H;x&&(K.position.top=J._convertPositionTo("relative",{top:z,left:0}).top-J.margins.top),w&&(K.position.top=J._convertPositionTo("relative",{top:y-J.helperProportions.height,left:0}).top-J.margins.top),v&&(K.position.left=J._convertPositionTo("relative",{top:0,left:B}).left-J.margins.left),u&&(K.position.left=J._convertPositionTo("relative",{top:0,left:A-J.helperProportions.width}).left-J.margins.left)}!J.snapElements[C].snapping&&(x||w||v||u||a)&&J.options.snap.snap&&J.options.snap.snap.call(J.element,L,d.extend(J._uiHash(),{snapItem:J.snapElements[C].item})),J.snapElements[C].snapping=x||w||v||u||a}}}),d.ui.plugin.add("draggable","stack",{start:function(a,l){var k=d(this).data("draggable").options,j=d.makeArray(d(k.stack)).sort(function(e,f){return(parseInt(d(e).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(!j.length){return}var h=parseInt(j[0].style.zIndex)||0;d(j).each(function(b){this.style.zIndex=h+b}),this[0].style.zIndex=h+j.length}}),d.ui.plugin.add("draggable","zIndex",{start:function(a,j){var h=d(j.helper),f=d(this).data("draggable").options;h.css("zIndex")&&(f._zIndex=h.css("zIndex")),h.css("zIndex",f.zIndex)},stop:function(a,f){var e=d(this).data("draggable").options;e._zIndex&&d(f.helper).css("zIndex",e._zIndex)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0,this.isout=1,this.accept=d.isFunction(e)?e:function(b){return b.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[],d.ui.ddmanager.droppables[a.scope].push(this),a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var a=d.ui.ddmanager.droppables[this.options.scope];for(var e=0;e<a.length;e++){a[e]==this&&a.splice(e,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(a,e){a=="accept"&&(this.accept=d.isFunction(e)?e:function(b){return b.is(e)}),d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=d.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=d.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(e)))},_out:function(a){var e=d.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(e)))},_drop:function(a,j){var h=j||d.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return !1}var f=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=d.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==h.options.scope&&e.accept.call(e.element[0],h.currentItem||h.element)&&d.ui.intersect(h,d.extend(e,{offset:e.element.offset()}),e.options.tolerance)){return f=!0,!1}}),f?!1:this.accept.call(this.element[0],h.currentItem||h.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(h)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),d.extend(d.ui.droppable,{version:"1.8.21"}),d.ui.intersect=function(C,B,A){if(!B.offset){return !1}var z=(C.positionAbs||C.position.absolute).left,y=z+C.helperProportions.width,x=(C.positionAbs||C.position.absolute).top,w=x+C.helperProportions.height,v=B.offset.left,u=v+B.proportions.width,t=B.offset.top,s=t+B.proportions.height;switch(A){case"fit":return v<=z&&y<=u&&t<=x&&w<=s;case"intersect":return v<z+C.helperProportions.width/2&&y-C.helperProportions.width/2<u&&t<x+C.helperProportions.height/2&&w-C.helperProportions.height/2<s;case"pointer":var r=(C.positionAbs||C.position.absolute).left+(C.clickOffset||C.offset.click).left,q=(C.positionAbs||C.position.absolute).top+(C.clickOffset||C.offset.click).top,a=d.ui.isOver(q,r,t,v,B.proportions.height,B.proportions.width);return a;case"touch":return(x>=t&&x<=s||w>=t&&w<=s||x<t&&w>s)&&(z>=v&&z<=u||y>=v&&y<=u||z<v&&y>u);default:return !1}},d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,o){var n=d.ui.ddmanager.droppables[a.options.scope]||[],m=o?o.type:null,l=(a.currentItem||a.element).find(":data(droppable)").andSelf();g:for(var k=0;k<n.length;k++){if(n[k].options.disabled||a&&!n[k].accept.call(n[k].element[0],a.currentItem||a.element)){continue}for(var j=0;j<l.length;j++){if(l[j]==n[k].element[0]){n[k].proportions.height=0;continue g}}n[k].visible=n[k].element.css("display")!="none";if(!n[k].visible){continue}m=="mousedown"&&n[k]._activate.call(n[k],o),n[k].offset=n[k].element.offset(),n[k].proportions={width:n[k].element[0].offsetWidth,height:n[k].element[0].offsetHeight}}},drop:function(a,f){var e=!1;return d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance)&&(e=this._drop.call(this,f)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,f))}),e},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,e),d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var k=d.ui.intersect(a,this,this.options.tolerance),j=!k&&this.isover==1?"isout":k&&this.isover==0?"isover":null;if(!j){return}var h;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(h=d.data(b[0],"droppable"),h.greedyChild=j=="isover"?1:0)}h&&j=="isover"&&(h.isover=0,h.isout=1,h._out.call(h,e)),this[j]=1,this[j=="isout"?"isover":"isout"]=0,this[j=="isover"?"_over":"_out"].call(this,e),h&&j=="isout"&&(h.isout=0,h.isover=1,h._over.call(h,e))})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable"),a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var a=this,q=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!q.aspectRatio,aspectRatio:q.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:q.helper||q.ghost||q.animate?q.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=q.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var o=this.handles.split(",");this.handles={};for(var n=0;n<o.length;n++){var m=f.trim(o[n]),l="ui-resizable-"+m,k=f('<div class="ui-resizable-handle '+l+'"></div>');k.css({zIndex:q.zIndex}),"se"==m&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[m]=".ui-resizable-"+m,this.element.append(k)}}this._renderAxis=function(r){r=r||this.element;for(var v in this.handles){this.handles[v].constructor==String&&(this.handles[v]=f(this.handles[v],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var u=f(this.handles[v],this.element),t=0;t=/sw|ne|nw|se|n|s/.test(v)?u.outerHeight():u.outerWidth();var s=["padding",/ne|nw|n/.test(v)?"Top":/se|sw|s/.test(v)?"Bottom":/^e$/.test(v)?"Right":"Left"].join("");r.css(s,t),this._proportionallyResize()}if(!f(this.handles[v]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!a.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=b&&b[1]?b[1]:"se"}}),q.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(q.disabled){return}f(this).removeClass("ui-resizable-autohide"),a._handles.show()},function(){if(q.disabled){return}a.resizing||(f(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(c){f(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var d=this.element;d.after(this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var l=!1;for(var k in this.handles){f(this.handles[k])[0]==a.target&&(l=!0)}return !this.options.disabled&&l},_mouseStart:function(a){var o=this.options,n=this.element.position(),m=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(m.is(".ui-draggable")||/absolute/.test(m.css("position")))&&m.css({position:"absolute",top:n.top,left:n.left}),this._renderProxy();var l=j(this.helper.css("left")),k=j(this.helper.css("top"));o.containment&&(l+=f(o.containment).scrollLeft()||0,k+=f(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:k},this.size=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalSize=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalPosition={left:l,top:k},this.sizeDiff={width:m.outerWidth()-m.width(),height:m.outerHeight()-m.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var c=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",c=="auto"?this.axis+"-resize":c),m.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(A){var z=this.helper,y=this.options,x={},w=this,v=this.originalMousePosition,u=this.axis,t=A.pageX-v.left||0,s=A.pageY-v.top||0,r=this._change[u];if(!r){return !1}var q=r.apply(this,[A,t,s]),o=f.browser.msie&&f.browser.version<7,a=this.sizeDiff;this._updateVirtualBoundaries(A.shiftKey);if(this._aspectRatio||A.shiftKey){q=this._updateRatio(q,A)}return q=this._respectSize(q,A),this._propagate("resize",A),z.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(q),this._trigger("resize",A,this.ui()),!1},_mouseStop:function(u){this.resizing=!1;var t=this.options,s=this;if(this._helper){var r=this._proportionallyResizeElements,q=r.length&&/textarea/i.test(r[0].nodeName),o=q&&f.ui.hasScroll(r[0],"left")?0:s.sizeDiff.height,n=q?0:s.sizeDiff.width,m={width:s.helper.width()-n,height:s.helper.height()-o},l=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null,a=parseInt(s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;t.animate||this.element.css(f.extend(m,{top:a,left:l})),s.helper.height(s.size.height),s.helper.width(s.size.width),this._helper&&!t.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",u),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(k){var d=this.options,q,o,n,m,l;l={minWidth:h(d.minWidth)?d.minWidth:0,maxWidth:h(d.maxWidth)?d.maxWidth:Infinity,minHeight:h(d.minHeight)?d.minHeight:0,maxHeight:h(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||k){q=l.minHeight*this.aspectRatio,n=l.minWidth/this.aspectRatio,o=l.maxHeight*this.aspectRatio,m=l.maxWidth/this.aspectRatio,q>l.minWidth&&(l.minWidth=q),n>l.minHeight&&(l.minHeight=n),o<l.maxWidth&&(l.maxWidth=o),m<l.maxHeight&&(l.maxHeight=m)}this._vBoundaries=l},_updateCache:function(d){var c=this.options;this.offset=this.helper.offset(),h(d.left)&&(this.position.left=d.left),h(d.top)&&(this.position.top=d.top),h(d.height)&&(this.size.height=d.height),h(d.width)&&(this.size.width=d.width)},_updateRatio:function(k,d){var o=this.options,n=this.position,m=this.size,l=this.axis;return h(k.height)?k.width=k.height*this.aspectRatio:h(k.width)&&(k.height=k.width/this.aspectRatio),l=="sw"&&(k.left=n.left+(m.width-k.width),k.top=null),l=="nw"&&(k.top=n.top+(m.height-k.height),k.left=n.left+(m.width-k.width)),k},_respectSize:function(D,C){var B=this.helper,A=this._vBoundaries,z=this._aspectRatio||C.shiftKey,y=this.axis,x=h(D.width)&&A.maxWidth&&A.maxWidth<D.width,w=h(D.height)&&A.maxHeight&&A.maxHeight<D.height,v=h(D.width)&&A.minWidth&&A.minWidth>D.width,u=h(D.height)&&A.minHeight&&A.minHeight>D.height;v&&(D.width=A.minWidth),u&&(D.height=A.minHeight),x&&(D.width=A.maxWidth),w&&(D.height=A.maxHeight);var t=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,r=/sw|nw|w/.test(y),q=/nw|ne|n/.test(y);v&&r&&(D.left=t-A.minWidth),x&&r&&(D.left=t-A.maxWidth),u&&q&&(D.top=s-A.minHeight),w&&q&&(D.top=s-A.maxHeight);var d=!D.width&&!D.height;return d&&!D.left&&D.top?D.top=null:d&&!D.top&&D.left&&(D.left=null),D},_proportionallyResize:function(){var a=this.options;if(!this._proportionallyResizeElements.length){return}var o=this.helper||this.element;for(var n=0;n<this._proportionallyResizeElements.length;n++){var m=this._proportionallyResizeElements[n];if(!this.borderDif){var l=[m.css("borderTopWidth"),m.css("borderRightWidth"),m.css("borderBottomWidth"),m.css("borderLeftWidth")],k=[m.css("paddingTop"),m.css("paddingRight"),m.css("paddingBottom"),m.css("paddingLeft")];this.borderDif=f.map(l,function(r,q){var t=parseInt(r,10)||0,s=parseInt(k[q],10)||0;return t+s})}if(!f.browser.msie||!f(o).is(":hidden")&&!f(o).parents(":hidden").length){m.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var a=this.element,n=this.options;this.elementOffset=a.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var m=f.browser.msie&&f.browser.version<7,l=m?1:0,k=m?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+k,height:this.element.outerHeight()+k,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(k,d,l){return{width:this.originalSize.width+d}},w:function(l,k,q){var o=this.options,n=this.originalSize,m=this.originalPosition;return{left:m.left+k,width:n.width-k}},n:function(l,k,q){var o=this.options,n=this.originalSize,m=this.originalPosition;return{top:m.top+q,height:n.height-q}},s:function(k,d,l){return{height:this.originalSize.height+l}},se:function(a,l,k){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,l,k]))},sw:function(a,l,k){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,l,k]))},ne:function(a,l,k){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,l,k]))},nw:function(a,l,k){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,l,k]))}},_propagate:function(a,d){f.ui.plugin.call(this,a,[d,this.ui()]),a!="resize"&&this._trigger(a,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(a,n){var m=f(this).data("resizable"),l=m.options,k=function(c){f(c).each(function(){var d=f(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};typeof l.alsoResize=="object"&&!l.alsoResize.parentNode?l.alsoResize.length?(l.alsoResize=l.alsoResize[0],k(l.alsoResize)):f.each(l.alsoResize,function(b){k(b)}):k(l.alsoResize)},resize:function(a,r){var q=f(this).data("resizable"),o=q.options,n=q.originalSize,m=q.originalPosition,l={height:q.size.height-n.height||0,width:q.size.width-n.width||0,top:q.position.top-m.top||0,left:q.position.left-m.left||0},k=function(c,s){f(c).each(function(){var d=f(this),v=f(this).data("resizable-alsoresize"),u={},t=s&&s.length?s:d.parents(r.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(t,function(x,w){var y=(v[w]||0)+(l[w]||0);y&&y>=0&&(u[w]=y||null)}),d.css(u)})};typeof o.alsoResize=="object"&&!o.alsoResize.nodeType?f.each(o.alsoResize,function(d,c){k(d,c)}):k(o.alsoResize)},stop:function(a,d){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(w,v){var u=f(this).data("resizable"),t=u.options,s=u._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),q=r&&f.ui.hasScroll(s[0],"left")?0:u.sizeDiff.height,o=r?0:u.sizeDiff.width,n={width:u.size.width-o,height:u.size.height-q},m=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,a=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null;u.element.animate(f.extend(n,a&&m?{top:a,left:m}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var b={width:parseInt(u.element.css("width"),10),height:parseInt(u.element.css("height"),10),top:parseInt(u.element.css("top"),10),left:parseInt(u.element.css("left"),10)};s&&s.length&&f(s[0]).css({width:b.width,height:b.height}),u._updateCache(b),u._propagate("resize",w)}})}}),f.ui.plugin.add("resizable","containment",{start:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z.element,w=y.containment,v=w instanceof f?w.get(0):/parent/.test(w)?x.parent().get(0):w;if(!v){return}z.containerElement=f(v);if(/document/.test(w)||w==document){z.containerOffset={left:0,top:0},z.containerPosition={left:0,top:0},z.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var u=f(v),t=[];f(["Top","Right","Left","Bottom"]).each(function(k,d){t[k]=j(u.css("padding"+d))}),z.containerOffset=u.offset(),z.containerPosition=u.position(),z.containerSize={height:u.innerHeight()-t[3],width:u.innerWidth()-t[1]};var s=z.containerOffset,r=z.containerSize.height,q=z.containerSize.width,c=f.ui.hasScroll(v,"left")?v.scrollWidth:q,a=f.ui.hasScroll(v)?v.scrollHeight:r;z.parentData={element:v,left:s.left,top:s.top,width:c,height:a}}},resize:function(D,C){var B=f(this).data("resizable"),A=B.options,z=B.containerSize,y=B.containerOffset,x=B.size,w=B.position,v=B._aspectRatio||D.shiftKey,u={top:0,left:0},t=B.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(u=y),w.left<(B._helper?y.left:0)&&(B.size.width=B.size.width+(B._helper?B.position.left-y.left:B.position.left-u.left),v&&(B.size.height=B.size.width/B.aspectRatio),B.position.left=A.helper?y.left:0),w.top<(B._helper?y.top:0)&&(B.size.height=B.size.height+(B._helper?B.position.top-y.top:B.position.top),v&&(B.size.width=B.size.height*B.aspectRatio),B.position.top=B._helper?y.top:0),B.offset.left=B.parentData.left+B.position.left,B.offset.top=B.parentData.top+B.position.top;var s=Math.abs((B._helper?B.offset.left-u.left:B.offset.left-u.left)+B.sizeDiff.width),r=Math.abs((B._helper?B.offset.top-u.top:B.offset.top-y.top)+B.sizeDiff.height),q=B.containerElement.get(0)==B.element.parent().get(0),a=/relative|absolute/.test(B.containerElement.css("position"));q&&a&&(s-=B.parentData.left),s+B.size.width>=B.parentData.width&&(B.size.width=B.parentData.width-s,v&&(B.size.height=B.size.width/B.aspectRatio)),r+B.size.height>=B.parentData.height&&(B.size.height=B.parentData.height-r,v&&(B.size.width=B.size.height*B.aspectRatio))},stop:function(y,x){var w=f(this).data("resizable"),v=w.options,u=w.position,t=w.containerOffset,s=w.containerPosition,r=w.containerElement,q=f(w.helper),o=q.offset(),n=q.outerWidth()-w.sizeDiff.width,a=q.outerHeight()-w.sizeDiff.height;w._helper&&!v.animate&&/relative/.test(r.css("position"))&&f(this).css({left:o.left-s.left-t.left,width:n,height:a}),w._helper&&!v.animate&&/static/.test(r.css("position"))&&f(this).css({left:o.left-s.left-t.left,width:n,height:a})}}),f.ui.plugin.add("resizable","ghost",{start:function(a,n){var m=f(this).data("resizable"),l=m.options,k=m.size;m.ghost=m.originalElement.clone(),m.ghost.css({opacity:0.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof l.ghost=="string"?l.ghost:""),m.ghost.appendTo(m.helper)},resize:function(a,m){var l=f(this).data("resizable"),k=l.options;l.ghost&&l.ghost.css({position:"relative",height:l.size.height,width:l.size.width})},stop:function(a,m){var l=f(this).data("resizable"),k=l.options;l.ghost&&l.helper&&l.helper.get(0).removeChild(l.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(w,v){var u=f(this).data("resizable"),t=u.options,s=u.size,r=u.originalSize,q=u.originalPosition,o=u.axis,n=t._aspectRatio||w.shiftKey;t.grid=typeof t.grid=="number"?[t.grid,t.grid]:t.grid;var m=Math.round((s.width-r.width)/(t.grid[0]||1))*(t.grid[0]||1),a=Math.round((s.height-r.height)/(t.grid[1]||1))*(t.grid[1]||1);/^(se|s|e)$/.test(o)?(u.size.width=r.width+m,u.size.height=r.height+a):/^(ne)$/.test(o)?(u.size.width=r.width+m,u.size.height=r.height+a,u.position.top=q.top-a):/^(sw)$/.test(o)?(u.size.width=r.width+m,u.size.height=r.height+a,u.position.left=q.left-m):(u.size.width=r.width+m,u.size.height=r.height+a,u.position.top=q.top-a,u.position.left=q.left-m)}});var j=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_setOption:function(a,e){a==="disabled"?(this.options[a]=e,this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,o){var n=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(a);var m=null,l=this,k=d(a.target).parents().each(function(){if(d.data(this,n.widgetName+"-item")==l){return m=d(this),!1}});d.data(a.target,n.widgetName+"-item")==l&&(m=d(a.target));if(!m){return !1}if(this.options.handle&&!o){var j=!1;d(this.options.handle,m).find("*").andSelf().each(function(){this==a.target&&(j=!0)});if(!j){return !1}}return this.currentItem=m,this._removeCurrentsFromItems(),!0},_mouseStart:function(a,m,l){var k=this.options,j=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(a),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),k.containment&&this._setContainment(),k.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",k.cursor)),k.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",k.opacity)),k.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",k.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",a,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!l){for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",a,j._uiHash(this))}}return d.ui.ddmanager&&(d.ui.ddmanager.current=this),d.ui.ddmanager&&!k.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),!0},_mouseDrag:function(a){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var o=this.options,n=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+o.scrollSpeed:a.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+o.scrollSpeed:a.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(a.pageY-d(document).scrollTop()<o.scrollSensitivity?n=d(document).scrollTop(d(document).scrollTop()-o.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<o.scrollSensitivity&&(n=d(document).scrollTop(d(document).scrollTop()+o.scrollSpeed)),a.pageX-d(document).scrollLeft()<o.scrollSensitivity?n=d(document).scrollLeft(d(document).scrollLeft()-o.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<o.scrollSensitivity&&(n=d(document).scrollLeft(d(document).scrollLeft()+o.scrollSpeed))),n!==!1&&d.ui.ddmanager&&!o.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var m=this.items.length-1;m>=0;m--){var l=this.items[m],k=l.item[0],j=this._intersectsWithPointer(l);if(!j){continue}if(k!=this.currentItem[0]&&this.placeholder[j==1?"next":"prev"]()[0]!=k&&!d.ui.contains(this.placeholder[0],k)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],k):!0)){this.direction=j==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(l)){this._rearrange(a,l)}else{break}this._trigger("change",a,this._uiHash());break}}return this._contactContainers(a),d.ui.ddmanager&&d.ui.ddmanager.drag(this,a),this._trigger("sort",a,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,j){if(!a){return}d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var h=this,f=h.placeholder.offset();h.reverting=!0,d(this.helper).animate({left:f.left-this.offset.parent.left-h.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-h.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){h._clear(a)})}else{this._clear(a,j)}return !1},cancel:function(){var a=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,a._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,a._uiHash(this)),this.containers[e].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(a){var f=this._getItemsAsjQuery(a&&a.connected),e=[];return a=a||{},d(f).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&e.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))}),!e.length&&a.key&&e.push(a.key+"="),e.join("&")},toArray:function(a){var f=this._getItemsAsjQuery(a&&a.connected),e=[];return a=a||{},f.each(function(){e.push(d(a.item||this).attr(a.attribute||"id")||"")}),e},_intersectsWith:function(y){var x=this.positionAbs.left,w=x+this.helperProportions.width,v=this.positionAbs.top,u=v+this.helperProportions.height,t=y.left,s=t+y.width,r=y.top,q=r+y.height,o=this.offset.click.top,n=this.offset.click.left,m=v+o>r&&v+o<q&&x+n>t&&x+n<s;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>y[this.floating?"width":"height"]?m:t<x+this.helperProportions.width/2&&w-this.helperProportions.width/2<s&&r<v+this.helperProportions.height/2&&u-this.helperProportions.height/2<q},_intersectsWithPointer:function(a){var m=this.options.axis==="x"||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),l=this.options.axis==="y"||d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),k=m&&l,j=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return k?this.floating?h&&h=="right"||j=="down"?2:1:j&&(j=="down"?2:1):!1},_intersectsWithSides:function(a){var l=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),k=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),j=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?h=="right"&&k||h=="left"&&!k:j&&(j=="down"&&l||j=="up"&&!l)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(s){var r=this,q=[],o=[],n=this._connectWith();if(n&&s){for(var m=n.length-1;m>=0;m--){var l=d(n[m]);for(var k=l.length-1;k>=0;k--){var a=d.data(l[k],this.widgetName);a&&a!=this&&!a.options.disabled&&o.push([d.isFunction(a.options.items)?a.options.items.call(a.element):d(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}o.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var m=o.length-1;m>=0;m--){o[m][0].each(function(){q.push(this)})}return d(q)},_removeCurrentsFromItems:function(){var f=this.currentItem.find(":data("+this.widgetName+"-item)");for(var e=0;e<this.items.length;e++){for(var h=0;h<f.length;h++){f[h]==this.items[e].item[0]&&this.items.splice(e,1)}}},_refreshItems:function(A){this.items=[],this.containers=[this];var z=this.items,y=this,x=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],A,{item:this.currentItem}):d(this.options.items,this.element),this]],w=this._connectWith();if(w&&this.ready){for(var v=w.length-1;v>=0;v--){var u=d(w[v]);for(var t=u.length-1;t>=0;t--){var s=d.data(u[t],this.widgetName);s&&s!=this&&!s.options.disabled&&(x.push([d.isFunction(s.options.items)?s.options.items.call(s.element[0],A,{item:this.currentItem}):d(s.options.items,s.element),s]),this.containers.push(s))}}}for(var v=x.length-1;v>=0;v--){var r=x[v][1],q=x[v][0];for(var t=0,o=q.length;t<o;t++){var a=d(q[t]);a.data(this.widgetName+"-item",r),z.push({item:a,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var l=this.items.length-1;l>=0;l--){var k=this.items[l];if(k.instance!=this.currentContainer&&this.currentContainer&&k.item[0]!=this.currentItem[0]){continue}var j=this.options.toleranceElement?d(this.options.toleranceElement,k.item):k.item;a||(k.width=j.outerWidth(),k.height=j.outerHeight());var h=j.offset();k.left=h.left,k.top=h.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var l=this.containers.length-1;l>=0;l--){var h=this.containers[l].element.offset();this.containers[l].containerCache.left=h.left,this.containers[l].containerCache.top=h.top,this.containers[l].containerCache.width=this.containers[l].element.outerWidth(),this.containers[l].containerCache.height=this.containers[l].element.outerHeight()}}return this},_createPlaceholder:function(a){var j=a||this,h=j.options;if(!h.placeholder||h.placeholder.constructor==String){var f=h.placeholder;h.placeholder={element:function(){var e=d(document.createElement(j.currentItem[0].nodeName)).addClass(f||j.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return f||(e.style.visibility="hidden"),e},update:function(k,e){if(f&&!h.forcePlaceholderSize){return}e.height()||e.height(j.currentItem.innerHeight()-parseInt(j.currentItem.css("paddingTop")||0,10)-parseInt(j.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(j.currentItem.innerWidth()-parseInt(j.currentItem.css("paddingLeft")||0,10)-parseInt(j.currentItem.css("paddingRight")||0,10))}}}j.placeholder=d(h.placeholder.element.call(j.element,j.currentItem)),j.currentItem.after(j.placeholder),h.placeholder.update(j,j.placeholder)},_contactContainers:function(s){var r=null,q=null;for(var o=this.containers.length-1;o>=0;o--){if(d.ui.contains(this.currentItem[0],this.containers[o].element[0])){continue}if(this._intersectsWith(this.containers[o].containerCache)){if(r&&d.ui.contains(this.containers[o].element[0],r.element[0])){continue}r=this.containers[o],q=o}else{this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",s,this._uiHash(this)),this.containers[o].containerCache.over=0)}}if(!r){return}if(this.containers.length===1){this.containers[q]._trigger("over",s,this._uiHash(this)),this.containers[q].containerCache.over=1}else{if(this.currentContainer!=this.containers[q]){var n=10000,m=null,l=this.positionAbs[this.containers[q].floating?"left":"top"];for(var k=this.items.length-1;k>=0;k--){if(!d.ui.contains(this.containers[q].element[0],this.items[k].item[0])){continue}var a=this.containers[q].floating?this.items[k].item.offset().left:this.items[k].item.offset().top;Math.abs(a-l)<n&&(n=Math.abs(a-l),m=this.items[k],this.direction=a-l>0?"down":"up")}if(!m&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[q],m?this._rearrange(s,m,null,!0):this._rearrange(s,null,this.containers[q].element,!0),this._trigger("change",s,this._uiHash()),this.containers[q]._trigger("change",s,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[q]._trigger("over",s,this._uiHash(this)),this.containers[q].containerCache.over=1}}},_createHelper:function(a){var f=this.options,e=d.isFunction(f.helper)?d(f.helper.apply(this.element[0],[a,this.currentItem])):f.helper=="clone"?this.currentItem.clone():this.currentItem;return e.parents("body").length||d(f.appendTo!="parent"?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0]),e[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(e[0].style.width==""||f.forceHelperSize)&&e.width(this.currentItem.width()),(e[0].style.height==""||f.forceHelperSize)&&e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),d.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)){var j=d(a.containment)[0],h=d(a.containment).offset(),f=d(j).css("overflow")!="hidden";this.containment=[h.left+(parseInt(d(j).css("borderLeftWidth"),10)||0)+(parseInt(d(j).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(d(j).css("borderTopWidth"),10)||0)+(parseInt(d(j).css("paddingTop"),10)||0)-this.margins.top,h.left+(f?Math.max(j.scrollWidth,j.offsetWidth):j.offsetWidth)-(parseInt(d(j).css("borderLeftWidth"),10)||0)-(parseInt(d(j).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(f?Math.max(j.scrollHeight,j.offsetHeight):j.offsetHeight)-(parseInt(d(j).css("borderTopWidth"),10)||0)-(parseInt(d(j).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,m){m||(m=this.position);var l=a=="absolute"?1:-1,k=this.options,j=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(j[0].tagName);return{top:m.top+this.offset.relative.top*l+this.offset.parent.top*l-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:j.scrollTop())*l),left:m.left+this.offset.relative.left*l+this.offset.parent.left*l-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:j.scrollLeft())*l)}},_generatePosition:function(a){var q=this.options,o=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(o[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var m=a.pageX,l=a.pageY;if(this.originalPosition){this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top));if(q.grid){var k=this.originalPageY+Math.round((l-this.originalPageY)/q.grid[1])*q.grid[1];l=this.containment?k-this.offset.click.top<this.containment[1]||k-this.offset.click.top>this.containment[3]?k-this.offset.click.top<this.containment[1]?k+q.grid[1]:k-q.grid[1]:k:k;var j=this.originalPageX+Math.round((m-this.originalPageX)/q.grid[0])*q.grid[0];m=this.containment?j-this.offset.click.left<this.containment[0]||j-this.offset.click.left>this.containment[2]?j-this.offset.click.left<this.containment[0]?j+q.grid[0]:j-q.grid[0]:j:j}}return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:o.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:o.scrollLeft())}},_rearrange:function(j,h,n,m){n?n[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var l=this,k=this.counter;window.setTimeout(function(){k==l.counter&&l.refreshPositions(!m)},0)},_clear:function(a,l){this.reverting=!1;var k=[],j=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var h in this._storedCSS){if(this._storedCSS[h]=="auto"||this._storedCSS[h]=="static"){this._storedCSS[h]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!l&&k.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!l&&k.push(function(b){this._trigger("update",b,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){l||k.push(function(b){this._trigger("remove",b,this._uiHash())});for(var h=this.containers.length-1;h>=0;h--){d.ui.contains(this.containers[h].element[0],this.currentItem[0])&&!l&&(k.push(function(b){return function(e){b._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[h])),k.push(function(b){return function(e){b._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[h])))}}for(var h=this.containers.length-1;h>=0;h--){l||k.push(function(b){return function(e){b._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over&&(k.push(function(b){return function(e){b._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over=0)}this._storedCursor&&d("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!l){this._trigger("beforeStop",a,this._uiHash());for(var h=0;h<k.length;h++){k[h].call(this,a)}this._trigger("stop",a,this._uiHash())}return !1}l||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!l){for(var h=0;h<k.length;h++){k[h].call(this,a)}this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(a){var e=a||this;return{helper:e.helper,placeholder:e.placeholder||d([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:a?a.element:null}}}),d.extend(d.ui.sortable,{version:"1.8.21"})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,j=this.element[0].ownerDocument,h;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(k){if(a.options.disabled||a.element.propAttr("readOnly")){return}h=!1;var b=e.ui.keyCode;switch(k.keyCode){case b.PAGE_UP:a._move("previousPage",k);break;case b.PAGE_DOWN:a._move("nextPage",k);break;case b.UP:a._keyEvent("previous",k);break;case b.DOWN:a._keyEvent("next",k);break;case b.ENTER:case b.NUMPAD_ENTER:a.menu.active&&(h=!0,k.preventDefault());case b.TAB:if(!a.menu.active){return}a.menu.select(k);break;case b.ESCAPE:a.element.val(a.term),a.close(k);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=a.element.val()&&(a.selectedItem=null,a.search(null,k))},a.options.delay)}}).bind("keypress.autocomplete",function(b){h&&(h=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(a.options.disabled){return}a.selectedItem=null,a.previous=a.element.val()}).bind("blur.autocomplete",function(b){if(a.options.disabled){return}clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b),a._change(b)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",j)[0]).mousedown(function(k){var b=a.menu.element[0];e(k.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(l){l.target!==a.element[0]&&l.target!==b&&!e.ui.contains(b,l.target)&&a.close()})},1),setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,l){var k=l.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:k})&&/^key/.test(b.originalEvent.type)&&a.element.val(k.value)},selected:function(b,l){var k=l.item.data("item.autocomplete"),c=a.previous;a.element[0]!==j.activeElement&&(a.element.focus(),a.previous=c,setTimeout(function(){a.previous=c,a.selectedItem=k},1)),!1!==a._trigger("select",b,{item:k})&&a.element.val(k.value),a.term=a.element.val(),a.close(b),a.selectedItem=k},blur:function(b,k){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")},e(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(a,h){e.Widget.prototype._setOption.apply(this,arguments),a==="source"&&this._initSource(),a==="appendTo"&&this.menu.element.appendTo(e(h||"body",this.element[0].ownerDocument)[0]),a==="disabled"&&h&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,j,h;e.isArray(this.options.source)?(j=this.options.source,this.source=function(c,k){k(e.ui.autocomplete.filter(j,c.term))}):typeof this.options.source=="string"?(h=this.options.source,this.source=function(k,b){a.xhr&&a.xhr.abort(),a.xhr=e.ajax({url:h,data:k,dataType:"json",success:function(l,c){b(l)},error:function(){b([])}})}):this.source=this.options.source},search:function(h,c){h=h!=null?h:this.element.val(),this.term=this.element.val();if(h.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search",c)===!1){return}return this._search(h)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var h=this,c=++f;return function(a){c===f&&h.__response(a),h.pending--,h.pending||h.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:e.map(a,function(c){return typeof c=="string"?{label:c,value:c}:e.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(a){var h=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(h,a),this.menu.deactivate(),this.menu.refresh(),h.show(),this._resizeMenu(),h.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,j){var h=this;e.each(j,function(b,k){h._renderItem(a,k)})},_renderItem:function(a,h){return e("<li></li>").data("item.autocomplete",h).append(e("<a></a>").text(h.label)).appendTo(a)},_move:function(h,c){if(!this.menu.element.is(":visible")){this.search(null,c);return}if(this.menu.first()&&/^previous/.test(h)||this.menu.last()&&/^next/.test(h)){this.element.val(this.term),this.menu.deactivate();return}this.menu[h](c)},widget:function(){return this.menu.element},_keyEvent:function(h,c){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(h,c),c.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,j){var h=new RegExp(e.ui.autocomplete.escapeRegex(j),"i");return e.grep(a,function(b){return h.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(d){if(!b(d.target).closest(".ui-menu-item a").length){return}d.preventDefault(),a.select(d)}),this.refresh()},refresh:function(){var a=this,d=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");d.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(e){a.activate(e,b(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var l=f.offset().top-this.element.offset().top,k=this.element.scrollTop(),j=this.element.height();l<0?this.element.scrollTop(k+l):l>=j&&this.element.scrollTop(k+l-j+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,j){if(!this.active){this.activate(j,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(j,h):this.activate(j,this.element.children(e))},nextPage:function(a){if(this.hasScroll()){if(!this.active||this.last()){this.activate(a,this.element.children(".ui-menu-item:first"));return}var j=this.active.offset().top,h=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-j-h+b(this).height();return c<10&&c>-10});f.length||(f=this.element.children(".ui-menu-item:last")),this.activate(a,f)}else{this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(a){if(this.hasScroll()){if(!this.active||this.first()){this.activate(a,this.element.children(".ui-menu-item:last"));return}var j=this.active.offset().top,h=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-j+h-b(this).height();return c<10&&c>-10});f.length||(f=this.element.children(".ui-menu-item:first")),this.activate(a,f)}else{this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})}(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",m={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},l={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},k=j.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};j.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var d=j(this).css(a).offset().top;d<0&&j(this).css("top",a.top-d)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var w=this,v=w.options,u=v.title||"&#160;",t=j.ui.dialog.getTitleId(w.element),s=(w.uiDialog=j("<div></div>")).appendTo(document.body).hide().addClass(n+v.dialogClass).css({zIndex:v.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){v.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(w.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":t}).mousedown(function(b){w.moveToTop(!1,b)}),r=w.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),q=(w.uiDialogTitlebar=j("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(s),o=j('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")}).click(function(b){return w.close(b),!1}).appendTo(q),c=(w.uiDialogTitlebarCloseText=j("<span></span>")).addClass("ui-icon ui-icon-closethick").text(v.closeText).appendTo(o),a=j("<span></span>").addClass("ui-dialog-title").attr("id",t).html(u).prependTo(q);j.isFunction(v.beforeclose)&&!j.isFunction(v.beforeClose)&&(v.beforeClose=v.beforeclose),q.find("*").add(q).disableSelection(),v.draggable&&j.fn.draggable&&w._makeDraggable(),v.resizable&&j.fn.resizable&&w._makeResizable(),w._createButtons(v.buttons),w._isOpen=!1,j.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(a){var q=this,o,f;if(!1===q._trigger("beforeClose",a)){return}return q.overlay&&q.overlay.destroy(),q.uiDialog.unbind("keypress.ui-dialog"),q._isOpen=!1,q.options.hide?q.uiDialog.hide(q.options.hide,function(){q._trigger("close",a)}):(q.uiDialog.hide(),q._trigger("close",a)),j.ui.dialog.overlay.resize(),q.options.modal&&(o=0,j(".ui-dialog").each(function(){this!==q.uiDialog[0]&&(f=j(this).css("z-index"),isNaN(f)||(o=Math.max(o,f)))}),j.ui.dialog.maxZ=o),q},isOpen:function(){return this._isOpen},moveToTop:function(a,s){var r=this,q=r.options,o;return q.modal&&!a||!q.stack&&!q.modal?r._trigger("focus",s):(q.zIndex>j.ui.dialog.maxZ&&(j.ui.dialog.maxZ=q.zIndex),r.overlay&&(j.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",j.ui.dialog.overlay.maxZ=j.ui.dialog.maxZ)),o={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},j.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",j.ui.dialog.maxZ),r.element.attr(o),r._trigger("focus",s),r)},open:function(){if(this._isOpen){return}var a=this,f=a.options,e=a.uiDialog;return a.overlay=f.modal?new j.ui.dialog.overlay(a):null,a._size(),a._position(f.position),e.show(f.show),a.moveToTop(!0),f.modal&&e.bind("keydown.ui-dialog",function(o){if(o.keyCode!==j.ui.keyCode.TAB){return}var s=j(":tabbable",this),r=s.filter(":first"),q=s.filter(":last");if(o.target===q[0]&&!o.shiftKey){return r.focus(1),!1}if(o.target===r[0]&&o.shiftKey){return q.focus(1),!1}}),j(a.element.find(":tabbable").get().concat(e.find(".ui-dialog-buttonpane :tabbable").get().concat(e.get()))).eq(0).focus(),a._isOpen=!0,a._trigger("open"),a},_createButtons:function(a){var r=this,q=!1,o=j("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=j("<div></div>").addClass("ui-dialog-buttonset").appendTo(o);r.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof a=="object"&&a!==null&&j.each(a,function(){return !(q=!0)}),q&&(j.each(a,function(c,t){t=j.isFunction(t)?{click:t,text:c}:t;var s=j('<button type="button"></button>').click(function(){t.click.apply(r.element[0],arguments)}).appendTo(f);j.each(t,function(e,d){if(e==="click"){return}e in k?s[e](d):s.attr(e,d)}),j.fn.button&&s.button()}),o.appendTo(r.uiDialog))},_makeDraggable:function(){function o(b){return{position:b.position,offset:b.offset}}var a=this,s=a.options,r=j(document),q;a.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,b){q=s.height==="auto"?"auto":j(this).height(),j(this).height(j(this).height()).addClass("ui-dialog-dragging"),a._trigger("dragStart",c,o(b))},drag:function(b,d){a._trigger("drag",b,o(d))},stop:function(c,b){s.position=[b.position.left-r.scrollLeft(),b.position.top-r.scrollTop()],j(this).removeClass("ui-dialog-dragging").height(q),a._trigger("dragStop",c,o(b)),j.ui.dialog.overlay.resize()}})},_makeResizable:function(s){function a(c){return{originalPosition:c.originalPosition,originalSize:c.originalSize,position:c.position,size:c.size}}s=s===h?this.options.resizable:s;var r=this,q=r.options,o=r.uiDialog.css("position"),b=typeof s=="string"?s:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:q.maxWidth,maxHeight:q.maxHeight,minWidth:q.minWidth,minHeight:r._minHeight(),handles:b,start:function(d,e){j(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",d,a(e))},resize:function(d,c){r._trigger("resize",d,a(c))},stop:function(d,e){j(this).removeClass("ui-dialog-resizing"),q.height=j(this).height(),q.width=j(this).width(),r._trigger("resizeStop",d,a(e)),j.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(a){var q=[],o=[0,0],f;if(a){if(typeof a=="string"||typeof a=="object"&&"0" in a){q=a.split?a.split(" "):[a[0],a[1]],q.length===1&&(q[1]=q[0]),j.each(["left","top"],function(d,c){+q[d]===q[d]&&(o[d]=q[d],q[d]=c)}),a={my:q.join(" "),at:q.join(" "),offset:o.join(" ")}}a=j.extend({},j.ui.dialog.prototype.options.position,a)}else{a=j.ui.dialog.prototype.options.position}f=this.uiDialog.is(":visible"),f||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(j.extend({of:window},a)),f||this.uiDialog.hide()},_setOptions:function(a){var o=this,e={},d=!1;j.each(a,function(f,c){o._setOption(f,c),f in m&&(d=!0),f in l&&(e[f]=c)}),d&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,s){var r=this,q=r.uiDialog;switch(a){case"beforeclose":a="beforeClose";break;case"buttons":r._createButtons(s);break;case"closeText":r.uiDialogTitlebarCloseText.text(""+s);break;case"dialogClass":q.removeClass(r.options.dialogClass).addClass(n+s);break;case"disabled":s?q.addClass("ui-dialog-disabled"):q.removeClass("ui-dialog-disabled");break;case"draggable":var o=q.is(":data(draggable)");o&&!s&&q.draggable("destroy"),!o&&s&&r._makeDraggable();break;case"position":r._position(s);break;case"resizable":var c=q.is(":data(resizable)");c&&!s&&q.resizable("destroy"),c&&typeof s=="string"&&q.resizable("option","handles",s),!c&&s!==!1&&r._makeResizable(s);break;case"title":j(".ui-dialog-title",r.uiDialogTitlebar).html(""+(s||"&#160;"))}j.Widget.prototype._setOption.apply(r,arguments)},_size:function(){var a=this.options,s,r,q=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),a.minWidth>a.width&&(a.width=a.minWidth),s=this.uiDialog.css({height:"auto",width:a.width}).height(),r=Math.max(0,a.minHeight-s);if(a.height==="auto"){if(j.support.minHeight){this.element.css({minHeight:r,height:"auto"})}else{this.uiDialog.show();var o=this.element.css("height","auto").height();q||this.uiDialog.hide(),this.element.height(Math.max(o,r))}}else{this.element.height(Math.max(a.height-s,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),j.extend(j.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(d){var c=d.attr("id");return c||(this.uuid+=1,c=this.uuid),"ui-dialog-title-"+c},overlay:function(a){this.$el=j.ui.dialog.overlay.create(a)}}),j.extend(j.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:j.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(a){this.instances.length===0&&(setTimeout(function(){j.ui.dialog.overlay.instances.length&&j(document).bind(j.ui.dialog.overlay.events,function(c){if(j(c.target).zIndex()<j.ui.dialog.overlay.maxZ){return !1}})},1),j(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(a.close(b),b.preventDefault())}),j(window).bind("resize.dialog-overlay",j.ui.dialog.overlay.resize));var d=(this.oldInstances.pop()||j("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return j.fn.bgiframe&&d.bgiframe(),this.instances.push(d),d},destroy:function(a){var f=j.inArray(a,this.instances);f!=-1&&this.oldInstances.push(this.instances.splice(f,1)[0]),this.instances.length===0&&j([document,window]).unbind(".dialog-overlay"),a.remove();var e=0;j.each(this.instances,function(){e=Math.max(e,this.css("z-index"))}),this.maxZ=e},height:function(){var a,d;return j.browser.msie&&j.browser.version<7?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<d?j(window).height()+"px":a+"px"):j(document).height()+"px"},width:function(){var a,d;return j.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<d?j(window).width()+"px":a+"px"):j(document).width()+"px"},resize:function(){var a=j([]);j.each(j.ui.dialog.overlay.instances,function(){a=a.add(this)}),a.css({width:0,height:0}).css({width:j.ui.dialog.overlay.width(),height:j.ui.dialog.overlay.height()})}}),j.extend(j.ui.dialog.overlay.prototype,{destroy:function(){j.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(y,x){function w(a){var d;return a&&a.constructor==Array&&a.length==3?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:(d=/rgba\(0, 0, 0, 0\)/.exec(a))?u.transparent:u[y.trim(a).toLowerCase()]}function v(a,f){var c;do{c=y.curCSS(a,f);if(c!=""&&c!="transparent"||y.nodeName(a,"body")){break}f="backgroundColor"}while(a=a.parentNode);return w(c)}function r(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},l,k;if(h&&h.length&&h[0]&&h[h[0]]){var j=h.length;while(j--){l=h[j],typeof h[l]=="string"&&(k=l.replace(/\-(\w)/g,function(d,c){return c.toUpperCase()}),f[k]=h[l])}}else{for(l in h){typeof h[l]=="string"&&(f[l]=h[l])}}return f}function q(a){var f,e;for(f in a){e=a[f],(e==null||y.isFunction(e)||f in s||/scrollbar/.test(f)||!/color/i.test(f)&&isNaN(parseFloat(e)))&&delete a[f]}return a}function o(f,e){var j={_:0},h;for(h in e){f[h]!=e[h]&&(j[h]=e[h])}return j}function n(a,j,h,f){typeof a=="object"&&(f=j,h=null,j=a,a=j.effect),y.isFunction(j)&&(f=j,h=null,j={});if(typeof j=="number"||y.fx.speeds[j]){f=h,h=j,j={}}return y.isFunction(h)&&(f=h,h=null),j=j||{},h=h||j.duration,h=y.fx.off?0:typeof h=="number"?h:h in y.fx.speeds?y.fx.speeds[h]:y.fx.speeds._default,f=f||j.complete,[a,j,h,f]}function m(a){return !a||typeof a=="number"||y.fx.speeds[a]?!0:typeof a=="string"&&!y.effects[a]?!0:!1}y.effects={},y.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(a,c){y.fx.step[c]=function(b){b.colorInit||(b.start=v(b.elem,c),b.end=w(b.end),b.colorInit=!0),b.elem.style[c]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var u={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},t=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};y.effects.animateClass=function(a,j,h,f){return y.isFunction(h)&&(f=h,h=null),this.queue(function(){var e=y(this),d=e.attr("style")||" ",c=q(r.call(this)),b,z=e.attr("class")||"";y.each(t,function(k,l){a[l]&&e[l+"Class"](a[l])}),b=q(r.call(this)),e.attr("class",z),e.animate(o(c,b),{queue:!1,duration:j,easing:h,complete:function(){y.each(t,function(k,l){a[l]&&e[l+"Class"](a[l])}),typeof e.attr("style")=="object"?(e.attr("style").cssText="",e.attr("style").cssText=d):e.attr("style",d),f&&f.apply(this,arguments),y.dequeue(this)}})})},y.fn.extend({_addClass:y.fn.addClass,addClass:function(a,j,h,f){return j?y.effects.animateClass.apply(this,[{add:a},j,h,f]):this._addClass(a)},_removeClass:y.fn.removeClass,removeClass:function(a,j,h,f){return j?y.effects.animateClass.apply(this,[{remove:a},j,h,f]):this._removeClass(a)},_toggleClass:y.fn.toggleClass,toggleClass:function(k,j,h,b,a){return typeof j=="boolean"||j===x?h?y.effects.animateClass.apply(this,[j?{add:k}:{remove:k},h,b,a]):this._toggleClass(k,j):y.effects.animateClass.apply(this,[{toggle:k},j,h,b])},switchClass:function(a,l,k,j,h){return y.effects.animateClass.apply(this,[{add:l,remove:a},k,j,h])}}),y.extend(y.effects,{version:"1.8.21",save:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.data("ec.storage."+d[f],e[0].style[d[f]])}},restore:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.css(d[f],e.data("ec.storage."+d[f]))}},setMode:function(d,c){return c=="toggle"&&(c=d.is(":hidden")?"show":"hide"),c},getBaseline:function(f,e){var j,h;switch(f[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:j}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper")){return a.parent()}var l={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},k=y("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),j=document.activeElement;try{j.id}catch(h){j=document.body}return a.wrap(k),(a[0]===j||y.contains(a[0],j))&&y(j).focus(),k=a.parent(),a.css("position")=="static"?(k.css({position:"relative"}),a.css({position:"relative"})):(y.extend(l,{position:a.css("position"),zIndex:a.css("z-index")}),y.each(["top","left","bottom","right"],function(b,c){l[c]=a.css(c),isNaN(parseInt(l[c],10))&&(l[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),k.css(l).show()},removeWrapper:function(a){var f,e=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(f=a.parent().replaceWith(a),(a[0]===e||y.contains(a[0],e))&&y(e).focus(),f):a},setTransition:function(a,j,h,f){return f=f||{},y.each(j,function(b,e){var d=a.cssUnit(e);d[0]>0&&(f[e]=d[0]*h+d[1])}),f}}),y.fn.extend({effect:function(a,C,B,A){var z=n.apply(this,arguments),l={options:z[1],duration:z[2],callback:z[3]},k=l.options.mode,j=y.effects[a];return y.fx.off||!j?k?this[k](l.duration,l.callback):this.each(function(){l.callback&&l.callback.call(this)}):j.call(this,l)},_show:y.fn.show,show:function(d){if(m(d)){return this._show.apply(this,arguments)}var c=n.apply(this,arguments);return c[1].mode="show",this.effect.apply(this,c)},_hide:y.fn.hide,hide:function(d){if(m(d)){return this._hide.apply(this,arguments)}var c=n.apply(this,arguments);return c[1].mode="hide",this.effect.apply(this,c)},__toggle:y.fn.toggle,toggle:function(a){if(m(a)||typeof a=="boolean"||y.isFunction(a)){return this.__toggle.apply(this,arguments)}var d=n.apply(this,arguments);return d[1].mode="toggle",this.effect.apply(this,d)},cssUnit:function(a){var f=this.css(a),e=[];return y.each(["em","px","%","pt"],function(d,c){f.indexOf(c)>0&&(e=[parseFloat(f),c])}),e}}),y.easing.jswing=y.easing.swing,y.extend(y.easing,{def:"easeOutQuad",swing:function(a,l,k,j,h){return y.easing[y.easing.def](a,l,k,j,h)},easeInQuad:function(h,f,l,k,j){return k*(f/=j)*f+l},easeOutQuad:function(h,f,l,k,j){return -k*(f/=j)*(f-2)+l},easeInOutQuad:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f+l:-k/2*(--f*(f-2)-1)+l},easeInCubic:function(h,f,l,k,j){return k*(f/=j)*f*f+l},easeOutCubic:function(h,f,l,k,j){return k*((f=f/j-1)*f*f+1)+l},easeInOutCubic:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f*f+l:k/2*((f-=2)*f*f+2)+l},easeInQuart:function(h,f,l,k,j){return k*(f/=j)*f*f*f+l},easeOutQuart:function(h,f,l,k,j){return -k*((f=f/j-1)*f*f*f-1)+l},easeInOutQuart:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f*f*f+l:-k/2*((f-=2)*f*f*f-2)+l},easeInQuint:function(h,f,l,k,j){return k*(f/=j)*f*f*f*f+l},easeOutQuint:function(h,f,l,k,j){return k*((f=f/j-1)*f*f*f*f+1)+l},easeInOutQuint:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f*f*f*f+l:k/2*((f-=2)*f*f*f*f+2)+l},easeInSine:function(h,f,l,k,j){return -k*Math.cos(f/j*(Math.PI/2))+k+l},easeOutSine:function(h,f,l,k,j){return k*Math.sin(f/j*(Math.PI/2))+l},easeInOutSine:function(h,f,l,k,j){return -k/2*(Math.cos(Math.PI*f/j)-1)+l},easeInExpo:function(h,f,l,k,j){return f==0?l:k*Math.pow(2,10*(f/j-1))+l},easeOutExpo:function(h,f,l,k,j){return f==j?l+k:k*(-Math.pow(2,-10*f/j)+1)+l},easeInOutExpo:function(h,f,l,k,j){return f==0?l:f==j?l+k:(f/=j/2)<1?k/2*Math.pow(2,10*(f-1))+l:k/2*(-Math.pow(2,-10*--f)+2)+l},easeInCirc:function(h,f,l,k,j){return -k*(Math.sqrt(1-(f/=j)*f)-1)+l},easeOutCirc:function(h,f,l,k,j){return k*Math.sqrt(1-(f=f/j-1)*f)+l},easeInOutCirc:function(h,f,l,k,j){return(f/=j/2)<1?-k/2*(Math.sqrt(1-f*f)-1)+l:k/2*(Math.sqrt(1-(f-=2)*f)+1)+l},easeInElastic:function(k,j,D,C,B){var A=1.70158,z=0,l=C;if(j==0){return D}if((j/=B)==1){return D+C}z||(z=B*0.3);if(l<Math.abs(C)){l=C;var A=z/4}else{var A=z/(2*Math.PI)*Math.asin(C/l)}return -(l*Math.pow(2,10*(j-=1))*Math.sin((j*B-A)*2*Math.PI/z))+D},easeOutElastic:function(k,j,D,C,B){var A=1.70158,z=0,l=C;if(j==0){return D}if((j/=B)==1){return D+C}z||(z=B*0.3);if(l<Math.abs(C)){l=C;var A=z/4}else{var A=z/(2*Math.PI)*Math.asin(C/l)}return l*Math.pow(2,-10*j)*Math.sin((j*B-A)*2*Math.PI/z)+C+D},easeInOutElastic:function(k,j,D,C,B){var A=1.70158,z=0,l=C;if(j==0){return D}if((j/=B/2)==2){return D+C}z||(z=B*0.3*1.5);if(l<Math.abs(C)){l=C;var A=z/4}else{var A=z/(2*Math.PI)*Math.asin(C/l)}return j<1?-0.5*l*Math.pow(2,10*(j-=1))*Math.sin((j*B-A)*2*Math.PI/z)+D:l*Math.pow(2,-10*(j-=1))*Math.sin((j*B-A)*2*Math.PI/z)*0.5+C+D},easeInBack:function(b,z,l,k,j,h){return h==x&&(h=1.70158),k*(z/=j)*z*((h+1)*z-h)+l},easeOutBack:function(b,z,l,k,j,h){return h==x&&(h=1.70158),k*((z=z/j-1)*z*((h+1)*z+h)+1)+l},easeInOutBack:function(b,z,l,k,j,h){return h==x&&(h=1.70158),(z/=j/2)<1?k/2*z*z*(((h*=1.525)+1)*z-h)+l:k/2*((z-=2)*z*(((h*=1.525)+1)*z+h)+2)+l},easeInBounce:function(a,l,k,j,h){return j-y.easing.easeOutBounce(a,h-l,0,j,h)+k},easeOutBounce:function(h,f,l,k,j){return(f/=j)<1/2.75?k*7.5625*f*f+l:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+0.75)+l:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+0.9375)+l:k*(7.5625*(f-=2.625/2.75)*f+0.984375)+l},easeInOutBounce:function(a,l,k,j,h){return l<h/2?y.easing.easeInBounce(a,l*2,0,j,h)*0.5+k:y.easing.easeOutBounce(a,l*2-h,0,j,h)*0.5+j*0.5+k}})}(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.blind=function(a){return this.queue(function(){var r=d(this),q=["position","top","bottom","left","right"],o=d.effects.setMode(r,a.options.mode||"hide"),n=a.options.direction||"vertical";d.effects.save(r,q),r.show();var m=d.effects.createWrapper(r).css({overflow:"hidden"}),l=n=="vertical"?"height":"width",k=n=="vertical"?m.height():m.width();o=="show"&&m.css(l,0);var b={};b[l]=o=="show"?k:0,m.animate(b,a.duration,a.options.easing,function(){o=="hide"&&r.hide(),d.effects.restore(r,q),d.effects.removeWrapper(r),a.callback&&a.callback.apply(r[0],arguments),r.dequeue()})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.bounce=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"effect"),x=a.options.direction||"up",w=a.options.distance||20,v=a.options.times||5,u=a.duration||250;/show|hide/.test(y)&&z.push("opacity"),d.effects.save(A,z),A.show(),d.effects.createWrapper(A);var t=x=="up"||x=="down"?"top":"left",s=x=="up"||x=="left"?"pos":"neg",w=a.options.distance||(t=="top"?A.outerHeight({margin:!0})/3:A.outerWidth({margin:!0})/3);y=="show"&&A.css("opacity",0).css(t,s=="pos"?-w:w),y=="hide"&&(w=w/(v*2)),y!="hide"&&v--;if(y=="show"){var r={opacity:1};r[t]=(s=="pos"?"+=":"-=")+w,A.animate(r,u/2,a.options.easing),w=w/2,v--}for(var q=0;q<v;q++){var o={},b={};o[t]=(s=="pos"?"-=":"+=")+w,b[t]=(s=="pos"?"+=":"-=")+w,A.animate(o,u/2,a.options.easing).animate(b,u/2,a.options.easing),w=y=="hide"?w*2:w/2}if(y=="hide"){var r={opacity:0};r[t]=(s=="pos"?"-=":"+=")+w,A.animate(r,u/2,a.options.easing,function(){A.hide(),d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)})}else{var o={},b={};o[t]=(s=="pos"?"-=":"+=")+w,b[t]=(s=="pos"?"+=":"-=")+w,A.animate(o,u/2,a.options.easing).animate(b,u/2,a.options.easing,function(){d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)})}A.queue("fx",function(){A.dequeue()}),A.dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.clip=function(a){return this.queue(function(){var t=d(this),s=["position","top","bottom","left","right","height","width"],r=d.effects.setMode(t,a.options.mode||"hide"),q=a.options.direction||"vertical";d.effects.save(t,s),t.show();var o=d.effects.createWrapper(t).css({overflow:"hidden"}),n=t[0].tagName=="IMG"?o:t,m={size:q=="vertical"?"height":"width",position:q=="vertical"?"top":"left"},l=q=="vertical"?n.height():n.width();r=="show"&&(n.css(m.size,0),n.css(m.position,l/2));var b={};b[m.size]=r=="show"?l:0,b[m.position]=r=="show"?0:l/2,n.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){r=="hide"&&t.hide(),d.effects.restore(t,s),d.effects.removeWrapper(t),a.callback&&a.callback.apply(t[0],arguments),t.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.drop=function(a){return this.queue(function(){var r=d(this),q=["position","top","bottom","left","right","opacity"],o=d.effects.setMode(r,a.options.mode||"hide"),n=a.options.direction||"left";d.effects.save(r,q),r.show(),d.effects.createWrapper(r);var m=n=="up"||n=="down"?"top":"left",l=n=="up"||n=="left"?"pos":"neg",k=a.options.distance||(m=="top"?r.outerHeight({margin:!0})/2:r.outerWidth({margin:!0})/2);o=="show"&&r.css("opacity",0).css(m,l=="pos"?-k:k);var b={opacity:o=="show"?1:0};b[m]=(o=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k,r.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){o=="hide"&&r.hide(),d.effects.restore(r,q),d.effects.removeWrapper(r),a.callback&&a.callback.apply(this,arguments),r.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.explode=function(a){return this.queue(function(){var r=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,q=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?d(this).is(":visible")?"hide":"show":a.options.mode;var o=d(this).show().css("visibility","hidden"),n=o.offset();n.top-=parseInt(o.css("marginTop"),10)||0,n.left-=parseInt(o.css("marginLeft"),10)||0;var m=o.outerWidth(!0),l=o.outerHeight(!0);for(var k=0;k<r;k++){for(var b=0;b<q;b++){o.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(m/q),top:-k*(l/r)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m/q,height:l/r,left:n.left+b*(m/q)+(a.options.mode=="show"?(b-Math.floor(q/2))*(m/q):0),top:n.top+k*(l/r)+(a.options.mode=="show"?(k-Math.floor(r/2))*(l/r):0),opacity:a.options.mode=="show"?0:1}).animate({left:n.left+b*(m/q)+(a.options.mode=="show"?0:(b-Math.floor(q/2))*(m/q)),top:n.top+k*(l/r)+(a.options.mode=="show"?0:(k-Math.floor(r/2))*(l/r)),opacity:a.options.mode=="show"?1:0},a.duration||500)}}setTimeout(function(){a.options.mode=="show"?o.css({visibility:"visible"}):o.css({visibility:"visible"}).hide(),a.callback&&a.callback.apply(o[0]),o.dequeue(),d("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fade=function(a){return this.queue(function(){var e=d(this),b=d.effects.setMode(e,a.options.mode||"hide");e.animate({opacity:b},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments),e.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fold=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"hide"),x=a.options.size||15,w=!!a.options.horizFirst,v=a.duration?a.duration/2:d.fx.speeds._default/2;d.effects.save(A,z),A.show();var u=d.effects.createWrapper(A).css({overflow:"hidden"}),t=y=="show"!=w,s=t?["width","height"]:["height","width"],r=t?[u.width(),u.height()]:[u.height(),u.width()],q=/([0-9]+)%/.exec(x);q&&(x=parseInt(q[1],10)/100*r[y=="hide"?0:1]),y=="show"&&u.css(w?{height:0,width:x}:{height:x,width:0});var o={},b={};o[s[0]]=y=="show"?r[0]:x,b[s[1]]=y=="show"?r[1]:0,u.animate(o,v,a.options.easing).animate(b,v,a.options.easing,function(){y=="hide"&&A.hide(),d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(A[0],arguments),A.dequeue()})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.highlight=function(a){return this.queue(function(){var k=d(this),j=["backgroundImage","backgroundColor","opacity"],h=d.effects.setMode(k,a.options.mode||"show"),b={backgroundColor:k.css("backgroundColor")};h=="hide"&&(b.opacity=0),d.effects.save(k,j),k.show().css({backgroundImage:"none",backgroundColor:a.options.color||"#ffff99"}).animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){h=="hide"&&k.hide(),d.effects.restore(k,j),h=="show"&&!d.support.opacity&&this.style.removeAttribute("filter"),a.callback&&a.callback.apply(this,arguments),k.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.pulsate=function(a){return this.queue(function(){var o=d(this),n=d.effects.setMode(o,a.options.mode||"show"),m=(a.options.times||5)*2-1,l=a.duration?a.duration/2:d.fx.speeds._default/2,k=o.is(":visible"),j=0;k||(o.css("opacity",0).show(),j=1),(n=="hide"&&k||n=="show"&&!k)&&m--;for(var b=0;b<m;b++){o.animate({opacity:j},l,a.options.easing),j=(j+1)%2}o.animate({opacity:j},l,a.options.easing,function(){j==0&&o.hide(),a.callback&&a.callback.apply(this,arguments)}),o.queue("fx",function(){o.dequeue()}).dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.puff=function(a){return this.queue(function(){var l=d(this),k=d.effects.setMode(l,a.options.mode||"hide"),j=parseInt(a.options.percent,10)||150,h=j/100,b={height:l.height(),width:l.width()};d.extend(a.options,{fade:!0,mode:k,percent:k=="hide"?j:100,from:k=="hide"?b:{height:b.height*h,width:b.width*h}}),l.effect("scale",a.options,a.duration,a.callback),l.dequeue()})},d.effects.scale=function(a){return this.queue(function(){var r=d(this),q=d.extend(!0,{},a.options),o=d.effects.setMode(r,a.options.mode||"effect"),n=parseInt(a.options.percent,10)||(parseInt(a.options.percent,10)==0?0:o=="hide"?0:100),m=a.options.direction||"both",l=a.options.origin;o!="effect"&&(q.origin=l||["middle","center"],q.restore=!0);var k={height:r.height(),width:r.width()};r.from=a.options.from||(o=="show"?{height:0,width:0}:k);var b={y:m!="horizontal"?n/100:1,x:m!="vertical"?n/100:1};r.to={height:k.height*b.y,width:k.width*b.x},a.options.fade&&(o=="show"&&(r.from.opacity=0,r.to.opacity=1),o=="hide"&&(r.from.opacity=1,r.to.opacity=0)),q.from=r.from,q.to=r.to,q.mode=o,r.effect("size",q,a.duration,a.callback),r.dequeue()})},d.effects.size=function(a){return this.queue(function(){var C=d(this),B=["position","top","bottom","left","right","width","height","overflow","opacity"],A=["position","top","bottom","left","right","overflow","opacity"],z=["width","height","overflow"],y=["fontSize"],x=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],w=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],v=d.effects.setMode(C,a.options.mode||"effect"),u=a.options.restore||!1,t=a.options.scale||"both",s=a.options.origin,r={height:C.height(),width:C.width()};C.from=a.options.from||r,C.to=a.options.to||r;if(s){var o=d.effects.getBaseline(s,r);C.from.top=(r.height-C.from.height)*o.y,C.from.left=(r.width-C.from.width)*o.x,C.to.top=(r.height-C.to.height)*o.y,C.to.left=(r.width-C.to.width)*o.x}var b={from:{y:C.from.height/r.height,x:C.from.width/r.width},to:{y:C.to.height/r.height,x:C.to.width/r.width}};if(t=="box"||t=="both"){b.from.y!=b.to.y&&(B=B.concat(x),C.from=d.effects.setTransition(C,x,b.from.y,C.from),C.to=d.effects.setTransition(C,x,b.to.y,C.to)),b.from.x!=b.to.x&&(B=B.concat(w),C.from=d.effects.setTransition(C,w,b.from.x,C.from),C.to=d.effects.setTransition(C,w,b.to.x,C.to))}(t=="content"||t=="both")&&b.from.y!=b.to.y&&(B=B.concat(y),C.from=d.effects.setTransition(C,y,b.from.y,C.from),C.to=d.effects.setTransition(C,y,b.to.y,C.to)),d.effects.save(C,u?B:A),C.show(),d.effects.createWrapper(C),C.css("overflow","hidden").css(C.from);if(t=="content"||t=="both"){x=x.concat(["marginTop","marginBottom"]).concat(y),w=w.concat(["marginLeft","marginRight"]),z=B.concat(x).concat(w),C.find("*[width]").each(function(){var f=d(this);u&&d.effects.save(f,z);var e={height:f.height(),width:f.width()};f.from={height:e.height*b.from.y,width:e.width*b.from.x},f.to={height:e.height*b.to.y,width:e.width*b.to.x},b.from.y!=b.to.y&&(f.from=d.effects.setTransition(f,x,b.from.y,f.from),f.to=d.effects.setTransition(f,x,b.to.y,f.to)),b.from.x!=b.to.x&&(f.from=d.effects.setTransition(f,w,b.from.x,f.from),f.to=d.effects.setTransition(f,w,b.to.x,f.to)),f.css(f.from),f.animate(f.to,a.duration,a.options.easing,function(){u&&d.effects.restore(f,z)})})}C.animate(C.to,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){C.to.opacity===0&&C.css("opacity",C.from.opacity),v=="hide"&&C.hide(),d.effects.restore(C,u?B:A),d.effects.removeWrapper(C),a.callback&&a.callback.apply(this,arguments),C.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.shake=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"effect"),x=a.options.direction||"left",w=a.options.distance||20,v=a.options.times||3,u=a.duration||a.options.duration||140;d.effects.save(A,z),A.show(),d.effects.createWrapper(A);var t=x=="up"||x=="down"?"top":"left",s=x=="up"||x=="left"?"pos":"neg",r={},q={},o={};r[t]=(s=="pos"?"-=":"+=")+w,q[t]=(s=="pos"?"+=":"-=")+w*2,o[t]=(s=="pos"?"-=":"+=")+w*2,A.animate(r,u,a.options.easing);for(var b=1;b<v;b++){A.animate(q,u,a.options.easing).animate(o,u,a.options.easing)}A.animate(q,u,a.options.easing).animate(r,u/2,a.options.easing,function(){d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)}),A.queue("fx",function(){A.dequeue()}),A.dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.slide=function(a){return this.queue(function(){var r=d(this),q=["position","top","bottom","left","right"],o=d.effects.setMode(r,a.options.mode||"show"),n=a.options.direction||"left";d.effects.save(r,q),r.show(),d.effects.createWrapper(r).css({overflow:"hidden"});var m=n=="up"||n=="down"?"top":"left",l=n=="up"||n=="left"?"pos":"neg",k=a.options.distance||(m=="top"?r.outerHeight({margin:!0}):r.outerWidth({margin:!0}));o=="show"&&r.css(m,l=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[m]=(o=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k,r.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){o=="hide"&&r.hide(),d.effects.restore(r,q),d.effects.removeWrapper(r),a.callback&&a.callback.apply(this,arguments),r.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.transfer=function(a){return this.queue(function(){var n=d(this),m=d(a.options.to),l=m.offset(),k={top:l.top,left:l.left,height:m.innerHeight(),width:m.innerWidth()},j=n.offset(),b=d('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:j.top,left:j.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(k,a.duration,a.options.easing,function(){b.remove(),a.callback&&a.callback.apply(n[0],arguments),n.dequeue()})})}})(jQuery);
/*! 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(d){d.fn.drag=function(c,f,l){var j=typeof c=="string"?c:"",h=d.isFunction(c)?c:d.isFunction(f)?f:null;if(j.indexOf("drag")!==0){j="drag"+j}l=(c==h?f:l)||{};return h?this.bind(j,l,h):this.trigger(j)};var a=d.event,b=a.special,e=b.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(c){var f=d.data(this,e.datakey),h=c.data||{};f.related+=1;if(!f.live&&c.selector){f.live=true;a.add(this,"draginit."+e.livekey,e.delegate)}d.each(e.defaults,function(j){if(h[j]!==undefined){f[j]=h[j]}})},remove:function(){d.data(this,e.datakey).related-=1},setup:function(){if(!d.data(this,e.datakey)){var c=d.extend({related:0},e.defaults);d.data(this,e.datakey,c);a.add(this,"mousedown",e.init,c);this.attachEvent&&this.attachEvent("ondragstart",e.dontstart)}},teardown:function(){if(!d.data(this,e.datakey).related){d.removeData(this,e.datakey);a.remove(this,"mousedown",e.init);a.remove(this,"draginit",e.delegate);e.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",e.dontstart)}},init:function(c){var f=c.data,h;if(!(f.which>0&&c.which!=f.which)){if(!d(c.target).is(f.not)){if(!(f.handle&&!d(c.target).closest(f.handle,c.currentTarget).length)){f.propagates=1;f.interactions=[e.interaction(this,f)];f.target=c.target;f.pageX=c.pageX;f.pageY=c.pageY;f.dragging=null;h=e.hijack(c,"draginit",f);if(f.propagates){if((h=e.flatten(h))&&h.length){f.interactions=[];d.each(h,function(){f.interactions.push(e.interaction(this,f))})}f.propagates=f.interactions.length;f.drop!==false&&b.drop&&b.drop.handler(c,f);e.textselect(false);a.add(document,"mousemove mouseup",e.handler,f);return false}}}}},interaction:function(c,f){return{drag:c,callback:new e.callback,droppable:[],offset:d(c)[f.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(c){var f=c.data;switch(c.type){case !f.dragging&&"mousemove":if(Math.pow(c.pageX-f.pageX,2)+Math.pow(c.pageY-f.pageY,2)<Math.pow(f.distance,2)){break}c.target=f.target;e.hijack(c,"dragstart",f);if(f.propagates){f.dragging=true}case"mousemove":if(f.dragging){e.hijack(c,"drag",f);if(f.propagates){f.drop!==false&&b.drop&&b.drop.handler(c,f);break}c.type="mouseup"}case"mouseup":a.remove(document,"mousemove mouseup",e.handler);if(f.dragging){f.drop!==false&&b.drop&&b.drop.handler(c,f);e.hijack(c,"dragend",f)}e.textselect(true);if(f.click===false&&f.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);f.dragging=false}break}},delegate:function(c){var f=[],j,h=d.data(this,"events")||{};d.each(h.live||[],function(l,m){if(m.preType.indexOf("drag")===0){if(j=d(c.target).closest(m.selector,c.currentTarget)[0]){a.add(j,m.origType+"."+e.livekey,m.origHandler,m.data);d.inArray(j,f)<0&&f.push(j)}}});if(!f.length){return false}return d(f).bind("dragend."+e.livekey,function(){a.remove(this,"."+e.livekey)})},hijack:function(w,x,v,u,r){if(v){var s={event:w.originalEvent,type:w.type},f=x.indexOf("drop")?"drag":"drop",q,c=u||0,t,h;u=!isNaN(u)?u:v.interactions.length;w.type=x;w.originalEvent=null;v.results=[];do{if(t=v.interactions[c]){if(!(x!=="dragend"&&t.cancelled)){h=e.properties(w,v,t);t.results=[];d(r||t[f]||v.droppable).each(function(j,k){q=(h.target=k)?a.handle.call(k,w,h):null;if(q===false){if(f=="drag"){t.cancelled=true;v.propagates-=1}if(x=="drop"){t[f][j]=null}}else{if(x=="dropinit"){t.droppable.push(e.element(q)||k)}}if(x=="dragstart"){t.proxy=d(e.element(q)||t.drag)[0]}t.results.push(q);delete w.result;if(x!=="dropinit"){return q}});v.results[c]=e.flatten(t.results);if(x=="dropinit"){t.droppable=e.flatten(t.droppable)}x=="dragstart"&&!t.cancelled&&h.update()}}}while(++c<u);w.type=s.type;w.originalEvent=s.event;return e.flatten(v.results)}},properties:function(c,f,j){var h=j.callback;h.drag=j.drag;h.proxy=j.proxy||j.drag;h.startX=f.pageX;h.startY=f.pageY;h.deltaX=c.pageX-f.pageX;h.deltaY=c.pageY-f.pageY;h.originalX=j.offset.left;h.originalY=j.offset.top;h.offsetX=c.pageX-(f.pageX-h.originalX);h.offsetY=c.pageY-(f.pageY-h.originalY);h.drop=e.flatten((j.drop||[]).slice());h.available=e.flatten((j.droppable||[]).slice());return h},element:function(c){if(c&&(c.jquery||c.nodeType==1)){return c}},flatten:function(c){return d.map(c,function(f){return f&&f.jquery?d.makeArray(f):f&&f.length?e.flatten(f):f})},textselect:function(c){d(document)[c?"unbind":"bind"]("selectstart",e.dontstart).attr("unselectable",c?"off":"on").css("MozUserSelect",c?"":"none")},dontstart:function(){return false},callback:function(){}};e.callback.prototype={update:function(){b.drop&&this.available.length&&d.each(this.available,function(c){b.drop.locate(this,c)})}};b.draginit=b.dragstart=b.dragend=e})(jQuery);(function(x){var ad,E="2.1.0",ai=Math.round,ak,U={},T=(typeof module!=="undefined"&&module.exports),B=/^\/?Date\((\-?\d+)/i,ah=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,m=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,t=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,h=/\d\d?/,V=/\d{1,3}/,X=/\d{3}/,N=/\d{1,4}/,s=/[+\-]?\d{1,6}/,O=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,b=/Z|[\+\-]\d\d:?\d\d/i,y=/T/i,r=/[\+\-]?\d+(\.\d{1,3})?/,P=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,d="YYYY-MM-DDTHH:mm:ssZ",k=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],G=/([\+\-]|\d\d)/gi,o="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ae={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},w={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},n={},K="DDD w W M D d".split(" "),A="M D H h m s w W".split(" "),j={M:function(){return this.month()+1},MMM:function(ao){return this.lang().monthsShort(this,ao)},MMMM:function(ao){return this.lang().months(this,ao)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(ao){return this.lang().weekdaysMin(this,ao)},ddd:function(ao){return this.lang().weekdaysShort(this,ao)},dddd:function(ao){return this.lang().weekdays(this,ao)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return ag(this.year()%100,2)},YYYY:function(){return ag(this.year(),4)},YYYYY:function(){return ag(this.year(),5)},gg:function(){return ag(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return ag(this.weekYear(),5)},GG:function(){return ag(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return ag(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return ag(~~(this.milliseconds()/10),2)},SSS:function(){return ag(this.milliseconds(),3)},Z:function(){var ap=-this.zone(),ao="+";if(ap<0){ap=-ap;ao="-"}return ao+ag(~~(ap/60),2)+":"+ag(~~ap%60,2)},ZZ:function(){var ap=-this.zone(),ao="+";if(ap<0){ap=-ap;ao="-"}return ao+ag(~~(10*ap/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};function R(ap,ao){return function(aq){return ag(ap.call(this,aq),ao)}}function L(ao,ap){return function(aq){return this.lang().ordinal(ao.call(this,aq),ap)}}while(K.length){ak=K.pop();j[ak+"o"]=L(j[ak],ak)}while(A.length){ak=A.pop();j[ak+ak]=R(j[ak],2)}j.DDDD=R(j.DDD,3);function am(){}function z(ao){v(this,ao)}function an(ar){var au=ar.years||ar.year||ar.y||0,ap=ar.months||ar.month||ar.M||0,ao=ar.weeks||ar.week||ar.w||0,ax=ar.days||ar.day||ar.d||0,av=ar.hours||ar.hour||ar.h||0,at=ar.minutes||ar.minute||ar.m||0,aw=ar.seconds||ar.second||ar.s||0,aq=ar.milliseconds||ar.millisecond||ar.ms||0;this._input=ar;this._milliseconds=aq+aw*1000+at*60000+av*3600000;this._days=ax+ao*7;this._months=ap+au*12;this._data={};this._bubble()}function v(ap,ao){for(var aq in ao){if(ao.hasOwnProperty(aq)){ap[aq]=ao[aq]}}return ap}function ac(ao){if(ao<0){return Math.ceil(ao)}else{return Math.floor(ao)}}function ag(aq,ap){var ao=aq+"";while(ao.length<ap){ao="0"+ao}return ao}function Z(at,ar,aw,av){var aq=ar._milliseconds,ay=ar._days,ap=ar._months,au,ax,ao;if(aq){at._d.setTime(+at._d+aq*aw)}if(ay||ap){au=at.minute();ax=at.hour()}if(ay){at.date(at.date()+ay*aw)}if(ap){at.month(at.month()+ap*aw)}if(aq&&!av){ad.updateOffset(at)}if(ay||ap){at.minute(au);at.hour(ax)}}function H(ao){return Object.prototype.toString.call(ao)==="[object Array]"}function Y(at,ar){var ao=Math.min(at.length,ar.length),ap=Math.abs(at.length-ar.length),au=0,aq;for(aq=0;aq<ao;aq++){if(~~at[aq]!==~~ar[aq]){au++}}return au+ap}function I(ao){return ao?w[ao]||ao.toLowerCase().replace(/(.)s$/,"$1"):ao}am.prototype={set:function(ao){var aq,ap;for(ap in ao){aq=ao[ap];if(typeof aq==="function"){this[ap]=aq}else{this["_"+ap]=aq}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(ao){return this._months[ao.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(ao){return this._monthsShort[ao.month()]},monthsParse:function(ao){var ap,ar,aq;if(!this._monthsParse){this._monthsParse=[]}for(ap=0;ap<12;ap++){if(!this._monthsParse[ap]){ar=ad([2000,ap]);aq="^"+this.months(ar,"")+"|^"+this.monthsShort(ar,"");this._monthsParse[ap]=new RegExp(aq.replace(".",""),"i")}if(this._monthsParse[ap].test(ao)){return ap}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(ao){return this._weekdays[ao.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(ao){return this._weekdaysShort[ao.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(ao){return this._weekdaysMin[ao.day()]},weekdaysParse:function(ar){var ao,aq,ap;if(!this._weekdaysParse){this._weekdaysParse=[]}for(ao=0;ao<7;ao++){if(!this._weekdaysParse[ao]){aq=ad([2000,1]).day(ao);ap="^"+this.weekdays(aq,"")+"|^"+this.weekdaysShort(aq,"")+"|^"+this.weekdaysMin(aq,"");this._weekdaysParse[ao]=new RegExp(ap.replace(".",""),"i")}if(this._weekdaysParse[ao].test(ar)){return ao}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(ap){var ao=this._longDateFormat[ap];if(!ao&&this._longDateFormat[ap.toUpperCase()]){ao=this._longDateFormat[ap.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(aq){return aq.slice(1)});this._longDateFormat[ap]=ao}return ao},isPM:function(ao){return((ao+"").toLowerCase()[0]==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(ao,ap,aq){if(ao>11){return aq?"pm":"PM"}else{return aq?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(ap,aq){var ao=this._calendar[ap];return typeof ao==="function"?ao.apply(aq):ao},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(ar,aq,ap,at){var ao=this._relativeTime[ap];return(typeof ao==="function")?ao(ar,aq,ap,at):ao.replace(/%d/i,ar)},pastFuture:function(aq,ao){var ap=this._relativeTime[aq>0?"future":"past"];return typeof ap==="function"?ap(ao):ap.replace(/%s/i,ao)},ordinal:function(ao){return this._ordinal.replace("%d",ao)},_ordinal:"%d",preparse:function(ao){return ao},postformat:function(ao){return ao},week:function(ao){return W(ao,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};function D(ap,ao){ao.abbr=ap;if(!U[ap]){U[ap]=new am()}U[ap].set(ao);return U[ap]}function C(ao){if(!ao){return ad.fn._lang}if(!U[ao]&&T){try{require("./lang/"+ao)}catch(ap){return ad.fn._lang}}return U[ao]}function M(ao){if(ao.match(/\[.*\]/)){return ao.replace(/^\[|\]$/g,"")}return ao.replace(/\\/g,"")}function ab(aq){var ar=aq.match(m),ao,ap;for(ao=0,ap=ar.length;ao<ap;ao++){if(j[ar[ao]]){ar[ao]=j[ar[ao]]}else{ar[ao]=M(ar[ao])}}return function(au){var at="";for(ao=0;ao<ap;ao++){at+=ar[ao] instanceof Function?ar[ao].call(au,aq):ar[ao]}return at}}function S(ao,ar){var ap=5;function aq(at){return ao.lang().longDateFormat(at)||at}while(ap--&&t.test(ar)){ar=ar.replace(t,aq)}if(!n[ar]){n[ar]=ab(ar)}return n[ar](ao)}function f(ap,ao){switch(ap){case"DDDD":return X;case"YYYY":return N;case"YYYYY":return s;case"S":case"SS":case"SSS":case"DDD":return V;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return O;case"a":case"A":return C(ao._l)._meridiemParse;case"X":return r;case"Z":case"ZZ":return b;case"T":return y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return h;default:return new RegExp(ap.replace("\\",""))}}function u(ap){var ao=(b.exec(ap)||[])[0],ar=(ao+"").match(G)||["-",0,0],aq=+(ar[1]*60)+~~ar[2];return ar[0]==="+"?-aq:aq}function e(at,aq,ar){var ap,ao=ar._a;switch(at){case"M":case"MM":ao[1]=(aq==null)?0:~~aq-1;break;case"MMM":case"MMMM":ap=C(ar._l).monthsParse(aq);if(ap!=null){ao[1]=ap}else{ar._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(aq!=null){ao[2]=~~aq}break;case"YY":ao[0]=~~aq+(~~aq>68?1900:2000);break;case"YYYY":case"YYYYY":ao[0]=~~aq;break;case"a":case"A":ar._isPm=C(ar._l).isPM(aq);break;case"H":case"HH":case"h":case"hh":ao[3]=~~aq;break;case"m":case"mm":ao[4]=~~aq;break;case"s":case"ss":ao[5]=~~aq;break;case"S":case"SS":case"SSS":ao[6]=~~(("0."+aq)*1000);break;case"X":ar._d=new Date(parseFloat(aq)*1000);break;case"Z":case"ZZ":ar._useUTC=true;ar._tzm=u(aq);break}if(aq==null){ar._isValid=false}}function l(aq){var ar,ap,ao=[];if(aq._d){return}for(ar=0;ar<7;ar++){aq._a[ar]=ao[ar]=(aq._a[ar]==null)?(ar===2?1:0):aq._a[ar]}ao[3]+=~~((aq._tzm||0)/60);ao[4]+=~~((aq._tzm||0)%60);ap=new Date(0);if(aq._useUTC){ap.setUTCFullYear(ao[0],ao[1],ao[2]);ap.setUTCHours(ao[3],ao[4],ao[5],ao[6])}else{ap.setFullYear(ao[0],ao[1],ao[2]);ap.setHours(ao[3],ao[4],ao[5],ao[6])}aq._d=ap}function Q(ap){var at=ap._f.match(m),ao=ap._i,aq,ar;ap._a=[];for(aq=0;aq<at.length;aq++){ar=(f(at[aq],ap).exec(ao)||[])[0];if(ar){ao=ao.slice(ao.indexOf(ar)+ar.length)}if(j[at[aq]]){e(at[aq],ar,ap)}}if(ao){ap._il=ao}if(ap._isPm&&ap._a[3]<12){ap._a[3]+=12}if(ap._isPm===false&&ap._a[3]===12){ap._a[3]=0}l(ap)}function F(ap){var au,ao,ar,at=99,aq,av;for(aq=0;aq<ap._f.length;aq++){au=v({},ap);au._f=ap._f[aq];Q(au);ao=new z(au);av=Y(au._a,ao.toArray());if(ao._il){av+=ao._il.length}if(av<at){at=av;ar=ao}}v(ap,ar)}function af(aq){var ar,ap=aq._i,ao=P.exec(ap);if(ao){aq._f="YYYY-MM-DD"+(ao[2]||" ");for(ar=0;ar<4;ar++){if(k[ar][1].exec(ap)){aq._f+=k[ar][0];break}}if(b.exec(ap)){aq._f+=" Z"}Q(aq)}else{aq._d=new Date(ap)}}function al(aq){var ap=aq._i,ao=B.exec(ap);if(ap===x){aq._d=new Date()}else{if(ao){aq._d=new Date(+ao[1])}else{if(typeof ap==="string"){af(aq)}else{if(H(ap)){aq._a=ap.slice(0);l(aq)}else{aq._d=ap instanceof Date?new Date(+ap):new Date(ap)}}}}}function aa(ao,aq,ap,ar,at){return at.relativeTime(aq||1,!!ap,ao,ar)}function J(aq,ao,ap){var aw=ai(Math.abs(aq)/1000),ar=ai(aw/60),av=ai(ar/60),ax=ai(av/24),at=ai(ax/365),au=aw<45&&["s",aw]||ar===1&&["m"]||ar<45&&["mm",ar]||av===1&&["h"]||av<22&&["hh",av]||ax===1&&["d"]||ax<=25&&["dd",ax]||ax<=45&&["M"]||ax<345&&["MM",ai(ax/30)]||at===1&&["y"]||["yy",at];au[2]=ao;au[3]=aq>0;au[4]=ap;return aa.apply({},au)}function W(at,aq,au){var ap=au-aq,ao=au-at.day(),ar;if(ao>ap){ao-=7}if(ao<ap-7){ao+=7}ar=ad(at).add("d",ao);return{week:Math.ceil(ar.dayOfYear()/7),year:ar.year()}}function aj(ap){var ao=ap._i,aq=ap._f;if(ao===null||ao===""){return null}if(typeof ao==="string"){ap._i=ao=C().preparse(ao)}if(ad.isMoment(ao)){ap=v({},ao);ap._d=new Date(+ao._d)}else{if(aq){if(H(aq)){F(ap)}else{Q(ap)}}else{al(ap)}}return new z(ap)}ad=function(ao,ap,aq){return aj({_i:ao,_f:ap,_l:aq,_isUTC:false})};ad.utc=function(ao,ap,aq){return aj({_useUTC:true,_isUTC:true,_l:aq,_i:ao,_f:ap})};ad.unix=function(ao){return ad(ao*1000)};ad.duration=function(aq,av){var au=ad.isDuration(aq),at=(typeof aq==="number"),aw=(au?aq._input:(at?{}:aq)),ao=ah.exec(aq),ap,ar;if(at){if(av){aw[av]=aq}else{aw.milliseconds=aq}}else{if(ao){ap=(ao[1]==="-")?-1:1;aw={y:0,d:~~ao[2]*ap,h:~~ao[3]*ap,m:~~ao[4]*ap,s:~~ao[5]*ap,ms:~~ao[6]*ap}}}ar=new an(aw);if(au&&aq.hasOwnProperty("_lang")){ar._lang=aq._lang}return ar};ad.version=E;ad.defaultFormat=d;ad.updateOffset=function(){};ad.lang=function(ap,ao){if(!ap){return ad.fn._lang._abbr}if(ao){D(ap,ao)}else{if(!U[ap]){C(ap)}}ad.duration.fn._lang=ad.fn._lang=C(ap)};ad.langData=function(ao){if(ao&&ao._lang&&ao._lang._abbr){ao=ao._lang._abbr}return C(ao)};ad.isMoment=function(ao){return ao instanceof z};ad.isDuration=function(ao){return ao instanceof an};ad.fn=z.prototype={clone:function(){return ad(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return S(ad(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var ao=this;return[ao.year(),ao.month(),ao.date(),ao.hours(),ao.minutes(),ao.seconds(),ao.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!Y(this._a,(this._isUTC?ad.utc(this._a):ad(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(ap){var ao=S(this,ap||ad.defaultFormat);return this.lang().postformat(ao)},add:function(ao,aq){var ap;if(typeof ao==="string"){ap=ad.duration(+aq,ao)}else{ap=ad.duration(ao,aq)}Z(this,ap,1);return this},subtract:function(ao,aq){var ap;if(typeof ao==="string"){ap=ad.duration(+aq,ao)}else{ap=ad.duration(ao,aq)}Z(this,ap,-1);return this},diff:function(at,ar,ao){var au=this._isUTC?ad(at).zone(this._offset||0):ad(at).local(),ap=(this.zone()-au.zone())*60000,av,aq;ar=I(ar);if(ar==="year"||ar==="month"){av=(this.daysInMonth()+au.daysInMonth())*43200000;aq=((this.year()-au.year())*12)+(this.month()-au.month());aq+=((this-ad(this).startOf("month"))-(au-ad(au).startOf("month")))/av;aq-=((this.zone()-ad(this).startOf("month").zone())-(au.zone()-ad(au).startOf("month").zone()))*60000/av;if(ar==="year"){aq=aq/12}}else{av=(this-au);aq=ar==="second"?av/1000:ar==="minute"?av/60000:ar==="hour"?av/3600000:ar==="day"?(av-ap)/86400000:ar==="week"?(av-ap)/604800000:av}return ao?aq:ac(aq)},from:function(ap,ao){return ad.duration(this.diff(ap)).lang(this.lang()._abbr).humanize(!ao)},fromNow:function(ao){return this.from(ad(),ao)},calendar:function(){var ap=this.diff(ad().startOf("day"),"days",true),ao=ap<-6?"sameElse":ap<-1?"lastWeek":ap<0?"lastDay":ap<1?"sameDay":ap<2?"nextDay":ap<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(ao,this))},isLeapYear:function(){var ao=this.year();return(ao%4===0&&ao%100!==0)||ao%400===0},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(ap){var ao=this._isUTC?this._d.getUTCDay():this._d.getDay();if(ap!=null){if(typeof ap==="string"){ap=this.lang().weekdaysParse(ap);if(typeof ap!=="number"){return this}}return this.add({d:ap-ao})}else{return ao}},month:function(ap){var aq=this._isUTC?"UTC":"",ar,ao;if(ap!=null){if(typeof ap==="string"){ap=this.lang().monthsParse(ap);if(typeof ap!=="number"){return this}}ar=this.date();this.date(1);this._d["set"+aq+"Month"](ap);this.date(Math.min(ar,this.daysInMonth()));ad.updateOffset(this);return this}else{return this._d["get"+aq+"Month"]()}},startOf:function(ao){ao=I(ao);switch(ao){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(ao==="week"){this.weekday(0)}return this},endOf:function(ao){return this.startOf(ao).add(ao,1).subtract("ms",1)},isAfter:function(ap,ao){ao=typeof ao!=="undefined"?ao:"millisecond";return +this.clone().startOf(ao)>+ad(ap).startOf(ao)},isBefore:function(ap,ao){ao=typeof ao!=="undefined"?ao:"millisecond";return +this.clone().startOf(ao)<+ad(ap).startOf(ao)},isSame:function(ap,ao){ao=typeof ao!=="undefined"?ao:"millisecond";return +this.clone().startOf(ao)===+ad(ap).startOf(ao)},min:function(ao){ao=ad.apply(null,arguments);return ao<this?this:ao},max:function(ao){ao=ad.apply(null,arguments);return ao>this?this:ao},zone:function(ao){var ap=this._offset||0;if(ao!=null){if(typeof ao==="string"){ao=u(ao)}if(Math.abs(ao)<16){ao=ao*60}this._offset=ao;this._isUTC=true;if(ap!==ao){Z(this,ad.duration(ap-ao,"m"),1,true)}}else{return this._isUTC?ap:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return ad.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(ao){var ap=ai((ad(this).startOf("day")-ad(this).startOf("year"))/86400000)+1;return ao==null?ap:this.add("d",(ao-ap))},weekYear:function(ao){var ap=W(this,this.lang()._week.dow,this.lang()._week.doy).year;return ao==null?ap:this.add("y",(ao-ap))},isoWeekYear:function(ao){var ap=W(this,1,4).year;return ao==null?ap:this.add("y",(ao-ap))},week:function(ao){var ap=this.lang().week(this);return ao==null?ap:this.add("d",(ao-ap)*7)},isoWeek:function(ao){var ap=W(this,1,4).week;return ao==null?ap:this.add("d",(ao-ap)*7)},weekday:function(ao){var ap=(this._d.getDay()+7-this.lang()._week.dow)%7;return ao==null?ap:this.add("d",ao-ap)},isoWeekday:function(ao){return ao==null?this.day()||7:this.day(this.day()%7?ao:ao-7)},lang:function(ao){if(ao===x){return this._lang}else{this._lang=C(ao);return this}}};function q(ao,ap){ad.fn[ao]=ad.fn[ao+"s"]=function(aq){var ar=this._isUTC?"UTC":"";if(aq!=null){this._d["set"+ar+ap](aq);ad.updateOffset(this);return this}else{return this._d["get"+ar+ap]()}}}for(ak=0;ak<o.length;ak++){q(o[ak].toLowerCase().replace(/s$/,""),o[ak])}q("year","FullYear");ad.fn.days=ad.fn.day;ad.fn.months=ad.fn.month;ad.fn.weeks=ad.fn.week;ad.fn.isoWeeks=ad.fn.isoWeek;ad.fn.toJSON=ad.fn.toISOString;ad.duration.fn=an.prototype={_bubble:function(){var aq=this._milliseconds,aw=this._days,ao=this._months,au=this._data,av,at,ap,ar;au.milliseconds=aq%1000;av=ac(aq/1000);au.seconds=av%60;at=ac(av/60);au.minutes=at%60;ap=ac(at/60);au.hours=ap%24;aw+=ac(ap/24);au.days=aw%30;ao+=ac(aw/30);au.months=ao%12;ar=ac(ao/12);au.years=ar},weeks:function(){return ac(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+~~(this._months/12)*31536000000},humanize:function(ap){var aq=+this,ao=J(aq,!ap,this.lang());if(ap){ao=this.lang().pastFuture(aq,ao)}return this.lang().postformat(ao)},add:function(ao,aq){var ap=ad.duration(ao,aq);this._milliseconds+=ap._milliseconds;this._days+=ap._days;this._months+=ap._months;this._bubble();return this},subtract:function(ao,aq){var ap=ad.duration(ao,aq);this._milliseconds-=ap._milliseconds;this._days-=ap._days;this._months-=ap._months;this._bubble();return this},get:function(ao){ao=I(ao);return this[ao.toLowerCase()+"s"]()},as:function(ao){ao=I(ao);return this["as"+ao.charAt(0).toUpperCase()+ao.slice(1)+"s"]()},lang:ad.fn.lang};function a(ao){ad.duration.fn[ao]=function(){return this._data[ao]}}function c(ao,ap){ad.duration.fn["as"+ao]=function(){return +this/ap}}for(ak in ae){if(ae.hasOwnProperty(ak)){c(ak,ae[ak]);a(ak.toLowerCase())}}c("Weeks",604800000);ad.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};ad.lang("en",{ordinal:function(aq){var ao=aq%10,ap=(~~(aq%100/10)===1)?"th":(ao===1)?"st":(ao===2)?"nd":(ao===3)?"rd":"th";return aq+ap}});if(T){module.exports=ad}if(typeof ender==="undefined"){this["moment"]=ad}if(typeof define==="function"&&define.amd){define("moment",[],function(){return ad})}}).call(this);(function(){var z=this;var m=z._;var G={};var F=Array.prototype,f=Object.prototype,u=Function.prototype;var J=F.push,r=F.slice,B=F.concat,d=f.toString,l=f.hasOwnProperty;var N=F.forEach,t=F.map,H=F.reduce,c=F.reduceRight,b=F.filter,E=F.every,s=F.some,q=F.indexOf,n=F.lastIndexOf,x=Array.isArray,e=Object.keys,I=u.bind;var O=function(P){if(P instanceof O){return P}if(!(this instanceof O)){return new O(P)}this._wrapped=P};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=O}exports._=O}else{z._=O}O.VERSION="1.4.4";var K=O.each=O.forEach=function(U,T,S){if(U==null){return}if(N&&U.forEach===N){U.forEach(T,S)}else{if(U.length===+U.length){for(var R=0,P=U.length;R<P;R++){if(T.call(S,U[R],R,U)===G){return}}}else{for(var Q in U){if(O.has(U,Q)){if(T.call(S,U[Q],Q,U)===G){return}}}}}};O.map=O.collect=function(S,R,Q){var P=[];if(S==null){return P}if(t&&S.map===t){return S.map(R,Q)}K(S,function(V,T,U){P[P.length]=R.call(Q,V,T,U)});return P};var h="Reduce of empty array with no initial value";O.reduce=O.foldl=O.inject=function(T,S,P,R){var Q=arguments.length>2;if(T==null){T=[]}if(H&&T.reduce===H){if(R){S=O.bind(S,R)}return Q?T.reduce(S,P):T.reduce(S)}K(T,function(W,U,V){if(!Q){P=W;Q=true}else{P=S.call(R,P,W,U,V)}});if(!Q){throw new TypeError(h)}return P};O.reduceRight=O.foldr=function(V,S,P,R){var Q=arguments.length>2;if(V==null){V=[]}if(c&&V.reduceRight===c){if(R){S=O.bind(S,R)}return Q?V.reduceRight(S,P):V.reduceRight(S)}var U=V.length;if(U!==+U){var T=O.keys(V);U=T.length}K(V,function(Y,W,X){W=T?T[--U]:--U;if(!Q){P=V[W];Q=true}else{P=S.call(R,P,V[W],W,X)}});if(!Q){throw new TypeError(h)}return P};O.find=O.detect=function(S,R,Q){var P;D(S,function(V,T,U){if(R.call(Q,V,T,U)){P=V;return true}});return P};O.filter=O.select=function(S,R,Q){var P=[];if(S==null){return P}if(b&&S.filter===b){return S.filter(R,Q)}K(S,function(V,T,U){if(R.call(Q,V,T,U)){P[P.length]=V}});return P};O.reject=function(R,Q,P){return O.filter(R,function(U,S,T){return !Q.call(P,U,S,T)},P)};O.every=O.all=function(S,R,Q){R||(R=O.identity);var P=true;if(S==null){return P}if(E&&S.every===E){return S.every(R,Q)}K(S,function(V,T,U){if(!(P=P&&R.call(Q,V,T,U))){return G}});return !!P};var D=O.some=O.any=function(S,R,Q){R||(R=O.identity);var P=false;if(S==null){return P}if(s&&S.some===s){return S.some(R,Q)}K(S,function(V,T,U){if(P||(P=R.call(Q,V,T,U))){return G}});return !!P};O.contains=O.include=function(Q,P){if(Q==null){return false}if(q&&Q.indexOf===q){return Q.indexOf(P)!=-1}return D(Q,function(R){return R===P})};O.invoke=function(R,S){var P=r.call(arguments,2);var Q=O.isFunction(S);return O.map(R,function(T){return(Q?S:T[S]).apply(T,P)})};O.pluck=function(Q,P){return O.map(Q,function(R){return R[P]})};O.where=function(Q,P,R){if(O.isEmpty(P)){return R?null:[]}return O[R?"find":"filter"](Q,function(T){for(var S in P){if(P[S]!==T[S]){return false}}return true})};O.findWhere=function(Q,P){return O.where(Q,P,true)};O.max=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.max.apply(Math,S)}if(!R&&O.isEmpty(S)){return -Infinity}var P={computed:-Infinity,value:-Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U>=P.computed&&(P={value:W,computed:U})});return P.value};O.min=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.min.apply(Math,S)}if(!R&&O.isEmpty(S)){return Infinity}var P={computed:Infinity,value:Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U<P.computed&&(P={value:W,computed:U})});return P.value};O.shuffle=function(S){var R;var Q=0;var P=[];K(S,function(T){R=O.random(Q++);P[Q-1]=P[R];P[R]=T});return P};var a=function(P){return O.isFunction(P)?P:function(Q){return Q[P]}};O.sortBy=function(S,R,P){var Q=a(R);return O.pluck(O.map(S,function(V,T,U){return{value:V,index:T,criteria:Q.call(P,V,T,U)}}).sort(function(W,V){var U=W.criteria;var T=V.criteria;if(U!==T){if(U>T||U===void 0){return 1}if(U<T||T===void 0){return -1}}return W.index<V.index?-1:1}),"value")};var w=function(U,T,Q,S){var P={};var R=a(T||O.identity);K(U,function(X,V){var W=R.call(Q,X,V,U);S(P,W,X)});return P};O.groupBy=function(R,Q,P){return w(R,Q,P,function(S,T,U){(O.has(S,T)?S[T]:(S[T]=[])).push(U)})};O.countBy=function(R,Q,P){return w(R,Q,P,function(S,T){if(!O.has(S,T)){S[T]=0}S[T]++})};O.sortedIndex=function(W,V,S,R){S=S==null?O.identity:a(S);var U=S.call(R,V);var P=0,T=W.length;while(P<T){var Q=(P+T)>>>1;S.call(R,W[Q])<U?P=Q+1:T=Q}return P};O.toArray=function(P){if(!P){return[]}if(O.isArray(P)){return r.call(P)}if(P.length===+P.length){return O.map(P,O.identity)}return O.values(P)};O.size=function(P){if(P==null){return 0}return(P.length===+P.length)?P.length:O.keys(P).length};O.first=O.head=O.take=function(R,Q,P){if(R==null){return void 0}return(Q!=null)&&!P?r.call(R,0,Q):R[0]};O.initial=function(R,Q,P){return r.call(R,0,R.length-((Q==null)||P?1:Q))};O.last=function(R,Q,P){if(R==null){return void 0}if((Q!=null)&&!P){return r.call(R,Math.max(R.length-Q,0))}else{return R[R.length-1]}};O.rest=O.tail=O.drop=function(R,Q,P){return r.call(R,(Q==null)||P?1:Q)};O.compact=function(P){return O.filter(P,O.identity)};var A=function(Q,R,P){K(Q,function(S){if(O.isArray(S)){R?J.apply(P,S):A(S,R,P)}else{P.push(S)}});return P};O.flatten=function(Q,P){return A(Q,P,[])};O.without=function(P){return O.difference(P,r.call(arguments,1))};O.uniq=O.unique=function(V,U,T,S){if(O.isFunction(U)){S=T;T=U;U=false}var Q=T?O.map(V,T,S):V;var R=[];var P=[];K(Q,function(X,W){if(U?(!W||P[P.length-1]!==X):!O.contains(P,X)){P.push(X);R.push(V[W])}});return R};O.union=function(){return O.uniq(B.apply(F,arguments))};O.intersection=function(Q){var P=r.call(arguments,1);return O.filter(O.uniq(Q),function(R){return O.every(P,function(S){return O.indexOf(S,R)>=0})})};O.difference=function(Q){var P=B.apply(F,r.call(arguments,1));return O.filter(Q,function(R){return !O.contains(P,R)})};O.zip=function(){var P=r.call(arguments);var S=O.max(O.pluck(P,"length"));var R=new Array(S);for(var Q=0;Q<S;Q++){R[Q]=O.pluck(P,""+Q)}return R};O.object=function(T,R){if(T==null){return{}}var P={};for(var S=0,Q=T.length;S<Q;S++){if(R){P[T[S]]=R[S]}else{P[T[S][0]]=T[S][1]}}return P};O.indexOf=function(T,R,S){if(T==null){return -1}var Q=0,P=T.length;if(S){if(typeof S=="number"){Q=(S<0?Math.max(0,P+S):S)}else{Q=O.sortedIndex(T,R);return T[Q]===R?Q:-1}}if(q&&T.indexOf===q){return T.indexOf(R,S)}for(;Q<P;Q++){if(T[Q]===R){return Q}}return -1};O.lastIndexOf=function(T,R,S){if(T==null){return -1}var P=S!=null;if(n&&T.lastIndexOf===n){return P?T.lastIndexOf(R,S):T.lastIndexOf(R)}var Q=(P?S:T.length);while(Q--){if(T[Q]===R){return Q}}return -1};O.range=function(U,S,T){if(arguments.length<=1){S=U||0;U=0}T=arguments[2]||1;var Q=Math.max(Math.ceil((S-U)/T),0);var P=0;var R=new Array(Q);while(P<Q){R[P++]=U;U+=T}return R};O.bind=function(R,Q){if(R.bind===I&&I){return I.apply(R,r.call(arguments,1))}var P=r.call(arguments,2);return function(){return R.apply(Q,P.concat(r.call(arguments)))}};O.partial=function(Q){var P=r.call(arguments,1);return function(){return Q.apply(this,P.concat(r.call(arguments)))}};O.bindAll=function(Q){var P=r.call(arguments,1);if(P.length===0){P=O.functions(Q)}K(P,function(R){Q[R]=O.bind(Q[R],Q)});return Q};O.memoize=function(R,Q){var P={};Q||(Q=O.identity);return function(){var S=Q.apply(this,arguments);return O.has(P,S)?P[S]:(P[S]=R.apply(this,arguments))}};O.delay=function(Q,R){var P=r.call(arguments,2);return setTimeout(function(){return Q.apply(null,P)},R)};O.defer=function(P){return O.delay.apply(O,[P,1].concat(r.call(arguments,1)))};O.throttle=function(U,W){var S,R,V,P;var T=0;var Q=function(){T=new Date;V=null;P=U.apply(S,R)};return function(){var X=new Date;var Y=W-(X-T);S=this;R=arguments;if(Y<=0){clearTimeout(V);V=null;T=X;P=U.apply(S,R)}else{if(!V){V=setTimeout(Q,Y)}}return P}};O.debounce=function(R,T,Q){var S,P;return function(){var X=this,W=arguments;var V=function(){S=null;if(!Q){P=R.apply(X,W)}};var U=Q&&!S;clearTimeout(S);S=setTimeout(V,T);if(U){P=R.apply(X,W)}return P}};O.once=function(R){var P=false,Q;return function(){if(P){return Q}P=true;Q=R.apply(this,arguments);R=null;return Q}};O.wrap=function(P,Q){return function(){var R=[P];J.apply(R,arguments);return Q.apply(this,R)}};O.compose=function(){var P=arguments;return function(){var Q=arguments;for(var R=P.length-1;R>=0;R--){Q=[P[R].apply(this,Q)]}return Q[0]}};O.after=function(Q,P){if(Q<=0){return P()}return function(){if(--Q<1){return P.apply(this,arguments)}}};O.keys=e||function(R){if(R!==Object(R)){throw new TypeError("Invalid object")}var Q=[];for(var P in R){if(O.has(R,P)){Q[Q.length]=P}}return Q};O.values=function(R){var P=[];for(var Q in R){if(O.has(R,Q)){P.push(R[Q])}}return P};O.pairs=function(R){var Q=[];for(var P in R){if(O.has(R,P)){Q.push([P,R[P]])}}return Q};O.invert=function(R){var P={};for(var Q in R){if(O.has(R,Q)){P[R[Q]]=Q}}return P};O.functions=O.methods=function(R){var Q=[];for(var P in R){if(O.isFunction(R[P])){Q.push(P)}}return Q.sort()};O.extend=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){P[R]=Q[R]}}});return P};O.pick=function(Q){var R={};var P=B.apply(F,r.call(arguments,1));K(P,function(S){if(S in Q){R[S]=Q[S]}});return R};O.omit=function(R){var S={};var Q=B.apply(F,r.call(arguments,1));for(var P in R){if(!O.contains(Q,P)){S[P]=R[P]}}return S};O.defaults=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){if(P[R]==null){P[R]=Q[R]}}}});return P};O.clone=function(P){if(!O.isObject(P)){return P}return O.isArray(P)?P.slice():O.extend({},P)};O.tap=function(Q,P){P(Q);return Q};var L=function(W,V,Q,R){if(W===V){return W!==0||1/W==1/V}if(W==null||V==null){return W===V}if(W instanceof O){W=W._wrapped}if(V instanceof O){V=V._wrapped}var T=d.call(W);if(T!=d.call(V)){return false}switch(T){case"[object String]":return W==String(V);case"[object Number]":return W!=+W?V!=+V:(W==0?1/W==1/V:W==+V);case"[object Date]":case"[object Boolean]":return +W==+V;case"[object RegExp]":return W.source==V.source&&W.global==V.global&&W.multiline==V.multiline&&W.ignoreCase==V.ignoreCase}if(typeof W!="object"||typeof V!="object"){return false}var P=Q.length;while(P--){if(Q[P]==W){return R[P]==V}}Q.push(W);R.push(V);var Y=0,Z=true;if(T=="[object Array]"){Y=W.length;Z=Y==V.length;if(Z){while(Y--){if(!(Z=L(W[Y],V[Y],Q,R))){break}}}}else{var U=W.constructor,S=V.constructor;if(U!==S&&!(O.isFunction(U)&&(U instanceof U)&&O.isFunction(S)&&(S instanceof S))){return false}for(var X in W){if(O.has(W,X)){Y++;if(!(Z=O.has(V,X)&&L(W[X],V[X],Q,R))){break}}}if(Z){for(X in V){if(O.has(V,X)&&!(Y--)){break}}Z=!Y}}Q.pop();R.pop();return Z};O.isEqual=function(Q,P){return L(Q,P,[],[])};O.isEmpty=function(Q){if(Q==null){return true}if(O.isArray(Q)||O.isString(Q)){return Q.length===0}for(var P in Q){if(O.has(Q,P)){return false}}return true};O.isElement=function(P){return !!(P&&P.nodeType===1)};O.isArray=x||function(P){return d.call(P)=="[object Array]"};O.isObject=function(P){return P===Object(P)};K(["Arguments","Function","String","Number","Date","RegExp"],function(P){O["is"+P]=function(Q){return d.call(Q)=="[object "+P+"]"}});if(!O.isArguments(arguments)){O.isArguments=function(P){return !!(P&&O.has(P,"callee"))}}if(typeof(/./)!=="function"){O.isFunction=function(P){return typeof P==="function"}}O.isFinite=function(P){return isFinite(P)&&!isNaN(parseFloat(P))};O.isNaN=function(P){return O.isNumber(P)&&P!=+P};O.isBoolean=function(P){return P===true||P===false||d.call(P)=="[object Boolean]"};O.isNull=function(P){return P===null};O.isUndefined=function(P){return P===void 0};O.has=function(Q,P){return l.call(Q,P)};O.noConflict=function(){z._=m;return this};O.identity=function(P){return P};O.times=function(T,S,R){var P=Array(T);for(var Q=0;Q<T;Q++){P[Q]=S.call(R,Q)}return P};O.random=function(Q,P){if(P==null){P=Q;Q=0}return Q+Math.floor(Math.random()*(P-Q+1))};var o={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};o.unescape=O.invert(o.escape);var M={escape:new RegExp("["+O.keys(o.escape).join("")+"]","g"),unescape:new RegExp("("+O.keys(o.unescape).join("|")+")","g")};O.each(["escape","unescape"],function(P){O[P]=function(Q){if(Q==null){return""}return(""+Q).replace(M[P],function(R){return o[P][R]})}});O.result=function(P,R){if(P==null){return null}var Q=P[R];return O.isFunction(Q)?Q.call(P):Q};O.mixin=function(P){K(O.functions(P),function(Q){var R=O[Q]=P[Q];O.prototype[Q]=function(){var S=[this._wrapped];J.apply(S,arguments);return v.call(this,R.apply(O,S))}})};var C=0;O.uniqueId=function(P){var Q=++C+"";return P?P+Q:Q};O.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/;var j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var k=/\\|'|\r|\n|\t|\u2028|\u2029/g;O.template=function(X,S,R){var Q;R=O.defaults({},R,O.templateSettings);var T=new RegExp([(R.escape||y).source,(R.interpolate||y).source,(R.evaluate||y).source].join("|")+"|$","g");var U=0;var P="__p+='";X.replace(T,function(Z,aa,Y,ac,ab){P+=X.slice(U,ab).replace(k,function(ad){return"\\"+j[ad]});if(aa){P+="'+\n((__t=("+aa+"))==null?'':_.escape(__t))+\n'"}if(Y){P+="'+\n((__t=("+Y+"))==null?'':__t)+\n'"}if(ac){P+="';\n"+ac+"\n__p+='"}U=ab+Z.length;return Z});P+="';\n";if(!R.variable){P="with(obj||{}){\n"+P+"}\n"}P="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+P+"return __p;\n";try{Q=new Function(R.variable||"obj","_",P)}catch(V){V.source=P;throw V}if(S){return Q(S,O)}var W=function(Y){return Q.call(this,Y,O)};W.source="function("+(R.variable||"obj")+"){\n"+P+"}";return W};O.chain=function(P){return O(P).chain()};var v=function(P){return this._chain?O(P).chain():P};O.mixin(O);K(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var Q=F[P];O.prototype[P]=function(){var R=this._wrapped;Q.apply(R,arguments);if((P=="shift"||P=="splice")&&R.length===0){delete R[0]}return v.call(this,R)}});K(["concat","join","slice"],function(P){var Q=F[P];O.prototype[P]=function(){return v.call(this,Q.apply(this._wrapped,arguments))}});O.extend(O.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(h){h.extend(true,window,{Slick:{Event:b,EventData:e,Range:j,NonDataRow:d,Group:c,GroupTotals:a,EditorLock:f,GlobalEditorLock:new f()}});function e(){var k=false;var l=false;this.stopPropagation=function(){k=true};this.isPropagationStopped=function(){return k};this.stopImmediatePropagation=function(){l=true};this.isImmediatePropagationStopped=function(){return l}}function b(){var k=[];this.subscribe=function(l){k.push(l)};this.unsubscribe=function(m){for(var l=k.length-1;l>=0;l--){if(k[l]===m){k.splice(l,1)}}};this.notify=function(l,q,o){q=q||new e();o=o||this;var n;for(var m=0;m<k.length&&!(q.isPropagationStopped()||q.isImmediatePropagationStopped());m++){n=k[m].call(o,q,l)}return n}}function j(l,k,m,n){if(m===undefined&&n===undefined){m=l;n=k}this.fromRow=Math.min(l,m);this.fromCell=Math.min(k,n);this.toRow=Math.max(l,m);this.toCell=Math.max(k,n);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(q,o){return q>=this.fromRow&&q<=this.toRow&&o>=this.fromCell&&o<=this.toCell};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}function d(){this.__nonDataRow=true}function c(){this.__group=true;this.__updated=false;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null}c.prototype=new d();c.prototype.equals=function(k){return this.value===k.value&&this.count===k.count&&this.collapsed===k.collapsed};function a(){this.__groupTotals=true;this.group=null}a.prototype=new d();function f(){var k=null;this.isActive=function(m){return(m?k===m:k!==null)};this.activate=function(m){if(m===k){return}if(k!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController"}if(!m.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()"}if(!m.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()"}k=m};this.deactivate=function(m){if(k!==m){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one"}k=null};this.commitCurrentEdit=function(){return(k?k.commitCurrentEdit():true)};this.cancelCurrentEdit=function l(){return(k?k.cancelCurrentEdit():true)}}})(jQuery);(function(){var t=this;var r=t.Backbone;var s=Array.prototype.slice;var B=Array.prototype.splice;var c;if(typeof exports!=="undefined"){c=exports}else{c=t.Backbone={}}c.VERSION="0.9.2";var D=t._;if(!D&&(typeof require!=="undefined")){D=require("underscore")}var h=t.jQuery||t.Zepto||t.ender;c.setDomLibrary=function(F){h=F};c.noConflict=function(){t.Backbone=r;return this};c.emulateHTTP=false;c.emulateJSON=false;var a=/\s+/;var q=c.Events={on:function(I,M,H){var G,K,J,F,L;if(!M){return this}I=I.split(a);G=this._callbacks||(this._callbacks={});while(K=I.shift()){L=G[K];J=L?L.tail:{};J.next=F={};J.context=H;J.callback=M;G[K]={tail:F,next:L?L.next:J}}return this},off:function(M,K,G){var F,N,H,J,I,L;if(!(N=this._callbacks)){return}if(!(M||K||G)){delete this._callbacks;return this}M=M?M.split(a):D.keys(N);while(F=M.shift()){H=N[F];delete N[F];if(!H||!(K||G)){continue}J=H.tail;while((H=H.next)!==J){I=H.callback;L=H.context;if((K&&I!==K)||(G&&L!==G)){this.on(F,I,L)}}}return this},trigger:function(I){var M,L,H,G,F,K,J;if(!(H=this._callbacks)){return this}K=H.all;I=I.split(a);J=s.call(arguments,1);while(M=I.shift()){if(L=H[M]){G=L.tail;while((L=L.next)!==G){L.callback.apply(L.context||this,J)}}if(L=K){G=L.tail;F=[M].concat(J);while((L=L.next)!==G){L.callback.apply(L.context||this,F)}}}return this}};q.bind=q.on;q.unbind=q.off;var m=c.Model=function(F,G){var H;F||(F={});if(G&&G.parse){F=this.parse(F)}if(H=d(this,"defaults")){F=D.extend({},H,F)}if(G&&G.collection){this.collection=G.collection}this.attributes={};this._escapedAttributes={};this.cid=D.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(F,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=D.clone(this.attributes);this.initialize.apply(this,arguments)};D.extend(m.prototype,q,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(F){return D.clone(this.attributes)},get:function(F){return this.attributes[F]},escape:function(F){var G;if(G=this._escapedAttributes[F]){return G}var H=this.get(F);return this._escapedAttributes[F]=D.escape(H==null?"":""+H)},has:function(F){return this.get(F)!=null},set:function(M,L,O){var N,J,H;if(D.isObject(M)||M==null){N=M;O=L}else{N={};N[M]=L}O||(O={});if(!N){return this}if(N instanceof m){N=N.attributes}if(O.unset){for(J in N){N[J]=void 0}}if(!this._validate(N,O)){return false}if(this.idAttribute in N){this.id=N[this.idAttribute]}var K=O.changes={};var G=this.attributes;var F=this._escapedAttributes;var I=this._previousAttributes||{};for(J in N){H=N[J];if(!D.isEqual(G[J],H)||(O.unset&&D.has(G,J))){delete F[J];(O.silent?this._silent:K)[J]=true}O.unset?delete G[J]:G[J]=H;if(!D.isEqual(I[J],H)||(D.has(G,J)!=D.has(I,J))){this.changed[J]=H;if(!O.silent){this._pending[J]=true}}else{delete this.changed[J];delete this._pending[J]}}if(!O.silent){this.change(O)}return this},unset:function(F,G){(G||(G={})).unset=true;return this.set(F,null,G)},clear:function(F){(F||(F={})).unset=true;return this.set(D.clone(this.attributes),F)},fetch:function(G){G=G?D.clone(G):{};var F=this;var H=G.success;G.success=function(K,I,J){if(!F.set(F.parse(K,J),G)){return false}if(H){H(F,K)}};G.error=c.wrapError(G.error,F,G);return(this.sync||c.sync).call(this,"read",this,G)},save:function(K,J,O){var L,I;if(D.isObject(K)||K==null){L=K;O=J}else{L={};L[K]=J}O=O?D.clone(O):{};if(O.wait){if(!this._validate(L,O)){return false}I=D.clone(this.attributes)}var G=D.extend({},O,{silent:true});if(L&&!this.set(L,O.wait?G:O)){return false}var H=this;var M=O.success;O.success=function(S,P,R){var Q=H.parse(S,R);if(O.wait){delete O.wait;Q=D.extend(L||{},Q)}if(!H.set(Q,O)){return false}if(M){M(H,S)}else{H.trigger("sync",H,S,O)}};O.error=c.wrapError(O.error,H,O);var F=this.isNew()?"create":"update";var N=(this.sync||c.sync).call(this,F,this,O);if(O.wait){this.set(I,G)}return N},destroy:function(G){G=G?D.clone(G):{};var F=this;var J=G.success;var I=function(){F.trigger("destroy",F,F.collection,G)};if(this.isNew()){I();return false}G.success=function(K){if(G.wait){I()}if(J){J(F,K)}else{F.trigger("sync",F,K,G)}};G.error=c.wrapError(G.error,F,G);var H=(this.sync||c.sync).call(this,"delete",this,G);if(!G.wait){I()}return H},url:function(){var F=d(this,"urlRoot")||d(this.collection,"url")||w();if(this.isNew()){return F}return F+(F.charAt(F.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(G,F){return G},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(G){G||(G={});var I=this._changing;this._changing=true;for(var F in this._silent){this._pending[F]=true}var H=D.extend({},G.changes,this._silent);this._silent={};for(var F in H){this.trigger("change:"+F,this,this.get(F),G)}if(I){return this}while(!D.isEmpty(this._pending)){this._pending={};this.trigger("change",this,G);for(var F in this.changed){if(this._pending[F]||this._silent[F]){continue}delete this.changed[F]}this._previousAttributes=D.clone(this.attributes)}this._changing=false;return this},hasChanged:function(F){if(!arguments.length){return !D.isEmpty(this.changed)}return D.has(this.changed,F)},changedAttributes:function(H){if(!H){return this.hasChanged()?D.clone(this.changed):false}var J,I=false,G=this._previousAttributes;for(var F in H){if(D.isEqual(G[F],(J=H[F]))){continue}(I||(I={}))[F]=J}return I},previous:function(F){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[F]},previousAttributes:function(){return D.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},_validate:function(H,G){if(G.silent||!this.validate){return true}H=D.extend({},this.attributes,H);var F=this.validate(H,G);if(!F){return true}if(G&&G.error){G.error(this,F,G)}else{this.trigger("error",this,F,G)}return false}});var E=c.Collection=function(G,F){F||(F={});if(F.model){this.model=F.model}if(F.comparator){this.comparator=F.comparator}this._reset();this.initialize.apply(this,arguments);if(G){this.reset(G,{silent:true,parse:F.parse})}};D.extend(E.prototype,q,{model:m,initialize:function(){},toJSON:function(F){return this.map(function(G){return G.toJSON(F)})},add:function(G,P){var L,N,I,M,O,H,J={},F={},K=[];P||(P={});G=D.isArray(G)?G.slice():[G];for(L=0,I=G.length;L<I;L++){if(!(M=G[L]=this._prepareModel(G[L],P))){throw new Error("Can't add an invalid model to a collection")}O=M.cid;H=M.id;if(J[O]||this._byCid[O]||((H!=null)&&(F[H]||this._byId[H]))){K.push(L);continue}J[O]=F[H]=M}L=K.length;while(L--){G.splice(K[L],1)}for(L=0,I=G.length;L<I;L++){(M=G[L]).on("all",this._onModelEvent,this);this._byCid[M.cid]=M;if(M.id!=null){this._byId[M.id]=M}}this.length+=I;N=P.at!=null?P.at:this.models.length;B.apply(this.models,[N,0].concat(G));if(this.comparator){this.sort({silent:true})}if(P.silent){return this}for(L=0,I=this.models.length;L<I;L++){if(!J[(M=this.models[L]).cid]){continue}P.index=L;M.trigger("add",M,this,P)}return this},remove:function(K,I){var J,F,H,G;I||(I={});K=D.isArray(K)?K.slice():[K];for(J=0,F=K.length;J<F;J++){G=this.getByCid(K[J])||this.get(K[J]);if(!G){continue}delete this._byId[G.id];delete this._byCid[G.cid];H=this.indexOf(G);this.models.splice(H,1);this.length--;if(!I.silent){I.index=H;G.trigger("remove",G,this,I)}this._removeReference(G)}return this},push:function(G,F){G=this._prepareModel(G,F);this.add(G,F);return G},pop:function(G){var F=this.at(this.length-1);this.remove(F,G);return F},unshift:function(G,F){G=this._prepareModel(G,F);this.add(G,D.extend({at:0},F));return G},shift:function(G){var F=this.at(0);this.remove(F,G);return F},get:function(F){if(F==null){return void 0}return this._byId[F.id!=null?F.id:F]},getByCid:function(F){return F&&this._byCid[F.cid||F]},at:function(F){return this.models[F]},where:function(F){if(D.isEmpty(F)){return[]}return this.filter(function(G){for(var H in F){if(F[H]!==G.get(H)){return false}}return true})},sort:function(G){G||(G={});if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var F=D.bind(this.comparator,this);if(this.comparator.length==1){this.models=this.sortBy(F)}else{this.models.sort(F)}if(!G.silent){this.trigger("reset",this,G)}return this},pluck:function(F){return D.map(this.models,function(G){return G.get(F)})},reset:function(I,G){I||(I=[]);G||(G={});for(var H=0,F=this.models.length;H<F;H++){this._removeReference(this.models[H])}this._reset();this.add(I,D.extend({silent:true},G));if(!G.silent){this.trigger("reset",this,G)}return this},fetch:function(F){F=F?D.clone(F):{};if(F.parse===undefined){F.parse=true}var H=this;var G=F.success;F.success=function(K,I,J){H[F.add?"add":"reset"](H.parse(K,J),F);if(G){G(H,K)}};F.error=c.wrapError(F.error,H,F);return(this.sync||c.sync).call(this,"read",this,F)},create:function(G,F){var H=this;F=F?D.clone(F):{};G=this._prepareModel(G,F);if(!G){return false}if(!F.wait){H.add(G,F)}var I=F.success;F.success=function(J,L,K){if(F.wait){H.add(J,F)}if(I){I(J,L)}else{J.trigger("sync",G,L,F)}};G.save(null,F);return G},parse:function(G,F){return G},chain:function(){return D(this.models).chain()},_reset:function(F){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(H,G){G||(G={});if(!(H instanceof m)){var F=H;G.collection=this;H=new this.model(F,G);if(!H._validate(H.attributes,G)){H=false}}else{if(!H.collection){H.collection=this}}return H},_removeReference:function(F){if(this==F.collection){delete F.collection}F.off("all",this._onModelEvent,this)},_onModelEvent:function(H,G,I,F){if((H=="add"||H=="remove")&&I!=this){return}if(H=="destroy"){this.remove(G,F)}if(G&&H==="change:"+G.idAttribute){delete this._byId[G.previous(G.idAttribute)];this._byId[G.id]=G}this.trigger.apply(this,arguments)}});var z=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];D.each(z,function(F){E.prototype[F]=function(){return D[F].apply(D,[this.models].concat(D.toArray(arguments)))}});var C=c.Router=function(F){F||(F={});if(F.routes){this.routes=F.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var k=/:\w+/g;var A=/\*\w+/g;var e=/[-[\]{}()+?.,\\^$|#\s]/g;D.extend(C.prototype,q,{initialize:function(){},route:function(F,G,H){c.history||(c.history=new b);if(!D.isRegExp(F)){F=this._routeToRegExp(F)}if(!H){H=this[G]}c.history.route(F,D.bind(function(J){var I=this._extractParameters(F,J);H&&H.apply(this,I);this.trigger.apply(this,["route:"+G].concat(I));c.history.trigger("route",this,G,I)},this));return this},navigate:function(G,F){c.history.navigate(G,F)},_bindRoutes:function(){if(!this.routes){return}var G=[];for(var H in this.routes){G.unshift([H,this.routes[H]])}for(var I=0,F=G.length;I<F;I++){this.route(G[I][0],G[I][1],this[G[I][1]])}},_routeToRegExp:function(F){F=F.replace(e,"\\$&").replace(k,"([^/]+)").replace(A,"(.*?)");return new RegExp("^"+F+"$")},_extractParameters:function(F,G){return F.exec(G).slice(1)}});var b=c.History=function(){this.handlers=[];D.bindAll(this,"checkUrl")};var o=/^[#\/]/;var l=/msie [\w.]+/;b.started=false;D.extend(b.prototype,q,{interval:50,getHash:function(H){var G=H?H.location:window.location;var F=G.href.match(/#(.*)$/);return F?F[1]:""},getFragment:function(G,F){if(G==null){if(this._hasPushState||F){G=window.location.pathname;var H=window.location.search;if(H){G+=H}}else{G=this.getHash()}}if(!G.indexOf(this.options.root)){G=G.substr(this.options.root.length)}return G.replace(o,"")},start:function(H){if(b.started){throw new Error("Backbone.history has already been started")}b.started=true;this.options=D.extend({},{root:"/"},this.options,H);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var G=this.getFragment();var F=document.documentMode;var J=(l.exec(navigator.userAgent.toLowerCase())&&(!F||F<=7));if(J){this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(G)}if(this._hasPushState){h(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!J){h(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=G;var K=window.location;var I=K.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!I){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&I&&K.hash){this.fragment=this.getHash().replace(o,"");window.history.replaceState({},document.title,K.protocol+"//"+K.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);b.started=false},route:function(F,G){this.handlers.unshift({route:F,callback:G})},checkUrl:function(G){var F=this.getFragment();if(F==this.fragment&&this.iframe){F=this.getFragment(this.getHash(this.iframe))}if(F==this.fragment){return false}if(this.iframe){this.navigate(F)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(H){var G=this.fragment=this.getFragment(H);var F=D.any(this.handlers,function(I){if(I.route.test(G)){I.callback(G);return true}});return F},navigate:function(G,F){if(!b.started){return false}if(!F||F===true){F={trigger:F}}var H=(G||"").replace(o,"");if(this.fragment==H){return}if(this._hasPushState){if(H.indexOf(this.options.root)!=0){H=this.options.root+H}this.fragment=H;window.history[F.replace?"replaceState":"pushState"]({},document.title,H)}else{if(this._wantsHashChange){this.fragment=H;this._updateHash(window.location,H,F.replace);if(this.iframe&&(H!=this.getFragment(this.getHash(this.iframe)))){if(!F.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,H,F.replace)}}else{window.location.assign(this.options.root+G)}}if(F.trigger){this.loadUrl(G)}},_updateHash:function(F,G,H){if(H){F.replace(F.toString().replace(/(javascript:|#).*$/,"")+"#"+G)}else{F.hash=G}}});var v=c.View=function(F){this.cid=D.uniqueId("view");this._configure(F||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var f=/^(\S+)\s*(.*)$/;var x=["model","collection","el","id","attributes","className","tagName"];D.extend(v.prototype,q,{tagName:"div",$:function(F){return this.$el.find(F)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(G,F,I){var H=document.createElement(G);if(F){h(H).attr(F)}if(I){h(H).html(I)}return H},setElement:function(F,G){if(this.$el){this.undelegateEvents()}this.$el=(F instanceof h)?F:h(F);this.el=this.$el[0];if(G!==false){this.delegateEvents()}return this},delegateEvents:function(J){if(!(J||(J=d(this,"events")))){return}this.undelegateEvents();for(var I in J){var K=J[I];if(!D.isFunction(K)){K=this[J[I]]}if(!K){throw new Error('Method "'+J[I]+'" does not exist')}var H=I.match(f);var G=H[1],F=H[2];K=D.bind(K,this);G+=".delegateEvents"+this.cid;if(F===""){this.$el.bind(G,K)}else{this.$el.delegate(F,G,K)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(H){if(this.options){H=D.extend({},this.options,H)}for(var I=0,G=x.length;I<G;I++){var F=x[I];if(H[F]){this[F]=H[F]}}this.options=H},_ensureElement:function(){if(!this.el){var F=d(this,"attributes")||{};if(this.id){F.id=this.id}if(this.className){F["class"]=this.className}this.setElement(this.make(this.tagName,F),false)}else{this.setElement(this.el,false)}}});var y=function(F,G){var H=n(this,F,G);H.extend=this.extend;return H};m.extend=E.extend=C.extend=v.extend=y;var u={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(J,G,F){var H=u[J];F||(F={});var I={type:H,dataType:"json"};if(!F.url){I.url=d(G,"url")||w()}if(!F.data&&G&&(J=="create"||J=="update")){I.contentType="application/json";I.data=JSON.stringify(G.toJSON())}if(c.emulateJSON){I.contentType="application/x-www-form-urlencoded";I.data=I.data?{model:I.data}:{}}if(c.emulateHTTP){if(H==="PUT"||H==="DELETE"){if(c.emulateJSON){I.data._method=H}I.type="POST";I.beforeSend=function(K){K.setRequestHeader("X-HTTP-Method-Override",H)}}}if(I.type!=="GET"&&!c.emulateJSON){I.processData=false}return h.ajax(D.extend(I,F))};c.wrapError=function(G,H,F){return function(I,J){J=I===H?J:I;if(G){G(H,J,F)}else{H.trigger("error",H,J,F)}}};var j=function(){};var n=function(G,F,H){var I;if(F&&F.hasOwnProperty("constructor")){I=F.constructor}else{I=function(){G.apply(this,arguments)}}D.extend(I,G);j.prototype=G.prototype;I.prototype=new j();if(F){D.extend(I.prototype,F)}if(H){D.extend(I,H)}I.prototype.constructor=I;I.__super__=G.prototype;return I};var d=function(F,G){if(!(F&&F[G])){return null}return D.isFunction(F[G])?F[G]():F[G]};var w=function(){throw new Error('A "url" property or function must be specified')}}).call(this);(function(){var a;a=(function(){function b(){this.options_index=0;this.parsed=[]}b.prototype.add_node=function(c){if(c.nodeName==="OPTGROUP"){return this.add_group(c)}else{return this.add_option(c)}};b.prototype.add_group=function(k){var j,e,h,d,f,c;j=this.parsed.length;this.parsed.push({array_index:j,group:true,label:k.label,children:0,disabled:k.disabled});f=k.childNodes;c=[];for(h=0,d=f.length;h<d;h++){e=f[h];c.push(this.add_option(e,j,k.disabled))}return c};b.prototype.add_option=function(d,e,c){if(d.nodeName==="OPTION"){if(d.text!==""){if(e!=null){this.parsed[e].children+=1}this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:d.value,text:d.text,html:d.innerHTML,selected:d.selected,disabled:c===true?c:d.disabled,group_array_index:e,classes:d.className,style:d.style.cssText})}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true})}return this.options_index+=1}};return b})();a.select_to_array=function(b){var h,f,e,c,d;f=new a();d=b.childNodes;for(e=0,c=d.length;e<c;e++){h=d[e];f.add_node(h)}return f.parsed};this.SelectParser=a}).call(this);(function(){var b,a;a=this;b=(function(){function c(d,e){this.form_field=d;this.options=e!=null?e:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}c.prototype.set_default_values=function(){var d=this;this.click_test_action=function(e){return d.test_active_click(e)};this.activate_action=function(e){return d.activate_field(e)};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.search_contains=this.options.search_contains||false;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||false;return this.max_selected_options=this.options.max_selected_options||Infinity};c.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder")}else{if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options"}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option"}}return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};c.prototype.mouse_enter=function(){return this.mouse_on_container=true};c.prototype.mouse_leave=function(){return this.mouse_on_container=false};c.prototype.input_focus=function(d){var e=this;if(!this.active_field){return setTimeout((function(){return e.container_mousedown()}),50)}};c.prototype.input_blur=function(d){var e=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return e.blur_test()}),100)}};c.prototype.result_add_option=function(f){var d,e;if(!f.disabled){f.dom_id=this.container_id+"_o_"+f.array_index;d=f.selected&&this.is_multiple?[]:["active-result"];if(f.selected){d.push("result-selected")}if(f.group_array_index!=null){d.push("group-option")}if(f.classes!==""){d.push(f.classes)}e=f.style.cssText!==""?' style="'+f.style+'"':"";return'<li id="'+f.dom_id+'" class="'+d.join(" ")+'"'+e+">"+f.html+"</li>"}else{return""}};c.prototype.results_update_field=function(){if(!this.is_multiple){this.results_reset_cleanup()}this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};c.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide()}else{return this.results_show()}};c.prototype.results_search=function(d){if(this.results_showing){return this.winnow_results()}else{return this.results_show()}};c.prototype.keyup_checker=function(d){var f,e;f=(e=d.which)!=null?e:d.keyCode;this.search_field_scale();switch(f){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0){return this.keydown_backstroke()}else{if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}}break;case 13:d.preventDefault();if(this.results_showing){return this.result_select(d)}break;case 27:if(this.results_showing){this.results_hide()}return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};c.prototype.generate_field_id=function(){var d;d=this.generate_random_id();this.form_field.id=d;return d};c.prototype.generate_random_char=function(){var f,e,d;f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";d=Math.floor(Math.random()*f.length);return e=f.substring(d,d+1)};return c})();a.AbstractChosen=b}).call(this);(function(){var e,f,d,a,b=Object.prototype.hasOwnProperty,c=function(l,j){for(var h in j){if(b.call(j,h)){l[h]=j[h]}}function k(){this.constructor=l}k.prototype=j.prototype;l.prototype=new k;l.__super__=j.prototype;return l};a=this;e=jQuery;e.fn.extend({chosen:function(h){if(e.browser.msie&&(e.browser.version==="6.0"||e.browser.version==="7.0")){return this}return this.each(function(j){var k;k=e(this);if(!k.hasClass("chzn-done")){return k.data("chosen",new f(this,h))}})}});f=(function(h){c(j,h);function j(){j.__super__.constructor.apply(this,arguments)}j.prototype.setup=function(){this.form_field_jq=e(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};j.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};j.prototype.set_up_html=function(){var n,m,l,k;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();n=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});if(this.is_multiple){n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" placeholder="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>')}else{n.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>')}this.form_field_jq.hide().after(n);this.container=e("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();m=this.container.height();l=this.f_width-d(this.dropdown);this.dropdown.css({width:l+"px",top:m+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chzn-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chzn-search").first();this.selected_item=this.container.find(".chzn-single").first();k=l-d(this.search_container)-d(this.search_field);this.search_field.css({width:k+"px"})}this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};j.prototype.register_observers=function(){var k=this;this.container.mousedown(function(l){return k.container_mousedown(l)});this.container.mouseup(function(l){return k.container_mouseup(l)});this.container.mouseenter(function(l){return k.mouse_enter(l)});this.container.mouseleave(function(l){return k.mouse_leave(l)});this.search_results.mouseup(function(l){return k.search_results_mouseup(l)});this.search_results.mouseover(function(l){return k.search_results_mouseover(l)});this.search_results.mouseout(function(l){return k.search_results_mouseout(l)});this.form_field_jq.bind("liszt:updated",function(l){return k.results_update_field(l)});this.search_field.blur(function(l){return k.input_blur(l)});this.search_field.keyup(function(l){return k.keyup_checker(l)});this.search_field.keydown(function(l){return k.keydown_checker(l)});if(this.is_multiple){this.search_choices.click(function(l){return k.choices_click(l)});return this.search_field.focus(function(l){return k.input_focus(l)})}else{return this.container.click(function(l){return l.preventDefault()})}};j.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass("chzn-disabled");this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus",this.activate_action)}return this.close_field()}else{this.container.removeClass("chzn-disabled");this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus",this.activate_action)}}};j.prototype.container_mousedown=function(k){var l;if(!this.is_disabled){l=k!=null?(e(k.target)).hasClass("search-choice-close"):false;if(k&&k.type==="mousedown"&&!this.results_showing){k.stopPropagation()}if(!this.pending_destroy_click&&!l){if(!this.active_field){if(this.is_multiple){this.search_field.val("")}e(document).click(this.click_test_action);this.results_show()}else{if(!this.is_multiple&&k&&((e(k.target)[0]===this.selected_item[0])||e(k.target).parents("a.chzn-single").length)){k.preventDefault();this.results_toggle()}}return this.activate_field()}else{return this.pending_destroy_click=false}}};j.prototype.container_mouseup=function(k){if(k.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(k)}};j.prototype.blur_test=function(k){if(!this.active_field&&this.container.hasClass("chzn-container-active")){return this.close_field()}};j.prototype.close_field=function(){e(document).unbind("click",this.click_test_action);if(!this.is_multiple){this.selected_item.attr("tabindex",this.search_field.attr("tabindex"));this.search_field.attr("tabindex",-1)}this.active_field=false;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};j.prototype.activate_field=function(){if(!this.is_multiple&&!this.active_field){this.search_field.attr("tabindex",this.selected_item.attr("tabindex"));this.selected_item.attr("tabindex",-1)}this.container.addClass("chzn-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};j.prototype.test_active_click=function(k){if(e(k.target).parents("#"+this.container_id).length){return this.active_field=true}else{return this.close_field()}};j.prototype.results_build=function(){var l,o,n,k,m;this.parsing=true;this.results_data=a.SelectParser.select_to_array(this.form_field);if(this.is_multiple&&this.choices>0){this.search_choices.find("li.search-choice").remove();this.choices=0}else{if(!this.is_multiple){this.selected_item.addClass("chzn-default").find("span").text(this.default_text);if(this.form_field.options.length<=this.disable_search_threshold){this.container.addClass("chzn-container-single-nosearch")}else{this.container.removeClass("chzn-container-single-nosearch")}}}l="";m=this.results_data;for(n=0,k=m.length;n<k;n++){o=m[n];if(o.group){l+=this.result_add_group(o)}else{if(!o.empty){l+=this.result_add_option(o);if(o.selected&&this.is_multiple){this.choice_build(o)}else{if(o.selected&&!this.is_multiple){this.selected_item.removeClass("chzn-default").find("span").text(o.text);if(this.allow_single_deselect){this.single_deselect_control_build()}}}}}}this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(l);return this.parsing=false};j.prototype.result_add_group=function(k){if(!k.disabled){k.dom_id=this.container_id+"_g_"+k.array_index;return'<li id="'+k.dom_id+'" class="group-result">'+e("<div />").text(k.label).html()+"</li>"}else{return""}};j.prototype.result_do_highlight=function(l){var q,o,m,n,k;if(l.length){this.result_clear_highlight();this.result_highlight=l;this.result_highlight.addClass("highlighted");m=parseInt(this.search_results.css("maxHeight"),10);k=this.search_results.scrollTop();n=m+k;o=this.result_highlight.position().top+this.search_results.scrollTop();q=o+this.result_highlight.outerHeight();if(q>=n){return this.search_results.scrollTop((q-m)>0?q-m:0)}else{if(o<k){return this.search_results.scrollTop(o)}}}};j.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted")}return this.result_highlight=null};j.prototype.results_show=function(){var k;if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop");if(this.result_single_selected){this.result_do_highlight(this.result_single_selected)}}else{if(this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}}k=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:k+"px",left:0});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};j.prototype.results_hide=function(){if(!this.is_multiple){this.selected_item.removeClass("chzn-single-with-drop")}this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=false};j.prototype.set_tab_index=function(l){var k;if(this.form_field_jq.attr("tabindex")){k=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple){return this.search_field.attr("tabindex",k)}else{this.selected_item.attr("tabindex",k);return this.search_field.attr("tabindex",-1)}}};j.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};j.prototype.search_results_mouseup=function(k){var l;l=e(k.target).hasClass("active-result")?e(k.target):e(k.target).parents(".active-result").first();if(l.length){this.result_highlight=l;return this.result_select(k)}};j.prototype.search_results_mouseover=function(k){var l;l=e(k.target).hasClass("active-result")?e(k.target):e(k.target).parents(".active-result").first();if(l){return this.result_do_highlight(l)}};j.prototype.search_results_mouseout=function(k){if(e(k.target).hasClass("active-result"||e(k.target).parents(".active-result").first())){return this.result_clear_highlight()}};j.prototype.choices_click=function(k){k.preventDefault();if(this.active_field&&!(e(k.target).hasClass("search-choice"||e(k.target).parents(".search-choice").first))&&!this.results_showing){return this.results_show()}};j.prototype.choice_build=function(m){var k,l,n=this;if(this.is_multiple&&this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}k=this.container_id+"_c_"+m.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+k+'"><span>'+m.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+m.array_index+'"></a></li>');l=e("#"+k).find("a").first();return l.click(function(o){return n.choice_destroy_link_click(o)})};j.prototype.choice_destroy_link_click=function(k){k.preventDefault();if(!this.is_disabled){this.pending_destroy_click=true;return this.choice_destroy(e(k.target))}else{return k.stopPropagation}};j.prototype.choice_destroy=function(k){this.choices-=1;this.show_search_field_default();if(this.is_multiple&&this.choices>0&&this.search_field.val().length<1){this.results_hide()}this.result_deselect(k.attr("rel"));return k.parents("li").first().remove()};j.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_item.find("span").text(this.default_text);if(!this.is_multiple){this.selected_item.addClass("chzn-default")}this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}};j.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()};j.prototype.result_select=function(l){var q,o,n,k;if(this.result_highlight){q=this.result_highlight;if(q.hasClass("add-result")){var m=q.find("span").first().text();this.form_field_jq.append(e("<option>",{value:m}).text(m));this.results_update_field();this.no_results_clear();q=this.search_results.find("li").last()}o=q.attr("id");this.result_clear_highlight();if(this.is_multiple){this.result_deactivate(q)}else{this.search_results.find(".result-selected").removeClass("result-selected");this.result_single_selected=q;this.selected_item.removeClass("chzn-default")}q.addClass("result-selected");k=o.substr(o.lastIndexOf("_")+1);n=this.results_data[k];n.selected=true;this.form_field.options[n.options_index].selected=true;if(this.is_multiple){this.choice_build(n)}else{this.selected_item.find("span").first().text(n.text);if(this.allow_single_deselect){this.single_deselect_control_build()}}if(!(l.metaKey&&this.is_multiple)){this.results_hide()}this.search_field.val("");if(this.is_multiple||this.form_field_jq.val()!==this.current_value){this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value})}this.current_value=this.form_field_jq.val();return this.search_field_scale()}};j.prototype.result_activate=function(k){return k.addClass("active-result")};j.prototype.result_deactivate=function(k){return k.removeClass("active-result")};j.prototype.result_deselect=function(m){var k,l;l=this.results_data[m];l.selected=false;this.form_field.options[l.options_index].selected=false;k=e("#"+this.container_id+"_o_"+m);k.removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[l.options_index].value});return this.search_field_scale()};j.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1){return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}};j.prototype.winnow_results=function(){var r,t,x,w,m,u,q,A,v,z,y,s,n,l,k,B,C,o;this.no_results_clear();v=0;z=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html();u=this.search_contains?"":"^";m=new RegExp(u+z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");n=new RegExp(z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");o=this.results_data;for(l=0,B=o.length;l<B;l++){t=o[l];if(!t.disabled&&!t.empty){if(t.group){e("#"+t.dom_id).css("display","none")}else{if(!(this.is_multiple&&t.selected)){r=false;A=t.dom_id;q=e("#"+A);if(m.test(t.html)){r=true;v+=1}else{if(t.html.indexOf(" ")>=0||t.html.indexOf("[")===0){w=t.html.replace(/\[|\]/g,"").split(" ");if(w.length){for(k=0,C=w.length;k<C;k++){x=w[k];if(m.test(x)){r=true;v+=1}}}}}if(r){if(z.length){y=t.html.search(n);s=t.html.substr(0,y+z.length)+"</em>"+t.html.substr(y+z.length);s=s.substr(0,y)+"<em>"+s.substr(y)}else{s=t.html}q.html(s);this.result_activate(q);if(t.group_array_index!=null){e("#"+this.results_data[t.group_array_index].dom_id).css("display","list-item")}}else{if(this.result_highlight&&A===this.result_highlight.attr("id")){this.result_clear_highlight()}this.result_deactivate(q)}}}}}if(v<1&&z.length){return this.no_results(z)}else{return this.winnow_results_set_highlight()}};j.prototype.winnow_results_clear=function(){var k,n,o,m,l;this.search_field.val("");n=this.search_results.find("li");l=[];for(o=0,m=n.length;o<m;o++){k=n[o];k=e(k);if(k.hasClass("group-result")){l.push(k.css("display","auto"))}else{if(!this.is_multiple||!k.hasClass("result-selected")){l.push(this.result_activate(k))}else{l.push(void 0)}}}return l};j.prototype.winnow_results_set_highlight=function(){var k,l;if(!this.result_highlight){l=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];k=l.length?l.first():this.search_results.find(".active-result").first();if(k!=null){return this.result_do_highlight(k)}}};j.prototype.no_results=function(l){var m;var k;m=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');m.find("span").first().html(l);k=e('<li class="active-result add-result">Add "<span></span>"</li>');k.find("span").first().html(l);if(this.options.disable_add_result){return this.search_results.append(m)}else{return this.search_results.append(m).append(k)}};j.prototype.no_results_clear=function(){this.search_results.find(".add-result").remove();return this.search_results.find(".no-results").remove()};j.prototype.keydown_arrow=function(){var l,k;if(!this.result_highlight){l=this.search_results.find("li.active-result").first();if(l){this.result_do_highlight(e(l))}}else{if(this.results_showing){k=this.result_highlight.nextAll("li.active-result").first();if(k){this.result_do_highlight(k)}}}if(!this.results_showing){return this.results_show()}};j.prototype.keyup_arrow=function(){var k;if(!this.results_showing&&!this.is_multiple){return this.results_show()}else{if(this.result_highlight){k=this.result_highlight.prevAll("li.active-result");if(k.length){return this.result_do_highlight(k.first())}else{if(this.choices>0){this.results_hide()}return this.result_clear_highlight()}}}};j.prototype.keydown_backstroke=function(){if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{this.pending_backstroke=this.search_container.siblings("li.search-choice").last();if(this.single_backstroke_delete){return this.keydown_backstroke()}else{return this.pending_backstroke.addClass("search-choice-focus")}}};j.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus")}return this.pending_backstroke=null};j.prototype.keydown_checker=function(k){var m,l;m=(l=k.which)!=null?l:k.keyCode;this.search_field_scale();if(m!==8&&this.pending_backstroke){this.clear_backstroke()}switch(m){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(k)}this.mouse_on_container=false;break;case 13:k.preventDefault();break;case 38:k.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow();break}};j.prototype.search_field_scale=function(){var t,k,n,l,r,s,q,m,o;if(this.is_multiple){n=0;q=0;r="position:absolute; left: -1000px; top: -1000px; display:none;";s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(m=0,o=s.length;m<o;m++){l=s[m];r+=l+":"+this.search_field.css(l)+";"}k=e("<div />",{style:r});k.text(this.search_field.val());e("body").append(k);q=k.width()+25;k.remove();if(q>this.f_width-10){q=this.f_width-10}this.search_field.css({width:q+"px"});t=this.container.height();return this.dropdown.css({top:t+"px"})}};j.prototype.generate_random_id=function(){var k;k="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(e("#"+k).length>0){k+=this.generate_random_char()}return k};return j})(AbstractChosen);d=function(h){var j;return j=h.outerWidth()-h.width()};a.get_side_border_padding=d}).call(this);Cohorts=(function(){var a={debug:false};var b={nameSpace:"cohorts",trackEvent:function(h,j,k,f){d.log("GA trackEvent: "+h+", "+j+", "+k+", "+f);if(window._gaq){_gaq.push(["_trackEvent",h,j,k,f])}else{throw (" _gaq object not found: It looks like you haven't correctly setup the asynchronous Google Analytics tracking code, and you are using the default GoogleAnalyticsAdapter.")}},onInitialize:function(j,f,h){if(j){this.trackEvent(this.nameSpace,f,h+" | Total")}},onEvent:function(f,h,j){this.trackEvent(this.nameSpace,f,h+" | "+j)}};var e=(function(){var f="_cohorts";var h=function(j){this.options=d.extend({name:null,cohorts:null,sample:1,storageAdapter:null},j);if(this.options.name===null){throw ("A name for this test must be specified")}if(this.options.cohorts===null){throw ("Cohorts must be specified for this test")}if(d.size(j.cohorts)<2){throw ("You must specify at least 2 cohorts for a test")}if(!this.options.storageAdapter){this.options.storageAdapter=b}this.cohorts=d.keys(this.options.cohorts);this.run()};h.prototype={run:function(){var q=window.location.hash;if(q.indexOf("#")==0){q=q.slice(1,q.length)}var m=q.split("&");for(var r=0;r<m.length;r++){var o=m[r].split("=");var k=o[0];var j=o[1];if(this.options.name==k){d.log("Forcing test "+k+" into cohort "+j);this.setCohort(j)}}var t=this.inTest();if(t===null){t=Math.random()<=this.options.sample}if(t){this.setCookie("in_test",1);if(!this.getCohort()){var n=1/d.size(this.options.cohorts);var l=Math.floor(Math.random()/n);var s=d.keys(this.options.cohorts)[l];this.setCohort(s)}else{var s=this.getCohort()}if(this.options.cohorts[s].onChosen){this.options.cohorts[s].onChosen()}}else{this.setCookie("in_test",0)}},event:function(j){},inTest:function(){if(this.getCookie("in_test")==1){return true}else{if(this.getCookie("in_test")==0){return false}else{return null}}},inCohort:function(j){if(this.inTest()){return this.getCohort()==j}else{return false}},getCohort:function(){if(this.inTest()){return this.getCookie("chosen_cohort")}else{return null}},setCohort:function(j){if($.inArray(j,this.cohorts)==-1){return false}else{this.setCookie("chosen_cohort",j);return true}},setCookie:function(j,k){c.set(f+"_"+this.options.name+"_"+j,k)},getCookie:function(j){return c.get(f+"_"+this.options.name+"_"+j)}};return h})();var d={extend:function(f,j){for(var h in j){f[h]=j[h]}return f},size:function(f){var h=0;for(var j in f){h+=1}return h},keys:function(f){var h=[];for(var j in f){h.push(j)}return h},log:function(f){if(window.console&&a.debug){if(console.log){console.log(f)}else{alert(f)}}}};var c=(function(){var l,k,j,h,f={expiresAt:null,path:"/",domain:null,secure:false};l=function(n){var o,m;if(typeof n!=="object"||n===null){o=f}else{o={expiresAt:f.expiresAt,path:f.path,domain:f.domain,secure:f.secure};if(typeof n.expiresAt==="object"&&n.expiresAt instanceof Date){o.expiresAt=n.expiresAt}else{if(typeof n.hoursToLive==="number"&&n.hoursToLive!==0){m=new Date();m.setTime(m.getTime()+(n.hoursToLive*60*60*1000));o.expiresAt=m}}if(typeof n.path==="string"&&n.path!==""){o.path=n.path}if(typeof n.domain==="string"&&n.domain!==""){o.domain=n.domain}if(n.secure===true){o.secure=n.secure}}return o};k=function(m){m=l(m);return((typeof m.expiresAt==="object"&&m.expiresAt instanceof Date?"; expires="+m.expiresAt.toGMTString():"")+"; path="+m.path+(typeof m.domain==="string"?"; domain="+m.domain:"")+(m.secure===true?"; secure":""))};j=function(){var v={},o,n,m,u,r=document.cookie.split(";"),q;for(o=0;o<r.length;o=o+1){n=r[o].split("=");m=n[0].replace(/^\s*/,"").replace(/\s*$/,"");try{u=decodeURIComponent(n[1])}catch(t){u=n[1]}if(typeof JSON==="object"&&JSON!==null&&typeof JSON.parse==="function"){try{q=u;u=JSON.parse(u)}catch(s){u=q}}v[m]=u}return v};h=function(){};h.prototype.get=function(q){var m,o,n=j();if(typeof q==="string"){m=(typeof n[q]!=="undefined")?n[q]:null}else{if(typeof q==="object"&&q!==null){m={};for(o in q){if(typeof n[q[o]]!=="undefined"){m[q[o]]=n[q[o]]}else{m[q[o]]=null}}}else{m=n}}return m};h.prototype.filter=function(m){var q,n={},o=j();if(typeof m==="string"){m=new RegExp(m)}for(q in o){if(q.match(m)){n[q]=o[q]}}return n};h.prototype.set=function(q,n,m){if(typeof m!=="object"||m===null){m={}}if(typeof n==="undefined"||n===null){n="";m.hoursToLive=-8760}else{if(typeof n!=="string"){if(typeof JSON==="object"&&JSON!==null&&typeof JSON.stringify==="function"){n=JSON.stringify(n)}else{throw new Error("cookies.set() received non-string value and could not serialize.")}}}var o=k(m);document.cookie=q+"="+encodeURIComponent(n)+o};h.prototype.del=function(q,o){var m={},n;if(typeof o!=="object"||o===null){o={}}if(typeof q==="boolean"&&q===true){m=this.get()}else{if(typeof q==="string"){m[q]=true}}for(n in m){if(typeof n==="string"&&n!==""){this.set(n,null,o)}}};h.prototype.test=function(){var n=false,m="cT",o="data";this.set(m,o);if(this.get(m)===o){this.del(m);n=true}return n};h.prototype.setOptions=function(m){if(typeof m!=="object"){m=null}f=l(m)};return new h()})();return{Test:e,Cookies:c,Options:a}})();
/*!
* Fine Uploader
*
* Copyright 2013-2014, Widen Enterprises, Inc. info@fineuploader.com
*
* Version: 4.4.0
*
* Homepage: http://fineuploader.com
*
* Repository: git://github.com/Widen/fine-uploader.git
*
* Licensed under GNU GPL v3, see LICENSE
*
* Third-party credits:
*   MegaPixImageModule (MIT)
*       https://github.com/stomita/ios-imagefile-megapixel
*       Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
*
*   CryptoJS
*       code.google.com/p/crypto-js/wiki/License
*       (c) 2009-2013 by Jeff Mott. All rights reserved.
*/
var qq=function(a){return{hide:function(){a.style.display="none";return this},attach:function(c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}return function(){qq(a).detach(c,b)}},detach:function(c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.attachEvent){a.detachEvent("on"+c,b)}}return this},contains:function(b){if(!b){return false}if(a===b){return true}if(a.contains){return a.contains(b)}else{return !!(b.compareDocumentPosition(a)&8)}},insertBefore:function(b){b.parentNode.insertBefore(a,b);return this},remove:function(){a.parentNode.removeChild(a);return this},css:function(b){if(a.style==null){throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!")}if(b.opacity!=null){if(typeof a.style.opacity!=="string"&&typeof(a.filters)!=="undefined"){b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"}}qq.extend(a.style,b);return this},hasClass:function(b){var c=new RegExp("(^| )"+b+"( |$)");return c.test(a.className)},addClass:function(b){if(!qq(a).hasClass(b)){a.className+=" "+b}return this},removeClass:function(b){var c=new RegExp("(^| )"+b+"( |$)");a.className=a.className.replace(c," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(c){var d,b=[];if(a.querySelectorAll){return a.querySelectorAll("."+c)}d=a.getElementsByTagName("*");qq.each(d,function(e,f){if(qq(f).hasClass(c)){b.push(f)}});return b},children:function(){var b=[],c=a.firstChild;while(c){if(c.nodeType===1){b.push(c)}c=c.nextSibling}return b},setText:function(b){a.innerText=b;a.textContent=b;return this},clearText:function(){return qq(a).setText("")},hasAttribute:function(c){var b;if(a.hasAttribute){if(!a.hasAttribute(c)){return false}return(/^false$/i).exec(a.getAttribute(c))==null}else{b=a[c];if(b===undefined){return false}return(/^false$/i).exec(b)==null}}}};(function(){qq.log=function(message,level){if(window.console){if(!level||level==="info"){window.console.log(message)}else{if(window.console[level]){window.console[level](message)}else{window.console.log("<"+level+"> "+message)}}}};qq.isObject=function(variable){return variable&&!variable.nodeType&&Object.prototype.toString.call(variable)==="[object Object]"};qq.isFunction=function(variable){return typeof(variable)==="function"};qq.isArray=function(value){return Object.prototype.toString.call(value)==="[object Array]"||(value&&window.ArrayBuffer&&value.buffer&&value.buffer.constructor===ArrayBuffer)};qq.isItemList=function(maybeItemList){return Object.prototype.toString.call(maybeItemList)==="[object DataTransferItemList]"};qq.isNodeList=function(maybeNodeList){return Object.prototype.toString.call(maybeNodeList)==="[object NodeList]"||(maybeNodeList.item&&maybeNodeList.namedItem)};qq.isString=function(maybeString){return Object.prototype.toString.call(maybeString)==="[object String]"};qq.trimStr=function(string){if(String.prototype.trim){return string.trim()}return string.replace(/^\s+|\s+$/g,"")};qq.format=function(str){var args=Array.prototype.slice.call(arguments,1),newStr=str,nextIdxToReplace=newStr.indexOf("{}");qq.each(args,function(idx,val){var strBefore=newStr.substring(0,nextIdxToReplace),strAfter=newStr.substring(nextIdxToReplace+2);newStr=strBefore+val+strAfter;nextIdxToReplace=newStr.indexOf("{}",nextIdxToReplace+val.length);if(nextIdxToReplace<0){return false}});return newStr};qq.isFile=function(maybeFile){return window.File&&Object.prototype.toString.call(maybeFile)==="[object File]"};qq.isFileList=function(maybeFileList){return window.FileList&&Object.prototype.toString.call(maybeFileList)==="[object FileList]"};qq.isFileOrInput=function(maybeFileOrInput){return qq.isFile(maybeFileOrInput)||qq.isInput(maybeFileOrInput)};qq.isInput=function(maybeInput,notFile){var evaluateType=function(type){var normalizedType=type.toLowerCase();if(notFile){return normalizedType!=="file"}return normalizedType==="file"};if(window.HTMLInputElement){if(Object.prototype.toString.call(maybeInput)==="[object HTMLInputElement]"){if(maybeInput.type&&evaluateType(maybeInput.type)){return true}}}if(maybeInput.tagName){if(maybeInput.tagName.toLowerCase()==="input"){if(maybeInput.type&&evaluateType(maybeInput.type)){return true}}}return false};qq.isBlob=function(maybeBlob){if(window.Blob&&Object.prototype.toString.call(maybeBlob)==="[object Blob]"){return true}};qq.isXhrUploadSupported=function(){var input=document.createElement("input");input.type="file";return(input.multiple!==undefined&&typeof File!=="undefined"&&typeof FormData!=="undefined"&&typeof(qq.createXhrInstance()).upload!=="undefined")};qq.createXhrInstance=function(){if(window.XMLHttpRequest){return new XMLHttpRequest()}try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(error){qq.log("Neither XHR or ActiveX are supported!","error");return null}};qq.isFolderDropSupported=function(dataTransfer){return(dataTransfer.items&&dataTransfer.items[0].webkitGetAsEntry)};qq.isFileChunkingSupported=function(){return !qq.androidStock()&&qq.isXhrUploadSupported()&&(File.prototype.slice!==undefined||File.prototype.webkitSlice!==undefined||File.prototype.mozSlice!==undefined)};qq.sliceBlob=function(fileOrBlob,start,end){var slicer=fileOrBlob.slice||fileOrBlob.mozSlice||fileOrBlob.webkitSlice;return slicer.call(fileOrBlob,start,end)};qq.arrayBufferToHex=function(buffer){var bytesAsHex="",bytes=new Uint8Array(buffer);qq.each(bytes,function(idx,b){var byteAsHexStr=b.toString(16);if(byteAsHexStr.length<2){byteAsHexStr="0"+byteAsHexStr}bytesAsHex+=byteAsHexStr});return bytesAsHex};qq.readBlobToHex=function(blob,startOffset,length){var initialBlob=qq.sliceBlob(blob,startOffset,startOffset+length),fileReader=new FileReader(),promise=new qq.Promise();fileReader.onload=function(){promise.success(qq.arrayBufferToHex(fileReader.result))};fileReader.onerror=promise.failure;fileReader.readAsArrayBuffer(initialBlob);return promise};qq.extend=function(first,second,extendNested){qq.each(second,function(prop,val){if(extendNested&&qq.isObject(val)){if(first[prop]===undefined){first[prop]={}}qq.extend(first[prop],val,true)}else{first[prop]=val}});return first};qq.override=function(target,sourceFn){var super_={},source=sourceFn(super_);qq.each(source,function(srcPropName,srcPropVal){if(target[srcPropName]!==undefined){super_[srcPropName]=target[srcPropName]}target[srcPropName]=srcPropVal});return target};qq.indexOf=function(arr,elt,from){if(arr.indexOf){return arr.indexOf(elt,from)}from=from||0;var len=arr.length;if(from<0){from+=len}for(;from<len;from+=1){if(arr.hasOwnProperty(from)&&arr[from]===elt){return from}}return -1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)})};qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!==-1};qq.ie7=function(){return navigator.userAgent.indexOf("MSIE 7")!==-1};qq.ie10=function(){return navigator.userAgent.indexOf("MSIE 10")!==-1};qq.ie11=function(){return(navigator.userAgent.indexOf("Trident")!==-1&&navigator.userAgent.indexOf("rv:11")!==-1)};qq.safari=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1};qq.chrome=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1};qq.opera=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Opera")!==-1};qq.firefox=function(){return(!qq.ie11()&&navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor==="")};qq.windows=function(){return navigator.platform==="Win32"};qq.android=function(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1};qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0};qq.ios7=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 7_")!==-1};qq.ios=function(){return navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPhone")!==-1};qq.preventDefault=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};qq.toElement=(function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var element=div.firstChild;div.removeChild(element);return element}}());qq.each=function(iterableItem,callback){var keyOrIndex,retVal;if(iterableItem){if(window.Storage&&iterableItem.constructor===window.Storage){for(keyOrIndex=0;keyOrIndex<iterableItem.length;keyOrIndex++){retVal=callback(iterableItem.key(keyOrIndex),iterableItem.getItem(iterableItem.key(keyOrIndex)));if(retVal===false){break}}}else{if(qq.isArray(iterableItem)||qq.isItemList(iterableItem)||qq.isNodeList(iterableItem)){for(keyOrIndex=0;keyOrIndex<iterableItem.length;keyOrIndex++){retVal=callback(keyOrIndex,iterableItem[keyOrIndex]);if(retVal===false){break}}}else{if(qq.isString(iterableItem)){for(keyOrIndex=0;keyOrIndex<iterableItem.length;keyOrIndex++){retVal=callback(keyOrIndex,iterableItem.charAt(keyOrIndex));if(retVal===false){break}}}else{for(keyOrIndex in iterableItem){if(Object.prototype.hasOwnProperty.call(iterableItem,keyOrIndex)){retVal=callback(keyOrIndex,iterableItem[keyOrIndex]);if(retVal===false){break}}}}}}}};qq.bind=function(oldFunc,context){if(qq.isFunction(oldFunc)){var args=Array.prototype.slice.call(arguments,2);return function(){var newArgs=qq.extend([],args);if(arguments.length){newArgs=newArgs.concat(Array.prototype.slice.call(arguments))}return oldFunc.apply(context,newArgs)}}throw new Error("first parameter must be a function!")};qq.obj2url=function(obj,temp,prefixDone){var uristrings=[],prefix="&",add=function(nextObj,i){var nextTemp=temp?(/\[\]$/.test(temp))?temp:temp+"["+i+"]":i;if((nextTemp!=="undefined")&&(i!=="undefined")){uristrings.push((typeof nextObj==="object")?qq.obj2url(nextObj,nextTemp,true):(Object.prototype.toString.call(nextObj)==="[object Function]")?encodeURIComponent(nextTemp)+"="+encodeURIComponent(nextObj()):encodeURIComponent(nextTemp)+"="+encodeURIComponent(nextObj))}};if(!prefixDone&&temp){prefix=(/\?/.test(temp))?(/\?$/.test(temp))?"":"&":"?";uristrings.push(temp);uristrings.push(qq.obj2url(obj))}else{if((Object.prototype.toString.call(obj)==="[object Array]")&&(typeof obj!=="undefined")){qq.each(obj,function(idx,val){add(val,idx)})}else{if((typeof obj!=="undefined")&&(obj!==null)&&(typeof obj==="object")){qq.each(obj,function(prop,val){add(val,prop)})}else{uristrings.push(encodeURIComponent(temp)+"="+encodeURIComponent(obj))}}}if(temp){return uristrings.join(prefix)}else{return uristrings.join(prefix).replace(/^&/,"").replace(/%20/g,"+")}};qq.obj2FormData=function(obj,formData,arrayKeyName){if(!formData){formData=new FormData()}qq.each(obj,function(key,val){key=arrayKeyName?arrayKeyName+"["+key+"]":key;if(qq.isObject(val)){qq.obj2FormData(val,formData,key)}else{if(qq.isFunction(val)){formData.append(key,val())}else{formData.append(key,val)}}});return formData};qq.obj2Inputs=function(obj,form){var input;if(!form){form=document.createElement("form")}qq.obj2FormData(obj,{append:function(key,val){input=document.createElement("input");input.setAttribute("name",key);input.setAttribute("value",val);form.appendChild(input)}});return form};qq.setCookie=function(name,value,days){var date=new Date(),expires="";if(days){date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString()}document.cookie=name+"="+value+expires+"; path=/"};qq.getCookie=function(name){var nameEQ=name+"=",ca=document.cookie.split(";"),cookie;qq.each(ca,function(idx,part){var cookiePart=part;while(cookiePart.charAt(0)==" "){cookiePart=cookiePart.substring(1,cookiePart.length)}if(cookiePart.indexOf(nameEQ)===0){cookie=cookiePart.substring(nameEQ.length,cookiePart.length);return false}});return cookie};qq.getCookieNames=function(regexp){var cookies=document.cookie.split(";"),cookieNames=[];qq.each(cookies,function(idx,cookie){cookie=qq.trimStr(cookie);var equalsIdx=cookie.indexOf("=");if(cookie.match(regexp)){cookieNames.push(cookie.substr(0,equalsIdx))}});return cookieNames};qq.deleteCookie=function(name){qq.setCookie(name,"",-1)};qq.areCookiesEnabled=function(){var randNum=Math.random()*100000,name="qqCookieTest:"+randNum;qq.setCookie(name,1);if(qq.getCookie(name)){qq.deleteCookie(name);return true}return false};qq.parseJson=function(json){if(window.JSON&&qq.isFunction(JSON.parse)){return JSON.parse(json)}else{return eval("("+json+")")}};qq.getExtension=function(filename){var extIdx=filename.lastIndexOf(".")+1;if(extIdx>0){return filename.substr(extIdx,filename.length-extIdx)}};qq.getFilename=function(blobOrFileInput){if(qq.isInput(blobOrFileInput)){return blobOrFileInput.value.replace(/.*(\/|\\)/,"")}else{if(qq.isFile(blobOrFileInput)){if(blobOrFileInput.fileName!==null&&blobOrFileInput.fileName!==undefined){return blobOrFileInput.fileName}}}return blobOrFileInput.name};qq.DisposeSupport=function(){var disposers=[];return{dispose:function(){var disposer;do{disposer=disposers.shift();if(disposer){disposer()}}while(disposer)},attach:function(){var args=arguments;this.addDisposer(qq(args[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(disposeFunction){disposers.push(disposeFunction)}}}}());(function(){qq.Error=function(a){this.message="[Fine Uploader "+qq.version+"] "+a};qq.Error.prototype=new Error()}());qq.version="4.4.0";qq.supportedFeatures=(function(){var t,u,e,s,r,w,h,l,o,b,q,d,k,j;function a(){var z=true,y;try{y=document.createElement("input");y.type="file";qq(y).hide();if(y.disabled){z=false}}catch(A){z=false}return z}function c(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)!==undefined}function f(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)!==undefined}function v(){if(window.XMLHttpRequest){var y=qq.createXhrInstance();return y.withCredentials!==undefined}return false}function m(){return window.XDomainRequest!==undefined}function x(){if(v()){return true}return m()}function n(){return document.createElement("input").webkitdirectory!==undefined}t=a();e=t&&qq.isXhrUploadSupported();u=e&&!qq.androidStock();s=e&&c();r=e&&qq.isFileChunkingSupported();w=e&&r&&qq.areCookiesEnabled();h=e&&f();l=t&&(window.postMessage!==undefined||e);b=v();o=m();q=x();d=n();k=e&&window.FileReader!==undefined;j=(function(){if(e){return !qq.androidStock()&&!(qq.ios()&&navigator.userAgent.indexOf("CriOS")>=0)}return false}());return{ajaxUploading:e,blobUploading:u,canDetermineSize:e,chunking:r,deleteFileCors:q,deleteFileCorsXdr:o,deleteFileCorsXhr:b,fileDrop:e,folderDrop:s,folderSelection:d,imagePreviews:k,imageValidation:k,itemSizeValidation:e,pause:r,progressBar:j,resume:w,scaling:k&&u,tiffPreviews:qq.safari(),uploading:t,uploadCors:l,uploadCustomHeaders:e,uploadNonMultipart:e,uploadViaPaste:h}}());qq.Promise=function(){var c,f,b=[],d=[],a=[],e=0;qq.extend(this,{then:function(j,h){if(e===0){if(j){b.push(j)}if(h){d.push(h)}}else{if(e===-1){h&&h.apply(null,f)}else{if(j){j.apply(null,c)}}}return this},done:function(h){if(e===0){a.push(h)}else{h.apply(null,f===undefined?c:f)}return this},success:function(){e=1;c=arguments;if(b.length){qq.each(b,function(h,j){j.apply(null,c)})}if(a.length){qq.each(a,function(h,j){j.apply(null,c)})}return this},failure:function(){e=-1;f=arguments;if(d.length){qq.each(d,function(h,j){j.apply(null,f)})}if(a.length){qq.each(a,function(h,j){j.apply(null,f)})}return this}})};qq.BlobProxy=function(b,a){qq.extend(this,{referenceBlob:b,create:function(){return a(b)}})};qq.UploadButton=function(f){var e=new qq.DisposeSupport(),c={element:null,multiple:false,acceptFiles:null,folders:false,name:"qqfile",onChange:function(h){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},a,d;qq.extend(c,f);d=qq.getUniqueId();function b(){var h=document.createElement("input");h.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,d);if(c.multiple){h.setAttribute("multiple","")}if(c.folders&&qq.supportedFeatures.folderSelection){h.setAttribute("webkitdirectory","")}if(c.acceptFiles){h.setAttribute("accept",c.acceptFiles)}h.setAttribute("type","file");h.setAttribute("name",c.name);qq(h).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});c.element.appendChild(h);e.attach(h,"change",function(){c.onChange(h)});e.attach(h,"mouseover",function(){qq(c.element).addClass(c.hoverClass)});e.attach(h,"mouseout",function(){qq(c.element).removeClass(c.hoverClass)});e.attach(h,"focus",function(){qq(c.element).addClass(c.focusClass)});e.attach(h,"blur",function(){qq(c.element).removeClass(c.focusClass)});if(window.attachEvent){h.setAttribute("tabIndex","-1")}return h}qq(c.element).css({position:"relative",overflow:"hidden",direction:"ltr"});a=b();qq.extend(this,{getInput:function(){return a},getButtonId:function(){return d},setMultiple:function(h){if(h!==c.multiple){if(h){a.setAttribute("multiple","")}else{a.removeAttribute("multiple")}}},setAcceptFiles:function(h){if(h!==c.acceptFiles){a.setAttribute("accept",h)}},reset:function(){if(a.parentNode){qq(a).remove()}qq(c.element).removeClass(c.focusClass);a=b()}})};qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";qq.UploadData=function(h){var f=[],d={},e={};function c(k){if(qq.isArray(k)){var j=[];qq.each(k,function(l,m){j.push(f[m])});return j}return f[k]}function b(k){if(qq.isArray(k)){var j=[];qq.each(k,function(l,m){j.push(f[d[m]])});return j}return f[d[k]]}function a(j){var l=[],k=[].concat(j);qq.each(k,function(m,o){var n=e[o];if(n!==undefined){qq.each(n,function(r,q){l.push(f[q])})}});return l}qq.extend(this,{addFile:function(m,k,l,j){j=j||qq.status.SUBMITTING;var n=f.push({name:k,originalName:k,uuid:m,size:l,status:j})-1;f[n].id=n;d[m]=n;if(e[j]===undefined){e[j]=[]}e[j].push(n);h.onStatusChange(n,null,j);return n},retrieve:function(j){if(qq.isObject(j)&&f.length){if(j.id!==undefined){return c(j.id)}else{if(j.uuid!==undefined){return b(j.uuid)}else{if(j.status){return a(j.status)}}}}else{return qq.extend([],f,true)}},reset:function(){f=[];d={};e={}},setStatus:function(m,k){var j=f[m].status,l=qq.indexOf(e[j],m);e[j].splice(l,1);f[m].status=k;if(e[k]===undefined){e[k]=[]}e[k].push(m);h.onStatusChange(m,j,k)},uuidChanged:function(l,j){var k=f[l].uuid;f[l].uuid=j;d[j]=l;delete d[k]},updateName:function(k,j){f[k].name=j},updateSize:function(k,j){f[k].size=j},setParentId:function(j,k){f[j].parentId=k},setGroupIds:function(k,j){f[k].groupIds=j}})};qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){qq.basePublicApi={log:function(a,b){if(this._options.debug&&(!b||b==="info")){qq.log("[Fine Uploader "+qq.version+"] "+a)}else{if(b&&b!=="info"){qq.log("[Fine Uploader "+qq.version+"] "+a,b)}}},setParams:function(a,b){this._paramsStore.set(a,b)},setDeleteFileParams:function(a,b){this._deleteFileParamsStore.set(a,b)},setEndpoint:function(a,b){this._endpointStore.set(a,b)},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){var a;if(this._storedIds.length===0){this._itemError("noFilesError")}else{while(this._storedIds.length){a=this._storedIds.shift();this._uploadFile(a)}}},clearStoredFiles:function(){this._storedIds=[]},retry:function(a){return this._manualRetry(a)},cancel:function(a){this._handler.cancel(a)},cancelAll:function(){var b=[],a=this;qq.extend(b,this._storedIds);qq.each(b,function(c,d){a.cancel(d)});this._handler.cancelAll()},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];qq.each(this._buttons,function(a,b){b.reset()});this._paramsStore.reset();this._endpointStore.reset();this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._totalProgress&&this._totalProgress.reset()},addFiles:function(a,h,f){var e=[],c,b,d;if(a){if(!qq.isFileList(a)){a=[].concat(a)}for(c=0;c<a.length;c+=1){b=a[c];if(qq.isFileOrInput(b)){if(qq.isInput(b)&&qq.supportedFeatures.ajaxUploading){for(d=0;d<b.files.length;d++){this._handleNewFile(b.files[d],e)}}else{this._handleNewFile(b,e)}}else{this.log(b+" is not a File or INPUT element!  Ignoring!","warn")}}this.log("Received "+e.length+" files or inputs.");this._prepareItemsForUpload(e,h,f)}},addBlobs:function(d,f,e){if(!qq.supportedFeatures.blobUploading){throw new qq.Error("Blob uploading is not supported in this browser!")}if(d){var c=[].concat(d),b=[],a=this;qq.each(c,function(h,k){var j;if(qq.isBlob(k)&&!qq.isFileOrInput(k)){j={blob:k,name:a._options.blobs.defaultName}}else{if(qq.isObject(k)&&k.blob&&k.name){j=k}else{a.log("addBlobs: entry at index "+h+" is not a Blob or a BlobData object","error")}}j&&a._handleNewFile(j,b)});this._prepareItemsForUpload(b,f,e)}else{this.log("undefined or non-array parameter passed into addBlobs","error")}},getUuid:function(a){return this._uploadData.retrieve({id:a}).uuid},setUuid:function(b,a){return this._uploadData.uuidChanged(b,a)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(a){return this._uploadData.retrieve({id:a}).size},getName:function(a){return this._uploadData.retrieve({id:a}).name},setName:function(b,a){this._uploadData.updateName(b,a)},getFile:function(a){return this._handler.getFile(a)||null},deleteFile:function(a){return this._onSubmitDelete(a)},setDeleteFileEndpoint:function(a,b){this._deleteFileEndpointStore.set(a,b)},doesExist:function(a){return this._handler.isValid(a)},getUploads:function(a){return this._uploadData.retrieve(a)},getButton:function(a){return this._getButton(this._buttonIdsForFileIds[a])},drawThumbnail:function(b,a,f,c){if(this._imageGenerator){var e=this._thumbnailUrls[b],d={scale:f>0,maxSize:f>0?f:null};if(!c&&qq.supportedFeatures.imagePreviews){e=this.getFile(b)}if(e==null){return new qq.Promise().failure(a,"File or URL not found.")}return this._imageGenerator.generate(e,a,d)}},pauseUpload:function(b){var a=this._uploadData.retrieve({id:b});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false}if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],a.status)>=0){if(this._handler.pause(b)){this._uploadData.setStatus(b,qq.status.PAUSED);return true}else{qq.log(qq.format("Unable to pause file ID {} ({}).",b,this.getName(b)),"error")}}else{qq.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",b,this.getName(b)),"error")}return false},continueUpload:function(b){var a=this._uploadData.retrieve({id:b});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false}if(a.status===qq.status.PAUSED){qq.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",b,this.getName(b)));this._uploadFile(b);return true}else{qq.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",b,this.getName(b)),"error")}return false},getRemainingAllowedItems:function(){var a=this._options.validation.itemLimit;if(a>0){return this._options.validation.itemLimit-this._netUploadedOrQueued}return null},scaleImage:function(c,b){var a=this;return qq.Scaler.prototype.scaleImage(c,b,{log:qq.bind(a.log,a),getFile:qq.bind(a.getFile,a),uploadData:a._uploadData})},getParentId:function(c){var a=this.getUploads({id:c}),b=null;if(a){if(a.parentId!==undefined){b=a.parentId}}return b}};qq.basePrivateApi={_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));if(this._formSupport&&this._formSupport.attachedToForm){this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject);this._options.autoUpload=this._formSupport.newAutoUpload;if(this._formSupport.newEndpoint){this._options.request.endpoint=this._formSupport.newEndpoint}}else{this._paramsStore=this._createStore(this._options.request.params)}},_uploadFile:function(a){if(!this._handler.upload(a)){this._uploadData.setStatus(a,qq.status.QUEUED)}},_refreshSessionData:function(){var a=this,b=this._options.session;if(qq.Session&&this._options.session.endpoint!=null){if(!this._session){qq.extend(b,this._options.cors);b.log=qq.bind(this.log,this);b.addFileRecord=qq.bind(this._addCannedFile,this);this._session=new qq.Session(b)}setTimeout(function(){a._session.refresh().then(function(d,c){a._options.callbacks.onSessionRequestComplete(d,true,c)},function(d,c){a._options.callbacks.onSessionRequestComplete(d,false,c)})},0)}},_addCannedFile:function(a){var b=this._uploadData.addFile(a.uuid,a.name,a.size,qq.status.UPLOAD_SUCCESSFUL);a.deleteFileEndpoint&&this.setDeleteFileEndpoint(a.deleteFileEndpoint,b);a.deleteFileParams&&this.setDeleteFileParams(a.deleteFileParams,b);if(a.thumbnailUrl){this._thumbnailUrls[b]=a.thumbnailUrl}this._netUploaded++;this._netUploadedOrQueued++;return b},_handleNewFile:function(d,j){var a=this,h=qq.getUniqueId(),c=-1,b=qq.getFilename(d),f=d.blob||d,e=this._customNewFileHandler?this._customNewFileHandler:qq.bind(a._handleNewFileGeneric,a);if(f.size>=0){c=f.size}e(f,b,h,c,j,this._options.request.uuidName,{uploadData:a._uploadData,paramsStore:a._paramsStore,addFileToHandler:function(l,k){a._handler.add(l,k);a._netUploadedOrQueued++;a._trackButton(l)}})},_handleNewFileGeneric:function(d,b,e,c,a){var f=this._uploadData.addFile(e,b,c);this._handler.add(f,d);this._trackButton(f);this._netUploadedOrQueued++;a.push({id:f,file:d})},_trackButton:function(b){var a;if(qq.supportedFeatures.ajaxUploading){a=this._handler.getFile(b).qqButtonId}else{a=this._getButtonId(this._handler.getInput(b))}if(a){this._buttonIdsForFileIds[b]=a}},_generateExtraButtonSpecs:function(){var a=this;this._extraButtonSpecs={};qq.each(this._options.extraButtons,function(c,f){var b=f.multiple,d=qq.extend({},a._options.validation,true),e=qq.extend({},f);if(b===undefined){b=a._options.multiple}if(e.validation){qq.extend(d,f.validation,true)}qq.extend(e,{multiple:b,validation:d},true);a._initExtraButton(e)})},_initExtraButton:function(a){var b=this._createUploadButton({element:a.element,multiple:a.multiple,accept:a.validation.acceptFiles,folders:a.folders,allowedExtensions:a.validation.allowedExtensions});this._extraButtonSpecs[b.getButtonId()]=a},_getButtonId:function(b){var a,c,d=b;if(d instanceof qq.BlobProxy){d=d.referenceBlob}if(d&&!qq.isBlob(d)){if(qq.isFile(d)){return d.qqButtonId}else{if(d.tagName.toLowerCase()==="input"&&d.type.toLowerCase()==="file"){return d.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}}a=d.getElementsByTagName("input");qq.each(a,function(e,f){if(f.getAttribute("type")==="file"){c=f;return false}});if(c){return c.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}}},_annotateWithButtonId:function(a,b){if(qq.isFile(a)){a.qqButtonId=this._getButtonId(b)}},_getButton:function(b){var a=this._extraButtonSpecs[b];if(a){return a.element}else{if(b===this._defaultButtonId){return this._options.button}}},_handleCheckedCallback:function(c){var b=this,a=c.callback();if(a instanceof qq.Promise){this.log(c.name+" - waiting for "+c.name+" promise to be fulfilled for "+c.identifier);return a.then(function(d){b.log(c.name+" promise success for "+c.identifier);c.onSuccess(d)},function(){if(c.onFailure){b.log(c.name+" promise failure for "+c.identifier);c.onFailure()}else{b.log(c.name+" promise failure for "+c.identifier)}})}if(a!==false){c.onSuccess(a)}else{if(c.onFailure){this.log(c.name+" - return value was 'false' for "+c.identifier+".  Invoking failure callback.");c.onFailure()}else{this.log(c.name+" - return value was 'false' for "+c.identifier+".  Will not proceed.")}}return a},_createUploadButton:function(c){var b=this,f=c.accept||this._options.validation.acceptFiles,a=c.allowedExtensions||this._options.validation.allowedExtensions;function d(){if(qq.supportedFeatures.ajaxUploading){if(qq.ios7()&&b._isAllowedExtension(a,".mov")){return false}if(c.multiple===undefined){return b._options.multiple}return c.multiple}return false}var e=new qq.UploadButton({element:c.element,folders:c.folders,name:this._options.request.inputName,multiple:d(),acceptFiles:f,onChange:function(h){b._onInputChange(h)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});this._disposeSupport.addDisposer(function(){e.dispose()});b._buttons.push(e);return e},_createUploadHandler:function(c,d){var a=this,b={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(a.log,a),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(j,f,e,h){a._onProgress(j,f,e,h);a._options.callbacks.onProgress(j,f,e,h)},onComplete:function(l,h,e,k){var f=a.getUploads({id:l}).status;if(f===qq.status.UPLOAD_SUCCESSFUL||f===qq.status.UPLOAD_FAILED){return}var j=a._onComplete(l,h,e,k);if(j instanceof qq.Promise){j.done(function(){a._options.callbacks.onComplete(l,h,e,k)})}else{a._options.callbacks.onComplete(l,h,e,k)}},onCancel:function(f,e){return a._handleCheckedCallback({name:"onCancel",callback:qq.bind(a._options.callbacks.onCancel,a,f,e),onSuccess:qq.bind(a._onCancel,a,f,e),identifier:f})},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(f,e){a._onUpload(f,e);a._options.callbacks.onUpload(f,e)},onUploadChunk:function(h,f,e){a._onUploadChunk(h,e);a._options.callbacks.onUploadChunk(h,f,e)},onUploadChunkSuccess:function(j,f,e,h){a._options.callbacks.onUploadChunkSuccess.apply(a,arguments)},onResume:function(h,f,e){return a._options.callbacks.onResume(h,f,e)},onAutoRetry:function(j,e,h,f){return a._onAutoRetry.apply(a,arguments)},onUuidChanged:function(f,e){a.log("Server requested UUID change from '"+a.getUuid(f)+"' to '"+e+"'");a.setUuid(f,e)},getName:qq.bind(a.getName,a),getUuid:qq.bind(a.getUuid,a),getSize:qq.bind(a.getSize,a),setSize:qq.bind(a._setSize,a),getDataByUuid:function(e){return a.getUploads({uuid:e})},isQueued:function(f){var e=a.getUploads({id:f}).status;return e===qq.status.QUEUED||e===qq.status.SUBMITTED||e===qq.status.UPLOAD_RETRYING||e===qq.status.PAUSED},getIdsInGroup:function(e){return a.getUploads({id:e}).groupIds}};qq.each(this._options.request,function(f,e){b[f]=e});if(c){qq.each(c,function(e,f){b[e]=f})}return new qq.UploadHandler(b,d)},_createDeleteHandler:function(){var a=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:qq.bind(a.log,a),onDelete:function(b){a._onDelete(b);a._options.callbacks.onDelete(b)},onDeleteComplete:function(d,b,c){a._onDeleteComplete(d,b,c);a._options.callbacks.onDeleteComplete(d,b,c)}})},_createPasteHandler:function(){var a=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(a.log,a),pasteReceived:function(b){a._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(a._options.callbacks.onPasteReceived,a,b),onSuccess:qq.bind(a._handlePasteSuccess,a,b),identifier:"pasted image"})}}})},_createUploadDataTracker:function(){var a=this;return new qq.UploadData({getName:function(b){return a.getName(b)},getUuid:function(b){return a.getUuid(b)},getSize:function(b){return a.getSize(b)},onStatusChange:function(d,b,c){a._onUploadStatusChange(d,b,c);a._options.callbacks.onStatusChange(d,b,c);a._maybeAllComplete(d,c);if(a._totalProgress){setTimeout(function(){a._totalProgress.onStatusChange(d,b,c)},0)}}})},_onUploadStatusChange:function(c,a,b){if(b===qq.status.PAUSED){clearTimeout(this._retryTimeouts[c])}},_handlePasteSuccess:function(a,c){var d=a.type.split("/")[1],b=c;if(b==null){b=this._options.paste.defaultName}b+="."+d;this.addBlobs({name:b,blob:a})},_preventLeaveInProgress:function(){var a=this;this._disposeSupport.attach(window,"beforeunload",function(b){if(a.getInProgress()){b=b||window.event;b.returnValue=a._options.messages.onLeave;return a._options.messages.onLeave}})},_onSubmit:function(b,a){},_onProgress:function(d,b,a,c){this._totalProgress&&this._totalProgress.onIndividualProgress(d,a,c)},_onTotalProgress:function(a,b){this._options.callbacks.onTotalProgress(a,b)},_onComplete:function(d,b,a,c){if(!a.success){this._netUploadedOrQueued--;this._uploadData.setStatus(d,qq.status.UPLOAD_FAILED);if(a[this._options.retry.preventRetryResponseProperty]===true){this._preventRetries[d]=true}}else{if(a.thumbnailUrl){this._thumbnailUrls[d]=a.thumbnailUrl}this._netUploaded++;this._uploadData.setStatus(d,qq.status.UPLOAD_SUCCESSFUL)}this._maybeParseAndSendUploadError(d,b,a,c);return a.success?true:false},_maybeAllComplete:function(d,a){var b=this,c=this._getNotFinished();if(a===qq.status.UPLOAD_SUCCESSFUL){this._succeededSinceLastAllComplete.push(d)}else{if(a===qq.status.UPLOAD_FAILED){this._failedSinceLastAllComplete.push(d)}}if(c===0&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)){setTimeout(function(){b._onAllComplete(b._succeededSinceLastAllComplete,b._failedSinceLastAllComplete)},0)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_onAllComplete:function(b,a){this._totalProgress&&this._totalProgress.onAllComplete(b,a,this._preventRetries);this._options.callbacks.onAllComplete(qq.extend([],b),qq.extend([],a));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onCancel:function(c,a){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[c]);var b=qq.indexOf(this._storedIds,c);if(!this._options.autoUpload&&b>=0){this._storedIds.splice(b,1)}this._uploadData.setStatus(c,qq.status.CANCELED)},_isDeletePossible:function(){if(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled){return false}if(this._options.cors.expected){if(qq.supportedFeatures.deleteFileCorsXhr){return true}if(qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr){return true}return false}return true},_onSubmitDelete:function(e,b,d){var c=this.getUuid(e),a;if(b){a=qq.bind(b,this,e,c,d)}if(this._isDeletePossible()){this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:a||qq.bind(this._deleteHandler.sendDelete,this,e,c,d),identifier:e});return true}else{this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn");return false}},_onDelete:function(a){this._uploadData.setStatus(a,qq.status.DELETING)},_onDeleteComplete:function(d,a,c){var b=this.getName(d);if(c){this._uploadData.setStatus(d,qq.status.DELETE_FAILED);this.log("Delete request for '"+b+"' has failed.","error");if(a.withCredentials===undefined){this._options.callbacks.onError(d,b,"Delete request failed",a)}else{this._options.callbacks.onError(d,b,"Delete request failed with response code "+a.status,a)}}else{this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(d);this._uploadData.setStatus(d,qq.status.DELETED);this.log("Delete request for '"+b+"' has succeeded.")}},_onUploadPrep:function(a){},_onUpload:function(b,a){this._uploadData.setStatus(b,qq.status.UPLOADING)},_onUploadChunk:function(b,a){},_onInputChange:function(a){var b;if(qq.supportedFeatures.ajaxUploading){for(b=0;b<a.files.length;b++){this._annotateWithButtonId(a.files[b],a)}this.addFiles(a.files)}else{if(a.value.length>0){this.addFiles(a)}}qq.each(this._buttons,function(c,d){d.reset()})},_onBeforeAutoRetry:function(b,a){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+a+"...")},_onAutoRetry:function(f,b,e,c,d){var a=this;a._preventRetries[f]=e[a._options.retry.preventRetryResponseProperty];if(a._shouldAutoRetry(f,b,e)){a._maybeParseAndSendUploadError.apply(a,arguments);a._options.callbacks.onAutoRetry(f,b,a._autoRetries[f]+1);a._onBeforeAutoRetry(f,b);a._retryTimeouts[f]=setTimeout(function(){a.log("Retrying "+b+"...");a._autoRetries[f]++;a._uploadData.setStatus(f,qq.status.UPLOAD_RETRYING);if(d){d(f)}else{a._handler.retry(f)}},a._options.retry.autoAttemptDelay*1000);return true}},_shouldAutoRetry:function(d,a,c){var b=this._uploadData.retrieve({id:d});if(!this._preventRetries[d]&&this._options.retry.enableAuto&&b.status!==qq.status.PAUSED){if(this._autoRetries[d]===undefined){this._autoRetries[d]=0}return this._autoRetries[d]<this._options.retry.maxAutoAttempts}return false},_onBeforeManualRetry:function(c){var a=this._options.validation.itemLimit;if(this._preventRetries[c]){this.log("Retries are forbidden for id "+c,"warn");return false}else{if(this._handler.isValid(c)){var b=this.getName(c);if(this._options.callbacks.onManualRetry(c,b)===false){return false}if(a>0&&this._netUploadedOrQueued+1>a){this._itemError("retryFailTooManyItems");return false}this.log("Retrying upload for '"+b+"' (id: "+c+")...");return true}else{this.log("'"+c+"' is not a valid file ID","error");return false}}},_manualRetry:function(b,a){if(this._onBeforeManualRetry(b)){this._netUploadedOrQueued++;this._uploadData.setStatus(b,qq.status.UPLOAD_RETRYING);if(a){a(b)}else{this._handler.retry(b)}return true}},_maybeParseAndSendUploadError:function(e,c,b,d){if(!b.success){if(d&&d.status!==200&&!b.error){this._options.callbacks.onError(e,c,"XHR returned response code "+d.status,d)}else{var a=b.error?b.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,c,a,d)}}},_prepareItemsForUpload:function(a,f,e){if(a.length===0){this._itemError("noFilesError");return}var d=this._getValidationDescriptors(a),c=this._getButtonId(a[0].file),b=this._getButton(c);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,d,b),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,d,a,f,e,b),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,a),identifier:"batch validation"})},_upload:function(d,c,b){var a=this.getName(d);if(c){this.setParams(c,d)}if(b){this.setEndpoint(b,d)}this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,d,a),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,d,a),onFailure:qq.bind(this._fileOrBlobRejected,this,d,a),identifier:d})},_onSubmitCallbackSuccess:function(b,a){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(b,qq.status.SUBMITTED);this._onSubmitted.apply(this,arguments);this._options.callbacks.onSubmitted.apply(this,arguments);if(this._options.autoUpload){this._uploadFile(b)}else{this._storeForLater(b)}},_onSubmitted:function(a){},_storeForLater:function(a){this._storedIds.push(a)},_onValidateBatchCallbackSuccess:function(f,a,j,h,e){var d,c=this._options.validation.itemLimit,b=this._netUploadedOrQueued;if(c===0||b<=c){if(a.length>0){this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,f[0],e),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,a,0,j,h),onFailure:qq.bind(this._onValidateCallbackFailure,this,a,0,j,h),identifier:"Item '"+a[0].file.name+"', size: "+a[0].file.size})}else{this._itemError("noFilesError")}}else{this._onValidateBatchCallbackFailure(a);d=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,b).replace(/\{itemLimit\}/g,c);this._batchError(d)}},_onValidateBatchCallbackFailure:function(b){var a=this;qq.each(b,function(c,d){a._fileOrBlobRejected(d.id)})},_onValidateCallbackSuccess:function(d,e,h,f){var c=this,a=e+1,b=this._getValidationDescriptor(d[e]);this._validateFileOrBlobData(d[e],b).then(function(){c._upload(d[e].id,h,f);c._maybeProcessNextItemAfterOnValidateCallback(true,d,a,h,f)},function(){c._maybeProcessNextItemAfterOnValidateCallback(false,d,a,h,f)})},_onValidateCallbackFailure:function(b,c,e,d){var a=c+1;this._fileOrBlobRejected(b[0].id,b[0].file.name);this._maybeProcessNextItemAfterOnValidateCallback(false,b,a,e,d)},_maybeProcessNextItemAfterOnValidateCallback:function(d,b,c,f,e){var a=this;if(b.length>c){if(d||!this._options.validation.stopOnFirstInvalidFile){setTimeout(function(){var h=a._getValidationDescriptor(b[c]);a._handleCheckedCallback({name:"onValidate",callback:qq.bind(a._options.callbacks.onValidate,a,b[c].file),onSuccess:qq.bind(a._onValidateCallbackSuccess,a,b,c,f,e),onFailure:qq.bind(a._onValidateCallbackFailure,a,b,c,f,e),identifier:"Item '"+h.name+"', size: "+h.size})},0)}else{if(!d){for(;c<b.length;c++){a._fileOrBlobRejected(b[c].id)}}}}},_validateFileOrBlobData:function(f,d){var j=this,c=(function(){if(f.file instanceof qq.BlobProxy){return f.file.referenceBlob}return f.file}()),a=d.name,k=d.size,e=this._getButtonId(f.file),b=this._getValidationBase(e),h=new qq.Promise();h.then(function(){},function(){j._fileOrBlobRejected(f.id,a)});if(qq.isFileOrInput(c)&&!this._isAllowedExtension(b.allowedExtensions,a)){this._itemError("typeError",a,c);return h.failure()}if(k===0){this._itemError("emptyError",a,c);return h.failure()}if(k&&b.sizeLimit&&k>b.sizeLimit){this._itemError("sizeError",a,c);return h.failure()}if(k&&k<b.minSizeLimit){this._itemError("minSizeError",a,c);return h.failure()}if(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(c)){new qq.ImageValidation(c,qq.bind(j.log,j)).validate(b.image).then(h.success,function(l){j._itemError(l+"ImageError",a,c);h.failure()})}else{h.success()}return h},_fileOrBlobRejected:function(a){this._netUploadedOrQueued--;this._uploadData.setStatus(a,qq.status.REJECTED)},_itemError:function(c,l,m){var n=this._options.messages[c],d=[],k=[].concat(l),b=k[0],f=this._getButtonId(m),e=this._getValidationBase(f),j,h;function a(o,q){n=n.replace(o,q)}qq.each(e.allowedExtensions,function(o,q){if(qq.isString(q)){d.push(q)}});j=d.join(", ").toLowerCase();a("{file}",this._options.formatFileName(b));a("{extensions}",j);a("{sizeLimit}",this._formatSize(e.sizeLimit));a("{minSizeLimit}",this._formatSize(e.minSizeLimit));h=n.match(/(\{\w+\})/g);if(h!==null){qq.each(h,function(o,q){a(q,k[o])})}this._options.callbacks.onError(null,b,n,undefined);return n},_batchError:function(a){this._options.callbacks.onError(null,null,a,undefined)},_isAllowedExtension:function(b,c){var a=false;if(!b.length){return true}qq.each(b,function(d,f){if(qq.isString(f)){var e=new RegExp("\\."+f+"$","i");if(c.match(e)!=null){a=true;return false}}});return a},_formatSize:function(a){var b=-1;do{a=a/1000;b++}while(a>999);return Math.max(a,0.1).toFixed(1)+this._options.text.sizeSymbols[b]},_wrapCallbacks:function(){var a,b;a=this;b=function(e,j,d){var h;try{return j.apply(a,d)}catch(f){h=f.message||f.toString();a.log("Caught exception in '"+e+"' callback - "+h,"error")}};for(var c in this._options.callbacks){(function(){var e,d;e=c;d=a._options.callbacks[e];a._options.callbacks[e]=function(){return b(e,d,arguments)}}())}},_getValidationDescriptors:function(b){var a=this,c=[];qq.each(b,function(d,e){c.push(a._getValidationDescriptor(e))});return c},_getValidationDescriptor:function(a){if(a.file instanceof qq.BlobProxy){return{name:qq.getFilename(a.file.referenceBlob),size:a.file.referenceBlob.size}}return{name:this.getUploads({id:a.id}).name,size:this.getUploads({id:a.id}).size}},_createStore:function(a,j){var b={},c=a,f={},h=function(k){if(qq.isObject(k)){return qq.extend({},k)}return k},d=function(){if(qq.isFunction(j)){return j()}return j},e=function(l,k){if(j&&qq.isObject(k)){qq.extend(k,d())}if(f[l]){qq.extend(k,f[l])}};return{set:function(k,l){if(l==null){b={};c=h(k)}else{b[l]=h(k)}},get:function(l){var k;if(l!=null&&b[l]){k=b[l]}else{k=h(c)}e(l,k);return h(k)},addReadOnly:function(l,k){if(qq.isObject(b)){f[l]=f[l]||{};qq.extend(f[l],k)}},remove:function(k){return delete b[k]},reset:function(){b={};f={};c=a}}},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var d="image/*;capture=camera",b=this._options.camera.button,c=b?this._getButtonId(b):this._defaultButtonId,a=this._options;if(c&&c!==this._defaultButtonId){a=this._extraButtonSpecs[c]}a.multiple=false;if(a.validation.acceptFiles===null){a.validation.acceptFiles=d}else{a.validation.acceptFiles+=","+d}qq.each(this._buttons,function(e,f){if(f.getButtonId()===c){f.setMultiple(a.multiple);f.setAcceptFiles(a.acceptFiles);return false}})}},_getValidationBase:function(b){var a=this._extraButtonSpecs[b];return a?a.validation:this._options.validation},_setSize:function(b,a){this._uploadData.updateSize(b,a);this._totalProgress&&this._totalProgress.onNewSize(b)}}}());(function(){qq.FineUploaderBasic=function(b){var a=this;this._options={debug:false,button:null,multiple:true,maxConnections:3,disableCancelForFormUploads:false,autoUpload:true,request:{endpoint:"/server/upload",params:{},paramsInBody:true,customHeaders:{},forceMultipart:true,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:true,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(d,c){},onSubmitted:function(d,c){},onComplete:function(f,c,e,d){},onAllComplete:function(d,c){},onCancel:function(d,c){},onUpload:function(d,c){},onUploadChunk:function(e,d,c){},onUploadChunkSuccess:function(f,c,e,d){},onResume:function(e,d,c){},onProgress:function(f,d,c,e){},onTotalProgress:function(c,d){},onError:function(f,c,d,e){},onAutoRetry:function(e,c,d){},onManualRetry:function(d,c){},onValidateBatch:function(c){},onValidate:function(c){},onSubmitDelete:function(c){},onDelete:function(c){},onDeleteComplete:function(e,c,d){},onPasteReceived:function(c){},onStatusChange:function(e,c,d){},onSessionRequestComplete:function(d,e,c){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled."},retry:{enableAuto:false,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:false,partSize:2000000,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"}},resume:{enabled:false,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(c){if(c!==undefined&&c.length>33){c=c.slice(0,19)+"..."+c.slice(-14)}return c},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:false,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:false,sendCredentials:false,allowXdr:false},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:false,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:true},form:{element:"qq-form",autoUpload:false,interceptSubmit:true},scaling:{sendOriginal:true,orient:true,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:false,sizes:[]}};qq.extend(this._options,b,true);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler();if(this._options.button){this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()}this._generateExtraButtonSpecs();this._handleCameraAccess();if(this._options.paste.targetElement){if(qq.PasteSupport){this._pasteHandler=this._createPasteHandler()}else{qq.log("Paste support module not found","info")}}this._preventLeaveInProgress();this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=(qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this)))||{};if(this._scaler.enabled){this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)}if(qq.TotalProgress&&qq.supportedFeatures.progressBar){this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(d){var c=a._uploadData.retrieve({id:d});return(c&&c.size)||0})}};qq.FineUploaderBasic.prototype=qq.basePublicApi;qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}());qq.AjaxRequester=function(n){var j,l,r=[],v={},c={validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:true,successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204],GET:[200]},cors:{expected:false,sendCredentials:false},log:function(o,B){},onSend:function(o){},onComplete:function(C,o,B){},onProgress:null};qq.extend(c,n);j=c.log;if(qq.indexOf(c.validMethods,c.method)<0){throw new Error("'"+c.method+"' is not a supported method for this type of request!")}function b(){return qq.indexOf(["GET","POST","HEAD"],c.method)>=0}function q(B){var o=false;qq.each(o,function(C,D){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],D)<0){o=true;return false}});return o}function e(o){return c.cors.expected&&o.withCredentials===undefined}function k(){var o;if(window.XMLHttpRequest||window.ActiveXObject){o=qq.createXhrInstance();if(o.withCredentials===undefined){o=new XDomainRequest()}}return o}function d(C,B){var o=v[C].xhr;if(!o&&!B){if(c.cors.expected){o=k()}else{o=qq.createXhrInstance()}v[C].xhr=o}return o}function a(D){var B=qq.indexOf(r,D),o=c.maxConnections,C;delete v[D];r.splice(B,1);if(r.length>=o&&B<o){C=r[o-1];x(C)}}function w(E,o){var C=d(E),D=c.method,B=o===true;a(E);if(B){j(D+" request for "+E+" has failed","error")}else{if(!e(C)&&!u(C.status)){B=true;j(D+" request for "+E+" has failed - response code "+C.status,"error")}}c.onComplete(E,C,B)}function t(D){var o=v[D].additionalParams,C=c.mandatedParams,B;if(c.paramsStore.get){B=c.paramsStore.get(D)}if(o){qq.each(o,function(E,F){B=B||{};B[E]=F})}if(C){qq.each(C,function(E,F){B=B||{};B[E]=F})}return B}function x(F){var D=d(F),E=c.method,C=t(F),B=v[F].payload,o;c.onSend(F);o=A(F,C);if(e(D)){D.onload=m(F);D.onerror=f(F)}else{D.onreadystatechange=y(F)}h(F);D.open(E,o,true);if(c.cors.expected&&c.cors.sendCredentials&&!e(D)){D.withCredentials=true}s(F);j("Sending "+E+" request for "+F);if(B){D.send(B)}else{if(l||!C){D.send()}else{if(C&&c.contentType&&c.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0){D.send(qq.obj2url(C,""))}else{if(C&&c.contentType&&c.contentType.toLowerCase().indexOf("application/json")>=0){D.send(JSON.stringify(C))}else{D.send(C)}}}}return D}function A(D,C){var B=c.endpointStore.get(D),o=v[D].addToPath;if(o!=undefined){B+="/"+o}if(l&&C){return qq.obj2url(C,B)}else{return B}}function y(o){return function(){if(d(o).readyState===4){w(o)}}}function h(B){var o=c.onProgress;if(o){d(B).upload.onprogress=function(C){if(C.lengthComputable){o(B,C.loaded,C.total)}}}}function m(o){return function(){w(o)}}function f(o){return function(){w(o,true)}}function s(F){var C=d(F),B=c.customHeaders,E=v[F].additionalHeaders||{},D=c.method,o={};if(!e(C)){if(c.allowXRequestedWithAndCacheControl){if(!c.cors.expected||(!b()||q(B))){C.setRequestHeader("X-Requested-With","XMLHttpRequest");C.setRequestHeader("Cache-Control","no-cache")}}if(c.contentType&&(D==="POST"||D==="PUT")){C.setRequestHeader("Content-Type",c.contentType)}qq.extend(o,qq.isFunction(B)?B(F):B);qq.extend(o,E);qq.each(o,function(G,H){C.setRequestHeader(G,H)})}}function u(o){return qq.indexOf(c.successfulResponseCodes[c.method],o)>=0}function z(F,D,B,E,C){v[F]={addToPath:D,additionalParams:B,additionalHeaders:E,payload:C};var o=r.push(F);if(o<=c.maxConnections){return x(F)}}l=c.method==="GET"||c.method==="DELETE";qq.extend(this,{initTransport:function(F){var C,E,D,B,o;return{withPath:function(G){C=G;return this},withParams:function(G){E=G;return this},withHeaders:function(G){D=G;return this},withPayload:function(G){B=G;return this},withCacheBuster:function(){o=true;return this},send:function(){if(o&&qq.indexOf(["GET","DELETE"],c.method)>=0){E.qqtimestamp=new Date().getTime()}return z(F,C,E,D,B)}}},canceled:function(o){a(o)}})};qq.UploadHandler=function(b,e){var m=[],s,t,j,r;t={debug:false,forceMultipart:true,paramsInBody:false,paramsStore:{},endpointStore:{},filenameParam:"qqfilename",cors:{expected:false,sendCredentials:false},maxConnections:3,uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",chunking:{enabled:false,partSize:2000000,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:false,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(o,u){},onProgress:function(w,v,o,u){},onComplete:function(w,v,o,u){},onCancel:function(u,o){},onUploadPrep:function(o){},onUpload:function(u,o){},onUploadChunk:function(v,u,o){},onUploadChunkSuccess:function(w,u,o,v){},onAutoRetry:function(w,v,o,u){},onResume:function(v,u,o){},onUuidChanged:function(u,o){},getName:function(o){},setSize:function(u,o){},isQueued:function(o){},getIdsInGroup:function(o){}};qq.extend(t,b);s=(function(){var o={};o[t.preventRetryParam]=true;return o}());j=t.log;function f(o){return(r.getProxy&&r.getProxy(o))||(r.getFile&&r.getFile(o))}function l(o){return !!r.getFile(o)}function a(o){return t.isQueued(o)}function k(v){var u=t.getIdsInGroup(v),o=false;if(u&&u.length){j("Maybe ready to upload grouped file "+v);qq.each(u,function(w,x){if(a(x)&&l(x)){o=x===v;r.upload(x)}else{if(a(x)){return false}}})}else{o=true;r.upload(v)}return o}function h(u,o){if(o&&!r.getFile(u)&&o instanceof qq.BlobProxy){t.onUploadPrep(u);j("Attempting to generate a blob on-demand for "+u);o.create().then(function(v){j("Generated an on-demand blob for "+u);r.updateBlob(u,v);t.setSize(u,v.size);r.reevaluateChunking(u);k(u)},function(v){var w={};if(v){w.error=v}j(qq.format("Failed to generate scaled version for ID {}.  Error message: {}.",u,v),"error");t.onComplete(u,t.getName(u),qq.extend(w,s),null);k(u);n(u)})}else{return k(u)}return false}function d(u){var o=f(u);if(o){return h(u,o)}else{r.upload(u);return true}}function n(w){var u=qq.indexOf(m,w),o=t.maxConnections,v;if(f(w) instanceof qq.BlobProxy){j("Generated blob upload has ended for "+w+", disposing generated blob.");delete r._getFileState(w).file}if(u>=0){m.splice(u,1);if(m.length>=o&&u<o){v=m[o-1];d(v)}}}function c(o){j("Cancelling "+o);t.paramsStore.remove(o);n(o)}function q(){var u=e?qq[e]:qq,o=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";r=new u["UploadHandler"+o](t,{onUploadComplete:n,onUuidChanged:t.onUuidChanged,getName:t.getName,getUuid:t.getUuid,getSize:t.getSize,getDataByUuid:t.getDataByUuid,log:j})}qq.extend(this,{add:function(u,o){return r.add.apply(this,arguments)},upload:function(u){var o=m.push(u);if(o<=t.maxConnections){return d(u)}return false},retry:function(w){var o=qq.indexOf(m,w),u=f(w),v=u&&u instanceof qq.BlobProxy;if(o>=0){return v?d(w):r.upload(w,true)}else{return this.upload(w)}},cancel:function(u){var o=r.cancel(u);if(o instanceof qq.Promise){o.then(function(){c(u)})}else{if(o!==false){c(u)}}},cancelAll:function(){var o=this,u=[];qq.extend(u,m);qq.each(u,function(v,w){o.cancel(w)});m=[]},getFile:function(o){if(r.getProxy&&r.getProxy(o)){return r.getProxy(o).referenceBlob}return r.getFile&&r.getFile(o)},isProxied:function(o){return !!(r.getProxy&&r.getProxy(o))},getInput:function(o){if(r.getInput){return r.getInput(o)}},reset:function(){j("Resetting upload handler");this.cancelAll();m=[];r.reset()},expunge:function(o){if(this.isValid(o)){return r.expunge(o)}},isValid:function(o){return r.isValid(o)},getResumableFilesData:function(){if(r.getResumableFilesData){return r.getResumableFilesData()}return[]},getThirdPartyFileId:function(o){if(r.getThirdPartyFileId&&this.isValid(o)){return r.getThirdPartyFileId(o)}},pause:function(o){if(this.isResumable(o)&&r.pause&&this.isValid(o)&&r.pause(o)){n(o);return true}},isResumable:function(o){return !!r.isResumable&&r.isResumable(o)}});q()};qq.AbstractUploadHandlerForm=function(k){var c=k.options,a=this,t=k.proxy,s=qq.getUniqueId(),b={},m={},w={},q=c.isCors,v={},l=c.inputName,n=t.onCancel,u=t.onUuidChanged,o=t.getName,h=t.getUuid,j=t.log,x=new qq.WindowReceiveMessage({log:j});function f(z){delete m[z];delete v[z];if(q){clearTimeout(w[z]);delete w[z];x.stopReceivingMessages(z)}var y=document.getElementById(a._getIframeName(z));if(y){y.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;");qq(y).remove()}}function r(A,C){var B=A.id,y=d(B),z=h(y);b[z]=C;m[y]=qq(A).attach("load",function(){if(v[y].input){j("Received iframe load event for CORS upload request (iframe name "+B+")");w[B]=setTimeout(function(){var D="No valid message received from loaded iframe for iframe name "+B;j(D,"error");C({error:D})},1000)}});x.receiveMessage(B,function(G){j("Received the following window message: '"+G+"'");var D=d(B),E=a._parseJsonResponse(D,G),F=E.uuid,H;if(F&&b[F]){j("Handling response for iframe name "+B);clearTimeout(w[B]);delete w[B];a._detachLoadEvent(B);H=b[F];delete b[F];x.stopReceivingMessages(B);H(E)}else{if(!F){j("'"+G+"' does not contain a UUID - ignoring.")}}})}function e(y){var z=qq.toElement("<iframe src='javascript:false;' name='"+y+"' />");z.setAttribute("id",y);z.style.display="none";document.body.appendChild(z);return z}function d(y){return y.split("_")[0]}qq.extend(this,{add:function(z,y){v[z]={input:y};y.setAttribute("name",l);if(y.parentNode){qq(y).remove()}},getInput:function(y){return v[y].input},isValid:function(y){return v[y]!==undefined&&v[y].input!==undefined},reset:function(){v.length=0},expunge:function(y){return f(y)},cancel:function(z){var y=n(z,o(z));if(y instanceof qq.Promise){return y.then(function(){this.expunge(z)})}else{if(y!==false){this.expunge(z);return true}}return false},upload:function(y){},_getIframeName:function(y){return y+"_"+s},_createIframe:function(z){var y=a._getIframeName(z);return e(y)},_parseJsonResponse:function(B,y){var z;try{z=qq.parseJson(y);if(z.newUuid!==undefined){u(B,z.newUuid)}}catch(A){j("Error when attempting to parse iframe upload response ("+A.message+")","error");z={}}return z},_initFormForUpload:function(y){var F=y.method,E=y.endpoint,D=y.params,C=y.paramsInBody,A=y.targetName,B=qq.toElement("<form method='"+F+"' enctype='multipart/form-data'></form>"),z=E;if(C){qq.obj2Inputs(D,B)}else{z=qq.obj2url(D,E)}B.setAttribute("action",z);B.setAttribute("target",A);B.style.display="none";document.body.appendChild(B);return B},_attachLoadEvent:function(y,A){var z;if(q){r(y,A)}else{m[y.id]=qq(y).attach("load",function(){j("Received response for "+y.id);if(!y.parentNode){return}try{if(y.contentDocument&&y.contentDocument.body&&y.contentDocument.body.innerHTML=="false"){return}}catch(B){j("Error when attempting to access iframe during handling of upload response ("+B.message+")","error");z={success:false}}A(z)})}},_detachLoadEvent:function(y){if(m[y]!==undefined){m[y]();delete m[y]}},_getFileState:function(y){return v[y]}})};qq.AbstractUploadHandlerXhr=function(l){var c=this,n=l.options,f=l.proxy,h={},a=n.chunking,k=f.onUpload,j=f.onCancel,b=f.getName,m=f.getSize,d=f.log;function e(r){var q=h[r].xhr,o=h[r].currentAjaxRequester;q.onreadystatechange=null;q.upload.onprogress=null;q.abort();o&&o.canceled&&o.canceled(r)}qq.extend(this,{add:function(q,o){if(qq.isFile(o)||qq.isBlob(o)){h[q]={file:o}}else{if(o instanceof qq.BlobProxy){h[q]={proxy:o}}else{throw new Error("Passed obj is not a File, Blob, or proxy")}}},getFile:function(o){return this.isValid(o)&&h[o].file},getProxy:function(o){return this.isValid(o)&&h[o].proxy},isValid:function(o){return h[o]!==undefined},reset:function(){h.length=0},expunge:function(q){var o=h[q].xhr;o&&e(q);delete h[q]},upload:function(q,o){h[q]&&delete h[q].paused;return k(q,o)},cancel:function(q){var o=j(q,b(q));if(o instanceof qq.Promise){return o.then(function(){h[q].canceled=true;this.expunge(q)})}else{if(o!==false){h[q].canceled=true;this.expunge(q);return true}}return false},pause:function(q){var o=h[q].xhr;if(o){d(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",q,b(q)));h[q].paused=true;e(q);return true}},updateBlob:function(q,o){if(this.isValid(q)){h[q].file=o}},reevaluateChunking:function(o){if(a&&this.isValid(o)){delete h[o].chunking}},isResumable:function(o){return !!a&&this.isValid(o)&&!h[o].notResumable},_createXhr:function(o){return this._registerXhr(o,qq.createXhrInstance())},_registerXhr:function(r,q,o){h[r].xhr=q;h[r].currentAjaxRequester=o;return q},_getMimeType:function(o){return c.getFile(o).type},_getTotalChunks:function(r){if(a){var o=m(r),q=a.partSize;return Math.ceil(o/q)}},_getChunkData:function(w,t){var v=a.partSize,o=m(w),r=c.getFile(w),u=v*t,s=u+v>=o?o:u+v,q=this._getTotalChunks(w);return{part:t,start:u,end:s,count:q,blob:qq.sliceBlob(r,u,s),size:s-u}},_getChunkDataForCallback:function(o){return{partIndex:o.part,startByte:o.start+1,endByte:o.end,totalParts:o.count}},_getFileState:function(o){return h[o]},_markNotResumable:function(o){h[o].notResumable=true}})};qq.WindowReceiveMessage=function(b){var a={log:function(d,e){}},c={};qq.extend(a,b);qq.extend(this,{receiveMessage:function(f,e){var d=function(h){e(h.data)};if(window.postMessage){c[f]=qq(window).attach("message",d)}else{log("iframe message passing not supported in this browser!","error")}},stopReceivingMessages:function(e){if(window.postMessage){var d=c[e];if(d){d()}}}})};(function(){qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},addExtraDropzone:function(a){this._dnd&&this._dnd.setupExtraDropzone(a)},removeExtraDropzone:function(a){if(this._dnd){return this._dnd.removeDropzone(a)}},getItemByFileId:function(a){return this._templating.getFileContainer(a)},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()}if(this._dnd){this._dnd.dispose();this._dnd=this._setupDragAndDrop()}this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0;this._setupClickAndEditEventHandlers()},setName:function(c,a){var b=this._options.formatFileName(a);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(c,b)},pauseUpload:function(b){var a=this._parent.prototype.pauseUpload.apply(this,arguments);a&&this._templating.uploadPaused(b);return a},continueUpload:function(b){var a=this._parent.prototype.continueUpload.apply(this,arguments);a&&this._templating.uploadContinued(b);return a},getId:function(a){return this._templating.getFileId(a)},getDropTarget:function(a){var b=this.getFile(a);return b.qqDropTarget}};qq.uiPrivateApi={_getButton:function(b){var a=this._parent.prototype._getButton.apply(this,arguments);if(!a){if(b===this._defaultButtonId){a=this._templating.getButton()}}return a},_removeFileItem:function(a){this._templating.removeFile(a)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent();this._focusinEventSupported=!qq.firefox();if(this._isEditFilenameEnabled()){this._filenameClickHandler=this._bindFilenameClickEvent();this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent();this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent()}},_setupDragAndDrop:function(){var b=this,a=this._options.dragAndDrop.extraDropzones,c=this._templating,d=c.getDropZone();d&&a.push(d);return new qq.DragAndDrop({dropZoneElements:a,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){c.showDropProcessing()},processingDroppedFilesComplete:function(e,f){c.hideDropProcessing();qq.each(e,function(h,j){j.qqDropTarget=f});if(e.length){b.addFiles(e,null,null)}},dropError:function(e,f){b._itemError(e,f)},dropLog:function(e,f){b.log(e,f)}}})},_bindFileButtonsClickEvent:function(){var a=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(c,b){a.log(c,b)},onDeleteFile:function(b){a.deleteFile(b)},onCancel:function(b){a.cancel(b)},onRetry:function(b){qq(a._templating.getFileContainer(b)).removeClass(a._classes.retryable);a.retry(b)},onPause:function(b){a.pauseUpload(b)},onContinue:function(b){a.continueUpload(b)},onGetName:function(b){return a.getName(b)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var a=this,b=this._templating;return{templating:b,log:function(d,c){a.log(d,c)},onGetUploadStatus:function(c){return a.getUploads({id:c}).status},onGetName:function(c){return a.getName(c)},onSetName:function(d,c){a.setName(d,c)},onEditingStatusChange:function(f,c){var e=qq(b.getEditInput(f)),d=qq(b.getFileContainer(f));if(c){e.addClass("qq-editing");b.hideFilename(f);b.hideEditIcon(f)}else{e.removeClass("qq-editing");b.showFilename(f);b.showEditIcon(f)}d.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(c,a,b){this._parent.prototype._onUploadStatusChange.apply(this,arguments);if(this._isEditFilenameEnabled()){if(this._templating.getFileContainer(c)&&b!==qq.status.SUBMITTED){this._templating.markFilenameEditable(c);this._templating.hideEditIcon(c)}}},_bindFilenameInputFocusInEvent:function(){var a=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(a)},_bindFilenameInputFocusEvent:function(){var a=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(a)},_bindFilenameClickEvent:function(){var a=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(a)},_storeForLater:function(a){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(a)},_onAllComplete:function(b,a){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(c,a){var b=this.getFile(c);if(b&&b.qqPath&&this._options.dragAndDrop.reportDirectoryPaths){this._paramsStore.addReadOnly(c,{qqpath:b.qqPath})}this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(c,a)},_onSubmitted:function(a){if(this._isEditFilenameEnabled()){this._templating.markFilenameEditable(a);this._templating.showEditIcon(a);if(!this._focusinEventSupported){this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(a))}}},_onProgress:function(d,b,a,c){this._parent.prototype._onProgress.apply(this,arguments);this._templating.updateProgress(d,a,c);if(a===c){this._templating.hideCancel(d);this._templating.hidePause(d);this._templating.setStatusText(d,this._options.text.waitingForResponse);this._displayFileSize(d)}else{this._displayFileSize(d,a,c)}},_onTotalProgress:function(a,b){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(a,b)},_onComplete:function(c,b,k,h){var e=this._parent.prototype._onComplete.apply(this,arguments),a=this._templating,d=a.getFileContainer(c),j=this;function f(l){if(!d){return}a.setStatusText(c);qq(d).removeClass(j._classes.retrying);a.hideProgress(c);if(!j._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){a.hideCancel(c)}a.hideSpinner(c);if(l.success){j._markFileAsSuccessful(c)}else{qq(d).addClass(j._classes.fail);if(j._templating.isRetryPossible()&&!j._preventRetries[c]){qq(d).addClass(j._classes.retryable)}j._controlFailureTextDisplay(c,l)}}if(e instanceof qq.Promise){e.done(function(l){f(l)})}else{f(k)}return e},_markFileAsSuccessful:function(b){var a=this._templating;if(this._isDeletePossible()){a.showDeleteButton(b)}qq(a.getFileContainer(b)).addClass(this._classes.success);this._maybeUpdateThumbnail(b)},_onUploadPrep:function(a){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(a)},_onUpload:function(c,b){var a=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(c);return a},_onUploadChunk:function(b,a){this._parent.prototype._onUploadChunk.apply(this,arguments);if(a.partIndex>0&&this._handler.isResumable(b)){this._templating.allowPause(b)}},_onCancel:function(b,a){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(b);if(this._getNotFinished()===0){this._templating.resetTotalProgress()}},_onBeforeAutoRetry:function(d){var c,b,a;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(d);if(this._options.retry.showAutoRetryNote){c=this._autoRetries[d]+1;b=this._options.retry.maxAutoAttempts;a=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,c);a=a.replace(/\{maxAuto\}/g,b);this._templating.setStatusText(d,a);qq(this._templating.getFileContainer(d)).addClass(this._classes.retrying)}},_onBeforeManualRetry:function(a){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments)){this._templating.resetProgress(a);qq(this._templating.getFileContainer(a)).removeClass(this._classes.fail);this._templating.setStatusText(a);this._templating.showSpinner(a);this._showCancelLink(a);return true}else{qq(this._templating.getFileContainer(a)).addClass(this._classes.retryable);return false}},_onSubmitDelete:function(b){var a=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,b,a)},_onSubmitDeleteSuccess:function(c,a,b){if(this._options.deleteFile.forceConfirm){this._showDeleteConfirm.apply(this,arguments)}else{this._sendDeleteRequest.apply(this,arguments)}},_onDeleteComplete:function(c,b,a){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(c);if(a){this._templating.setStatusText(c,this._options.deleteFile.deletingFailedText);this._templating.showDeleteButton(c)}else{this._removeFileItem(c)}},_sendDeleteRequest:function(c,a,b){this._templating.hideDeleteButton(c);this._templating.showSpinner(c);this._templating.setStatusText(c,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(j,c,h){var f=this.getName(j),e=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,f),c=this.getUuid(j),a=arguments,b=this,d;d=this._options.showConfirm(e);if(d instanceof qq.Promise){d.then(function(){b._sendDeleteRequest.apply(b,a)})}else{if(d!==false){b._sendDeleteRequest.apply(b,a)}}},_addToList:function(f,d,c){var a,e=0,b=this._handler.isProxied(f)&&this._options.scaling.hideScaled;if(b){return}if(this._options.display.prependFiles){if(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0){e=this._filesInBatchAddedToUi-1}a={index:e}}if(!c){if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){this._templating.disableCancel()}if(!this._options.multiple){this._handler.cancelAll();this._clearList()}}this._templating.addFile(f,this._options.formatFileName(d),a);if(c){this._thumbnailUrls[f]&&this._templating.updateThumbnail(f,this._thumbnailUrls[f],true)}else{this._templating.generatePreview(f,this.getFile(f))}this._filesInBatchAddedToUi+=1;if(c||(this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading)){this._displayFileSize(f)}},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(e,b,a){var c=this.getSize(e),d=this._formatSize(c);if(c>=0){if(b!==undefined&&a!==undefined){d=this._formatProgress(b,a)}this._templating.updateSize(e,d)}},_formatProgress:function(d,a){var c=this._options.text.formatProgress;function b(e,f){c=c.replace(e,f)}b("{percent}",Math.round(d/a*100));b("{total_size}",this._formatSize(a));return c},_controlFailureTextDisplay:function(h,b){var e,c,a,f,d;e=this._options.failedUploadTextDisplay.mode;c=this._options.failedUploadTextDisplay.maxChars;a=this._options.failedUploadTextDisplay.responseProperty;if(e==="custom"){f=b[a];if(f){if(f.length>c){d=f.substring(0,c)+"..."}}else{f=this._options.text.failUpload}this._templating.setStatusText(h,d||f);if(this._options.failedUploadTextDisplay.enableTooltip){this._showTooltip(h,f)}}else{if(e==="default"){this._templating.setStatusText(h,this._options.text.failUpload)}else{if(e!=="none"){this.log("failedUploadTextDisplay.mode value of '"+e+"' is not valid","warn")}}}},_showTooltip:function(b,a){this._templating.getFileContainer(b).title=a},_showCancelLink:function(a){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){this._templating.showCancel(a)}},_itemError:function(d,a,c){var b=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(b)},_batchError:function(a){this._parent.prototype._batchError.apply(this,arguments);this._options.showMessage(a)},_setupPastePrompt:function(){var a=this;this._options.callbacks.onPasteReceived=function(){var b=a._options.paste.namePromptMessage,c=a._options.paste.defaultName;return a._options.showPrompt(b,c)}},_fileOrBlobRejected:function(b,a){this._totalFilesInBatch-=1;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(a,c,b){this._totalFilesInBatch=a.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(a){var b=this._thumbnailUrls[a];this._templating.updateThumbnail(a,b)},_addCannedFile:function(a){var b=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(b,this.getName(b),true);this._templating.hideSpinner(b);this._templating.hideCancel(b);this._markFileAsSuccessful(b);return b},_setSize:function(b,a){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(b,this._formatSize(a))}}}());qq.FineUploader=function(b,a){this._parent=a?qq[a].FineUploaderBasic:qq.FineUploaderBasic;this._parent.apply(this,arguments);qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:false},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:true},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:true,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:false,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:false,prependFiles:false},paste:{promptForName:false,namePromptMessage:"Please name this image"},thumbnails:{placeholders:{waitUntilResponse:false,notAvailablePath:null,waitingPath:null}},scaling:{hideScaled:false},showMessage:function(c){setTimeout(function(){window.alert(c)},0)},showConfirm:function(c){return window.confirm(c)},showPrompt:function(d,c){return window.prompt(d,c)}},true);qq.extend(this._options,b,true);this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});if(!qq.supportedFeatures.uploading||(this._options.cors.expected&&!qq.supportedFeatures.uploadCors)){this._templating.renderFailure(this._options.messages.unsupportedBrowser)}else{this._wrapCallbacks();this._templating.render();this._classes=this._options.classes;if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()}this._setupClickAndEditEventHandlers();if(qq.DragAndDrop&&qq.supportedFeatures.fileDrop){this._dnd=this._setupDragAndDrop()}if(this._options.paste.targetElement&&this._options.paste.promptForName){if(qq.PasteSupport){this._setupPastePrompt()}else{qq.log("Paste support module not found.","info")}}this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0}};qq.extend(qq.FineUploader.prototype,qq.basePublicApi);qq.extend(qq.FineUploader.prototype,qq.basePrivateApi);qq.extend(qq.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi);qq.Templating=function(k){var f="qq-file-id",U="qq-file-id-",J="qq-max-size",n="qq-server-scale",T="qq-hide-dropzone",H=false,v=-1,y={log:null,templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:false,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},M={button:"qq-upload-button-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},F={},w=new qq.Promise(),B=new qq.Promise(),h,s,P,q,D,C,u,x;function G(){var Y,ad,Z,af,aa,ae,ac,X,ab;h("Parsing template");if(y.templateIdOrEl==null){throw new Error("You MUST specify either a template element or ID!")}if(qq.isString(y.templateIdOrEl)){Y=document.getElementById(y.templateIdOrEl);if(Y===null){throw new Error(qq.format("Cannot find template script at ID '{}'!",y.templateIdOrEl))}ad=Y.innerHTML}else{if(y.templateIdOrEl.innerHTML===undefined){throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.")}ad=y.templateIdOrEl.innerHTML}ad=qq.trimStr(ad);af=document.createElement("div");af.appendChild(qq.toElement(ad));if(y.button){ae=qq(af).getByClass(M.button)[0];if(ae){qq(ae).remove()}}if(!qq.DragAndDrop||!qq.supportedFeatures.fileDrop){ab=qq(af).getByClass(M.dropProcessing)[0];if(ab){qq(ab).remove()}}ac=qq(af).getByClass(M.drop)[0];if(ac&&!qq.DragAndDrop){h("DnD module unavailable.","info");qq(ac).remove()}if(ac&&!qq.supportedFeatures.fileDrop&&qq(ac).hasAttribute(T)){qq(ac).css({display:"none"})}X=qq(af).getByClass(M.thumbnail)[0];if(!u){X&&qq(X).remove()}else{if(X){v=parseInt(X.getAttribute(J));v=v>0?v:null;x=qq(X).hasAttribute(n)}}u=u&&X;s=qq(af).getByClass(M.editFilenameInput).length>0;P=qq(af).getByClass(M.retry).length>0;Z=qq(af).getByClass(M.list)[0];if(Z==null){throw new Error("Could not find the file list container in the template!")}aa=Z.innerHTML;Z.innerHTML="";h("Template parsing complete");return{template:qq.trimStr(af.innerHTML),fileTemplate:qq.trimStr(aa)}}function S(X){return qq(C).getByClass(U+X)[0]}function a(Y,X){return Y&&qq(Y).getByClass(X)[0]}function r(Z,X){var Y=C,aa=Y.firstChild;if(X>0){aa=qq(Y).children()[X].nextSibling}Y.insertBefore(Z,aa)}function K(X){return a(S(X),M.cancel)}function V(X){return a(S(X),M.pause)}function c(X){return a(S(X),M.continueButton)}function t(X){if(X==null){return a(D,M.totalProgressBarContainer)||a(D,M.totalProgressBar)}return a(S(X),M.progressBarContainer)||a(S(X),M.progressBar)}function b(X){return a(S(X),M.spinner)}function A(X){return a(S(X),M.editNameIcon)}function E(X){return a(S(X),M.size)}function m(X){return a(S(X),M.deleteButton)}function o(X){return a(S(X),M.retry)}function z(X){return a(S(X),M.file)}function l(){return a(D,M.dropProcessing)}function R(X){return u&&a(S(X),M.thumbnail)}function Q(X){X&&qq(X).addClass(y.classes.hide)}function I(X){X&&qq(X).removeClass(y.classes.hide)}function j(aa,Y){var X=t(aa),Z=aa==null?M.totalProgressBar:M.progressBar;if(X&&!qq(X).hasClass(Z)){X=qq(X).getByClass(Z)[0]}X&&qq(X).css({width:Y+"%"})}function e(){var Z=y.placeholders.thumbnailNotAvailable,Y=y.placeholders.waitingForThumbnail,X={maxSize:v,scale:x};if(u){if(Z){y.imageGenerator.generate(Z,new Image(),X).then(function(aa){w.success(aa)},function(){w.failure();h("Problem loading 'not available' placeholder image at "+Z,"error")})}else{w.failure()}if(Y){y.imageGenerator.generate(Y,new Image(),X).then(function(aa){B.success(aa)},function(){B.failure();h("Problem loading 'waiting for thumbnail' placeholder image at "+Y,"error")})}else{B.failure()}}}function L(Y){var X=new qq.Promise();B.then(function(Z){d(Z,Y);if(!Y.src){Y.src=Z.src;Y.onload=function(){I(Y);X.success()}}else{X.success()}},function(){Q(Y);X.success()});return X}function O(aa,Z){var Y=F[aa]||new qq.Promise().failure(),X=new qq.Promise();w.then(function(ab){Y.then(function(){X.success()},function(){d(ab,Z);Z.onload=function(){X.success()};Z.src=ab.src;I(Z)})});return X}function d(Z,aa){var Y=Z.style.maxWidth,X=Z.style.maxHeight;if(X&&Y&&!aa.style.maxWidth&&!aa.style.maxHeight){qq(aa).css({maxWidth:Y,maxHeight:X})}}function N(Z,Y){var X=R(Z),aa=R(Y);h(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",Z,Y,Y));F[Y].then(function(){F[Z].success();h(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",Y,Z));X.src=aa.src;I(X)},function(){F[Z].failure();if(!y.placeholders.waitUntilUpdate){O(Z,X)}})}function W(aa,Y,X){var Z=R(aa);h("Generating new thumbnail for "+aa);Y.qqThumbnailId=aa;return y.imageGenerator.generate(Y,Z,X).then(function(){I(Z);F[aa].success()},function(){F[aa].failure();if(!y.placeholders.waitUntilUpdate){O(aa,Z)}})}qq.extend(y,k);h=y.log;D=y.containerEl;u=y.imageGenerator!==undefined;q=G();e();qq.extend(this,{render:function(){h("Rendering template in DOM.");D.innerHTML=q.template;Q(l());this.hideTotalProgress();C=y.fileContainerEl||a(D,M.list);h("Template rendering complete")},renderFailure:function(X){var Y=qq.toElement(X);D.innerHTML="";D.appendChild(Y)},reset:function(){this.render()},clearFiles:function(){C.innerHTML=""},disableCancel:function(){H=true},addFile:function(ab,Y,X){var aa=qq.toElement(q.fileTemplate),Z=a(aa,M.file);qq(aa).addClass(U+ab);Z&&qq(Z).setText(Y);aa.setAttribute(f,ab);if(X){r(aa,X.index)}else{C.appendChild(aa)}Q(t(ab));Q(E(ab));Q(m(ab));Q(o(ab));Q(V(ab));Q(c(ab));if(H){this.hideCancel(ab)}},removeFile:function(X){qq(S(X)).remove()},getFileId:function(Y){var X=Y;if(X){while(X.getAttribute(f)==null){X=X.parentNode}return parseInt(X.getAttribute(f))}},getFileList:function(){return C},markFilenameEditable:function(Y){var X=z(Y);X&&qq(X).addClass(y.classes.editable)},updateFilename:function(Z,Y){var X=z(Z);X&&qq(X).setText(Y)},hideFilename:function(X){Q(z(X))},showFilename:function(X){I(z(X))},isFileName:function(X){return qq(X).hasClass(M.file)},getButton:function(){return y.button||a(D,M.button)},hideDropProcessing:function(){Q(l())},showDropProcessing:function(){I(l())},getDropZone:function(){return a(D,M.drop)},isEditFilenamePossible:function(){return s},isRetryPossible:function(){return P},getFileContainer:function(X){return S(X)},showEditIcon:function(Y){var X=A(Y);X&&qq(X).addClass(y.classes.editable)},hideEditIcon:function(Y){var X=A(Y);X&&qq(X).removeClass(y.classes.editable)},isEditIcon:function(X){return qq(X).hasClass(M.editNameIcon)},getEditInput:function(X){return a(S(X),M.editFilenameInput)},isEditInput:function(X){return qq(X).hasClass(M.editFilenameInput)},updateProgress:function(ab,X,aa){var Z=t(ab),Y;if(Z){Y=Math.round(X/aa*100);if(X===aa){Q(Z)}else{I(Z)}j(ab,Y)}},updateTotalProgress:function(X,Y){this.updateProgress(null,X,Y)},hideProgress:function(Y){var X=t(Y);X&&Q(X)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(X){j(X,0)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(Y){if(!H){var X=K(Y);X&&qq(X).removeClass(y.classes.hide)}},hideCancel:function(X){Q(K(X))},isCancel:function(X){return qq(X).hasClass(M.cancel)},allowPause:function(X){I(V(X));Q(c(X))},uploadPaused:function(X){this.setStatusText(X,y.text.paused);this.allowContinueButton(X);Q(b(X))},hidePause:function(X){Q(V(X))},isPause:function(X){return qq(X).hasClass(M.pause)},isContinueButton:function(X){return qq(X).hasClass(M.continueButton)},allowContinueButton:function(X){I(c(X));Q(V(X))},uploadContinued:function(X){this.setStatusText(X,"");this.allowPause(X);I(b(X))},showDeleteButton:function(X){I(m(X))},hideDeleteButton:function(X){Q(m(X))},isDeleteButton:function(X){return qq(X).hasClass(M.deleteButton)},isRetry:function(X){return qq(X).hasClass(M.retry)},updateSize:function(Z,Y){var X=E(Z);if(X){I(X);qq(X).setText(Y)}},setStatusText:function(Z,Y){var X=a(S(Z),M.statusText);if(X){if(Y==null){qq(X).clearText()}else{qq(X).setText(Y)}}},hideSpinner:function(X){Q(b(X))},showSpinner:function(X){I(b(X))},generatePreview:function(ab,Y){var Z=Y&&Y.qqThumbnailId,aa=R(ab),X={maxSize:v,scale:true,orient:true};if(qq.supportedFeatures.imagePreviews){if(aa){L(aa).done(function(){F[ab]=new qq.Promise();if(Z!=null){N(ab,Z)}else{W(ab,Y,X)}})}}else{if(aa){L(aa)}}},updateThumbnail:function(ab,Z,Y){var aa=R(ab),X={maxSize:v,scale:x};if(aa){if(Z){if(Y){L(aa)}return y.imageGenerator.generate(Z,aa,X).then(function(){I(aa)},function(){O(ab,aa)})}else{O(ab,aa)}}}})};qq.s3=qq.s3||{};qq.s3.util=qq.s3.util||(function(){return{AWS_PARAM_PREFIX:"x-amz-meta-",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",getBucket:function(b){var a=[/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],c;qq.each(a,function(d,f){var e=f.exec(b);if(e){c=e[1];return false}});return c},getPolicy:function(r){var l={},n=[],b=qq.s3.util.getBucket(r.endpoint),q=r.key,s=r.acl,m=r.type,k=new Date(),a=r.expectedStatus,h=r.sessionToken,e=r.params,f=qq.s3.util.getSuccessRedirectAbsoluteUrl(r.successRedirectUrl),d=r.minFileSize,c=r.maxFileSize,j=r.reducedRedundancy,o=r.serverSideEncryption;l.expiration=qq.s3.util.getPolicyExpirationDate(k);n.push({acl:s});n.push({bucket:b});if(m){n.push({"Content-Type":m})}if(a){n.push({success_action_status:a.toString()})}if(f){n.push({success_action_redirect:f})}if(j){n.push({});n[n.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(h){n.push({});n[n.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=h}if(o){n.push({});n[n.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}n.push({key:q});qq.each(e,function(t,w){var u=qq.s3.util.AWS_PARAM_PREFIX+t,v={};v[u]=encodeURIComponent(w);n.push(v)});l.conditions=n;qq.s3.util.enforceSizeLimits(l,d,c);return l},refreshPolicyCredentials:function(c,a){var b=false;qq.each(c.conditions,function(e,d){qq.each(d,function(f,h){if(f===qq.s3.util.SESSION_TOKEN_PARAM_NAME){d[f]=a;b=true}})});if(!b){c.conditions.push({});c.conditions[c.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=a}},generateAwsParams:function(q,o){var e={},b=q.params,s=new qq.Promise(),j=qq.s3.util.getPolicy(q),f=q.sessionToken,k=q.type,m=q.key,n=q.accessKey,r=q.acl,a=q.expectedStatus,d=qq.s3.util.getSuccessRedirectAbsoluteUrl(q.successRedirectUrl),h=q.reducedRedundancy,l=q.serverSideEncryption,c=q.log;e.key=m;e.AWSAccessKeyId=n;if(k){e["Content-Type"]=k}if(a){e.success_action_status=a}if(d){e.success_action_redirect=d}if(h){e[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(l){e[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}if(f){e[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=f}e.acl=r;qq.each(b,function(t,v){var u=qq.s3.util.AWS_PARAM_PREFIX+t;e[u]=encodeURIComponent(v)});o(j).then(function(u,v,t){e.policy=u.policy;e.signature=u.signature;if(v){e.AWSAccessKeyId=v}if(t){e[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=t}s.success(e)},function(t){t=t||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.";c("Policy signing failed.  "+t,"error");s.failure(t)});return s},enforceSizeLimits:function(d,b,e){var c=b<0?0:b,a=e<=0?9007199254740992:e;if(b>0||e>0){d.conditions.push(["content-length-range",c.toString(),a.toString()])}},getPolicyExpirationDate:function(a){a.setMinutes(a.getMinutes()+5);if(Date.prototype.toISOString){return a.toISOString()}else{var b=function(d){var c=String(d);if(c.length===1){c="0"+c}return c};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}},parseIframeResponse:function(b){var c=b.contentDocument||b.contentWindow.document,d=c.location.search,a=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(d);if(a){return{bucket:a[1],key:a[2],etag:a[3].replace(/%22/g,"")}}},getSuccessRedirectAbsoluteUrl:function(a){if(a){var c=document.createElement("div"),b;if(qq.ie7()){c.innerHTML="<a href='"+a+"'></a>";b=c.firstChild;return b.href}else{b=document.createElement("a");b.href=a;b.href=b.href;return b.href}}},encodeQueryStringParam:function(b){var a=encodeURIComponent(b);a=a.replace(/[!'()]/g,escape);a=a.replace(/\*/g,"%2A");return a.replace(/%20/g,"+")}}}());qq.AbstractNonTraditionalUploadHandlerXhr=function(n){var q=this,s=n.options,l=n.proxy,b=s.chunking,d=s.resume,e=s.namespace,m=l.onUuidChanged,o=s.resumeEnabled,h=l.getEndpoint,c=l.getName,r=l.getSize,a=l.getUuid,j=l.getDataByUuid,f=l.log,k=new qq.AbstractUploadHandlerXhr(n);qq.extend(this,k);qq.extend(this,{getResumableFilesData:function(){return q._getResumableFilesData()},getThirdPartyFileId:function(t){return q._getFileState(t).key},_shouldChunkThisFile:function(v){var u,t=q._getFileState(v);if(!t.chunking){t.chunking={};u=q._getTotalChunks(v);if(u>1){t.chunking.enabled=true;t.chunking.parts=u}else{t.chunking.enabled=false}}return t.chunking.enabled},_maybePrepareForResume:function(w){var t=q._getFileState(w),u,v;if(o&&t.key===undefined){u=q._getLocalStorageId(w);v=localStorage.getItem(u);if(v){v=JSON.parse(v);if(j(v.uuid)){q._markNotResumable(w)}else{f(qq.format("Identified file with ID {} and name of {} as resumable.",w,c(w)));m(w,v.uuid);t.key=v.key;t.loaded=v.loaded;t.chunking=v.chunking}}}},_isUploading:function(t){return},_maybePersistChunkedState:function(w){var t=q._getFileState(w),u,v;if(o&&q.isResumable(w)){u=q._getLocalStorageId(w);v={name:c(w),size:r(w),uuid:a(w),key:t.key,loaded:t.loaded,chunking:t.chunking,lastUpdated:Date.now()};localStorage.setItem(u,JSON.stringify(v))}},_maybeDeletePersistedChunkData:function(u){var t;if(o&&q.isResumable(u)){t=q._getLocalStorageId(u);if(t&&localStorage.getItem(t)){localStorage.removeItem(t);return true}}return false},_iterateResumeRecords:function(t){if(o){qq.each(localStorage,function(u,v){if(u.indexOf(qq.format("qq{}resume-",e))===0){var w=JSON.parse(v);t(u,w)}})}},_getResumableFilesData:function(){var t=[];q._iterateResumeRecords(function(u,v){t.push({name:v.name,size:v.size,uuid:v.uuid,partIdx:v.chunking.lastSent+1,key:v.key})});return t},_removeExpiredChunkingRecords:function(){var t=d.recordsExpireIn;q._iterateResumeRecords(function(v,w){var u=new Date(w.lastUpdated);u.setDate(u.getDate()+t);if(u.getTime()<=Date.now()){f("Removing expired resume record with key "+v);localStorage.removeItem(v)}})},_getLocalStorageId:function(x){var t=c(x),u=r(x),w=b.partSize,v=h(x);return qq.format("qq{}resume-{}-{}-{}-{}",e,t,u,w,v)}});qq.override(this,function(t){return{add:function(v,u){t.add.apply(this,arguments);if(o){q._maybePrepareForResume(v)}}}})};(function(){qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(a,b){this._uploadSuccessParamsStore.set(a,b)}};qq.nonTraditionalBasePrivateApi={_onComplete:function(c,a,s,o){var m=s.success?true:false,q=this,f=arguments,e=this._options.uploadSuccess.endpoint,n=this._options.uploadSuccess.customHeaders,j=this._options.cors,r=new qq.Promise(),k=this._uploadSuccessParamsStore.get(c),h=function(t){delete q._failedSuccessRequestCallbacks[c];qq.extend(s,t);qq.FineUploaderBasic.prototype._onComplete.apply(q,f);r.success(t)},b=function(t){var u=l;qq.extend(s,t);if(s&&s.reset){u=null}if(!u){delete q._failedSuccessRequestCallbacks[c]}else{q._failedSuccessRequestCallbacks[c]=u}if(!q._onAutoRetry(c,a,s,o,u)){qq.FineUploaderBasic.prototype._onComplete.apply(q,f);r.failure(t)}},l,d;if(m&&e){d=new qq.UploadSuccessAjaxRequester({endpoint:e,customHeaders:n,cors:j,log:qq.bind(this.log,this)});qq.extend(k,q._getEndpointSpecificParams(c,s,o),true);l=qq.bind(function(){d.sendSuccessRequest(c,k).then(h,b)},q);l();return r}return qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(b){var a=this._failedSuccessRequestCallbacks[b];return qq.FineUploaderBasic.prototype._manualRetry.call(this,b,a)}}}());(function(){qq.s3.FineUploaderBasic=function(b){var a={request:{accessKey:null},objectProperties:{acl:"private",key:"uuid",reducedRedundancy:false,serverSideEncryption:false},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{endpoint:null,customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},resume:{recordsExpireIn:7},cors:{allowXdr:true},callbacks:{onCredentialsExpired:function(){}}};qq.extend(a,b,true);if(!this.setCredentials(a.credentials,true)){this._currentCredentials.accessKey=a.request.accessKey}this._aclStore=this._createStore(a.objectProperties.acl);qq.FineUploaderBasic.call(this,a);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._failedSuccessRequestCallbacks={};this._cannedKeys={}};qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,{getKey:function(a){if(this._cannedKeys[a]==null){return this._handler.getThirdPartyFileId(a)}return this._cannedKeys[a]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=[]},setUploadSuccessParams:function(a,b){this._uploadSuccessParamsStore.set(a,b)},setCredentials:function(b,a){if(b&&b.secretKey){if(!b.accessKey){throw new qq.Error("Invalid credentials: no accessKey")}else{if(!b.expiration){throw new qq.Error("Invalid credentials: no expiration")}else{this._currentCredentials=qq.extend({},b);if(qq.isString(b.expiration)){this._currentCredentials.expiration=new Date(b.expiration)}}}return true}else{if(!a){throw new qq.Error("Invalid credentials parameter!")}else{this._currentCredentials={}}}},setAcl:function(a,b){this._aclStore.set(a,b)},_createUploadHandler:function(){var a=this,b={objectProperties:this._options.objectProperties,aclStore:this._aclStore,signature:this._options.signature,iframeSupport:this._options.iframeSupport,getKeyName:qq.bind(this._determineKeyName,this),validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};qq.override(this._endpointStore,function(c){return{get:function(e){var d=c.get(e);if(d.indexOf("http")<0){return"http://"+d}return d}}});qq.override(this._paramsStore,function(c){return{get:function(f){var e=c.get(f),d={};qq.each(e,function(h,j){d[h.toLowerCase()]=qq.isFunction(j)?j():j});return d}}});b.signature.credentialsProvider={get:function(){return a._currentCredentials},onExpired:function(){var c=new qq.Promise(),d=a._options.callbacks.onCredentialsExpired();if(d instanceof qq.Promise){d.then(function(f){try{a.setCredentials(f);c.success()}catch(e){a.log("Invalid credentials returned from onCredentialsExpired callback! ("+e.message+")","error");c.failure("onCredentialsExpired did not return valid credentials.")}},function(e){a.log("onCredentialsExpired callback indicated failure! ("+e+")","error");c.failure("onCredentialsExpired callback failed.")})}else{a.log("onCredentialsExpired callback did not return a promise!","error");c.failure("Unexpected return value for onCredentialsExpired.")}return c}};return qq.FineUploaderBasic.prototype._createUploadHandler.call(this,b,"s3")},_determineKeyName:function(h,b){var e=new qq.Promise(),a=this._options.objectProperties.key,f=qq.getExtension(b),c=e.failure,d=function(k,l){var j=k;if(l!==undefined){j+="."+l}e.success(j)};switch(a){case"uuid":d(this.getUuid(h),f);break;case"filename":d(b);break;default:if(qq.isFunction(a)){this._handleKeynameFunction(a,h,d,c)}else{this.log(a+" is not a valid value for the s3.keyname option!","error");c()}}return e},_handleKeynameFunction:function(c,j,a,h){var b=this,f=function(k){a(k)},d=function(k){b.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",j,k||"null"),"error");h(k)},e=c.call(this,j);if(e instanceof qq.Promise){e.then(f,d)}else{if(e==null){d()}else{f(e)}}},_getEndpointSpecificParams:function(d,a,c){var b={key:this.getKey(d),uuid:this.getUuid(d),name:this.getName(d),bucket:qq.s3.util.getBucket(this._endpointStore.get(d))};if(c&&c.getResponseHeader("ETag")){b.etag=c.getResponseHeader("ETag")}else{if(a.etag){b.etag=a.etag}}return b},_onSubmitDelete:function(c,a){var b={key:this.getKey(c),bucket:qq.s3.util.getBucket(this._endpointStore.get(c))};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,c,a,b)},_addCannedFile:function(a){var b;if(a.s3Key==null){throw new qq.Error("Did not find s3Key property in server session response.  This is required!")}else{b=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments);this._cannedKeys[b]=a.s3Key}return b}})}());qq.s3.RequestSigner=function(a){var k,l=this,b={},m={expectingPolicy:false,method:"POST",signatureSpec:{credentialsProvider:{},endpoint:null,customHeaders:{}},maxConnections:3,paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(n,o){}},d;qq.extend(m,a,true);d=m.signatureSpec.credentialsProvider;function e(n,q,s){var v=q.responseText,u=b[n],w=u.promise,r,o;delete b[n];if(v){try{o=qq.parseJson(v)}catch(t){m.log("Error attempting to parse signature response: "+t,"error")}}if(o&&o.invalid){s=true;if(o.error){r=o.error}else{r="Invalid policy document or request headers!"}}else{if(o){if(m.expectingPolicy&&!o.policy){s=true;r="Response does not include the base64 encoded policy!"}else{if(!o.signature){s=true;r="Response does not include the signature!"}}}else{s=true;r="Received an empty or invalid response from the server!"}}if(s){if(r){m.log(r,"error")}w.failure(r)}else{w.success(o)}}function f(s,o,x,v,q,w,u){var n="POST",r=[],y="",t;switch(s){case l.REQUEST_TYPE.MULTIPART_ABORT:n="DELETE";t=qq.format("uploadId={}",w);break;case l.REQUEST_TYPE.MULTIPART_INITIATE:t="uploads";break;case l.REQUEST_TYPE.MULTIPART_COMPLETE:t=qq.format("uploadId={}",w);break;case l.REQUEST_TYPE.MULTIPART_UPLOAD:n="PUT";t=qq.format("partNumber={}&uploadId={}",u,w);break}t=x+"?"+t;qq.each(q,function(z){r.push(z)});r.sort();qq.each(r,function(z,A){y+=A+":"+q[A]+"\n"});return{toSign:qq.format("{}\n\n{}\n\n{}/{}/{}",n,v||"",y||"\n",o,t),endOfUrl:t}}function j(q,n,r,o){var s;if(q.signatureConstructor){if(o){s=q.signatureConstructor.getHeaders();s[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=o;q.signatureConstructor.withHeaders(s)}c(q.signatureConstructor.getToSign().stringToSign,n)}else{o&&qq.s3.util.refreshPolicyCredentials(q,o);h(q,n,r,o)}}function h(u,n,q,w){var v=JSON.stringify(u),o=CryptoJS.enc.Utf8.parse(v),t=CryptoJS.enc.Base64.stringify(o),s=CryptoJS.HmacSHA1(t,d.get().secretKey),r=CryptoJS.enc.Base64.stringify(s);n.success({policy:t,signature:r},q,w)}function c(n,o){var r=CryptoJS.enc.Utf8.parse(n),s=CryptoJS.HmacSHA1(r,d.get().secretKey),q=CryptoJS.enc.Base64.stringify(s);o.success({signature:q})}k=qq.extend(this,new qq.AjaxRequester({method:m.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return m.signatureSpec.endpoint}},paramsStore:m.paramsStore,maxConnections:m.maxConnections,customHeaders:m.signatureSpec.customHeaders,log:m.log,onComplete:e,cors:m.cors,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{getSignature:function(r,o){var q=o,n=new qq.Promise();if(d.get().secretKey&&window.CryptoJS){if(d.get().expiration.getTime()>Date.now()){j(o,n)}else{d.onExpired().then(function(){j(o,n,d.get().accessKey,d.get().sessionToken)},function(s){m.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error");n.failure("Unable to sign request - expired credentials.")})}}else{m.log("Submitting S3 signature request for "+r);if(q.signatureConstructor){q={headers:q.signatureConstructor.getToSign().stringToSign}}k.initTransport(r).withParams(q).send();b[r]={promise:n}}return n},constructStringToSign:function(q,v,o){var s={},u,t,r,n;return{withHeaders:function(w){s=w;return this},withUploadId:function(w){u=w;return this},withContentType:function(w){t=w;return this},withPartNum:function(w){r=w;return this},getToSign:function(){var w=d.get().sessionToken;s["x-amz-date"]=new Date().toUTCString();if(w){s[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=w}n=f(q,v,o,t,s,u,r);return{headers:(function(){if(t){s["Content-Type"]=t}return s}()),endOfUrl:n.endOfUrl,stringToSign:n.toSign}},getHeaders:function(){return qq.extend({},s)},getEndOfUrl:function(){return n&&n.endOfUrl}}}})};qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};qq.UploadSuccessAjaxRequester=function(e){var d,c=[],a={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(f,h){}};qq.extend(a,e);function b(f,l,m){var q=c[f],o=l.responseText,h={success:true},j={success:false},k;delete c[f];a.log(qq.format("Received the following response body to an upload success request for id {}: {}",f,o));try{k=qq.parseJson(o);if(m||(k&&(k.error||k.success===false))){a.log("Upload success request was rejected by the server.","error");q.failure(qq.extend(k,j))}else{a.log("Upload success was acknowledged by the server.");q.success(qq.extend(k,h))}}catch(n){if(m){a.log(qq.format("Your server indicated failure in its upload success request response for id {}!",f),"error");q.failure(j)}else{a.log("Upload success was acknowledged by the server.");q.success(h)}}}d=qq.extend(this,new qq.AjaxRequester({method:a.method,endpointStore:{get:function(){return a.endpoint}},paramsStore:a.paramsStore,maxConnections:a.maxConnections,customHeaders:a.customHeaders,log:a.log,onComplete:b,cors:a.cors,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{sendSuccessRequest:function(j,f){var h=new qq.Promise();a.log("Submitting upload success request/notification for "+j);d.initTransport(j).withParams(f).send();c[j]=h;return h}})};qq.s3.InitiateMultipartAjaxRequester=function(f){var d,b={},c={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:false,serverSideEncryption:false,maxConnections:3,getContentType:function(j){},getKey:function(j){},getName:function(j){},log:function(j,k){}},e;qq.extend(c,f);e=new qq.s3.RequestSigner({signatureSpec:c.signatureSpec,cors:c.cors,log:c.log});function h(o){var n=qq.s3.util.getBucket(c.endpointStore.get(o)),m={},l=new qq.Promise(),k=c.getKey(o),j;m["x-amz-acl"]=c.aclStore.get(o);if(c.reducedRedundancy){m[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(c.serverSideEncryption){m[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}m[qq.s3.util.AWS_PARAM_PREFIX+c.filenameParam]=encodeURIComponent(c.getName(o));qq.each(c.paramsStore.get(o),function(q,r){m[qq.s3.util.AWS_PARAM_PREFIX+q]=encodeURIComponent(r)});j=e.constructStringToSign(e.REQUEST_TYPE.MULTIPART_INITIATE,n,k).withContentType(c.getContentType(o)).withHeaders(m);e.getSignature(o,{signatureConstructor:j}).then(function(q){m=j.getHeaders();m.Authorization="AWS "+c.signatureSpec.credentialsProvider.get().accessKey+":"+q.signature;l.success(m,j.getEndOfUrl())},l.failure);return l}function a(k,t,n){var u=b[k],q=new DOMParser(),o=q.parseFromString(t.responseText,"application/xml"),s,j,r,m,l;delete b[k];if(n){l=t.status;j=o.getElementsByTagName("Message");if(j.length>0){m=j[0].textContent}}else{s=o.getElementsByTagName("UploadId");if(s.length>0){r=s[0].textContent}else{m="Upload ID missing from request"}}if(r===undefined){if(m){c.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",k,m),"error")}else{c.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",k,l),"error")}u.failure("Problem initiating upload request with Amazon.",t)}else{c.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",k,r));u.success(r,t)}}d=qq.extend(this,new qq.AjaxRequester({method:c.method,contentType:null,endpointStore:c.endpointStore,maxConnections:c.maxConnections,allowXRequestedWithAndCacheControl:false,log:c.log,onComplete:a,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{send:function(k){var j=new qq.Promise();h(k).then(function(m,l){c.log("Submitting S3 initiate multipart upload request for "+k);b[k]=j;d.initTransport(k).withPath(l).withHeaders(m).send()},j.failure);return j}})};qq.s3.CompleteMultipartAjaxRequester=function(h){var d,a={},b={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(k){},log:function(k,l){}},e;qq.extend(b,h);e=new qq.s3.RequestSigner({signatureSpec:b.signatureSpec,cors:b.cors,log:b.log});function j(r,q){var n={},m=new qq.Promise(),l=b.endpointStore.get(r),o=qq.s3.util.getBucket(l),k=e.constructStringToSign(e.REQUEST_TYPE.MULTIPART_COMPLETE,o,b.getKey(r)).withUploadId(q).withContentType("application/xml; charset=UTF-8");e.getSignature(r,{signatureConstructor:k}).then(function(s){n=k.getHeaders();n.Authorization="AWS "+b.signatureSpec.credentialsProvider.get().accessKey+":"+s.signature;m.success(n,k.getEndOfUrl())},m.failure);return m}function c(k,t,n){var v=a[k],q=new DOMParser(),u=b.endpointStore.get(k),l=qq.s3.util.getBucket(u),r=b.getKey(k),o=q.parseFromString(t.responseText,"application/xml"),m=o.getElementsByTagName("Bucket"),s=o.getElementsByTagName("Key");delete a[k];b.log(qq.format("Complete response status {}, body = {}",t.status,t.responseText));if(n){b.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",k,t.status),"error")}else{if(m.length&&s.length){if(m[0].textContent!==l){n=true;b.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",k),"error")}}else{n=true;b.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",k),"error")}}if(n){v.failure("Problem asking Amazon to combine the parts!",t)}else{v.success(t)}}function f(k){var l=document.implementation.createDocument(null,"CompleteMultipartUpload",null);qq.each(k,function(v,s){var m=s.part,t=s.etag,u=l.createElement("Part"),n=l.createElement("PartNumber"),r=l.createTextNode(m),q=l.createTextNode(t),o=l.createElement("ETag");o.appendChild(q);n.appendChild(r);u.appendChild(n);u.appendChild(o);qq(l).children()[0].appendChild(u)});return new XMLSerializer().serializeToString(l)}d=qq.extend(this,new qq.AjaxRequester({method:b.method,contentType:"application/xml; charset=UTF-8",endpointStore:b.endpointStore,maxConnections:b.maxConnections,allowXRequestedWithAndCacheControl:false,log:b.log,onComplete:c,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{send:function(n,m,k){var l=new qq.Promise();j(n,m).then(function(r,q){var o=f(k);b.log("Submitting S3 complete multipart upload request for "+n);a[n]=l;delete r["Content-Type"];d.initTransport(n).withPath(q).withHeaders(r).withPayload(o).send()},l.failure);return l}})};qq.s3.AbortMultipartAjaxRequester=function(e){var c,b={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(h){},log:function(h,j){}},d;qq.extend(b,e);d=new qq.s3.RequestSigner({signatureSpec:b.signatureSpec,cors:b.cors,log:b.log});function f(o,n){var l={},k=new qq.Promise(),j=b.endpointStore.get(o),m=qq.s3.util.getBucket(j),h=d.constructStringToSign(d.REQUEST_TYPE.MULTIPART_ABORT,m,b.getKey(o)).withUploadId(n);d.getSignature(o,{signatureConstructor:h}).then(function(q){l=h.getHeaders();l.Authorization="AWS "+b.signatureSpec.credentialsProvider.get().accessKey+":"+q.signature;k.success(l,h.getEndOfUrl())},k.failure);return k}function a(o,n,k){var m=new DOMParser(),j=m.parseFromString(n.responseText,"application/xml"),h=j.getElementsByTagName("Error"),l;b.log(qq.format("Abort response status {}, body = {}",n.status,n.responseText));if(k){b.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",o,n.status),"error")}else{if(h.length){k=true;l=j.getElementsByTagName("Message")[0].textContent;b.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",o,l),"error")}else{b.log(qq.format("Abort MPU request succeeded for file ID {}.",o))}}}c=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:b.method,contentType:null,endpointStore:b.endpointStore,maxConnections:b.maxConnections,allowXRequestedWithAndCacheControl:false,log:b.log,onComplete:a,successfulResponseCodes:{DELETE:[204]}}));qq.extend(this,{send:function(j,h){f(j,h).then(function(l,k){b.log("Submitting S3 Abort multipart upload request for "+j);c.initTransport(j).withPath(k).withHeaders(l).send()})}})};qq.s3.UploadHandlerForm=function(h,y){var a=this,D=y.onUploadComplete,A=y.onUuidChanged,t=y.getName,k=y.getUuid,m=y.log,j=h.onComplete,e=h.onUpload,c=h.getKeyName,o=h.filenameParam,b=h.paramsStore,C=h.endpointStore,l=h.aclStore,v=h.objectProperties.reducedRedundancy,s=h.objectProperties.serverSideEncryption,q=h.validation,u=h.signature,w=h.iframeSupport.localBlankPagePath,z=h.signature.credentialsProvider,x=new qq.s3.RequestSigner({signatureSpec:u,cors:h.cors,log:m});if(w===undefined){throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!")}function d(E,J){var I,M=h.endpointStore.get(E),F=qq.s3.util.getBucket(M);try{var L=J.contentDocument||J.contentWindow.document,H=L.body.innerHTML;var G=qq.s3.util.parseIframeResponse(J);if(G.bucket===F&&G.key===qq.s3.util.encodeQueryStringParam(a._getFileState(E).key)){return true}m("Response from AWS included an unexpected bucket or key name.","error")}catch(K){m("Error when attempting to parse form upload response ("+K.message+")","error")}return false}function r(F){var E=b.get(F);E[o]=t(F);return qq.s3.util.generateAwsParams({endpoint:C.get(F),params:E,key:a._getFileState(F).key,accessKey:z.get().accessKey,sessionToken:z.get().sessionToken,acl:l.get(F),minFileSize:q.minSizeLimit,maxFileSize:q.maxSizeLimit,successRedirectUrl:w,reducedRedundancy:v,serverSideEncryption:s,log:m},qq.bind(x.getSignature,this,F))}function n(J,E){var G=new qq.Promise(),I=h.demoMode?"GET":"POST",F=h.endpointStore.get(J),H=t(J);r(J).then(function(L){var K=a._initFormForUpload({method:I,endpoint:F,params:L,paramsInBody:true,targetName:E.name});G.success(K)},function(K){G.failure(K);f(J,E,H,{error:K})});return G}function B(H){var G=t(H),F=a._createIframe(H),E=a._getFileState(H).input;n(H,F).then(function(I){e(H,G);I.appendChild(E);a._attachLoadEvent(F,function(J){m("iframe loaded");if(J){if(J.success===false){m("Amazon likely rejected the upload request","error")}}else{J={};J.success=d(H,F);if(J.success===false){m("A success response was received by Amazon, but it was invalid in some way.","error")}else{qq.extend(J,qq.s3.util.parseIframeResponse(F))}}f(H,F,G,J)});m("Sending upload request for "+H);I.submit();qq(I).remove()})}function f(H,F,G,E){a._detachLoadEvent(H);F&&qq(F).remove();if(!E.success){if(h.onAutoRetry(H,G,E)){return}}j(H,G,E);D(H)}qq.extend(this,new qq.AbstractUploadHandlerForm({options:{isCors:false,inputName:"file"},proxy:{onCancel:h.onCancel,onUuidChanged:A,getName:t,getUuid:k,log:m}}));qq.extend(this,{upload:function(G){var E=a._getFileState(G).input,F=t(G);if(!E){throw new Error("file with passed id was not added, or already uploaded or canceled")}if(this.isValid(G)){if(a._getFileState(G).key){B(G)}else{c(G,F).then(function(H){a._getFileState(G).key=H;B(G)},function(H){f(G,null,F,{error:H})})}}},getThirdPartyFileId:function(E){return a._getFileState(E).key}})};qq.s3.UploadHandlerXhr=function(n,W){var B=W.onUploadComplete,D=W.onUuidChanged,Q=W.getName,K=W.getUuid,L=W.getSize,b=W.getDataByUuid,l=W.log,y=200,Y=n.onProgress,P=n.onComplete,Z=n.onUpload,d=n.getKeyName,ac=n.filenameParam,H=n.paramsStore,w=n.endpointStore,u=n.aclStore,ab=n.objectProperties.reducedRedundancy,x=n.objectProperties.serverSideEncryption,M=n.validation,A=n.signature,r=n.chunking.enabled&&qq.supportedFeatures.chunking,q=n.resume.enabled&&r&&qq.supportedFeatures.resume&&window.localStorage!==undefined,G=this,t=n.signature.credentialsProvider,k=new qq.s3.RequestSigner({expectingPolicy:true,signatureSpec:A,cors:n.cors,log:l}),T=new qq.s3.RequestSigner({signatureSpec:A,cors:n.cors,log:l}),F=new qq.s3.InitiateMultipartAjaxRequester({filenameParam:ac,endpointStore:w,paramsStore:H,signatureSpec:A,aclStore:u,reducedRedundancy:ab,serverSideEncryption:x,cors:n.cors,log:l,getContentType:function(ad){return G._getMimeType(ad)},getKey:function(ad){return U(ad)},getName:function(ad){return Q(ad)}}),j=new qq.s3.CompleteMultipartAjaxRequester({endpointStore:w,signatureSpec:A,cors:n.cors,log:l,getKey:function(ad){return U(ad)}}),V=new qq.s3.AbortMultipartAjaxRequester({endpointStore:w,signatureSpec:A,cors:n.cors,log:l,getKey:function(ad){return U(ad)}});function U(ad){return encodeURIComponent(N(ad))}function N(ad){return G._getFileState(ad).key}function v(ae,ad){G._getFileState(ae).key=ad}function C(ae){var ad=G.getFile(ae);G._createXhr(ae);if(G._shouldChunkThisFile(ae)){if(G._getFileState(ae).loaded===undefined){G._getFileState(ae).loaded=0}O(ae)}else{G._getFileState(ae).loaded=0;f(ae)}}function h(ae){var ad=G._getFileState(ae).xhr;return function(){if(ad.readyState===4){if(G._getFileState(ae).chunking.enabled){I(ae)}else{J(ae)}}}}function R(ad){return ad==="EntityTooSmall"||ad==="InvalidPart"||ad==="InvalidPartOrder"||ad==="NoSuchUpload"}function J(ae,ai,ag){var al=ag||G._getFileState(ae).xhr,ad=Q(ae),am=L(ae),af=e(ae,ag),aj=ai||e(ae),ak=G._getFileState(ae).paused,ah=!ak&&(ai!=null||af.success!==true);if(ah){if(R(af.code)){l("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error");G._maybeDeletePersistedChunkData(ae);delete G._getFileState(ae).loaded;delete G._getFileState(ae).chunking}}if(!ah||!n.onAutoRetry(ae,ad,aj,al)){l(qq.format("Upload attempt for file ID {} to S3 is complete",ae));if(!ah&&!ak){aj.success=true;Y(ae,ad,am,am);G._maybeDeletePersistedChunkData(ae);delete G._getFileState(ae).loaded;delete G._getFileState(ae).chunking}if(ak){qq.log(qq.format("Detected pause on {} ({}).",ae,ad))}else{P(ae,ad,aj,al);G._getFileState(ae)&&delete G._getFileState(ae).xhr;B(ae)}}}function e(ai,ad){var ah=ad||G._getFileState(ai).xhr,af={},ae;try{l(qq.format("Received response status {} with body: {}",ah.status,ah.responseText));if(ah.status===y){af.success=true}else{ae=m(ah.responseText);if(ae){af.error=ae.message;af.code=ae.code}}}catch(ag){l("Error when attempting to parse xhr response text ("+ag.message+")","error")}return af}function m(ai){var aj=new DOMParser(),ad=aj.parseFromString(ai,"application/xml"),af=ad.getElementsByTagName("Error"),ae={},ah,ag;if(af.length){ah=ad.getElementsByTagName("Code");ag=ad.getElementsByTagName("Message");if(ag.length){ae.message=ag[0].textContent}if(ah.length){ae.code=ah[0].textContent}return ae}}function X(af,ad){var ae=Q(af);if(G.isValid(af)){G._maybePrepareForResume(af);if(N(af)!==undefined){Z(af,ae);C(af)}else{d(af,ae).then(function(ag){v(af,ag);Z(af,ae);C(af)},function(ag){J(af,{error:ag})})}}}function f(ag){var af=G._getFileState(ag).xhr,ae=Q(ag),ad=G.getFile(ag);af.upload.onprogress=function(ah){if(ah.lengthComputable){G._getFileState(ag).loaded=ah.loaded;Y(ag,ae,ah.loaded,ah.total)}};af.onreadystatechange=h(ag);o(ag,ad).then(function(ah){l("Sending upload request for "+ag);af.send(ah)})}function S(ae){var ad=H.get(ae);ad[ac]=Q(ae);return qq.s3.util.generateAwsParams({endpoint:w.get(ae),params:ad,type:G._getMimeType(ae),key:N(ae),accessKey:t.get().accessKey,sessionToken:t.get().sessionToken,acl:u.get(ae),expectedStatus:y,minFileSize:M.minSizeLimit,maxFileSize:M.maxSizeLimit,reducedRedundancy:ab,serverSideEncryption:x,log:l},qq.bind(k.getSignature,this,ae))}function o(aj,ae){var af=new FormData(),ai=w.get(aj),ad=ai,ah=G._getFileState(aj).xhr,ag=new qq.Promise();S(aj).then(function(ak){ah.open("POST",ad,true);qq.obj2FormData(ak,af);af.append("file",ae);ag.success(af)},function(ak){ag.failure(ak);J(aj,{error:ak})});return ag}function O(ad){c(ad).then(function(af,ae){E(ad)},function(ae,af){J(ad,{error:ae},af)})}function a(ad){return G._getFileState(ad).chunking.lastSent>=0?G._getFileState(ad).chunking.lastSent+1:0}function E(af){var ad=G._getFileState(af).chunking.parts,ae=a(af);if(ae<ad){aa(af)}else{z(af)}}function z(af){var ae=G._getFileState(af).chunking.uploadId,ad=G._getFileState(af).chunking.etags;j.send(af,ae,ad).then(function(ag){J(af,null,ag)},function(ag,ah){J(af,{error:ag},ah)})}function aa(aj){var ad=a(aj),ag=Q(aj),ai=G._getFileState(aj).xhr,af=L(aj),ae=G._getChunkData(aj,ad),ah=n.endpointStore.get(aj);s(aj).then(function(am,ak){var al=ah+"/"+ak;n.onUploadChunk(aj,ag,G._getChunkDataForCallback(ae));ai.upload.onprogress=function(ao){if(ao.lengthComputable){var an=ao.loaded+G._getFileState(aj).loaded;n.onProgress(aj,ag,an,af)}};ai.onreadystatechange=h(aj);ai.open("PUT",al,true);qq.each(am,function(an,ao){ai.setRequestHeader(an,ao)});l(qq.format("Sending part {} of {} for file ID {} - {} ({} bytes)",ae.part+1,ae.count,aj,ag,ae.size));ai.send(ae.blob)},function(){J(aj,{error:"Problem signing the chunk!"},ai)})}function s(aj){var ah={},ag=n.endpointStore.get(aj),ai=qq.s3.util.getBucket(ag),ae=U(aj),af=new qq.Promise(),ad=T.constructStringToSign(T.REQUEST_TYPE.MULTIPART_UPLOAD,ai,ae).withPartNum(a(aj)+1).withUploadId(G._getFileState(aj).chunking.uploadId);T.getSignature(aj,{signatureConstructor:ad}).then(function(ak){ah=ad.getHeaders();ah.Authorization="AWS "+t.get().accessKey+":"+ak.signature;af.success(ah,ad.getEndOfUrl())},af.failure);return af}function c(ad){if(!G._getFileState(ad).chunking.uploadId){return F.send(ad).then(function(ae){G._getFileState(ad).chunking.uploadId=ae})}else{return new qq.Promise().success(G._getFileState(ad).chunking.uploadId)}}function I(ai){var ag=a(ai),ah=G._getFileState(ai).xhr,ae=e(ai),ad=G._getChunkData(ai,ag),af;if(ae.success){G._getFileState(ai).chunking.lastSent=ag;af=ah.getResponseHeader("ETag");if(!G._getFileState(ai).chunking.etags){G._getFileState(ai).chunking.etags=[]}G._getFileState(ai).chunking.etags.push({part:ag+1,etag:af});G._getFileState(ai).loaded+=ad.size;G._maybePersistChunkedState(ai);n.onUploadChunkSuccess(ai,G._getChunkDataForCallback(ad),ae,ah);E(ai)}else{if(ae.error){l(ae.error,"error")}J(ai)}}qq.extend(this,new qq.AbstractNonTraditionalUploadHandlerXhr({options:{namespace:"s3",chunking:r?n.chunking:null,resumeEnabled:q},proxy:{onUpload:X,onCancel:n.onCancel,onUuidChanged:D,getName:Q,getSize:L,getUuid:K,getEndpoint:w.get,getDataByUuid:b,log:l}}));qq.override(this,function(ad){return{expunge:function(ag){var af=G._getFileState(ag).chunking&&G._getFileState(ag).chunking.uploadId,ae=G._maybeDeletePersistedChunkData(ag);if(af!==undefined&&ae){V.send(ag,af)}ad.expunge(ag)},_getLocalStorageId:function(ah){var ag=ad._getLocalStorageId(ah),af=w.get(ah),ae=qq.s3.util.getBucket(af);return ag+"-"+ae}}})};(function(){qq.s3.FineUploader=function(b){var a={failedUploadTextDisplay:{mode:"custom"}};qq.extend(a,b,true);qq.FineUploader.call(this,a,"s3");if(!qq.supportedFeatures.ajaxUploading&&a.iframeSupport.localBlankPagePath===undefined){this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>"}};qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype);qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi);qq.extend(qq.s3.FineUploader.prototype,{_onComplete:function(e,c,a,d){var b=qq.FineUploader.prototype._onComplete.apply(this,arguments);if(b instanceof qq.Promise){this._templating.hideProgress(e);this._templating.setStatusText(e,this._options.text.waitingForResponse)}return b}})}());qq.DragAndDrop=function(d){var r,j="qq-hidezones",n="qq-hide-dropzone",q=[],a=[],m=new qq.DisposeSupport();r={dropZoneElements:[],allowMultipleItems:true,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks()};qq.extend(r,d,true);function b(s,o){var t=Array.prototype.slice.call(s);r.callbacks.dropLog("Grabbed "+s.length+" dropped files.");o.dropDisabled(false);r.callbacks.processingDroppedFilesComplete(t,o.getElement())}function f(t){var s,o=new qq.Promise();if(t.isFile){t.file(function(x){var w=t.name,v=t.fullPath,u=v.indexOf(w);v=v.substr(0,u);if(v.charAt(0)==="/"){v=v.substr(1)}x.qqPath=v;a.push(x);o.success()},function(u){r.callbacks.dropLog("Problem parsing '"+t.fullPath+"'.  FileError code "+u.code+".","error");o.failure()})}else{if(t.isDirectory){s=t.createReader();s.readEntries(function(u){var v=u.length;qq.each(u,function(w,x){f(x).done(function(){v-=1;if(v===0){o.success()}})});if(!u.length){o.success()}},function(u){r.callbacks.dropLog("Problem parsing '"+t.fullPath+"'.  FileError code "+u.code+".","error");o.failure()})}}return o}function l(t,s){var o=[],u=new qq.Promise();r.callbacks.processingDroppedFiles();s.dropDisabled(true);if(t.files.length>1&&!r.allowMultipleItems){r.callbacks.processingDroppedFilesComplete([]);r.callbacks.dropError("tooManyFilesError","");s.dropDisabled(false);u.failure()}else{a=[];if(qq.isFolderDropSupported(t)){qq.each(t.items,function(v,x){var w=x.webkitGetAsEntry();if(w){if(w.isFile){a.push(x.getAsFile())}else{o.push(f(w).done(function(){o.pop();if(o.length===0){u.success()}}))}}})}else{a=t.files}if(o.length===0){u.success()}}return u}function c(o){var s=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:j,element:o,onEnter:function(t){qq(o).addClass(r.classes.dropActive);t.stopPropagation()},onLeaveNotDescendants:function(t){qq(o).removeClass(r.classes.dropActive)},onDrop:function(t){l(t.dataTransfer,s).then(function(){b(a,s)},function(){r.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});m.addDisposer(function(){s.dispose()});qq(o).hasAttribute(n)&&qq(o).hide();q.push(s);return s}function h(s){var o;qq.each(s.dataTransfer.types,function(t,u){if(u==="Files"){o=true;return false}});return o}function k(o){if(qq.firefox()){return !o.relatedTarget}if(qq.safari()){return o.x<0||o.y<0}return o.x===0&&o.y===0}function e(){var o=r.dropZoneElements,s=function(){setTimeout(function(){qq.each(o,function(t,u){qq(u).hasAttribute(n)&&qq(u).hide();qq(u).removeClass(r.classes.dropActive)})},10)};qq.each(o,function(t,v){var u=c(v);if(o.length&&(!qq.ie()||qq.ie10())){m.attach(document,"dragenter",function(w){if(!u.dropDisabled()&&h(w)){qq.each(o,function(x,y){if(y instanceof HTMLElement){qq(y).css({display:"block"})}})}})}});m.attach(document,"dragleave",function(t){if(k(t)){s()}});m.attach(qq(document).children()[0],"mouseenter",function(t){s()});m.attach(document,"drop",function(t){t.preventDefault();s()});m.attach(document,j,s)}e();qq.extend(this,{setupExtraDropzone:function(o){r.dropZoneElements.push(o);c(o)},removeDropzone:function(t){var s,o=r.dropZoneElements;for(s in o){if(o[s]===t){return o.splice(s,1)}}},dispose:function(){m.dispose();qq.each(q,function(o,s){s.dispose()})}})};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(a,b){},dropError:function(b,a){qq.log("Drag & drop error code '"+b+" with these specifics: '"+a+"'","error")},dropLog:function(a,b){qq.log(a,b)}}};qq.UploadDropZone=function(c){var j=new qq.DisposeSupport(),n,e,k,f;n={element:null,onEnter:function(o){},onLeave:function(o){},onLeaveNotDescendants:function(o){},onDrop:function(o){}};qq.extend(n,c);e=n.element;function a(){return qq.safari()||(qq.firefox()&&qq.windows())}function d(o){if(!f){if(a){j.attach(document,"dragover",function(q){q.preventDefault()})}else{j.attach(document,"dragover",function(q){if(q.dataTransfer){q.dataTransfer.dropEffect="none";q.preventDefault()}})}f=true}}function b(s){if(qq.ie()&&!qq.ie10()){return false}var r,q=s.dataTransfer,o=qq.safari();r=(qq.ie10()||qq.ie11())?true:q.effectAllowed!=="none";return q&&r&&(q.files||(!o&&q.types.contains&&q.types.contains("Files")))}function m(o){if(o!==undefined){k=o}return k}function l(){var q;function r(){q=document.createEvent("Event");q.initEvent(n.HIDE_ZONES_EVENT_NAME,true,true)}if(window.CustomEvent){try{q=new CustomEvent(n.HIDE_ZONES_EVENT_NAME)}catch(o){r()}}else{r()}document.dispatchEvent(q)}function h(){j.attach(e,"dragover",function(q){if(!b(q)){return}var o=(qq.ie()||qq.ie11())?null:q.dataTransfer.effectAllowed;if(o==="move"||o==="linkMove"){q.dataTransfer.dropEffect="move"}else{q.dataTransfer.dropEffect="copy"}q.stopPropagation();q.preventDefault()});j.attach(e,"dragenter",function(o){if(!m()){if(!b(o)){return}n.onEnter(o)}});j.attach(e,"dragleave",function(q){if(!b(q)){return}n.onLeave(q);var o=document.elementFromPoint(q.clientX,q.clientY);if(qq(this).contains(o)){return}n.onLeaveNotDescendants(q)});j.attach(e,"drop",function(o){if(!m()){if(!b(o)){return}o.preventDefault();o.stopPropagation();n.onDrop(o);l()}})}d();h();qq.extend(this,{dropDisabled:function(o){return m(o)},dispose:function(){j.dispose()},getElement:function(){return e}})};qq.UiEventHandler=function(d,a){var c=new qq.DisposeSupport(),b={eventType:"click",attachTo:null,onHandled:function(h,f){}};qq.extend(this,{addHandler:function(f){e(f)},dispose:function(){c.dispose()}});function e(f){c.attach(f,b.eventType,function(h){h=h||window.event;var j=h.target||h.srcElement;b.onHandled(j,h)})}qq.extend(a,{getFileIdFromItem:function(f){return f.qqFileId},getDisposeSupport:function(){return c}});qq.extend(b,d);if(b.attachTo){e(b.attachTo)}};qq.FileButtonsClickHandler=function(c){var e={},a={templating:null,log:function(h,f){},onDeleteFile:function(f){},onCancel:function(f){},onRetry:function(f){},onPause:function(f){},onContinue:function(f){},onGetName:function(f){}},d={cancel:function(f){a.onCancel(f)},retry:function(f){a.onRetry(f)},deleteButton:function(f){a.onDeleteFile(f)},pause:function(f){a.onPause(f)},continueButton:function(f){a.onContinue(f)}};function b(h,f){qq.each(d,function(k,l){var m=k.charAt(0).toUpperCase()+k.slice(1),j;if(a.templating["is"+m](h)){j=a.templating.getFileId(h);qq.preventDefault(f);a.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",a.onGetName(j),j));l(j);return false}})}qq.extend(a,c);a.eventType="click";a.onHandled=b;a.attachTo=a.templating.getFileList();qq.extend(this,new qq.UiEventHandler(a,e))};qq.FormSupport=function(m,a,b){var l=this,f=m.interceptSubmit,j=m.element,k=m.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:k,attachedToForm:false,getFormInputsAsObject:function(){if(j==null){return null}return l._form2Obj(j)}});function d(n){if(n.getAttribute("action")){l.newEndpoint=n.getAttribute("action")}}function h(o,n){if(o.checkValidity&&!o.checkValidity()){b("Form did not pass validation checks - will not upload.","error");n()}else{return true}}function e(o){var n=o.submit;qq(o).attach("submit",function(q){q=q||window.event;if(q.preventDefault){q.preventDefault()}else{q.returnValue=false}h(o,n)&&a()});o.submit=function(){h(o,n)&&a()}}function c(n){if(n){if(qq.isString(n)){n=document.getElementById(n)}if(n){b("Attaching to form element.");d(n);f&&e(n)}}return n}j=c(j);this.attachedToForm=!!j};qq.extend(qq.FormSupport.prototype,{_form2Obj:function(d){var e={},f=function(h){var j=["button","image","reset","submit"];return qq.indexOf(j,h.toLowerCase())<0},b=function(h){return qq.indexOf(["checkbox","radio"],h.toLowerCase())>=0},a=function(h){if(b(h.type)&&!h.checked){return true}return h.disabled&&h.type.toLowerCase()!=="hidden"},c=function(h){var j=null;qq.each(qq(h).children(),function(k,l){if(l.tagName.toLowerCase()==="option"&&l.selected){j=l.value;return false}});return j};qq.each(d.elements,function(h,j){if(qq.isInput(j,true)&&f(j.type)&&!a(j)){e[j.name]=j.value}else{if(j.tagName.toLowerCase()==="select"&&!a(j)){var k=c(j);if(k!==null){e[j.name]=k}}}});return e}});var CryptoJS=CryptoJS||(function(e,h){var a={};var b=a.lib={};var l=b.Base=(function(){function q(){}return{extend:function(s){q.prototype=this;var r=new q();if(s){r.mixIn(s)}if(!r.hasOwnProperty("init")){r.init=function(){r.$super.init.apply(this,arguments)}}r.init.prototype=r;r.$super=this;return r},create:function(){var r=this.extend();r.init.apply(r,arguments);return r},init:function(){},mixIn:function(s){for(var r in s){if(s.hasOwnProperty(r)){this[r]=s[r]}}if(s.hasOwnProperty("toString")){this.toString=s.toString}},clone:function(){return this.init.prototype.extend(this)}}}());var n=b.WordArray=l.extend({init:function(r,q){r=this.words=r||[];if(q!=h){this.sigBytes=q}else{this.sigBytes=r.length*4}},toString:function(q){return(q||j).stringify(this)},concat:function(w){var t=this.words;var s=w.words;var q=this.sigBytes;var v=w.sigBytes;this.clamp();if(q%4){for(var u=0;u<v;u++){var r=(s[u>>>2]>>>(24-(u%4)*8))&255;t[(q+u)>>>2]|=r<<(24-((q+u)%4)*8)}}else{if(s.length>65535){for(var u=0;u<v;u+=4){t[(q+u)>>>2]=s[u>>>2]}}else{t.push.apply(t,s)}}this.sigBytes+=v;return this},clamp:function(){var r=this.words;var q=this.sigBytes;r[q>>>2]&=4294967295<<(32-(q%4)*8);r.length=e.ceil(q/4)},clone:function(){var q=l.clone.call(this);q.words=this.words.slice(0);return q},random:function(s){var r=[];for(var q=0;q<s;q+=4){r.push((e.random()*4294967296)|0)}return new n.init(r,s)}});var o=a.enc={};var j=o.Hex={stringify:function(s){var u=s.words;var r=s.sigBytes;var t=[];for(var q=0;q<r;q++){var v=(u[q>>>2]>>>(24-(q%4)*8))&255;t.push((v>>>4).toString(16));t.push((v&15).toString(16))}return t.join("")},parse:function(s){var q=s.length;var t=[];for(var r=0;r<q;r+=2){t[r>>>3]|=parseInt(s.substr(r,2),16)<<(24-(r%8)*4)}return new n.init(t,q/2)}};var d=o.Latin1={stringify:function(t){var u=t.words;var s=t.sigBytes;var q=[];for(var r=0;r<s;r++){var v=(u[r>>>2]>>>(24-(r%4)*8))&255;q.push(String.fromCharCode(v))}return q.join("")},parse:function(s){var q=s.length;var t=[];for(var r=0;r<q;r++){t[r>>>2]|=(s.charCodeAt(r)&255)<<(24-(r%4)*8)}return new n.init(t,q)}};var c=o.Utf8={stringify:function(q){try{return decodeURIComponent(escape(d.stringify(q)))}catch(r){throw new Error("Malformed UTF-8 data")}},parse:function(q){return d.parse(unescape(encodeURIComponent(q)))}};var k=b.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new n.init();this._nDataBytes=0},_append:function(q){if(typeof q=="string"){q=c.parse(q)}this._data.concat(q);this._nDataBytes+=q.sigBytes},_process:function(z){var t=this._data;var A=t.words;var q=t.sigBytes;var w=this.blockSize;var y=w*4;var x=q/y;if(z){x=e.ceil(x)}else{x=e.max((x|0)-this._minBufferSize,0)}var v=x*w;var u=e.min(v*4,q);if(v){for(var s=0;s<v;s+=w){this._doProcessBlock(A,s)}var r=A.splice(0,v);t.sigBytes-=u}return new n.init(r,u)},clone:function(){var q=l.clone.call(this);q._data=this._data.clone();return q},_minBufferSize:0});var f=b.Hasher=k.extend({cfg:l.extend(),init:function(q){this.cfg=this.cfg.extend(q);this.reset()},reset:function(){k.reset.call(this);this._doReset()},update:function(q){this._append(q);this._process();return this},finalize:function(q){if(q){this._append(q)}var r=this._doFinalize();return r},blockSize:512/32,_createHelper:function(q){return function(s,r){return new q.init(r).finalize(s)}},_createHmacHelper:function(q){return function(s,r){return new m.HMAC.init(q,r).finalize(s)}}});var m=a.algo={};return a}(Math));(function(){var e=CryptoJS;var a=e.lib;var b=a.WordArray;var d=e.enc;var c=d.Base64={stringify:function(m){var o=m.words;var r=m.sigBytes;var h=this._map;m.clamp();var n=[];for(var l=0;l<r;l+=3){var u=(o[l>>>2]>>>(24-(l%4)*8))&255;var s=(o[(l+1)>>>2]>>>(24-((l+1)%4)*8))&255;var q=(o[(l+2)>>>2]>>>(24-((l+2)%4)*8))&255;var t=(u<<16)|(s<<8)|q;for(var k=0;(k<4)&&(l+k*0.75<r);k++){n.push(h.charAt((t>>>(6*(3-k)))&63))}}var f=h.charAt(64);if(f){while(n.length%4){n.push(f)}}return n.join("")},parse:function(q){var n=q.length;var h=this._map;var f=h.charAt(64);if(f){var r=q.indexOf(f);if(r!=-1){n=r}}var o=[];var m=0;for(var l=0;l<n;l++){if(l%4){var k=h.indexOf(q.charAt(l-1))<<((l%4)*2);var j=h.indexOf(q.charAt(l))>>>(6-(l%4)*2);o[m>>>2]|=(k|j)<<(24-(m%4)*8);m++}}return b.create(o,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}());(function(){var h=CryptoJS;var d=h.lib;var c=d.Base;var f=h.enc;var b=f.Utf8;var e=h.algo;var a=e.HMAC=c.extend({init:function(s,o){s=this._hasher=new s.init();if(typeof o=="string"){o=b.parse(o)}var l=s.blockSize;var j=l*4;if(o.sigBytes>j){o=s.finalize(o)}o.clamp();var r=this._oKey=o.clone();var n=this._iKey=o.clone();var q=r.words;var k=n.words;for(var m=0;m<l;m++){q[m]^=1549556828;k[m]^=909522486}r.sigBytes=n.sigBytes=j;this.reset()},reset:function(){var j=this._hasher;j.reset();j.update(this._iKey)},update:function(j){this._hasher.update(j);return this},finalize:function(j){var k=this._hasher;var m=k.finalize(j);k.reset();var l=k.finalize(this._oKey.clone().concat(m));return l}})}());(function(){var h=CryptoJS;var d=h.lib;var f=d.WordArray;var b=d.Hasher;var e=h.algo;var a=[];var c=e.SHA1=b.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(o,k){var v=this._hash.words;var u=v[0];var s=v[1];var r=v[2];var q=v[3];var m=v[4];for(var l=0;l<80;l++){if(l<16){a[l]=o[k+l]|0}else{var j=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=(j<<1)|(j>>>31)}var w=((u<<5)|(u>>>27))+m+a[l];if(l<20){w+=((s&r)|(~s&q))+1518500249}else{if(l<40){w+=(s^r^q)+1859775393}else{if(l<60){w+=((s&r)|(s&q)|(r&q))-1894007588}else{w+=(s^r^q)-899497514}}}m=q;q=r;r=(s<<30)|(s>>>2);s=u;u=w}v[0]=(v[0]+u)|0;v[1]=(v[1]+s)|0;v[2]=(v[2]+r)|0;v[3]=(v[3]+q)|0;v[4]=(v[4]+m)|0},_doFinalize:function(){var l=this._data;var m=l.words;var j=this._nDataBytes*8;var k=l.sigBytes*8;m[k>>>5]|=128<<(24-k%32);m[(((k+64)>>>9)<<4)+14]=Math.floor(j/4294967296);m[(((k+64)>>>9)<<4)+15]=j;l.sigBytes=m.length*4;this._process();return this._hash},clone:function(){var j=b.clone.call(this);j._hash=this._hash.clone();return j}});h.SHA1=b._createHelper(c);h.HmacSHA1=b._createHmacHelper(c)}());(function(){var k,bs=document,aU=window,aO=Math,m=aO.round,be=aO.floor,ay=aO.ceil,bW=aO.max,ak=aO.min,e=aO.abs,bN=aO.cos,Z=aO.sin,N=aO.PI,aw=N*2/360,r=navigator.userAgent,ar=aU.opera,o=/msie/i.test(r)&&!ar,B=bs.documentMode===8,G=/AppleWebKit/.test(r),bg=/Firefox/.test(r),aS="http://www.w3.org/2000/svg",bM=!!bs.createElementNS&&!!bs.createElementNS(aS,"svg").createSVGRect,ab=bg&&parseInt(r.split("Firefox/")[1],10)<4,aY=!bM&&!o&&!!bs.createElement("canvas").getContext,bI,C=bs.documentElement.ontouchstart!==k,c={},a2=0,ae,bp,bG,bX,ao,aV,j=function(){},J="div",am="absolute",I="relative",af="hidden",aZ="highcharts-",aj="visible",V="px",y="none",bl="M",bm="L",bQ="rgba(192,192,192,"+(bM?0.000001:0.002)+")",ai="",aK="hover",bh="select",bL="millisecond",a9="second",by="minute",T="hour",bz="day",bK="week",a8="month",a6="year",a1="fill",ax="linearGradient",bA="stops",bP="stroke",aH="stroke-width",Y,z,U,at,bc,X,W,an,bx,aB,bC,E,a={};aU.Highcharts={};function bd(M,L){var bY;if(!M){M={}}for(bY in L){M[bY]=L[bY]}return M}function aN(){var M=0,L=arguments,bY=L.length,bZ={};for(;M<bY;M++){bZ[L[M++]]=L[M]}return bZ}function bD(L,M){return parseInt(L,M||10)}function bi(L){return typeof L==="string"}function bT(L){return typeof L==="object"}function aD(L){return Object.prototype.toString.call(L)==="[object Array]"}function aq(L){return typeof L==="number"}function s(L){return aO.log(L)/aO.LN10}function v(L){return aO.pow(10,L)}function O(L,bY){var M=L.length;while(M--){if(L[M]===bY){L.splice(M,1);break}}}function ad(L){return L!==k&&L!==null}function Q(bY,b1,b0){var M,bZ="setAttribute",L;if(bi(b1)){if(ad(b0)){bY[bZ](b1,b0)}else{if(bY&&bY.getAttribute){L=bY.getAttribute(b1)}}}else{if(ad(b1)&&bT(b1)){for(M in b1){bY[bZ](M,b1[M])}}}return L}function a7(L){return aD(L)?L:[L]}function aJ(){var M=arguments,bY,L,bZ=M.length;for(bY=0;bY<bZ;bY++){L=M[bY];if(typeof L!=="undefined"&&L!==null){return L}}}function bR(L,M){if(o){if(M&&M.opacity!==k){M.filter="alpha(opacity="+(M.opacity*100)+")"}}bd(L.style,M)}function bf(L,b1,b0,bZ,bY){var M=bs.createElement(L);if(b1){bd(M,b1)}if(bY){bR(M,{padding:0,border:y,margin:0})}if(b0){bR(M,b0)}if(bZ){bZ.appendChild(M)}return M}function ba(bY,L){var M=function(){};M.prototype=new bY();bd(M.prototype,L);return M}function f(L){L=(L||0).toString();return L.indexOf(".")>-1?L.split(".")[1].length:0}function l(bZ,bY,b5,b4){var L=bp.lang,M=bZ,b3=bY===-1?f(bZ):(isNaN(bY=e(bY))?2:bY),b2=b5===undefined?L.decimalPoint:b5,b6=b4===undefined?L.thousandsSep:b4,b7=M<0?"-":"",b1=String(bD(M=e(+M||0).toFixed(b3))),b0=b1.length>3?b1.length%3:0;return b7+(b0?b1.substr(0,b0)+b6:"")+b1.substr(b0).replace(/(\d{3})(?=\d)/g,"$1"+b6)+(b3?b2+e(M-b1).toFixed(b3).slice(2):"")}function bv(M,L){return new Array((L||2)+1-String(M).length).join(0)+M}function aR(bY,bZ,M){var L=bY[bZ];bY[bZ]=function(){var b0=Array.prototype.slice.call(arguments);b0.unshift(L);return M.apply(this,b0)}}bG=function(b5,b1,bZ){if(!ad(b1)||isNaN(b1)){return"Invalid date"}b5=aJ(b5,"%Y-%m-%d %H:%M:%S");var M=new Date(b1),b7,b4=M[U](),b2=M[at](),b6=M[bc](),b0=M[X](),b8=M[W](),L=bp.lang,b3=L.weekdays,bY={a:b3[b2].substr(0,3),A:b3[b2],d:bv(b6),e:b6,b:L.shortMonths[b0],B:L.months[b0],m:bv(b0+1),y:b8.toString().substr(2,2),Y:b8,H:bv(b4),I:bv((b4%12)||12),l:(b4%12)||12,M:bv(M[z]()),p:b4<12?"AM":"PM",P:b4<12?"am":"pm",S:bv(M.getSeconds()),L:bv(m(b1%1000),3)};for(b7 in bY){b5=b5.replace("%"+b7,bY[b7])}return bZ?b5.substr(0,1).toUpperCase()+b5.substr(1):b5};function bw(L,b1,bZ,M){var b0,bY;bZ=aJ(bZ,1);b0=L/bZ;if(!b1){b1=[1,2,2.5,5,10];if(M&&M.allowDecimals===false){if(bZ===1){b1=[1,2,5,10]}else{if(bZ<=0.1){b1=[1/bZ]}}}}for(bY=0;bY<b1.length;bY++){L=b1[bY];if(b0<=(b1[bY]+(b1[bY+1]||b1[bY]))/2){break}}L*=bZ;return L}function al(L,bY){var b2=bY||[[bL,[1,2,5,10,20,25,50,100,200,500]],[a9,[1,2,5,10,15,30]],[by,[1,2,5,10,15,30]],[T,[1,2,3,4,6,8,12]],[bz,[1,2]],[bK,[1,2]],[a8,[1,2,3,4,6]],[a6,null]],b4=b2[b2.length-1],M=aV[b4[0]],bZ=b4[1],b1,b0;for(b0=0;b0<b2.length;b0++){b4=b2[b0];M=aV[b4[0]];bZ=b4[1];if(b2[b0+1]){var b3=(M*bZ[bZ.length-1]+aV[b2[b0+1][0]])/2;if(L<=b3){break}}}if(M===aV[a6]&&L<5*M){bZ=[1,2,5]}if(M===aV[a6]&&L<5*M){bZ=[1,2,5]}b1=bw(L/M,bZ);return{unitRange:M,count:b1,unitName:b4[0]}}function ap(b5,b0,b4,ca){var cb=[],b1,b9={},b8=bp.global.useUTC,b7,bZ=new Date(b0),M=b5.unitRange,b3=b5.count;if(M>=aV[a9]){bZ.setMilliseconds(0);bZ.setSeconds(M>=aV[by]?0:b3*be(bZ.getSeconds()/b3))}if(M>=aV[by]){bZ[an](M>=aV[T]?0:b3*be(bZ[z]()/b3))}if(M>=aV[T]){bZ[bx](M>=aV[bz]?0:b3*be(bZ[U]()/b3))}if(M>=aV[bz]){bZ[aB](M>=aV[a8]?1:b3*be(bZ[bc]()/b3))}if(M>=aV[a8]){bZ[bC](M>=aV[a6]?0:b3*be(bZ[X]()/b3));b7=bZ[W]()}if(M>=aV[a6]){b7-=b7%b3;bZ[E](b7)}if(M===aV[bK]){bZ[aB](bZ[bc]()-bZ[at]()+aJ(ca,1))}b1=1;b7=bZ[W]();var bY=bZ.getTime(),b2=bZ[X](),L=bZ[bc](),b6=b8?0:(24*3600*1000+bZ.getTimezoneOffset()*60*1000)%(24*3600*1000);while(bY<b4){cb.push(bY);if(M===aV[a6]){bY=Y(b7+b1*b3,0)}else{if(M===aV[a8]){bY=Y(b7,b2+b1*b3)}else{if(!b8&&(M===aV[bz]||M===aV[bK])){bY=Y(b7,b2,L+b1*b3*(M===aV[bz]?1:7))}else{bY+=M*b3;if(M<=aV[T]&&bY%aV[bz]===b6){b9[bY]=bz}}}}b1++}cb.push(bY);cb.info=bd(b5,{higherRanks:b9,totalRange:M*b3});return cb}function K(){this.color=0;this.symbol=0}K.prototype={wrapColor:function(L){if(this.color>=L){this.color=0}},wrapSymbol:function(L){if(this.symbol>=L){this.symbol=0}}};function aE(M,L){var b0=M.length,bY,bZ;for(bZ=0;bZ<b0;bZ++){M[bZ].ss_i=bZ}M.sort(function(b2,b1){bY=L(b2,b1);return bY===0?b2.ss_i-b1.ss_i:bY});for(bZ=0;bZ<b0;bZ++){delete M[bZ].ss_i}}function bt(bY){var M=bY.length,L=bY[0];while(M--){if(bY[M]<L){L=bY[M]}}return L}function aG(bY){var M=bY.length,L=bY[0];while(M--){if(bY[M]>L){L=bY[M]}}return L}function a3(M,L){var bY;for(bY in M){if(M[bY]&&M[bY]!==L&&M[bY].destroy){M[bY].destroy()}delete M[bY]}}function bF(L){if(!ae){ae=bf(J)}if(L){ae.appendChild(L)}ae.innerHTML=""}function bE(M,L){var bY="Highcharts error #"+M+": www.highcharts.com/errors/"+M;if(L){throw bY}else{if(aU.console){console.log(bY)}}}function ac(L){return parseFloat(L.toPrecision(14))}function bS(M,L){bX=aJ(M,L.animation)}aV=aN(bL,1,a9,1000,by,60000,T,3600000,bz,24*3600000,bK,7*24*3600000,a8,30*24*3600000,a6,31556952000);ao={init:function(b0,b5,b6){b5=b5||"";var M=b0.shift,bY=b5.indexOf("C")>-1,bZ=bY?7:3,b3,b7,b2,L=b5.split(" "),b1=[].concat(b6),b9,b4,b8=function(ca){b2=ca.length;while(b2--){if(ca[b2]===bl){ca.splice(b2+1,0,ca[b2+1],ca[b2+2],ca[b2+1],ca[b2+2])}}};if(bY){b8(L);b8(b1)}if(b0.isArea){b9=L.splice(L.length-6,6);b4=b1.splice(b1.length-6,6)}if(M<=b1.length/bZ){while(M--){b1=[].concat(b1).splice(0,bZ).concat(b1)}}b0.shift=0;if(L.length){b3=b1.length;while(L.length<b3){b7=[].concat(L).splice(L.length-bZ,bZ);if(bY){b7[bZ-6]=b7[bZ-2];b7[bZ-5]=b7[bZ-1]}L=L.concat(b7)}}if(b9){L=L.concat(b9);b1=b1.concat(b4)}return[L,b1]},step:function(b2,M,b1,L){var bZ=[],b0=b2.length,bY;if(b1===1){bZ=L}else{if(b0===M.length&&b1<1){while(b0--){bY=parseFloat(b2[b0]);bZ[b0]=isNaN(bY)?b2[b0]:b1*(parseFloat(M[b0]-bY))+bY}}else{bZ=M}}return bZ}};(function(L){aU.HighchartsAdapter=aU.HighchartsAdapter||(L&&{init:function(b1){var b0=L.fx,bY=b0.step,bZ,b2=L.Tween,M=b2&&b2.propHooks;L.extend(L.easing,{easeOutQuad:function(b4,b5,b3,b7,b6){return -b7*(b5/=b6)*(b5-2)+b3}});L.each(["cur","_default","width","height"],function(b3,b4){var b7=bY,b6,b5;if(b4==="cur"){b7=b0.prototype}else{if(b4==="_default"&&b2){b7=M[b4];b4="set"}}b6=b7[b4];if(b6){b7[b4]=function(b8){b8=b3?b8:this;b5=b8.elem;return b5.attr?b5.attr(b8.prop,b4==="cur"?k:b8.now):b6.apply(this,arguments)}}});bZ=function(b5){var b4=b5.elem,b3;if(!b5.started){b3=b1.init(b4,b4.d,b4.toD);b5.start=b3[0];b5.end=b3[1];b5.started=true}b4.attr("d",b1.step(b5.start,b5.end,b5.pos,b4.toD))};if(b2){M.d={set:bZ}}else{bY.d=bZ}this.each=Array.prototype.forEach?function(b3,b4){return Array.prototype.forEach.call(b3,b4)}:function(b4,b6){var b5=0,b3=b4.length;for(;b5<b3;b5++){if(b6.call(b4[b5],b4[b5],b5,b4)===false){return b5}}}},getScript:L.getScript,inArray:L.inArray,adapterRun:function(M,bY){return L(M)[bY]()},grep:L.grep,map:function(bY,b1){var b0=[],bZ=0,M=bY.length;for(;bZ<M;bZ++){b0[bZ]=b1.call(bY[bZ],bY[bZ],bZ,bY)}return b0},merge:function(){var M=arguments;return L.extend(true,null,M[0],M[1],M[2],M[3])},offset:function(M){return L(M).offset()},addEvent:function(bY,bZ,M){L(bY).bind(bZ,M)},removeEvent:function(bZ,M,bY){var b0=bs.removeEventListener?"removeEventListener":"detachEvent";if(bs[b0]&&!bZ[b0]){bZ[b0]=function(){}}L(bZ).unbind(M,bY)},fireEvent:function(b1,b0,bY,M){var b3=L.Event(b0),b2="detached"+b0,bZ;if(!o&&bY){delete bY.layerX;delete bY.layerY}bd(b3,bY);if(b1[b0]){b1[b2]=b1[b0];b1[b0]=null}L.each(["preventDefault","stopPropagation"],function(b4,b5){var b6=b3[b5];b3[b5]=function(){try{b6.call(b3)}catch(b7){if(b5==="preventDefault"){bZ=true}}}});L(b1).trigger(b3);if(b1[b2]){b1[b0]=b1[b2];b1[b2]=null}if(M&&!b3.isDefaultPrevented()&&!bZ){M(b3)}},washMouseEvent:function(bY){var M=bY.originalEvent||bY;if(M.pageX===k){M.pageX=bY.pageX;M.pageY=bY.pageY}return M},animate:function(bZ,b0,M){var bY=L(bZ);if(b0.d){bZ.toD=b0.d;b0.d=1}bY.stop();bY.animate(b0,M)},stop:function(M){L(M).stop()}})}(aU.jQuery));var aa=aU.HighchartsAdapter,bO=aa||{};if(aa){aa.init.call(aa,ao)}var aF=bO.adapterRun,a5=bO.getScript,x=bO.inArray,D=bO.each,bo=bO.grep,bH=bO.offset,ag=bO.map,aI=bO.merge,w=bO.addEvent,aW=bO.removeEvent,bk=bO.fireEvent,P=bO.washMouseEvent,q=bO.animate,aQ=bO.stop;var t={enabled:true,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};bp={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:true,canvasToolsURL:"http://code.highcharts.com/2.3.3/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/2.3.3/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:true},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:aI(t,{enabled:false,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:am,color:"#3E576F"}},legend:{enabled:true,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:false,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:am,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:I,top:"1em"},style:{position:am,backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:true,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:true,shared:aY,snap:C?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:true,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var ah=bp.plotOptions,aM=ah.line;R();function R(){var bY=bp.global.useUTC,L=bY?"getUTC":"get",M=bY?"setUTC":"set";Y=bY?Date.UTC:function(b2,b3,b0,bZ,b1,b4){return new Date(b2,b3,aJ(b0,1),aJ(bZ,0),aJ(b1,0),aJ(b4,0)).getTime()};z=L+"Minutes";U=L+"Hours";at=L+"Day";bc=L+"Date";X=L+"Month";W=L+"FullYear";an=M+"Minutes";bx=M+"Hours";aB=M+"Date";bC=M+"Month";E=M+"FullYear"}function a0(L){bp=aI(bp,L);R();return bp}function aC(){return bp}var bB=function(M){var b0=[],L;function b2(b3){L=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(b3);if(L){b0=[bD(L[1]),bD(L[2]),bD(L[3]),parseFloat(L[4],10)]}else{L=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b3);if(L){b0=[bD(L[1],16),bD(L[2],16),bD(L[3],16),1]}}}function bZ(b4){var b3;if(b0&&!isNaN(b0[0])){if(b4==="rgb"){b3="rgb("+b0[0]+","+b0[1]+","+b0[2]+")"}else{if(b4==="a"){b3=b0[3]}else{b3="rgba("+b0.join(",")+")"}}}else{b3=M}return b3}function b1(b4){if(aq(b4)&&b4!==0){var b3;for(b3=0;b3<3;b3++){b0[b3]+=bD(b4*255);if(b0[b3]<0){b0[b3]=0}if(b0[b3]>255){b0[b3]=255}}}return this}function bY(b3){b0[3]=b3;return this}b2(M);return{get:bZ,brighten:b1,setOpacity:bY}};function av(){}av.prototype={init:function(L,bY){var M=this;M.element=bY==="span"?bf(bY):bs.createElementNS(aS,bY);M.renderer=L;M.attrSetters={}},animate:function(bZ,M,L){var bY=aJ(M,bX,true);aQ(this);if(bY){bY=aI(bY);if(L){bY.complete=L}q(this,bZ,bY)}else{this.attr(bZ);if(L){L()}}},attr:function(bY,cd){var b0=this,cb,b6,b5,b9,b3,bZ=b0.element,L=bZ.nodeName.toLowerCase(),b7=b0.renderer,b4,b8,cc=b0.attrSetters,M=b0.shadows,b2,b1,ca=b0;if(bi(bY)&&ad(cd)){cb=bY;bY={};bY[cb]=cd}if(bi(bY)){cb=bY;if(L==="circle"){cb={x:"cx",y:"cy"}[cb]||cb}else{if(cb==="strokeWidth"){cb="stroke-width"}}ca=Q(bZ,cb)||b0[cb]||0;if(cb!=="d"&&cb!=="visibility"){ca=parseFloat(ca)}}else{for(cb in bY){b4=false;b6=bY[cb];b5=cc[cb]&&cc[cb].call(b0,b6,cb);if(b5!==false){if(b5!==k){b6=b5}if(cb==="d"){if(b6&&b6.join){b6=b6.join(" ")}if(/(NaN| {2}|^$)/.test(b6)){b6="M 0 0"}}else{if(cb==="x"&&L==="text"){for(b9=0;b9<bZ.childNodes.length;b9++){b3=bZ.childNodes[b9];if(Q(b3,"x")===Q(bZ,"x")){Q(b3,"x",b6)}}if(b0.rotation){Q(bZ,"transform","rotate("+b0.rotation+" "+b6+" "+bD(bY.y||Q(bZ,"y"))+")")}}else{if(cb==="fill"){b6=b7.color(b6,bZ,cb)}else{if(L==="circle"&&(cb==="x"||cb==="y")){cb={x:"cx",y:"cy"}[cb]||cb}else{if(L==="rect"&&cb==="r"){Q(bZ,{rx:b6,ry:b6});b4=true}else{if(cb==="translateX"||cb==="translateY"||cb==="rotation"||cb==="verticalAlign"){b1=true;b4=true}else{if(cb==="stroke"){b6=b7.color(b6,bZ,cb)}else{if(cb==="dashstyle"){cb="stroke-dasharray";b6=b6&&b6.toLowerCase();if(b6==="solid"){b6=y}else{if(b6){b6=b6.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");b9=b6.length;while(b9--){b6[b9]=bD(b6[b9])*bY["stroke-width"]}b6=b6.join(",")}}}else{if(cb==="isTracker"){b0[cb]=b6}else{if(cb==="width"){b6=bD(b6)}else{if(cb==="align"){cb="text-anchor";b6={left:"start",center:"middle",right:"end"}[b6]}else{if(cb==="title"){b8=bZ.getElementsByTagName("title")[0];if(!b8){b8=bs.createElementNS(aS,"title");bZ.appendChild(b8)}b8.textContent=b6}}}}}}}}}}}}if(cb==="strokeWidth"){cb="stroke-width"}if(G&&cb==="stroke-width"&&b6===0){b6=0.000001}if(b0.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(cb)){if(!b2){b0.symbolAttr(bY);b2=true}b4=true}if(M&&/^(width|height|visibility|x|y|d|transform)$/.test(cb)){b9=M.length;while(b9--){Q(M[b9],cb,cb==="height"?bW(b6-(M[b9].cutHeight||0),0):b6)}}if((cb==="width"||cb==="height")&&L==="rect"&&b6<0){b6=0}b0[cb]=b6;if(b1){b0.updateTransform()}if(cb==="text"){if(b6!==b0.textStr){delete b0.bBox}b0.textStr=b6;if(b0.added){b7.buildText(b0)}}else{if(!b4){Q(bZ,cb,b6)}}}}}return ca},symbolAttr:function(L){var M=this;D(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(bY){M[bY]=aJ(L[bY],M[bY])});M.attr({d:M.renderer.symbols[M.symbolName](M.x,M.y,M.width,M.height,M)})},clip:function(L){return this.attr("clip-path",L?"url("+this.renderer.url+"#"+L.id+")":y)},crisp:function(b1,b2,b0,bY,b5){var L=this,b4,M={},b3={},bZ;b1=b1||L.strokeWidth||(L.attr&&L.attr("stroke-width"))||0;bZ=m(b1)%2/2;b3.x=be(b2||L.x||0)+bZ;b3.y=be(b0||L.y||0)+bZ;b3.width=be((bY||L.width||0)-2*bZ);b3.height=be((b5||L.height||0)-2*bZ);b3.strokeWidth=b1;for(b4 in b3){if(L[b4]!==b3[b4]){L[b4]=M[b4]=b3[b4]}}return M},css:function(bZ){var L=this,bY=L.element,b1=bZ&&bZ.width&&bY.nodeName.toLowerCase()==="text",b2,b0="",M=function(b4,b3){return"-"+b3.toLowerCase()};if(bZ&&bZ.color){bZ.fill=bZ.color}bZ=bd(L.styles,bZ);L.styles=bZ;if(aY&&b1){delete bZ.width}if(o&&!bM){if(b1){delete bZ.width}bR(L.element,bZ)}else{for(b2 in bZ){b0+=b2.replace(/([A-Z])/g,M)+":"+bZ[b2]+";"}L.attr({style:b0})}if(b1&&L.added){L.renderer.buildText(L)}return L},on:function(L,bY){var M=bY;if(C&&L==="click"){L="touchstart";M=function(bZ){bZ.preventDefault();bY()}}this.element["on"+L]=M;return this},setRadialReference:function(L){this.element.radialReference=L;return this},translate:function(L,M){return this.attr({translateX:L,translateY:M})},invert:function(){var L=this;L.inverted=true;L.updateTransform();return L},htmlCss:function(M){var bZ=this,L=bZ.element,bY=M&&L.tagName==="SPAN"&&M.width;if(bY){delete M.width;bZ.textWidth=bY;bZ.updateTransform()}bZ.styles=bd(bZ.styles,M);bR(bZ.element,M);return bZ},htmlGetBBox:function(){var bY=this,L=bY.element,M=bY.bBox;if(!M){if(L.nodeName==="text"){L.style.position=am}M=bY.bBox={x:L.offsetLeft,y:L.offsetTop,width:L.offsetWidth,height:L.offsetHeight}}return M},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=true;return}var b0=this,cc=b0.renderer,ch=b0.element,ck=b0.translateX||0,cj=b0.translateY||0,b5=b0.x||0,b3=b0.y||0,cf=b0.textAlign||"left",b6={left:0,center:0.5,right:1}[cf],b1=cf&&cf!=="left",L=b0.shadows;if(ck||cj){bR(ch,{marginLeft:ck,marginTop:cj});if(L){D(L,function(cl){bR(cl,{marginLeft:ck+1,marginTop:cj+1})})}}if(b0.inverted){D(ch.childNodes,function(cl){cc.invertChild(cl,ch)})}if(ch.tagName==="SPAN"){var cb,b9,cd=b0.rotation,b8,ci=0,bZ=1,b7=0,b4,M=bD(b0.textWidth),cg=b0.xCorr||0,b2=b0.yCorr||0,ca=[cd,cf,ch.innerHTML,b0.textWidth].join(","),bY={},ce;if(ca!==b0.cTT){if(ad(cd)){if(cc.isSVG){ce=o?"-ms-transform":G?"-webkit-transform":bg?"MozTransform":ar?"-o-transform":"";bY[ce]=bY.transform="rotate("+cd+"deg)"}else{ci=cd*aw;bZ=bN(ci);b7=Z(ci);bY.filter=cd?["progid:DXImageTransform.Microsoft.Matrix(M11=",bZ,", M12=",-b7,", M21=",b7,", M22=",bZ,", sizingMethod='auto expand')"].join(""):y}bR(ch,bY)}cb=aJ(b0.elemWidth,ch.offsetWidth);b9=aJ(b0.elemHeight,ch.offsetHeight);if(cb>M&&/[ \-]/.test(ch.innerText)){bR(ch,{width:M+V,display:"block",whiteSpace:"normal"});cb=M}b8=cc.fontMetrics(ch.style.fontSize).b;cg=bZ<0&&-cb;b2=b7<0&&-b9;b4=bZ*b7<0;cg+=b7*b8*(b4?1-b6:b6);b2-=bZ*b8*(cd?(b4?b6:1-b6):1);if(b1){cg-=cb*b6*(bZ<0?-1:1);if(cd){b2-=b9*b6*(b7<0?-1:1)}bR(ch,{textAlign:cf})}b0.xCorr=cg;b0.yCorr=b2}bR(ch,{left:(b5+cg)+V,top:(b3+b2)+V});b0.cTT=ca}},updateTransform:function(){var b1=this,b0=b1.translateX||0,bZ=b1.translateY||0,L=b1.inverted,bY=b1.rotation,M=[];if(L){b0+=b1.attr("width");bZ+=b1.attr("height")}if(b0||bZ){M.push("translate("+b0+","+bZ+")")}if(L){M.push("rotate(90) scale(-1,1)")}else{if(bY){M.push("rotate("+bY+" "+(b1.x||0)+" "+(b1.y||0)+")")}}if(M.length){Q(b1.element,"transform",M.join(" "))}},toFront:function(){var L=this.element;L.parentNode.appendChild(L);return this},align:function(M,b1,bY){var b4=this;if(!M){M=b4.alignOptions;b1=b4.alignByTranslate}else{b4.alignOptions=M;b4.alignByTranslate=b1;if(!bY){b4.renderer.alignedObjects.push(b4)}}bY=aJ(bY,b4.renderer);var b0=M.align,bZ=M.verticalAlign,b3=(bY.x||0)+(M.x||0),b2=(bY.y||0)+(M.y||0),L={};if(b0==="right"||b0==="center"){b3+=(bY.width-(M.width||0))/{right:1,center:2}[b0]}L[b1?"translateX":"x"]=m(b3);if(bZ==="bottom"||bZ==="middle"){b2+=(bY.height-(M.height||0))/({bottom:1,middle:2}[bZ]||1)}L[b1?"translateY":"y"]=m(b2);b4[b4.placed?"animate":"attr"](L);b4.placed=true;b4.alignAttr=L;return b4},getBBox:function(){var L=this,b4=L.bBox,b0=L.renderer,M,b2,b5=L.rotation,bY=L.element,b3=L.styles,b1=b5*aw;if(!b4){if(bY.namespaceURI===aS||b0.forExport){try{b4=bY.getBBox?bd({},bY.getBBox()):{width:bY.offsetWidth,height:bY.offsetHeight}}catch(bZ){}if(!b4||b4.width<0){b4={width:0,height:0}}}else{b4=L.htmlGetBBox()}if(b0.isSVG){M=b4.width;b2=b4.height;if(b5){b4.width=e(b2*Z(b1))+e(M*bN(b1));b4.height=e(b2*bN(b1))+e(M*Z(b1))}}if(o&&b3&&b3.fontSize==="11px"&&b2===22.700000762939453){b4.height=14}L.bBox=b4}return b4},show:function(){return this.attr({visibility:aj})},hide:function(){return this.attr({visibility:af})},add:function(b4){var b2=this.renderer,b1=b4||b2,b0=b1.element||b2.box,b6=b0.childNodes,bZ=this.element,b3=Q(bZ,"zIndex"),b5,L,bY,M;if(b4){this.parentGroup=b4}this.parentInverted=b4&&b4.inverted;if(this.textStr!==undefined){b2.buildText(this)}if(b3){b1.handleZ=true;b3=bD(b3)}if(b1.handleZ){for(bY=0;bY<b6.length;bY++){b5=b6[bY];L=Q(b5,"zIndex");if(b5!==bZ&&(bD(L)>b3||(!ad(b3)&&ad(L)))){b0.insertBefore(bZ,b5);M=true;break}}}if(!M){b0.appendChild(bZ)}this.added=true;bk(this,"add");return this},safeRemoveChild:function(M){var L=M.parentNode;if(L){L.removeChild(M)}},destroy:function(){var b0=this,bY=b0.element||{},bZ=b0.shadows,M,L;bY.onclick=bY.onmouseout=bY.onmouseover=bY.onmousemove=null;aQ(b0);if(b0.clipPath){b0.clipPath=b0.clipPath.destroy()}if(b0.stops){for(L=0;L<b0.stops.length;L++){b0.stops[L]=b0.stops[L].destroy()}b0.stops=null}b0.safeRemoveChild(bY);if(bZ){D(bZ,function(b1){b0.safeRemoveChild(b1)})}O(b0.renderer.alignedObjects,b0);for(M in b0){delete b0[M]}return null},empty:function(){var M=this.element,bY=M.childNodes,L=bY.length;while(L--){M.removeChild(bY[L])}},shadow:function(b6,b5,M){var bZ=[],b0,b4,b1=this.element,b2,bY,b3,L;if(b6){bY=aJ(b6.width,3);b3=(b6.opacity||0.15)/bY;L=this.parentInverted?"(-1,-1)":"("+aJ(b6.offsetX,1)+", "+aJ(b6.offsetY,1)+")";for(b0=1;b0<=bY;b0++){b4=b1.cloneNode(0);b2=(bY*2)+1-(2*b0);Q(b4,{isShadow:"true",stroke:b6.color||"black","stroke-opacity":b3*b0,"stroke-width":b2,transform:"translate"+L,fill:y});if(M){Q(b4,"height",bW(Q(b4,"height")-b2,0));b4.cutHeight=b2}if(b5){b5.element.appendChild(b4)}else{b1.parentNode.insertBefore(b4,b1)}bZ.push(b4)}this.shadows=bZ}return this}};var d=function(){this.init.apply(this,arguments)};d.prototype={Element:av,init:function(L,M,b3,b4){var b1=this,b0=location,bZ;bZ=b1.createElement("svg").attr({xmlns:aS,version:"1.1"});L.appendChild(bZ.element);b1.isSVG=true;b1.box=bZ.element;b1.boxWrapper=bZ;b1.alignedObjects=[];b1.url=(bg||G)&&bs.getElementsByTagName("base").length?b0.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";b1.defs=this.createElement("defs").add();b1.forExport=b4;b1.gradients={};b1.setSize(M,b3,false);var bY,b2;if(bg&&L.getBoundingClientRect){b1.subPixelFix=bY=function(){bR(L,{left:0,top:0});b2=L.getBoundingClientRect();bR(L,{left:(ay(b2.left)-b2.left)+V,top:(ay(b2.top)-b2.top)+V})};bY();w(aU,"resize",bY)}},isHidden:function(){return !this.boxWrapper.getBBox().width},destroy:function(){var L=this,M=L.defs;L.box=null;L.boxWrapper=L.boxWrapper.destroy();a3(L.gradients||{});L.gradients=null;if(M){L.defs=M.destroy()}if(L.subPixelFix){aW(aU,"resize",L.subPixelFix)}L.alignedObjects=null;return null},createElement:function(M){var L=new this.Element();L.init(this,M);return L},draw:function(){},buildText:function(L){var bZ=L.element,ca=aJ(L.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),b6=bZ.childNodes,b8=/style="([^"]+)"/,bY=/href="([^"]+)"/,b7=Q(bZ,"x"),b3=L.styles,M=b3&&b3.width&&bD(b3.width),b5=b3&&b3.lineHeight,b4,b1="getComputedStyle",b2=b6.length,b9=[];function b0(cb){b9[cb]=bZ.getBBox?bZ.getBBox().height:L.renderer.fontMetrics(bZ.style.fontSize).h;return m(b9[cb]-(b9[cb-1]||0))}while(b2--){bZ.removeChild(b6[b2])}if(M&&!L.added){this.box.appendChild(bZ)}if(ca[ca.length-1]===""){ca.pop()}D(ca,function(cb,cf){var cd,cc=0,ce;cb=cb.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");cd=cb.split("|||");D(cd,function(cj){if(cj!==""||cd.length===1){var ch={},cl=bs.createElementNS(aS,"tspan"),cg;if(b8.test(cj)){cg=cj.match(b8)[1].replace(/(;| |^)color([ :])/,"$1fill$2");Q(cl,"style",cg)}if(bY.test(cj)){Q(cl,"onclick",'location.href="'+cj.match(bY)[1]+'"');bR(cl,{cursor:"pointer"})}cj=(cj.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");cl.appendChild(bs.createTextNode(cj));if(!cc){ch.x=b7}else{ch.dx=3}if(!cc){if(cf){if(!bM&&L.renderer.forExport){bR(cl,{display:"block"})}ce=aU[b1]&&bD(aU[b1](b4,null).getPropertyValue("line-height"));if(!ce||isNaN(ce)){ce=b5||b4.offsetHeight||b0(cf)||18}Q(cl,"dy",ce)}b4=cl}Q(cl,ch);bZ.appendChild(cl);cc++;if(M){var cm=cj.replace(/([^\^])-/g,"$1- ").split(" "),cn,ck,ci=[];while(cm.length||ci.length){delete L.bBox;ck=L.getBBox().width;cn=ck>M;if(!cn||cm.length===1){cm=ci;ci=[];if(cm.length){cl=bs.createElementNS(aS,"tspan");Q(cl,{dy:b5||16,x:b7});if(cg){Q(cl,"style",cg)}bZ.appendChild(cl);if(ck>M){M=ck}}}else{cl.removeChild(cl.firstChild);ci.unshift(cm.pop())}if(cm.length){cl.appendChild(bs.createTextNode(cm.join(" ").replace(/- /g,"-")))}}}}})})},button:function(ca,b8,b5,b9,M,b1,bZ){var b7=this.label(ca,b8,b5),b3=0,cb,b4,L,b0,bY,b6="style",b2={x1:0,y1:0,x2:0,y2:1};M=aI(aN(aH,1,bP,"#999",a1,aN(ax,b2,bA,[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,b6,aN("color","black")),M);L=M[b6];delete M[b6];b1=aI(M,aN(bP,"#68A",a1,aN(ax,b2,bA,[[0,"#FFF"],[1,"#ACF"]])),b1);b0=b1[b6];delete b1[b6];bZ=aI(M,aN(bP,"#68A",a1,aN(ax,b2,bA,[[0,"#9BD"],[1,"#CDF"]])),bZ);bY=bZ[b6];delete bZ[b6];w(b7.element,"mouseenter",function(){b7.attr(b1).css(b0)});w(b7.element,"mouseleave",function(){cb=[M,b1,bZ][b3];b4=[L,b0,bY][b3];b7.attr(cb).css(b4)});b7.setState=function(cc){b3=cc;if(!cc){b7.attr(M).css(L)}else{if(cc===2){b7.attr(bZ).css(bY)}}};return b7.on("click",function(){b9.call(b7)}).attr(M).css(bd({cursor:"default"},L))},crispLine:function(M,L){if(M[1]===M[4]){M[1]=M[4]=m(M[1])-(L%2/2)}if(M[2]===M[5]){M[2]=M[5]=m(M[2])+(L%2/2)}return M},path:function(M){var L={fill:y};if(aD(M)){L.d=M}else{if(bT(M)){bd(L,M)}}return this.createElement("path").attr(L)},circle:function(M,bZ,bY){var L=bT(M)?M:{x:M,y:bZ,r:bY};return this.createElement("circle").attr(L)},arc:function(L,b1,bZ,bY,b0,M){if(bT(L)){b1=L.y;bZ=L.r;bY=L.innerR;b0=L.start;M=L.end;L=L.x}return this.symbol("arc",L||0,b1||0,bZ||0,bZ||0,{innerR:bY||0,start:b0||0,end:M||0})},rect:function(M,b2,bY,L,bZ,b1){bZ=bT(M)?M.r:bZ;var b0=this.createElement("rect").attr({rx:bZ,ry:bZ,fill:y});return b0.attr(bT(M)?M:b0.crisp(b1,M,b2,bW(bY,0),bW(L,0)))},setSize:function(b0,L,bY){var b1=this,M=b1.alignedObjects,bZ=M.length;b1.width=b0;b1.height=L;b1.boxWrapper[aJ(bY,true)?"animate":"attr"]({width:b0,height:L});while(bZ--){M[bZ].align()}},g:function(L){var M=this.createElement("g");return ad(L)?M.attr({"class":aZ+L}):M},image:function(b1,M,b2,bZ,L){var b0={preserveAspectRatio:y},bY;if(arguments.length>1){bd(b0,{x:M,y:b2,width:bZ,height:L})}bY=this.createElement("image").attr(b0);if(bY.element.setAttributeNS){bY.element.setAttributeNS("http://www.w3.org/1999/xlink","href",b1)}else{bY.element.setAttribute("hc-svg-href",b1)}return bY},symbol:function(bZ,b5,b3,M,b6,b8){var b1,bY=this.symbols[bZ],b7=bY&&bY(m(b5),m(b3),M,b6,b8),b0=/^url\((.*?)\)$/,b4,b2,L;if(b7){b1=this.path(b7);bd(b1,{symbolName:bZ,x:b5,y:b3,width:M,height:b6});if(b8){bd(b1,b8)}}else{if(b0.test(bZ)){L=function(b9,ca){b9.attr({width:ca[0],height:ca[1]});if(!b9.alignByTranslate){b9.translate(-m(ca[0]/2),-m(ca[1]/2))}};b4=bZ.match(b0)[1];b2=c[b4];b1=this.image(b4).attr({x:b5,y:b3});if(b2){L(b1,b2)}else{b1.attr({width:0,height:0});bf("img",{onload:function(){var b9=this;L(b1,c[b4]=[b9.width,b9.height])},src:b4})}}}return b1},symbols:{circle:function(L,b0,M,bZ){var bY=0.166*M;return[bl,L+M/2,b0,"C",L+M+bY,b0,L+M+bY,b0+bZ,L+M/2,b0+bZ,"C",L-bY,b0+bZ,L-bY,b0,L+M/2,b0,"Z"]},square:function(L,bZ,M,bY){return[bl,L,bZ,bm,L+M,bZ,L+M,bZ+bY,L,bZ+bY,"Z"]},triangle:function(L,bZ,M,bY){return[bl,L+M/2,bZ,bm,L+M,bZ+bY,L,bZ+bY,"Z"]},"triangle-down":function(L,bZ,M,bY){return[bl,L,bZ,bm,L+M,bZ,L+M/2,bZ+bY,"Z"]},diamond:function(L,bZ,M,bY){return[bl,L+M/2,bZ,bm,L+M,bZ+bY/2,L+M/2,bZ+bY,L,bZ+bY/2,"Z"]},arc:function(b7,b6,b9,b2,ca){var bY=ca.start,b4=ca.r||b9||b2,bZ=ca.end-0.000001,b5=ca.innerR,b1=ca.open,b3=bN(bY),L=Z(bY),M=bN(bZ),b8=Z(bZ),b0=ca.end-bY<N?0:1;return[bl,b7+b4*b3,b6+b4*L,"A",b4,b4,0,b0,1,b7+b4*M,b6+b4*b8,b1?bl:bm,b7+b5*M,b6+b5*b8,"A",b5,b5,0,b0,0,b7+b5*b3,b6+b5*L,b1?"":"Z"]}},clipRect:function(M,b2,bY,L){var b1,b0=aZ+a2++,bZ=this.createElement("clipPath").attr({id:b0}).add(this.defs);b1=this.rect(M,b2,bY,L,0).add(bZ);b1.id=b0;b1.clipPath=bZ;return b1},color:function(b0,bZ,M){var b6=this,b7,bY=/^rgba/,b8;if(b0&&b0.linearGradient){b8="linearGradient"}else{if(b0&&b0.radialGradient){b8="radialGradient"}}if(b8){var b2=b0[b8],b3=b6.gradients,L,b5,b4,b1=bZ.radialReference;if(!b2.id||!b3[b2.id]){if(aD(b2)){b0[b8]=b2={x1:b2[0],y1:b2[1],x2:b2[2],y2:b2[3],gradientUnits:"userSpaceOnUse"}}if(b8==="radialGradient"&&b1&&!ad(b2.gradientUnits)){bd(b2,{cx:(b1[0]-b1[2]/2)+b2.cx*b1[2],cy:(b1[1]-b1[2]/2)+b2.cy*b1[2],r:b2.r*b1[2],gradientUnits:"userSpaceOnUse"})}b2.id=aZ+a2++;b3[b2.id]=L=b6.createElement(b8).attr(b2).add(b6.defs);L.stops=[];D(b0.stops,function(b9){var ca;if(bY.test(b9[1])){b7=bB(b9[1]);b5=b7.get("rgb");b4=b7.get("a")}else{b5=b9[1];b4=1}ca=b6.createElement("stop").attr({offset:b9[0],"stop-color":b5,"stop-opacity":b4}).add(L);L.stops.push(ca)})}return"url("+b6.url+"#"+b2.id+")"}else{if(bY.test(b0)){b7=bB(b0);Q(bZ,M+"-opacity",b7.get("a"));return b7.get("rgb")}else{bZ.removeAttribute(M+"-opacity");return b0}}},text:function(b1,L,b3,b0){var bZ=this,bY=bp.chart.style,M=aY||(!bM&&bZ.forExport),b2;if(b0&&!bZ.forExport){return bZ.html(b1,L,b3)}L=m(aJ(L,0));b3=m(aJ(b3,0));b2=bZ.createElement("text").attr({x:L,y:b3,text:b1}).css({fontFamily:bY.fontFamily,fontSize:bY.fontSize});if(M){b2.css({position:am})}b2.x=L;b2.y=b3;return b2},html:function(b1,L,b3){var bY=bp.chart.style,b2=this.createElement("span"),M=b2.attrSetters,bZ=b2.element,b0=b2.renderer;M.text=function(b4){if(b4!==bZ.innerHTML){delete this.bBox}bZ.innerHTML=b4;return false};M.x=M.y=M.align=function(b5,b4){if(b4==="align"){b4="textAlign"}b2[b4]=b5;b2.htmlUpdateTransform();return false};b2.attr({text:b1,x:m(L),y:m(b3)}).css({position:am,whiteSpace:"nowrap",fontFamily:bY.fontFamily,fontSize:bY.fontSize});b2.css=b2.htmlCss;if(b0.isSVG){b2.add=function(b7){var b6,b4=b0.box.parentNode,b8,b5=[];if(b7){b6=b7.div;if(!b6){b8=b7;while(b8){b5.push(b8);b8=b8.parentGroup}D(b5.reverse(),function(ca){var b9;b6=ca.div=ca.div||bf(J,{className:Q(ca.element,"class")},{position:am,left:(ca.translateX||0)+V,top:(ca.translateY||0)+V},b6||b4);b9=b6.style;bd(ca.attrSetters,{translateX:function(cb){b9.left=cb+V},translateY:function(cb){b9.top=cb+V},visibility:function(cc,cb){b9[cb]=cc}})})}}else{b6=b4}b6.appendChild(bZ);b2.added=true;if(b2.alignOnAdd){b2.htmlUpdateTransform()}return b2}}return b2},fontMetrics:function(bY){bY=bD(bY||11);var L=bY<24?bY+4:m(bY*1.2),M=m(L*0.8);return{h:L,b:M}},label:function(ci,b9,b7,L,b0,bZ,ck,ce,bY){var cj=this,b1=cj.g(bY),cc=cj.text("",0,0,ck).attr({zIndex:1}),ca,b4,b3=0,cd=3,ch,cf,cn,cm,M=0,cb={},b6,co=b1.attrSetters;function b5(){var cq,cp=cc.element.style;b4=(ch===undefined||cf===undefined||b1.styles.textAlign)&&cc.getBBox();b1.width=(ch||b4.width||0)+2*cd;b1.height=(cf||b4.height||0)+2*cd;b6=cd+cj.fontMetrics(cp&&cp.fontSize).b;if(!ca){cq=ce?-b6:0;b1.box=ca=L?cj.symbol(L,-b3*cd,cq,b1.width,b1.height):cj.rect(-b3*cd,cq,b1.width,b1.height,0,cb[aH]);ca.add(b1)}ca.attr(aI({width:b1.width,height:b1.height},cb));cb=null}function b8(){var cr=b1.styles,cq=cr&&cr.textAlign,cp=cd*(1-b3),cs;cs=ce?0:b6;if(ad(ch)&&(cq==="center"||cq==="right")){cp+={center:0.5,right:1}[cq]*(ch-b4.width)}if(cp!==cc.x||cs!==cc.y){cc.attr({x:cp,y:cs})}cc.x=cp;cc.y=cs}function cl(cp,cq){if(ca){ca.attr(cp,cq)}else{cb[cp]=cq}}function cg(){cc.add(b1);b1.attr({text:ci,x:b9,y:b7});if(ad(b0)){b1.attr({anchorX:b0,anchorY:bZ})}}w(b1,"add",cg);co.width=function(cp){ch=cp;return false};co.height=function(cp){cf=cp;return false};co.padding=function(cp){if(ad(cp)&&cp!==cd){cd=cp;b8()}return false};co.align=function(cp){b3={left:0,center:0.5,right:1}[cp];return false};co.text=function(cq,cp){cc.attr(cp,cq);b5();b8();return false};co[aH]=function(cq,cp){M=cq%2/2;cl(cp,cq);return false};co.stroke=co.fill=co.r=function(cq,cp){cl(cp,cq);return false};co.anchorX=function(cq,cp){b0=cq;cl(cp,cq+M-cn);return false};co.anchorY=function(cq,cp){bZ=cq;cl(cp,cq-cm);return false};co.x=function(cp){b1.x=cp;cp-=b3*((ch||b4.width)+cd);cn=m(cp);b1.attr("translateX",cn);return false};co.y=function(cp){cm=b1.y=m(cp);b1.attr("translateY",cp);return false};var b2=b1.css;return bd(b1,{css:function(cq){if(cq){var cp={};cq=aI({},cq);D(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(cr){if(cq[cr]!==k){cp[cr]=cq[cr];delete cq[cr]}});cc.css(cp)}return b2.call(b1,cq)},getBBox:function(){return ca.getBBox()},shadow:function(cp){ca.shadow(cp);return b1},destroy:function(){aW(b1,"add",cg);aW(b1.element,"mouseenter");aW(b1.element,"mouseleave");if(cc){cc=cc.destroy()}if(ca){ca=ca.destroy()}av.prototype.destroy.call(b1)}})}};bI=d;var bU;if(!bM&&!aY){var F={init:function(bY,b0){var bZ=this,L=["<",b0,' filled="f" stroked="f"'],M=["position: ",am,";"];if(b0==="shape"||b0===J){M.push("left:0;top:0;width:1px;height:1px;")}if(B){M.push("visibility: ",b0===J?af:aj)}L.push(' style="',M.join(""),'"/>');if(b0){L=b0===J||b0==="span"||b0==="img"?L.join(""):bY.prepVML(L);bZ.element=bf(L)}bZ.renderer=bY;bZ.attrSetters={}},add:function(bZ){var b2=this,b1=b2.renderer,bY=b2.element,b0=b1.box,M=bZ&&bZ.inverted,L=bZ?bZ.element||bZ:b0;if(M){b1.invertChild(bY,L)}L.appendChild(bY);b2.added=true;if(b2.alignOnAdd&&!b2.deferUpdateTransform){b2.updateTransform()}bk(b2,"add");return b2},updateTransform:av.prototype.htmlUpdateTransform,attr:function(bY,ce){var b1=this,cc,b6,b8,b5,bZ=b1.element||{},ca=bZ.style,L=bZ.nodeName,b7=b1.renderer,b3=b1.symbolName,b2,M=b1.shadows,b4,cd=b1.attrSetters,cb=b1;if(bi(bY)&&ad(ce)){cc=bY;bY={};bY[cc]=ce}if(bi(bY)){cc=bY;if(cc==="strokeWidth"||cc==="stroke-width"){cb=b1.strokeweight}else{cb=b1[cc]}}else{for(cc in bY){b6=bY[cc];b4=false;b5=cd[cc]&&cd[cc].call(b1,b6,cc);if(b5!==false&&b6!==null){if(b5!==k){b6=b5}if(b3&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(cc)){if(!b2){b1.symbolAttr(bY);b2=true}b4=true}else{if(cc==="d"){b6=b6||[];b1.d=b6.join(" ");b8=b6.length;var b9=[];while(b8--){if(aq(b6[b8])){b9[b8]=m(b6[b8]*10)-5}else{if(b6[b8]==="Z"){b9[b8]="x"}else{b9[b8]=b6[b8]}}}b6=b9.join(" ")||"x";bZ.path=b6;if(M){b8=M.length;while(b8--){M[b8].path=M[b8].cutOff?this.cutOffPath(b6,M[b8].cutOff):b6}}b4=true}else{if(cc==="visibility"){if(M){b8=M.length;while(b8--){M[b8].style[cc]=b6}}if(L==="DIV"){b6=b6===af?"-999em":0;cc="top"}ca[cc]=b6;b4=true}else{if(cc==="zIndex"){if(b6){ca[cc]=b6}b4=true}else{if(cc==="width"||cc==="height"){b6=bW(0,b6);this[cc]=b6;if(b1.updateClipping){b1[cc]=b6;b1.updateClipping()}else{ca[cc]=b6}b4=true}else{if(cc==="x"||cc==="y"){b1[cc]=b6;ca[{x:"left",y:"top"}[cc]]=b6}else{if(cc==="class"){bZ.className=b6}else{if(cc==="stroke"){b6=b7.color(b6,bZ,cc);cc="strokecolor"}else{if(cc==="stroke-width"||cc==="strokeWidth"){bZ.stroked=b6?true:false;cc="strokeweight";b1[cc]=b6;if(aq(b6)){b6+=V}}else{if(cc==="dashstyle"){var b0=bZ.getElementsByTagName("stroke")[0]||bf(b7.prepVML(["<stroke/>"]),null,null,bZ);b0[cc]=b6||"solid";b1.dashstyle=b6;b4=true}else{if(cc==="fill"){if(L==="SPAN"){ca.color=b6}else{bZ.filled=b6!==y?true:false;b6=b7.color(b6,bZ,cc,b1);cc="fillcolor"}}else{if(L==="shape"&&cc==="rotation"){b1[cc]=b6;bZ.style.left=-m(Z(b6*aw)+1)+V;bZ.style.top=m(bN(b6*aw))+V}else{if(cc==="translateX"||cc==="translateY"||cc==="rotation"){b1[cc]=b6;b1.updateTransform();b4=true}else{if(cc==="text"){this.bBox=null;bZ.innerHTML=b6;b4=true}}}}}}}}}}}}}}if(!b4){if(B){bZ[cc]=b6}else{Q(bZ,cc,b6)}}}}}return cb},clip:function(bY){var b1=this,b0,M=b1.element,L=M.parentNode,bZ;if(bY){b0=bY.members;b0.push(b1);b1.destroyClip=function(){O(b0,b1)};if(L&&L.className==="highcharts-tracker"&&!B){bR(M,{visibility:af})}bZ=bY.getCSS(b1)}else{if(b1.destroyClip){b1.destroyClip()}bZ={clip:B?"inherit":"rect(auto)"}}return b1.css(bZ)},css:av.prototype.htmlCss,safeRemoveChild:function(L){if(L.parentNode){bF(L)}},destroy:function(){if(this.destroyClip){this.destroyClip()}return av.prototype.destroy.apply(this)},empty:function(){var M=this.element,bZ=M.childNodes,L=bZ.length,bY;while(L--){bY=bZ[L];bY.parentNode.removeChild(bY)}},on:function(L,M){this.element["on"+L]=function(){var bY=aU.event;bY.target=bY.srcElement;M(bY)};return this},cutOffPath:function(bY,M){var L;bY=bY.split(/[ ,]/);L=bY.length;if(L===9||L===11){bY[L-4]=bY[L-2]=bD(bY[L-2])-10*M}return bY.join(" ")},shadow:function(b8,b7,M){var b0=[],b1,b2=this.element,b3=this.renderer,b6,bY=b2.style,b9,ca=b2.path,b4,L,bZ,b5;if(ca&&typeof ca.value!=="string"){ca="x"}L=ca;if(b8){bZ=aJ(b8.width,3);b5=(b8.opacity||0.15)/bZ;for(b1=1;b1<=3;b1++){b4=(bZ*2)+1-(2*b1);if(M){L=this.cutOffPath(ca.value,b4+0.5)}b9=['<shape isShadow="true" strokeweight="',b4,'" filled="false" path="',L,'" coordsize="10 10" style="',b2.style.cssText,'" />'];b6=bf(b3.prepVML(b9),null,{left:bD(bY.left)+aJ(b8.offsetX,1),top:bD(bY.top)+aJ(b8.offsetY,1)});if(M){b6.cutOff=b4+1}b9=['<stroke color="',b8.color||"black",'" opacity="',b5*b1,'"/>'];bf(b3.prepVML(b9),null,null,b6);if(b7){b7.element.appendChild(b6)}else{b2.parentNode.insertBefore(b6,b2)}b0.push(b6)}this.shadows=b0}return this}};F=ba(av,F);var aL={Element:F,isIE8:r.indexOf("MSIE 8.0")>-1,init:function(bY,bZ,M){var b1=this,L,b0;b1.alignedObjects=[];L=b1.createElement(J);b0=L.element;b0.style.position=I;bY.appendChild(L.element);b1.box=b0;b1.boxWrapper=L;b1.setSize(bZ,M,false);if(!bs.namespaces.hcv){bs.namespaces.add("hcv","urn:schemas-microsoft-com:vml");bs.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}},isHidden:function(){return !this.box.offsetWidth},clipRect:function(M,b1,b0,L){var bZ=this.createElement(),bY=bT(M);return bd(bZ,{members:[],left:bY?M.x:M,top:bY?M.y:b1,width:bY?M.width:b0,height:bY?M.height:L,getCSS:function(b9){var b3=b9.inverted,b6=this,b8=b6.top,b7=b6.left,b5=b7+b6.width,b2=b8+b6.height,b4={clip:"rect("+m(b3?b7:b8)+"px,"+m(b3?b2:b5)+"px,"+m(b3?b5:b2)+"px,"+m(b3?b8:b7)+"px)"};if(!b3&&B&&b9.element.nodeName!=="IMG"){bd(b4,{width:b5+V,height:b2+V})}return b4},updateClipping:function(){D(bZ.members,function(b2){b2.css(bZ.getCSS(b2))})}})},color:function(cg,ct,b6,b9){var cn=this,ce,co=/^rgba/,cp,b1,ck=y;if(cg&&cg.linearGradient){b1="gradient"}else{if(cg&&cg.radialGradient){b1="pattern"}}if(b1){var cb,bY,b5=cg.linearGradient||cg.radialGradient,b4,cv,b3,cu,cj,ci,cd,cc,cl="",cf=cg.stops,cs,ch,cq=[],M=function(){cp=['<fill colors="'+cq.join(",")+'" opacity="',ci,'" o:opacity2="',cj,'" type="',b1,'" ',cl,'focus="100%" method="any" />'];bf(cn.prepVML(cp),null,null,ct)};cs=cf[0];ch=cf[cf.length-1];if(cs[0]>0){cf.unshift([0,cs[1]])}if(ch[0]<1){cf.push([1,ch[1]])}D(cf,function(cx,cw){if(co.test(cx[1])){ce=bB(cx[1]);cb=ce.get("rgb");bY=ce.get("a")}else{cb=cx[1];bY=1}cq.push((cx[0]*100)+"% "+cb);if(!cw){cj=bY;cc=cb}else{ci=bY;cd=cb}});if(b6==="fill"){if(b1==="gradient"){b4=b5.x1||b5[0]||0;cv=b5.y1||b5[1]||0;b3=b5.x2||b5[2]||0;cu=b5.y2||b5[3]||0;cl='angle="'+(90-aO.atan((cu-cv)/(b3-b4))*180/N)+'"';M()}else{var cr=b5.r,b0=cr*2,bZ=cr*2,ca=b5.cx,b8=b5.cy,b2=ct.radialReference,L,cm=function(){if(b2){L=b9.getBBox();ca+=(b2[0]-L.x)/L.width-0.5;b8+=(b2[1]-L.y)/L.height-0.5;b0*=b2[2]/L.width;bZ*=b2[2]/L.height}cl='src="'+bp.global.VMLRadialGradientURL+'" size="'+b0+","+bZ+'" origin="0.5,0.5" position="'+ca+","+b8+'" color2="'+cc+'" ';M()};if(b9.added){cm()}else{w(b9,"add",cm)}ck=cd}}else{ck=cb}}else{if(co.test(cg)&&ct.tagName!=="IMG"){ce=bB(cg);cp=["<",b6,' opacity="',ce.get("a"),'"/>'];bf(this.prepVML(cp),null,null,ct);ck=ce.get("rgb")}else{var b7=ct.getElementsByTagName(b6);if(b7.length){b7[0].opacity=1}ck=cg}}return ck},prepVML:function(L){var M="display:inline-block;behavior:url(#default#VML);",bY=this.isIE8;L=L.join("");if(bY){L=L.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />');if(L.indexOf('style="')===-1){L=L.replace("/>",' style="'+M+'" />')}else{L=L.replace('style="','style="'+M)}}else{L=L.replace("<","<hcv:")}return L},text:d.prototype.html,path:function(M){var L={coordsize:"10 10"};if(aD(M)){L.d=M}else{if(bT(M)){bd(L,M)}}return this.createElement("shape").attr(L)},circle:function(L,bY,M){return this.symbol("circle").attr({x:L-M,y:bY-M,width:2*M,height:2*M})},g:function(L){var bY,M;if(L){M={className:aZ+L,"class":aZ+L}}bY=this.createElement(J).attr(M);return bY},image:function(b0,M,b1,bY,L){var bZ=this.createElement("img").attr({src:b0});if(arguments.length>1){bZ.attr({x:M,y:b1,width:bY,height:L})}return bZ},rect:function(M,b2,bY,L,bZ,b1){if(bT(M)){b2=M.y;bY=M.width;L=M.height;b1=M.strokeWidth;M=M.x}var b0=this.symbol("rect");b0.r=bZ;return b0.attr(b0.crisp(b1,M,b2,bW(bY,0),bW(L,0)))},invertChild:function(M,L){var bY=L.style;bR(M,{flip:"x",left:bD(bY.width)-1,top:bD(bY.height)-1,rotation:-90})},symbols:{arc:function(b7,b6,b9,b1,cb){var bY=cb.start,bZ=cb.end,b3=cb.r||b9||b1,b2=bN(bY),L=Z(bY),M=bN(bZ),b8=Z(bZ),b5=cb.innerR,ca=0.08/b3,b0=(b5&&0.1/b5)||0,b4;if(bZ-bY===0){return["x"]}else{if(2*N-bZ+bY<ca){M=-ca}else{if(bZ-bY<b0){M=bN(bY+b0)}}}b4=["wa",b7-b3,b6-b3,b7+b3,b6+b3,b7+b3*b2,b6+b3*L,b7+b3*M,b6+b3*b8];if(cb.open&&!b5){b4.push("e",bl,b7,b6)}b4.push("at",b7-b5,b6-b5,b7+b5,b6+b5,b7+b5*M,b6+b5*b8,b7+b5*b2,b6+b5*L,"x","e");return b4},circle:function(L,bZ,M,bY){return["wa",L,bZ,L+M,bZ+bY,L+M,bZ+bY/2,L+M,bZ+bY/2,"e"]},rect:function(bZ,b1,bY,b3,b4){var b2=bZ+bY,M=b1+b3,b0,L;if(!ad(b4)||!b4.r){b0=d.prototype.symbols.square.apply(0,arguments)}else{L=ak(b4.r,bY,b3);b0=[bl,bZ+L,b1,bm,b2-L,b1,"wa",b2-2*L,b1,b2,b1+2*L,b2-L,b1,b2,b1+L,bm,b2,M-L,"wa",b2-2*L,M-2*L,b2,M,b2,M-L,b2-L,M,bm,bZ+L,M,"wa",bZ,M-2*L,bZ+2*L,M,bZ+L,M,bZ,M-L,bm,bZ,b1+L,"wa",bZ,b1,bZ+2*L,b1+2*L,bZ,b1+L,bZ+L,b1,"x","e"]}return b0}}};bU=function(){this.init.apply(this,arguments)};bU.prototype=aI(d.prototype,aL);bI=bU}var bV,aX;if(aY){bV=function(){aS="http://www.w3.org/1999/xhtml"};bV.prototype.symbols={};aX=(function(){var M=[];function L(){var bZ=M.length,bY;for(bY=0;bY<bZ;bY++){M[bY]()}M=[]}return{push:function(bZ,bY){if(M.length===0){a5(bY,L)}M.push(bZ)}}}())}bI=bU||bV||d;function az(M,bY,L){this.axis=M;this.pos=bY;this.type=L||"";this.isNew=true;if(!L){this.addLabel()}}az.prototype={addLabel:function(){var cc=this,M=cc.axis,bY=M.options,b4=M.chart,cd=M.horiz,b6=M.categories,bZ=cc.pos,b5=bY.labels,b9,ce=M.tickPositions,b7=(b6&&cd&&b6.length&&!b5.step&&!b5.staggerLines&&!b5.rotation&&b4.plotWidth/ce.length)||(!cd&&b4.plotWidth/2),b1=bZ===ce[0],b3=bZ===ce[ce.length-1],b2,ca,b8=b6&&ad(b6[bZ])?b6[bZ]:bZ,b0=cc.label,cb=ce.info,L;if(M.isDatetimeAxis&&cb){L=bY.dateTimeLabelFormats[cb.higherRanks[bZ]||cb.unitName]}cc.isFirst=b1;cc.isLast=b3;b9=M.labelFormatter.call({axis:M,chart:b4,isFirst:b1,isLast:b3,dateTimeLabelFormat:L,value:M.isLog?ac(v(b8)):b8});b2=b7&&{width:bW(1,m(b7-2*(b5.padding||10)))+V};b2=bd(b2,b5.style);if(!ad(b0)){ca={align:b5.align};if(aq(b5.rotation)){ca.rotation=b5.rotation}cc.label=ad(b9)&&b5.enabled?b4.renderer.text(b9,0,0,b5.useHTML).attr(ca).css(b2).add(M.labelGroup):null}else{if(b0){b0.attr({text:b9}).css(b2)}}},getLabelSize:function(){var L=this.label,M=this.axis;return L?((this.labelBBox=L.getBBox()))[M.horiz?"height":"width"]:0},getLabelSides:function(){var b1=this.labelBBox,b0=this.axis,M=b0.options,L=M.labels,bZ=b1.width,bY=bZ*{left:0,center:0.5,right:1}[L.align]-L.x;return[-bY,bZ-bY]},handleOverflow:function(b6,cc){var b9=true,b0=this.axis,b7=b0.chart,b1=this.isFirst,b4=this.isLast,b8=cc.x,b3=b0.reversed,cb=b0.tickPositions;if(b1||b4){var bZ=this.getLabelSides(),b5=bZ[0],bY=bZ[1],M=b7.plotLeft,b2=M+b0.len,ca=b0.ticks[cb[b6+(b1?1:-1)]],L=ca&&ca.label.xy&&ca.label.xy.x+ca.getLabelSides()[b1?0:1];if((b1&&!b3)||(b4&&b3)){if(b8+b5<M){b8=M-b5;if(ca&&b8+bY>L){b9=false}}}else{if(b8+bY>b2){b8=b2-bY;if(ca&&b8+b5<L){b9=false}}}cc.x=b8}return b9},getPosition:function(b2,b1,b0,L){var bZ=this.axis,bY=bZ.chart,M=(L&&bY.oldChartHeight)||bY.chartHeight;return{x:b2?bZ.translate(b1+b0,null,null,L)+bZ.transB:bZ.left+bZ.offset+(bZ.opposite?((L&&bY.oldChartWidth)||bY.chartWidth)-bZ.right-bZ.left:0),y:b2?M-bZ.bottom+bZ.offset-(bZ.opposite?bZ.height:0):M-bZ.translate(b1+b0,null,null,L)-bZ.transB}},getLabelPosition:function(b5,b3,b4,b6,b0,b1,b2,L){var M=this.axis,bZ=M.transA,bY=M.reversed,b7=M.staggerLines;b5=b5+b0.x-(b1&&b6?b1*bZ*(bY?-1:1):0);b3=b3+b0.y-(b1&&!b6?b1*bZ*(bY?1:-1):0);if(!ad(b0.y)){b3+=bD(b4.styles.lineHeight)*0.9-b4.getBBox().height/2}if(b7){b3+=(b2/(L||1)%b7)*16}return{x:b5,y:b3}},getMarkPath:function(M,b1,bY,L,b0,bZ){return bZ.crispLine([bl,M,b1,bm,M+(b0?0:-bY),b1+(b0?bY:0)],L)},render:function(b5,M){var cn=this,bZ=cn.axis,b0=bZ.options,cg=bZ.chart,cm=cg.renderer,cq=bZ.horiz,b1=cn.type,b9=cn.label,b4=cn.pos,cj=b0.labels,b6=cn.gridLine,ci=b1?b1+"Grid":"grid",cl=b1?b1+"Tick":"tick",ch=b0[ci+"LineWidth"],ck=b0[ci+"LineColor"],b8=b0[ci+"LineDashStyle"],bY=b0[cl+"Length"],b7=b0[cl+"Width"]||0,cd=b0[cl+"Color"],ce=b0[cl+"Position"],cr,cb=cn.mark,L,b3=cj.step,cf,cp=true,cs=bZ.tickmarkOffset,b2=cn.getPosition(cq,b4,cs,M),cc=b2.x,ca=b2.y,co=bZ.staggerLines;if(ch){cr=bZ.getPlotLinePath(b4+cs,ch,M);if(b6===k){cf={stroke:ck,"stroke-width":ch};if(b8){cf.dashstyle=b8}if(!b1){cf.zIndex=1}cn.gridLine=b6=ch?cm.path(cr).attr(cf).add(bZ.gridGroup):null}if(!M&&b6&&cr){b6[cn.isNew?"attr":"animate"]({d:cr})}}if(b7&&bY){if(ce==="inside"){bY=-bY}if(bZ.opposite){bY=-bY}L=cn.getMarkPath(cc,ca,bY,b7,cq,cm);if(cb){cb.animate({d:L})}else{cn.mark=cm.path(L).attr({stroke:cd,"stroke-width":b7}).add(bZ.axisGroup)}}if(b9&&!isNaN(cc)){b9.xy=b2=cn.getLabelPosition(cc,ca,b9,cq,cj,cs,b5,b3);if((cn.isFirst&&!aJ(b0.showFirstLabel,1))||(cn.isLast&&!aJ(b0.showLastLabel,1))){cp=false}else{if(!co&&cq&&cj.overflow==="justify"&&!cn.handleOverflow(b5,b2)){cp=false}}if(b3&&b5%b3){cp=false}if(cp){b9[cn.isNew?"attr":"animate"](b2);b9.show();cn.isNew=false}else{b9.hide()}}},destroy:function(){a3(this,this.axis)}};function bu(M,L){this.axis=M;if(L){this.options=L;this.id=L.id}return this}bu.prototype={render:function(){var ck=this,b0=ck.axis,cl=b0.horiz,bZ=(b0.pointRange||0)/2,b1=ck.options,L=b1.label,b3=ck.label,cc=b1.width,bY=b1.to,ci=b1.from,cb=ad(ci)&&ad(bY),ce=b1.value,b2=b1.dashStyle,cg=ck.svgElem,ca=[],cf,b7,b4,cj,b6,b5,ch=b1.color,b9=b1.zIndex,M=b1.events,b8,cd=b0.chart.renderer;if(b0.isLog){ci=s(ci);bY=s(bY);ce=s(ce)}if(cc){ca=b0.getPlotLinePath(ce,cc);b8={stroke:ch,"stroke-width":cc};if(b2){b8.dashstyle=b2}}else{if(cb){ci=bW(ci,b0.min-bZ);bY=ak(bY,b0.max+bZ);ca=b0.getPlotBandPath(ci,bY,b1);b8={fill:ch};if(b1.borderWidth){b8.stroke=b1.borderColor;b8["stroke-width"]=b1.borderWidth}}else{return}}if(ad(b9)){b8.zIndex=b9}if(cg){if(ca){cg.animate({d:ca},null,cg.onGetPath)}else{cg.hide();cg.onGetPath=function(){cg.show()}}}else{if(ca&&ca.length){ck.svgElem=cg=cd.path(ca).attr(b8).add();if(M){cf=function(cm){cg.on(cm,function(cn){M[cm].apply(ck,[cn])})};for(b7 in M){cf(b7)}}}}if(L&&ad(L.text)&&ca&&ca.length&&b0.width>0&&b0.height>0){L=aI({align:cl&&cb&&"center",x:cl?!cb&&4:10,verticalAlign:!cl&&cb&&"middle",y:cl?cb?16:10:cb?6:-4,rotation:cl&&!cb&&90},L);if(!b3){ck.label=b3=cd.text(L.text,0,0).attr({align:L.textAlign||L.align,rotation:L.rotation,zIndex:b9}).css(L.style).add()}b4=[ca[1],ca[4],aJ(ca[6],ca[1])];cj=[ca[2],ca[5],aJ(ca[7],ca[2])];b6=bt(b4);b5=bt(cj);b3.align(L,false,{x:b6,y:b5,width:aG(b4)-b6,height:aG(cj)-b5});b3.show()}else{if(b3){b3.hide()}}return ck},destroy:function(){var L=this,M=L.axis;O(M.plotLinesAndBands,L);a3(L,this.axis)}};function au(b1,bZ,M,L,b2,b0){var bY=b1.chart.inverted;this.axis=b1;this.isNegative=M;this.options=bZ;this.x=L;this.stack=b2;this.percent=b0==="percent";this.alignOptions={align:bZ.align||(bY?(M?"left":"right"):"center"),verticalAlign:bZ.verticalAlign||(bY?"middle":(M?"bottom":"top")),y:aJ(bZ.y,bY?4:(M?14:-6)),x:aJ(bZ.x,bY?(M?-6:6):0)};this.textAlign=bZ.textAlign||(bY?(M?"right":"left"):"center")}au.prototype={destroy:function(){a3(this,this.axis)},setTotal:function(L){this.total=L;this.cum=L},render:function(L){var M=this.options.formatter.call(this);if(this.label){this.label.attr({text:M,visibility:af})}else{this.label=this.axis.chart.renderer.text(M,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:af}).add(L)}},setOffset:function(b2,b5){var b9=this,L=b9.axis,b3=L.chart,bY=b3.inverted,M=this.isNegative,b6=L.translate(this.percent?100:this.total,0,0,0,1),b1=L.translate(0),b0=e(b6-b1),b8=b3.xAxis[0].translate(this.x)+b2,b4=b3.plotHeight,ca={x:bY?(M?b6:b6-b0):b8,y:bY?b4-b8-b5:(M?(b4-b6-b0):b4-b6),width:bY?b0:b5,height:bY?b5:b0},b7=this.label,bZ;if(b7){b7.align(this.alignOptions,null,ca);bZ=b7.alignAttr;b7.attr({visibility:this.options.crop===false||b3.isInsidePlot(bZ.x,bZ.y)?(bM?"inherit":aj):af})}}};function A(){this.init.apply(this,arguments)}A.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:false,gridLineColor:"#C0C0C0",labels:t,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:false,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:false,formatter:function(){return this.total},style:t.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(b1,b0){var L=b0.isX,bZ=this;bZ.horiz=b1.inverted?!L:L;bZ.isXAxis=L;bZ.xOrY=L?"x":"y";bZ.opposite=b0.opposite;bZ.side=bZ.horiz?(bZ.opposite?0:2):(bZ.opposite?1:3);bZ.setOptions(b0);var b4=this.options,b2=b4.type,M=b2==="datetime";bZ.labelFormatter=b4.labels.formatter||bZ.defaultLabelFormatter;bZ.staggerLines=bZ.horiz&&b4.labels.staggerLines;bZ.userOptions=b0;bZ.minPixelPadding=0;bZ.chart=b1;bZ.reversed=b4.reversed;bZ.categories=b4.categories;bZ.isLog=b2==="logarithmic";bZ.isLinked=ad(b4.linkedTo);bZ.isDatetimeAxis=M;bZ.tickmarkOffset=(b4.categories&&b4.tickmarkPlacement==="between")?0.5:0;bZ.ticks={};bZ.minorTicks={};bZ.plotLinesAndBands=[];bZ.alternateBands={};bZ.len=0;bZ.minRange=bZ.userMinRange=b4.minRange||b4.maxZoom;bZ.range=b4.range;bZ.offset=b4.offset||0;bZ.stacks={};bZ.max=null;bZ.min=null;var bY,b3=bZ.options.events;b1.axes.push(bZ);b1[L?"xAxis":"yAxis"].push(bZ);bZ.series=[];if(b1.inverted&&L&&bZ.reversed===k){bZ.reversed=true}bZ.removePlotBand=bZ.removePlotBandOrLine;bZ.removePlotLine=bZ.removePlotBandOrLine;bZ.addPlotBand=bZ.addPlotBandOrLine;bZ.addPlotLine=bZ.addPlotBandOrLine;for(bY in b3){w(bZ,bY,b3[bY])}if(bZ.isLog){bZ.val2lin=s;bZ.lin2val=v}},setOptions:function(L){this.options=aI(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],aI(bp[this.isXAxis?"xAxis":"yAxis"],L))},defaultLabelFormatter:function(){var M=this.axis,b4=this.value,b0=M.categories,b3=this.dateTimeLabelFormat,bY=bp.lang.numericSymbols,bZ=bY&&bY.length,b1,b2,L=M.isLog?b4:M.tickInterval;if(b0){b2=b4}else{if(b3){b2=bG(b3,b4)}else{if(bZ&&L>=1000){while(bZ--&&b2===k){b1=Math.pow(1000,bZ+1);if(L>=b1&&bY[bZ]!==null){b2=l(b4/b1,-1)+bY[bZ]}}}}}if(b2===k){if(b4>=1000){b2=l(b4,0)}else{b2=l(b4,-1)}}return b2},getSeriesExtremes:function(){var b0=this,bZ=b0.chart,bY=b0.stacks,L=[],b1=[],M;b0.hasVisibleSeries=false;b0.dataMin=b0.dataMax=null;D(b0.series,function(cc){if(cc.visible||!bZ.options.chart.ignoreHiddenSeries){var b8=cc.options,b3,ci,ce,b2,ch,ca,b5,cn,cb,b9,b4=b8.threshold,cm,b7=[],cg=0;b0.hasVisibleSeries=true;if(b0.isLog&&b4<=0){b4=b8.threshold=null}if(b0.isXAxis){b5=cc.xData;if(b5.length){b0.dataMin=ak(aJ(b0.dataMin,b5[0]),bt(b5));b0.dataMax=bW(aJ(b0.dataMax,b5[0]),aG(b5))}}else{var cf,cl,co,cd=cc.cropped,b6=cc.xAxis.getExtremes(),cj,ck=!!cc.modifyValue;b3=b8.stacking;b0.usePercentage=b3==="percent";if(b3){ch=b8.stack;b2=cc.type+aJ(ch,"");ca="-"+b2;cc.stackKey=b2;ci=L[b2]||[];L[b2]=ci;ce=b1[ca]||[];b1[ca]=ce}if(b0.usePercentage){b0.dataMin=0;b0.dataMax=99}b5=cc.processedXData;cn=cc.processedYData;cm=cn.length;for(M=0;M<cm;M++){cb=b5[M];b9=cn[M];if(b3){cf=b9<b4;cl=cf?ce:ci;co=cf?ca:b2;b9=cl[cb]=ad(cl[cb])?ac(cl[cb]+b9):b9;if(!bY[co]){bY[co]={}}if(!bY[co][cb]){bY[co][cb]=new au(b0,b0.options.stackLabels,cf,cb,ch,b3)}bY[co][cb].setTotal(b9)}if(b9!==null&&b9!==k){if(ck){b9=cc.modifyValue(b9)}if(cd||((b5[M+1]||cb)>=b6.min&&(b5[M-1]||cb)<=b6.max)){cj=b9.length;if(cj){while(cj--){if(b9[cj]!==null){b7[cg++]=b9[cj]}}}else{b7[cg++]=b9}}}}if(!b0.usePercentage&&b7.length){b0.dataMin=ak(aJ(b0.dataMin,b7[0]),bt(b7));b0.dataMax=bW(aJ(b0.dataMax,b7[0]),aG(b7))}if(ad(b4)){if(b0.dataMin>=b4){b0.dataMin=b4;b0.ignoreMinPadding=true}else{if(b0.dataMax<b4){b0.dataMax=b4;b0.ignoreMaxPadding=true}}}}}})},translate:function(bY,b7,b8,bZ,b6,b3){var b0=this,b2=b0.len,M=1,b5=0,b1=bZ?b0.oldTransA:b0.transA,b9=bZ?b0.oldMin:b0.min,L,b4=b0.options.ordinal||(b0.isLog&&b6);if(!b1){b1=b0.transA}if(b8){M*=-1;b5=b2}if(b0.reversed){M*=-1;b5-=M*b2}if(b7){if(b0.reversed){bY=b2-bY}L=bY/b1+b9;if(b4){L=b0.lin2val(L)}}else{if(b4){bY=b0.val2lin(bY)}L=M*(bY-b9)*b1+b5+(M*b0.minPixelPadding)+(b3?b1*b0.pointRange/2:0)}return L},getPlotLinePath:function(ca,b5,bZ){var b0=this,b7=b0.chart,b4=b0.left,L=b0.top,bY,b9,M,b8,b3=b0.translate(ca,null,null,bZ),b6=(bZ&&b7.oldChartHeight)||b7.chartHeight,b1=(bZ&&b7.oldChartWidth)||b7.chartWidth,cb,b2=b0.transB;bY=M=m(b3+b2);b9=b8=m(b6-b3-b2);if(isNaN(b3)){cb=true}else{if(b0.horiz){b9=L;b8=b6-b0.bottom;if(bY<b4||bY>b4+b0.width){cb=true}}else{bY=b4;M=b1-b0.right;if(b9<L||b9>L+b0.height){cb=true}}}return cb?null:b7.renderer.crispLine([bl,bY,b9,bm,M,b8],b5||0)},getPlotBandPath:function(bZ,bY){var L=this.getPlotLinePath(bY),M=this.getPlotLinePath(bZ);if(M&&L){M.push(L[4],L[5],L[1],L[2])}else{M=null}return M},getLinearTickPositions:function(M,b0,L){var b3,b2,b1=ac(be(b0/M)*M),bZ=ac(ay(L/M)*M),bY=[];b3=b1;while(b3<=bZ){bY.push(b3);b3=ac(b3+M);if(b3===b2){break}b2=b3}return bY},getLogTickPositions:function(ch,b9,cc,M){var bY=this,bZ=bY.options,L=bY.len;var b5=[];if(!M){bY._minorAutoInterval=null}if(ch>=0.5){ch=m(ch);b5=bY.getLinearTickPositions(ch,b9,cc)}else{if(ch>=0.08){var cg=be(b9),ce,cd,cb,cf,b0,ca,b4;if(ch>0.3){ce=[1,2,4]}else{if(ch>0.15){ce=[1,2,4,6,8]}else{ce=[1,2,3,4,5,6,7,8,9]}}for(cd=cg;cd<cc+1&&!b4;cd++){cf=ce.length;for(cb=0;cb<cf&&!b4;cb++){b0=s(v(cd)*ce[cb]);if(b0>b9){b5.push(ca)}if(ca>cc){b4=true}ca=b0}}}else{var b7=v(b9),b8=v(cc),b3=bZ[M?"minorTickInterval":"tickInterval"],b2=b3==="auto"?null:b3,b6=bZ.tickPixelInterval/(M?5:1),b1=M?L/bY.tickPositions.length:L;ch=aJ(b2,bY._minorAutoInterval,(b8-b7)*b6/(b1||1));ch=bw(ch,null,aO.pow(10,be(aO.log(ch)/aO.LN10)));b5=ag(bY.getLinearTickPositions(ch,b7,b8),s);if(!M){bY._minorAutoInterval=ch/5}}}if(!M){bY.tickInterval=ch}return b5},getMinorTickPositions:function(){var bZ=this,M=bZ.tickPositions,b1=bZ.minorTickInterval;var b0=[],b2,bY,L;if(bZ.isLog){L=M.length;for(bY=1;bY<L;bY++){b0=b0.concat(bZ.getLogTickPositions(b1,M[bY-1],M[bY],true))}}else{for(b2=bZ.min+(M[0]-bZ.min)%b1;b2<=bZ.max;b2+=b1){b0.push(b2)}}return b0},adjustForMinRange:function(){var bZ=this,b9=bZ.options,b1=bZ.min,b6=bZ.max,b8,bY=bZ.dataMax-bZ.dataMin>=bZ.minRange,M,b3,L,b0,b5,b7,b4;if(bZ.isXAxis&&bZ.minRange===k&&!bZ.isLog){if(ad(b9.min)||ad(b9.max)){bZ.minRange=null}else{D(bZ.series,function(ca){b0=ca.xData;b5=ca.xIncrement?1:b0.length-1;for(b3=b5;b3>0;b3--){L=b0[b3]-b0[b3-1];if(M===k||L<M){M=L}}});bZ.minRange=ak(M*5,bZ.dataMax-bZ.dataMin)}}if(b6-b1<bZ.minRange){var b2=bZ.minRange;b8=(b2-b6+b1)/2;b7=[b1-b8,aJ(b9.min,b1-b8)];if(bY){b7[2]=bZ.dataMin}b1=aG(b7);b4=[b1+b2,aJ(b9.max,b1+b2)];if(bY){b4[2]=bZ.dataMax}b6=bt(b4);if(b6-b1<b2){b7[0]=b6-b2;b7[1]=aJ(b9.min,b6-b2);b1=aG(b7)}}bZ.min=b1;bZ.max=b6},setAxisTranslation:function(){var b2=this,bY=b2.max-b2.min,b1=0,b3,b0=0,M=0,L=b2.linkedParent,bZ=b2.transA;if(b2.isXAxis){if(L){b0=L.minPointOffset;M=L.pointRangePadding}else{D(b2.series,function(b5){var b6=b5.pointRange,b7=b5.options.pointPlacement,b4=b5.closestPointRange;b1=bW(b1,b6);b0=bW(b0,b7?0:b6/2);M=bW(M,b7==="on"?0:b6);if(!b5.noSharedTooltip&&ad(b4)){b3=ad(b3)?ak(b3,b4):b4}})}b2.minPointOffset=b0;b2.pointRangePadding=M;b2.pointRange=b1;b2.closestPointRange=b3}b2.oldTransA=bZ;b2.translationSlope=b2.transA=bZ=b2.len/((bY+M)||1);b2.transB=b2.horiz?b2.left:b2.bottom;b2.minPixelPadding=bZ*b0},setTickPositions:function(cf){var bY=this,ca=bY.chart,bZ=bY.options,b8=bY.isLog,b6=bY.isDatetimeAxis,b7=bY.isXAxis,b1=bY.isLinked,L=bY.options.tickPositioner,b3,cc=bZ.maxPadding,M=bZ.minPadding,b0,b9,b2=bZ.tickInterval,ce=bZ.minTickInterval,b5=bZ.tickPixelInterval,ch,cb=bY.categories;if(b1){bY.linkedParent=ca[b7?"xAxis":"yAxis"][bZ.linkedTo];b9=bY.linkedParent.getExtremes();bY.min=aJ(b9.min,b9.dataMin);bY.max=aJ(b9.max,b9.dataMax);if(bZ.type!==bY.linkedParent.options.type){bE(11,1)}}else{bY.min=aJ(bY.userMin,bZ.min,bY.dataMin);bY.max=aJ(bY.userMax,bZ.max,bY.dataMax)}if(b8){if(!cf&&ak(bY.min,aJ(bY.dataMin,bY.min))<=0){bE(10,1)}bY.min=ac(s(bY.min));bY.max=ac(s(bY.max))}if(bY.range){bY.userMin=bY.min=bW(bY.min,bY.max-bY.range);bY.userMax=bY.max;if(cf){bY.range=null}}bY.adjustForMinRange();if(!cb&&!bY.usePercentage&&!b1&&ad(bY.min)&&ad(bY.max)){b0=(bY.max-bY.min)||1;if(!ad(bZ.min)&&!ad(bY.userMin)&&M&&(bY.dataMin<0||!bY.ignoreMinPadding)){bY.min-=b0*M}if(!ad(bZ.max)&&!ad(bY.userMax)&&cc&&(bY.dataMax>0||!bY.ignoreMaxPadding)){bY.max+=b0*cc}}if(bY.min===bY.max||bY.min===undefined||bY.max===undefined){bY.tickInterval=1}else{if(b1&&!b2&&b5===bY.linkedParent.options.tickPixelInterval){bY.tickInterval=bY.linkedParent.tickInterval}else{bY.tickInterval=aJ(b2,cb?1:(bY.max-bY.min)*b5/(bY.len||1))}}if(b7&&!cf){D(bY.series,function(ci){ci.processData(bY.min!==bY.oldMin||bY.max!==bY.oldMax)})}bY.setAxisTranslation(cf);if(bY.beforeSetTickPositions){bY.beforeSetTickPositions()}if(bY.postProcessTickInterval){bY.tickInterval=bY.postProcessTickInterval(bY.tickInterval)}if(!b2&&bY.tickInterval<ce){bY.tickInterval=ce}if(!b6&&!b8){b3=aO.pow(10,be(aO.log(bY.tickInterval)/aO.LN10));if(!b2){bY.tickInterval=bw(bY.tickInterval,null,b3,bZ)}}bY.minorTickInterval=bZ.minorTickInterval==="auto"&&bY.tickInterval?bY.tickInterval/5:bZ.minorTickInterval;bY.tickPositions=ch=bZ.tickPositions||(L&&L.apply(bY,[bY.min,bY.max]));if(!ch){if(b6){ch=(bY.getNonLinearTimeTicks||ap)(al(bY.tickInterval,bZ.units),bY.min,bY.max,bZ.startOfWeek,bY.ordinalPositions,bY.closestPointRange,true)}else{if(b8){ch=bY.getLogTickPositions(bY.tickInterval,bY.min,bY.max)}else{ch=bY.getLinearTickPositions(bY.tickInterval,bY.min,bY.max)}}bY.tickPositions=ch}if(!b1){var cd=ch[0],cg=ch[ch.length-1],b4=bY.minPointOffset||0;if(bZ.startOnTick){bY.min=cd}else{if(bY.min-b4>cd){ch.shift()}}if(bZ.endOnTick){bY.max=cg}else{if(bY.max+b4<cg){ch.pop()}}}},setMaxTicks:function(){var bY=this.chart,bZ=bY.maxTicks,M=this.tickPositions,L=this.xOrY;if(!bZ){bZ={x:0,y:0}}if(!this.isLinked&&!this.isDatetimeAxis&&M.length>bZ[L]&&this.options.alignTicks!==false){bZ[L]=M.length}bY.maxTicks=bZ},adjustTickAmount:function(){var b1=this,b0=b1.chart,L=b1.xOrY,bY=b1.tickPositions,b3=b0.maxTicks;if(b3&&b3[L]&&!b1.isDatetimeAxis&&!b1.categories&&!b1.isLinked&&b1.options.alignTicks!==false){var b2=b1.tickAmount,M=bY.length,bZ;b1.tickAmount=bZ=b3[L];if(M<bZ){while(bY.length<bZ){bY.push(ac(bY[bY.length-1]+b1.tickInterval))}b1.transA*=(M-1)/(bZ-1);b1.max=bY[bY.length-1]}if(ad(b2)&&bZ!==b2){b1.isDirty=true}}},setScale:function(){var bZ=this,bY=bZ.stacks,M,L,b1,b0;bZ.oldMin=bZ.min;bZ.oldMax=bZ.max;bZ.oldAxisLength=bZ.len;bZ.setAxisSize();b0=bZ.len!==bZ.oldAxisLength;D(bZ.series,function(b2){if(b2.isDirtyData||b2.isDirty||b2.xAxis.isDirty){b1=true}});if(b0||b1||bZ.isLinked||bZ.userMin!==bZ.oldUserMin||bZ.userMax!==bZ.oldUserMax){bZ.getSeriesExtremes();bZ.setTickPositions();bZ.oldUserMin=bZ.userMin;bZ.oldUserMax=bZ.userMax;if(!bZ.isDirty){bZ.isDirty=b0||bZ.min!==bZ.oldMin||bZ.max!==bZ.oldMax}}if(!bZ.isXAxis){for(M in bY){for(L in bY[M]){bY[M][L].cum=bY[M][L].total}}}bZ.setMaxTicks()},setExtremes:function(b1,bZ,b2,b0,L){var bY=this,M=bY.chart;b2=aJ(b2,true);L=bd(L,{min:b1,max:bZ});bk(bY,"setExtremes",L,function(){bY.userMin=b1;bY.userMax=bZ;bY.isDirtyExtremes=true;if(b2){M.redraw(b0)}})},zoom:function(M,L){this.setExtremes(M,L,false,k,{trigger:"zoom"});return true},setAxisSize:function(){var bZ=this,bY=bZ.chart,L=bZ.options;var b0=L.offsetLeft||0,M=L.offsetRight||0;bZ.left=aJ(L.left,bY.plotLeft+b0);bZ.top=aJ(L.top,bY.plotTop);bZ.width=aJ(L.width,bY.plotWidth-b0+M);bZ.height=aJ(L.height,bY.plotHeight);bZ.bottom=bY.chartHeight-bZ.height-bZ.top;bZ.right=bY.chartWidth-bZ.width-bZ.left;bZ.len=bW(bZ.horiz?bZ.width:bZ.height,0)},getExtremes:function(){var M=this,L=M.isLog;return{min:L?ac(v(M.min)):M.min,max:L?ac(v(M.max)):M.max,dataMin:M.dataMin,dataMax:M.dataMax,userMin:M.userMin,userMax:M.userMax}},getThreshold:function(M){var bZ=this,L=bZ.isLog;var b0=L?v(bZ.min):bZ.min,bY=L?v(bZ.max):bZ.max;if(b0>M||M===null){M=b0}else{if(bY<M){M=bY}}return bZ.translate(M,0,1,0,1)},addPlotBandOrLine:function(L){var M=new bu(this,L).render();this.plotLinesAndBands.push(M);return M},getOffset:function(){var bZ=this,b4=bZ.chart,b8=b4.renderer,b1=bZ.options,cd=bZ.tickPositions,ce=bZ.ticks,cb=bZ.horiz,bY=bZ.side,ca,b6,L=0,cc,b2=0,M=b1.title,b5=b1.labels,b9=0,b0=b4.axisOffset,b3=[-1,1,1,-1][bY],b7;bZ.hasData=ca=(bZ.hasVisibleSeries||(ad(bZ.min)&&ad(bZ.max)&&!!cd));bZ.showAxis=b6=ca||aJ(b1.showEmpty,true);if(!bZ.axisGroup){bZ.gridGroup=b8.g("grid").attr({zIndex:b1.gridZIndex||1}).add();bZ.axisGroup=b8.g("axis").attr({zIndex:b1.zIndex||2}).add();bZ.labelGroup=b8.g("axis-labels").attr({zIndex:b5.zIndex||7}).add()}if(ca||bZ.isLinked){D(cd,function(cf){if(!ce[cf]){ce[cf]=new az(bZ,cf)}else{ce[cf].addLabel()}});D(cd,function(cf){if(bY===0||bY===2||{1:"left",3:"right"}[bY]===b5.align){b9=bW(ce[cf].getLabelSize(),b9)}});if(bZ.staggerLines){b9+=(bZ.staggerLines-1)*16}}else{for(b7 in ce){ce[b7].destroy();delete ce[b7]}}if(M&&M.text){if(!bZ.axisTitle){bZ.axisTitle=b8.text(M.text,0,0,M.useHTML).attr({zIndex:7,rotation:M.rotation||0,align:M.textAlign||{low:"left",middle:"center",high:"right"}[M.align]}).css(M.style).add(bZ.axisGroup);bZ.axisTitle.isNew=true}if(b6){L=bZ.axisTitle.getBBox()[cb?"height":"width"];b2=aJ(M.margin,cb?5:10);cc=M.offset}bZ.axisTitle[b6?"show":"hide"]()}bZ.offset=b3*aJ(b1.offset,b0[bY]);bZ.axisTitleMargin=aJ(cc,b9+b2+(bY!==2&&b9&&b3*b1.labels[cb?"y":"x"]));b0[bY]=bW(b0[bY],bZ.axisTitleMargin+L+b3*bZ.offset)},getLinePath:function(M){var bZ=this.chart,b0=this.opposite,b1=this.offset,b2=this.horiz,L=this.left+(b0?this.width:0)+b1,bY=bZ.chartHeight-this.bottom-(b0?this.height:0)+b1;this.lineTop=bY;return bZ.renderer.crispLine([bl,b2?this.left:L,b2?bY:this.top,bm,b2?bZ.chartWidth-this.right:L,b2?bY:bZ.chartHeight-this.bottom],M)},getTitlePosition:function(){var b5=this.horiz,b1=this.left,L=this.top,b3=this.len,b4=this.options.title,bZ=b5?b1:L,b2=this.opposite,b0=this.offset,b6=bD(b4.style.fontSize||12),M={low:bZ+(b5?0:b3),middle:bZ+b3/2,high:bZ+(b5?b3:0)}[b4.align],bY=(b5?L+this.height:b1)+(b5?1:-1)*(b2?-1:1)*this.axisTitleMargin+(this.side===2?b6:0);return{x:b5?M:bY+(b2?this.width:0)+b0+(b4.x||0),y:b5?bY-(b2?this.height:0)+b0:M+(b4.y||0)}},render:function(){var b2=this,cc=b2.chart,cf=cc.renderer,b4=b2.options,cb=b2.isLog,b8=b2.isLinked,ck=b2.tickPositions,b5=b2.axisTitle,cj=b2.stacks,cl=b2.ticks,bZ=b2.minorTicks,b3=b2.alternateBands,ce=b4.stackLabels,bY=b4.alternateGridColor,cm=b2.tickmarkOffset,M=b4.lineWidth,b7,ca=cc.hasRendered,b9=ca&&ad(b2.oldMin)&&!isNaN(b2.oldMin),ci=b2.hasData,cd=b2.showAxis,ch,b1;if(ci||b8){if(b2.minorTickInterval&&!b2.categories){D(b2.getMinorTickPositions(),function(cn){if(!bZ[cn]){bZ[cn]=new az(b2,cn,"minor")}if(b9&&bZ[cn].isNew){bZ[cn].render(null,true)}bZ[cn].isActive=true;bZ[cn].render()})}D(ck.slice(1).concat([ck[0]]),function(co,cn){cn=(cn===ck.length-1)?0:cn+1;if(!b8||(co>=b2.min&&co<=b2.max)){if(!cl[co]){cl[co]=new az(b2,co)}if(b9&&cl[co].isNew){cl[co].render(cn,true)}cl[co].isActive=true;cl[co].render(cn)}});if(bY){D(ck,function(co,cn){if(cn%2===0&&co<b2.max){if(!b3[co]){b3[co]=new bu(b2)}ch=co+cm;b1=ck[cn+1]!==k?ck[cn+1]+cm:b2.max;b3[co].options={from:cb?v(ch):ch,to:cb?v(b1):b1,color:bY};b3[co].render();b3[co].isActive=true}})}if(!b2._addedPlotLB){D((b4.plotLines||[]).concat(b4.plotBands||[]),function(cn){b2.addPlotBandOrLine(cn)});b2._addedPlotLB=true}}D([cl,bZ,b3],function(cn){var co;for(co in cn){if(!cn[co].isActive){cn[co].destroy();delete cn[co]}else{cn[co].isActive=false}}});if(M){b7=b2.getLinePath(M);if(!b2.axisLine){b2.axisLine=cf.path(b7).attr({stroke:b4.lineColor,"stroke-width":M,zIndex:7}).add(b2.axisGroup)}else{b2.axisLine.animate({d:b7})}b2.axisLine[cd?"show":"hide"]()}if(b5&&cd){b5[b5.isNew?"attr":"animate"](b2.getTitlePosition());b5.isNew=false}if(ce&&ce.enabled){var b0,b6,cg,L=b2.stackTotalGroup;if(!L){b2.stackTotalGroup=L=cf.g("stack-labels").attr({visibility:aj,zIndex:6}).add()}L.translate(cc.plotLeft,cc.plotTop);for(b0 in cj){b6=cj[b0];for(cg in b6){b6[cg].render(L)}}}b2.isDirty=false},removePlotBandOrLine:function(bY){var L=this.plotLinesAndBands,M=L.length;while(M--){if(L[M].id===bY){L[M].destroy()}}},setTitle:function(M,b0){var bY=this.chart,L=this.options,bZ=this.axisTitle;L.title=aI(L.title,M);this.axisTitle=bZ&&bZ.destroy();this.isDirty=true;if(aJ(b0,true)){bY.redraw()}},redraw:function(){var M=this,L=M.chart;if(L.tracker.resetTracker){L.tracker.resetTracker(true)}M.render();D(M.plotLinesAndBands,function(bY){bY.render()});D(M.series,function(bY){bY.isDirty=true})},setCategories:function(bY,bZ){var M=this,L=M.chart;M.categories=M.userOptions.categories=bY;D(M.series,function(b0){b0.translate();b0.setTooltipPoints(true)});M.isDirty=true;if(aJ(bZ,true)){L.redraw()}},destroy:function(){var bY=this,M=bY.stacks,L;aW(bY);for(L in M){a3(M[L]);M[L]=null}D([bY.ticks,bY.minorTicks,bY.alternateBands,bY.plotLinesAndBands],function(bZ){a3(bZ)});D(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(bZ){if(bY[bZ]){bY[bZ]=bY[bZ].destroy()}})}};function bJ(bZ,M){var L=M.borderWidth,bY=M.style,b0=bD(bY.padding);this.chart=bZ;this.options=M;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=true;this.label=bZ.renderer.label("",0,0,M.shape,null,null,M.useHTML,null,"tooltip").attr({padding:b0,fill:M.backgroundColor,"stroke-width":L,r:M.borderRadius,zIndex:8}).css(bY).css({padding:0}).hide().add();if(!aY){this.label.shadow(M.shadow)}this.shared=M.shared}bJ.prototype={destroy:function(){D(this.crosshairs,function(L){if(L){L.destroy()}});if(this.label){this.label=this.label.destroy()}},move:function(M,b2,L,b1){var b0=this,bZ=b0.now,bY=b0.options.animation!==false&&!b0.isHidden;bd(bZ,{x:bY?(2*bZ.x+M)/3:M,y:bY?(bZ.y+b2)/2:b2,anchorX:bY?(2*bZ.anchorX+L)/3:L,anchorY:bY?(bZ.anchorY+b1)/2:b1});b0.label.attr(bZ);if(bY&&(e(M-bZ.x)>1||e(b2-bZ.y)>1)){clearTimeout(this.tooltipTimeout);this.tooltipTimeout=setTimeout(function(){if(b0){b0.move(M,b2,L,b1)}},32)}},hide:function(){if(!this.isHidden){var L=this.chart.hoverPoints;this.label.hide();if(L){D(L,function(M){M.setState()})}this.chart.hoverPoints=null;this.isHidden=true}},hideCrosshairs:function(){D(this.crosshairs,function(L){if(L){L.hide()}})},getAnchor:function(b2,b3){var b0,b1=this.chart,bY=b1.inverted,bZ=0,M=0,L;b2=a7(b2);b0=b2[0].tooltipPos;if(!b0){D(b2,function(b4){L=b4.series.yAxis;bZ+=b4.plotX;M+=(b4.plotLow?(b4.plotLow+b4.plotHigh)/2:b4.plotY)+(!bY&&L?L.top-b1.plotTop:0)});bZ/=b2.length;M/=b2.length;b0=[bY?b1.plotWidth-M:bZ,this.shared&&!bY&&b2.length>1&&b3?b3.chartY-b1.plotTop:bY?b1.plotHeight-bZ:M]}return ag(b0,m)},getPosition:function(bZ,b2,b8){var b1=this.chart,bY=b1.plotLeft,b4=b1.plotTop,b3=b1.plotWidth,b5=b1.plotHeight,M=aJ(this.options.distance,12),L=b8.plotX,b9=b8.plotY,b7=L+bY+(b1.inverted?M:-bZ-M),b6=b9-b2+b4+15,b0;if(b7<7){b7=bY+bW(L,0)+M}if((b7+bZ)>(bY+b3)){b7-=(b7+bZ)-(bY+b3);b6=b9-b2+b4-M;b0=true}if(b6<b4+5){b6=b4+5;if(b0&&b9>=b6&&b9<=(b6+b2)){b6=b9+b4+M}}if(b6+b2>b4+b5){b6=bW(b4,b4+b5-b2-M)}return{x:b7,y:b6}},refresh:function(cg,cj){var b2=this,ce=b2.chart,b6=b2.label,b1=b2.options;function ca(){var co=this,cl=co.points||a7(co),cm=cl[0].series,cn;cn=[cm.tooltipHeaderFormatter(cl[0].key)];D(cl,function(cp){cm=cp.series;cn.push((cm.tooltipFormatter&&cm.tooltipFormatter(cp))||cp.point.tooltipFormatter(cm.tooltipOptions.pointFormat))});cn.push(b1.footerFormat||"");return cn.join("")}var b8,b7,ck,b4,b5={},cc,b3=[],ci=b1.formatter||ca,cb=ce.hoverPoints,b0,L,bY=b1.crosshairs,M=b2.shared,b9;b4=b2.getAnchor(cg,cj);b8=b4[0];b7=b4[1];if(M&&!(cg.series&&cg.series.noSharedTooltip)){ce.hoverPoints=cg;if(cb){D(cb,function(cl){cl.setState()})}D(cg,function(cl){cl.setState(aK);b3.push(cl.getLabelConfig())});b5={x:cg[0].category,y:cg[0].y};b5.points=b3;cg=cg[0]}else{b5=cg.getLabelConfig()}cc=ci.call(b5);b9=cg.series;ck=M||!b9.isCartesian||b9.tooltipOutsidePlot||ce.isInsidePlot(b8,b7);if(cc===false||!ck){this.hide()}else{if(b2.isHidden){b6.show()}b6.attr({text:cc});L=b1.borderColor||cg.color||b9.color||"#606060";b6.attr({stroke:L});b0=(b1.positioner||b2.getPosition).call(b2,b6.width,b6.height,{plotX:b8,plotY:b7});b2.move(m(b0.x),m(b0.y),b8+ce.plotLeft,b7+ce.plotTop);b2.isHidden=false}if(bY){bY=a7(bY);var cf,ch=bY.length,cd,bZ;while(ch--){bZ=cg.series[ch?"yAxis":"xAxis"];if(bY[ch]&&bZ){cf=bZ.getPlotLinePath(ch?aJ(cg.stackY,cg.y):cg.x,1);if(b2.crosshairs[ch]){b2.crosshairs[ch].attr({d:cf,visibility:aj})}else{cd={"stroke-width":bY[ch].width||1,stroke:bY[ch].color||"#C0C0C0",zIndex:bY[ch].zIndex||2};if(bY[ch].dashStyle){cd.dashstyle=bY[ch].dashStyle}b2.crosshairs[ch]=ce.renderer.path(cf).attr(cd).add()}}}}bk(ce,"tooltipRefresh",{text:cc,x:b8+ce.plotLeft,y:b7+ce.plotTop,borderColor:L})}};function H(bY,M){var L=aY?"":M.chart.zoomType;this.zoomX=/x/.test(L);this.zoomY=/y/.test(L);this.options=M;this.chart=bY;this.init(bY,M.tooltip)}H.prototype={normalizeMouseEvent:function(bZ){var bY,M,b0,L;bZ=bZ||aU.event;if(!bZ.target){bZ.target=bZ.srcElement}bZ=P(bZ);L=bZ.touches?bZ.touches.item(0):bZ;this.chartPosition=bY=bH(this.chart.container);if(L.pageX===k){M=bZ.x;b0=bZ.y}else{M=L.pageX-bY.left;b0=L.pageY-bY.top}return bd(bZ,{chartX:m(M),chartY:m(b0)})},getMouseCoordinates:function(M){var bY={xAxis:[],yAxis:[]},L=this.chart;D(L.axes,function(bZ){var b1=bZ.isXAxis,b0=L.inverted?!b1:b1;bY[b1?"xAxis":"yAxis"].push({axis:bZ,value:bZ.translate((b0?M.chartX-L.plotLeft:bZ.top+bZ.len-M.chartY)-bZ.minPixelPadding,true)})});return bY},getIndex:function(M){var L=this.chart;return L.inverted?L.plotHeight+L.plotTop-M.chartY:M.chartX-L.plotLeft},onmousemove:function(b3){var b2=this,b4=b2.chart,b0=b4.series,b8=b4.tooltip,b6,b7,L=b4.hoverPoint,b5=b4.hoverSeries,bZ,bY,M=b4.chartWidth,b1=b2.getIndex(b3);if(b8&&b2.options.tooltip.shared&&!(b5&&b5.noSharedTooltip)){b7=[];bZ=b0.length;for(bY=0;bY<bZ;bY++){if(b0[bY].visible&&b0[bY].options.enableMouseTracking!==false&&!b0[bY].noSharedTooltip&&b0[bY].tooltipPoints.length){b6=b0[bY].tooltipPoints[b1];b6._dist=e(b1-b6[b0[bY].xAxis.tooltipPosName||"plotX"]);M=ak(M,b6._dist);b7.push(b6)}}bZ=b7.length;while(bZ--){if(b7[bZ]._dist>M){b7.splice(bZ,1)}}if(b7.length&&(b7[0].plotX!==b2.hoverX)){b8.refresh(b7,b3);b2.hoverX=b7[0].plotX}}if(b5&&b5.tracker){b6=b5.tooltipPoints[b1];if(b6&&b6!==L){b6.onMouseOver()}}},resetTracker:function(b2){var b1=this,bZ=b1.chart,M=bZ.hoverSeries,L=bZ.hoverPoint,b0=bZ.tooltip,bY=b0&&b0.shared?bZ.hoverPoints:L;b2=b2&&b0&&bY;if(b2&&a7(bY)[0].plotX===k){b2=false}if(b2){b0.refresh(bY)}else{if(L){L.onMouseOut()}if(M){M.onMouseOut()}if(b0){b0.hide();b0.hideCrosshairs()}b1.hoverX=null}},setDOMEvents:function(){var b4=true,b0=this,b1=b0.chart,L=b1.container,bZ,M=(b0.zoomX&&!b1.inverted)||(b0.zoomY&&b1.inverted),b2=(b0.zoomY&&!b1.inverted)||(b0.zoomX&&b1.inverted);function bY(){if(b0.selectionMarker){var b8={xAxis:[],yAxis:[]},b6=b0.selectionMarker.getBBox(),b9=b6.x-b1.plotLeft,b7=b6.y-b1.plotTop,b5;if(bZ){D(b1.axes,function(cb){if(cb.options.zoomEnabled!==false){var ce=cb.isXAxis,cd=b1.inverted?!ce:ce,ca=cb.translate(cd?b9:b1.plotHeight-b7-b6.height,true,0,0,1),cc=cb.translate((cd?b9+b6.width:b1.plotHeight-b7)-2*cb.minPixelPadding,true,0,0,1);if(!isNaN(ca)&&!isNaN(cc)){b8[ce?"xAxis":"yAxis"].push({axis:cb,min:ak(ca,cc),max:bW(ca,cc)});b5=true}}});if(b5){bk(b1,"selection",b8,function(ca){b1.zoom(ca)})}}b0.selectionMarker=b0.selectionMarker.destroy()}if(b1){bR(L,{cursor:"auto"});b1.cancelClick=bZ;b1.mouseIsDown=bZ=false}aW(bs,C?"touchend":"mouseup",bY)}b0.hideTooltipOnMouseMove=function(b5){b5=P(b5);if(b0.chartPosition&&b1.hoverSeries&&b1.hoverSeries.isCartesian&&!b1.isInsidePlot(b5.pageX-b0.chartPosition.left-b1.plotLeft,b5.pageY-b0.chartPosition.top-b1.plotTop)){b0.resetTracker()}};b0.hideTooltipOnMouseLeave=function(){b0.resetTracker();b0.chartPosition=null};L.onmousedown=function(b5){b5=b0.normalizeMouseEvent(b5);if(!C&&b5.preventDefault){b5.preventDefault()}b1.mouseIsDown=true;b1.cancelClick=false;b1.mouseDownX=b0.mouseDownX=b5.chartX;b0.mouseDownY=b5.chartY;w(bs,C?"touchend":"mouseup",bY)};var b3=function(ca){if(ca&&ca.touches&&ca.touches.length>1){return}ca=b0.normalizeMouseEvent(ca);if(!C){ca.returnValue=false}var b5=ca.chartX,cb=ca.chartY,b7=!b1.isInsidePlot(b5-b1.plotLeft,cb-b1.plotTop);if(C&&ca.type==="touchstart"){if(Q(ca.target,"isTracker")){if(!b1.runTrackerClick){ca.preventDefault()}}else{if(!b1.runChartClick&&!b7){ca.preventDefault()}}}if(b7){if(b5<b1.plotLeft){b5=b1.plotLeft}else{if(b5>b1.plotLeft+b1.plotWidth){b5=b1.plotLeft+b1.plotWidth}}if(cb<b1.plotTop){cb=b1.plotTop}else{if(cb>b1.plotTop+b1.plotHeight){cb=b1.plotTop+b1.plotHeight}}}if(b1.mouseIsDown&&ca.type!=="touchstart"){bZ=Math.sqrt(Math.pow(b0.mouseDownX-b5,2)+Math.pow(b0.mouseDownY-cb,2));if(bZ>10){var b9=b1.isInsidePlot(b0.mouseDownX-b1.plotLeft,b0.mouseDownY-b1.plotTop);if(b1.hasCartesianSeries&&(b0.zoomX||b0.zoomY)&&b9){if(!b0.selectionMarker){b0.selectionMarker=b1.renderer.rect(b1.plotLeft,b1.plotTop,M?1:b1.plotWidth,b2?1:b1.plotHeight,0).attr({fill:b0.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()}}if(b0.selectionMarker&&M){var b8=b5-b0.mouseDownX;b0.selectionMarker.attr({width:e(b8),x:(b8>0?0:b8)+b0.mouseDownX})}if(b0.selectionMarker&&b2){var b6=cb-b0.mouseDownY;b0.selectionMarker.attr({height:e(b6),y:(b6>0?0:b6)+b0.mouseDownY})}if(b9&&!b0.selectionMarker&&b0.options.chart.panning){b1.pan(b5)}}}if(!b7){b0.onmousemove(ca)}b4=b7;return b7||!b1.hasCartesianSeries};L.onmousemove=b3;w(L,"mouseleave",b0.hideTooltipOnMouseLeave);w(bs,"mousemove",b0.hideTooltipOnMouseMove);L.ontouchstart=function(b5){if(b0.zoomX||b0.zoomY){L.onmousedown(b5)}b3(b5)};L.ontouchmove=b3;L.ontouchend=function(){if(bZ){b0.resetTracker()}};L.onclick=function(b8){var b6=b1.hoverPoint,b7,b5;b8=b0.normalizeMouseEvent(b8);b8.cancelBubble=true;if(!b1.cancelClick){if(b6&&(Q(b8.target,"isTracker")||Q(b8.target.parentNode,"isTracker"))){b7=b6.plotX;b5=b6.plotY;bd(b6,{pageX:b0.chartPosition.left+b1.plotLeft+(b1.inverted?b1.plotWidth-b5:b7),pageY:b0.chartPosition.top+b1.plotTop+(b1.inverted?b1.plotHeight-b7:b5)});bk(b6.series,"click",bd(b8,{point:b6}));b6.firePointEvent("click",b8)}else{bd(b8,b0.getMouseCoordinates(b8));if(b1.isInsidePlot(b8.chartX-b1.plotLeft,b8.chartY-b1.plotTop)){bk(b1,"click",b8)}}}}},destroy:function(){var bY=this,M=bY.chart,L=M.container;if(M.trackerGroup){M.trackerGroup=M.trackerGroup.destroy()}aW(L,"mouseleave",bY.hideTooltipOnMouseLeave);aW(bs,"mousemove",bY.hideTooltipOnMouseMove);L.onclick=L.onmousedown=L.onmousemove=L.ontouchstart=L.ontouchend=L.ontouchmove=null;clearInterval(this.tooltipTimeout)},init:function(M,L){if(!M.trackerGroup){M.trackerGroup=M.renderer.g("tracker").attr({zIndex:9}).add()}if(L.enabled){M.tooltip=new bJ(M,L)}this.setDOMEvents()}};function bn(L){this.init(L)}bn.prototype={init:function(bY){var M=this,L=M.options=bY.options.legend;if(!L.enabled){return}var bZ=L.itemStyle,b0=aJ(L.padding,8),b1=L.itemMarginTop||0;M.baseline=bD(bZ.fontSize)+3+b1;M.itemStyle=bZ;M.itemHiddenStyle=aI(bZ,L.itemHiddenStyle);M.itemMarginTop=b1;M.padding=b0;M.initialItemX=b0;M.initialItemY=b0-5;M.maxItemWidth=0;M.chart=bY;M.itemHeight=0;M.lastLineHeight=0;M.render();w(M.chart,"endResize",function(){M.positionCheckboxes()})},colorizeItem:function(b8,bZ){var b3=this,b9=b3.options,b1=b8.legendItem,b2=b8.legendLine,bY=b8.legendSymbol,b6=b3.itemHiddenStyle.color,b5=bZ?b9.itemStyle.color:b6,b0=bZ?b8.color:b6,L=b8.options&&b8.options.marker,b7={stroke:b0,fill:b0},b4,M;if(b1){b1.css({fill:b5})}if(b2){b2.attr({stroke:b0})}if(bY){if(L){L=b8.convertAttribs(L);for(b4 in L){M=L[b4];if(M!==k){b7[b4]=M}}}bY.attr(b7)}},positionItem:function(b3){var b1=this,b4=b1.options,b2=b4.symbolPadding,L=!b4.rtl,M=b3._legendItemPos,b0=M[0],bZ=M[1],bY=b3.checkbox;if(b3.legendGroup){b3.legendGroup.translate(L?b0:b1.legendWidth-b0-2*b2-4,bZ)}if(bY){bY.x=b0;bY.y=bZ}},destroyItem:function(L){var M=L.checkbox;D(["legendItem","legendLine","legendSymbol","legendGroup"],function(bY){if(L[bY]){L[bY].destroy()}});if(M){bF(L.checkbox)}},destroy:function(){var L=this,bY=L.group,M=L.box;if(M){L.box=M.destroy()}if(bY){L.group=bY.destroy()}},positionCheckboxes:function(){var L=this;D(L.allItems,function(M){var bY=M.checkbox,bZ=L.group.alignAttr;if(bY){bR(bY,{left:(bZ.translateX+M.legendItemWidth+bY.x-20)+V,top:(bZ.translateY+bY.y+3)+V})}})},renderItem:function(cf){var M=this,b9=M.chart,ca=b9.renderer,bZ=M.options,cg=bZ.layout==="horizontal",ch=bZ.symbolWidth,L=bZ.symbolPadding,b3=M.itemStyle,bY=M.itemHiddenStyle,b8=M.padding,cd=!bZ.rtl,cb,b6=bZ.width,b2=bZ.itemMarginBottom||0,ce=M.itemMarginTop,cc=M.initialItemX,b1,b0,b7=cf.legendItem,b5=cf.series||cf,b4=b5.options,ci=b4.showCheckbox;if(!b7){cf.legendGroup=ca.g("legend-item").attr({zIndex:1}).add(M.scrollGroup);b5.drawLegendSymbol(M,cf);cf.legendItem=b7=ca.text(bZ.labelFormatter.call(cf),cd?ch+L:-L,M.baseline,bZ.useHTML).css(aI(cf.visible?b3:bY)).attr({align:cd?"left":"right",zIndex:2}).add(cf.legendGroup);cf.legendGroup.on("mouseover",function(){cf.setState(aK);b7.css(M.options.itemHoverStyle)}).on("mouseout",function(){b7.css(cf.visible?b3:bY);cf.setState()}).on("click",function(ck){var cl="legendItemClick",cj=function(){cf.setVisible()};ck={browserEvent:ck};if(cf.firePointEvent){cf.firePointEvent(cl,ck,cj)}else{bk(cf,cl,ck,cj)}});M.colorizeItem(cf,cf.visible);if(b4&&ci){cf.checkbox=bf("input",{type:"checkbox",checked:cf.selected,defaultChecked:cf.selected},bZ.itemCheckboxStyle,b9.container);w(cf.checkbox,"click",function(cj){var ck=cj.target;bk(cf,"checkboxClick",{checked:ck.checked},function(){cf.select()})})}}b1=b7.getBBox();b0=cf.legendItemWidth=bZ.itemWidth||ch+L+b1.width+b8+(ci?20:0);M.itemHeight=cb=b1.height;if(cg&&M.itemX-cc+b0>(b6||(b9.chartWidth-2*b8-cc))){M.itemX=cc;M.itemY+=ce+M.lastLineHeight+b2;M.lastLineHeight=0}M.maxItemWidth=bW(M.maxItemWidth,b0);M.lastItemY=ce+M.itemY+b2;M.lastLineHeight=bW(cb,M.lastLineHeight);cf._legendItemPos=[M.itemX,M.itemY];if(cg){M.itemX+=b0}else{M.itemY+=ce+cb+b2;M.lastLineHeight=cb}M.offsetWidth=b6||bW(cg?M.itemX-cc:b0,M.offsetWidth)},render:function(){var b5=this,b2=b5.chart,b1=b2.renderer,bZ=b5.group,b3,b0,b7,b6,bY=b5.box,b8=b5.options,b4=b5.padding,L=b8.borderWidth,M=b8.backgroundColor;b5.itemX=b5.initialItemX;b5.itemY=b5.initialItemY;b5.offsetWidth=0;b5.lastItemY=0;if(!bZ){b5.group=bZ=b1.g("legend").attr({zIndex:7}).add();b5.contentGroup=b1.g().attr({zIndex:1}).add(bZ);b5.scrollGroup=b1.g().add(b5.contentGroup);b5.clipRect=b1.clipRect(0,0,9999,b2.chartHeight);b5.contentGroup.clip(b5.clipRect)}b3=[];D(b2.series,function(ca){var b9=ca.options;if(!b9.showInLegend){return}b3=b3.concat(ca.legendItems||(b9.legendType==="point"?ca.data:ca))});aE(b3,function(ca,b9){return((ca.options&&ca.options.legendIndex)||0)-((b9.options&&b9.options.legendIndex)||0)});if(b8.reversed){b3.reverse()}b5.allItems=b3;b5.display=b0=!!b3.length;D(b3,function(b9){b5.renderItem(b9)});b7=b8.width||b5.offsetWidth;b6=b5.lastItemY+b5.lastLineHeight;b6=b5.handleOverflow(b6);if(L||M){b7+=b4;b6+=b4;if(!bY){b5.box=bY=b1.rect(0,0,b7,b6,b8.borderRadius,L||0).attr({stroke:b8.borderColor,"stroke-width":L||0,fill:M||y}).add(bZ).shadow(b8.shadow);bY.isNew=true}else{if(b7>0&&b6>0){bY[bY.isNew?"attr":"animate"](bY.crisp(null,null,null,b7,b6));bY.isNew=false}}bY[b0?"show":"hide"]()}b5.legendWidth=b7;b5.legendHeight=b6;D(b3,function(b9){b5.positionItem(b9)});if(b0){bZ.align(bd({width:b7,height:b6},b8),true,b2.spacingBox)}if(!b2.isResizing){this.positionCheckboxes()}},handleOverflow:function(b9){var b8=this,b6=this.chart,b5=b6.renderer,M,cb=this.options,bY=cb.y,b3=cb.verticalAlign==="top",b7=b6.spacingBox.height+(b3?-bY:bY)-this.padding,ca=cb.maxHeight,b0,b2=this.clipRect,b4=cb.navigation,bZ=aJ(b4.animation,true),b1=b4.arrowSize||12,L=this.nav;if(cb.layout==="horizontal"){b7/=2}if(ca){b7=ak(b7,ca)}if(b9>b7){this.clipHeight=b0=b7-20;this.pageCount=M=ay(b9/b0);this.currentPage=aJ(this.currentPage,1);this.fullHeight=b9;b2.attr({height:b0});if(!L){this.nav=L=b5.g().attr({zIndex:1}).add(this.group);this.up=b5.symbol("triangle",0,0,b1,b1).on("click",function(){b8.scroll(-1,bZ)}).add(L);this.pager=b5.text("",15,10).css(b4.style).add(L);this.down=b5.symbol("triangle-down",0,0,b1,b1).on("click",function(){b8.scroll(1,bZ)}).add(L)}b8.scroll(0);b9=b7}else{if(L){b2.attr({height:b6.chartHeight});L.hide();this.scrollGroup.attr({translateY:1})}}return b9},scroll:function(b0,bY){var M=this.pageCount,b1=this.currentPage+b0,bZ=this.clipHeight,b3=this.options.navigation,b4=b3.activeColor,b2=b3.inactiveColor,L=this.pager,b5=this.padding;if(b1>M){b1=M}if(b1>0){if(bY!==k){bS(bY,this.chart)}this.nav.attr({translateX:b5,translateY:bZ+7,visibility:aj});this.up.attr({fill:b1===1?b2:b4}).css({cursor:b1===1?"default":"pointer"});L.attr({text:b1+"/"+this.pageCount});this.down.attr({x:18+this.pager.getBBox().width,fill:b1===M?b2:b4}).css({cursor:b1===M?"default":"pointer"});this.scrollGroup.animate({translateY:-ak(bZ*(b1-1),this.fullHeight-bZ+b5)+1});L.attr({text:b1+"/"+M});this.currentPage=b1}}};function bb(b2,b3){var bY,M=b2.series;b2.series=null;bY=aI(bp,b2);bY.series=b2.series=M;var b1=bY.chart,L=b1.margin,bZ=bT(L)?L:[L,L,L,L];this.optionsMarginTop=aJ(b1.marginTop,bZ[0]);this.optionsMarginRight=aJ(b1.marginRight,bZ[1]);this.optionsMarginBottom=aJ(b1.marginBottom,bZ[2]);this.optionsMarginLeft=aJ(b1.marginLeft,bZ[3]);var b0=b1.events;this.runChartClick=b0&&!!b0.click;this.callback=b3;this.isResizing=0;this.options=bY;this.axes=[];this.series=[];this.hasCartesianSeries=b1.showAxes;this.init(b0)}bb.prototype={initSeries:function(L){var bZ=this,b0=bZ.options.chart,bY=L.type||b0.type||b0.defaultSeriesType,M=new a[bY]();M.init(this,L);return M},addSeries:function(L,b0,bZ){var M,bY=this;if(L){bS(bZ,bY);b0=aJ(b0,true);bk(bY,"addSeries",{options:L},function(){M=bY.initSeries(L);bY.isDirtyLegend=true;if(b0){bY.redraw()}})}return M},isInsidePlot:function(bZ,bY,M){var L=M?bY:bZ,b0=M?bZ:bY;return L>=0&&L<=this.plotWidth&&b0>=0&&b0<=this.plotHeight},adjustTickAmounts:function(){if(this.options.chart.alignTicks!==false){D(this.axes,function(L){L.adjustTickAmount()})}this.maxTicks=null},redraw:function(bY){var b7=this,b6=b7.axes,b1=b7.series,b9=b7.tracker,ca=b7.legend,L=b7.isDirtyLegend,b3,b0=b7.isDirtyBox,M=b1.length,bZ=M,b2,b5=b7.renderer,b8=b5.isHidden(),b4=[];bS(bY,b7);if(b8){b7.cloneRenderTo()}while(bZ--){b2=b1[bZ];if(b2.isDirty&&b2.options.stacking){b3=true;break}}if(b3){bZ=M;while(bZ--){b2=b1[bZ];if(b2.options.stacking){b2.isDirty=true}}}D(b1,function(cb){if(cb.isDirty){if(cb.options.legendType==="point"){L=true}}});if(L&&ca.options.enabled){ca.render();b7.isDirtyLegend=false}if(b7.hasCartesianSeries){if(!b7.isResizing){b7.maxTicks=null;D(b6,function(cb){cb.setScale()})}b7.adjustTickAmounts();b7.getMargins();D(b6,function(cb){if(cb.isDirtyExtremes){cb.isDirtyExtremes=false;b4.push(function(){bk(cb,"afterSetExtremes",cb.getExtremes())})}if(cb.isDirty||b0||b3){cb.redraw();b0=true}})}if(b0){b7.drawChartBox()}D(b1,function(cb){if(cb.isDirty&&cb.visible&&(!cb.isCartesian||cb.xAxis)){cb.redraw()}});if(b9&&b9.resetTracker){b9.resetTracker(true)}b5.draw();bk(b7,"redraw");if(b8){b7.cloneRenderTo(true)}D(b4,function(cb){cb.call()})},showLoading:function(b0){var bY=this,L=bY.options,bZ=bY.loadingDiv;var M=L.loading;if(!bZ){bY.loadingDiv=bZ=bf(J,{className:aZ+"loading"},bd(M.style,{left:bY.plotLeft+V,top:bY.plotTop+V,width:bY.plotWidth+V,height:bY.plotHeight+V,zIndex:10,display:y}),bY.container);bY.loadingSpan=bf("span",null,M.labelStyle,bZ)}bY.loadingSpan.innerHTML=b0||L.lang.loading;if(!bY.loadingShown){bR(bZ,{opacity:0,display:""});q(bZ,{opacity:M.style.opacity},{duration:M.showDuration||0});bY.loadingShown=true}},hideLoading:function(){var L=this.options,M=this.loadingDiv;if(M){q(M,{opacity:0},{duration:L.loading.hideDuration||100,complete:function(){bR(M,{display:y})}})}this.loadingShown=false},get:function(b2){var b0=this,b1=b0.axes,bY=b0.series;var M,L,bZ;for(M=0;M<b1.length;M++){if(b1[M].options.id===b2){return b1[M]}}for(M=0;M<bY.length;M++){if(bY[M].options.id===b2){return bY[M]}}for(M=0;M<bY.length;M++){bZ=bY[M].points||[];for(L=0;L<bZ.length;L++){if(bZ[L].id===b2){return bZ[L]}}}return null},getAxes:function(){var b0=this,bY=this.options;var L=bY.xAxis||{},b1=bY.yAxis||{},M,bZ;L=a7(L);D(L,function(b3,b2){b3.index=b2;b3.isX=true});b1=a7(b1);D(b1,function(b3,b2){b3.index=b2});M=L.concat(b1);D(M,function(b2){bZ=new A(b0,b2)});b0.adjustTickAmounts()},getSelectedPoints:function(){var L=[];D(this.series,function(M){L=L.concat(bo(M.points,function(bY){return bY.selected}))});return L},getSelectedSeries:function(){return bo(this.series,function(L){return L.selected})},showResetZoom:function(){var bY=this,b1=bp.lang,M=bY.options.chart.resetZoomButton,b0=M.theme,L=b0.states,bZ=M.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=bY.renderer.button(b1.resetZoom,null,null,function(){bY.zoomOut()},b0,L&&L.hover).attr({align:M.position.align,title:b1.resetZoomTitle}).add().align(M.position,false,bY[bZ]);this.resetZoomButton.alignTo=bZ},zoomOut:function(){var L=this,M=L.resetZoomButton;bk(L,"selection",{resetSelection:true},function(){L.zoom()});if(M){L.resetZoomButton=M.destroy()}},zoom:function(bY){var M=this,L;if(!bY||bY.resetSelection){D(M.axes,function(bZ){L=bZ.zoom()})}else{D(bY.xAxis.concat(bY.yAxis),function(bZ){var b0=bZ.axis;if(M.tracker[b0.isXAxis?"zoomX":"zoomY"]){L=b0.zoom(bZ.min,bZ.max)}})}if(!M.resetZoomButton){M.showResetZoom()}if(L){M.redraw(aJ(M.options.chart.animation,M.pointCount<100))}},pan:function(b2){var b1=this;var bY=b1.xAxis[0],L=b1.mouseDownX,bZ=bY.pointRange/2,b4=bY.getExtremes(),b0=bY.translate(L-b2,true)+bZ,b3=bY.translate(L+b1.plotWidth-b2,true)-bZ,M=b1.hoverPoints;if(M){D(M,function(b5){b5.setState()})}if(bY.series.length&&b0>ak(b4.dataMin,b4.min)&&b3<bW(b4.dataMax,b4.max)){bY.setExtremes(b0,b3,true,false,{trigger:"pan"})}b1.mouseDownX=b2;bR(b1.container,{cursor:"move"})},setTitle:function(b0,L){var bZ=this,M=bZ.options,bY,b1;bZ.chartTitleOptions=bY=aI(M.title,b0);bZ.chartSubtitleOptions=b1=aI(M.subtitle,L);D([["title",b0,bY],["subtitle",L,b1]],function(b2){var b3=b2[0],b6=bZ[b3],b5=b2[1],b4=b2[2];if(b6&&b5){bZ[b3]=b6=b6.destroy()}if(b4&&b4.text&&!b6){bZ[b3]=bZ.renderer.text(b4.text,0,0,b4.useHTML).attr({align:b4.align,"class":aZ+b3,zIndex:b4.zIndex||4}).css(b4.style).add().align(b4,false,bZ.spacingBox)}})},getChartSize:function(){var L=this,bY=L.options.chart,M=L.renderToClone||L.renderTo;L.containerWidth=aF(M,"width");L.containerHeight=aF(M,"height");L.chartWidth=bY.width||L.containerWidth||600;L.chartHeight=bY.height||(L.containerHeight>19?L.containerHeight:400)},cloneRenderTo:function(M){var bY=this.renderToClone,L=this.container;if(M){if(bY){this.renderTo.appendChild(L);bF(bY);delete this.renderToClone}}else{if(L){this.renderTo.removeChild(L)}this.renderToClone=bY=this.renderTo.cloneNode(0);bR(bY,{position:am,top:"-9999px",display:"block"});bs.body.appendChild(bY);if(L){bY.appendChild(L)}}},getContainer:function(){var b0=this,M,b2=b0.options.chart,bZ,bY,b1,L;b0.renderTo=b1=b2.renderTo;L=aZ+a2++;if(bi(b1)){b0.renderTo=b1=bs.getElementById(b1)}if(!b1){bE(13,true)}b1.innerHTML="";if(!b1.offsetWidth){b0.cloneRenderTo()}b0.getChartSize();bZ=b0.chartWidth;bY=b0.chartHeight;b0.container=M=bf(J,{className:aZ+"container"+(b2.className?" "+b2.className:""),id:L},bd({position:I,overflow:af,width:bZ+V,height:bY+V,textAlign:"left",lineHeight:"normal",zIndex:0},b2.style),b0.renderToClone||b1);b0.renderer=b2.forExport?new d(M,bZ,bY,true):new bI(M,bZ,bY);if(aY){b0.renderer.create(b0,M,bZ,bY)}},getMargins:function(){var cb=this,b4=cb.options.chart,cg=b4.spacingTop,M=b4.spacingRight,b8=b4.spacingBottom,b1=b4.spacingLeft,b2,b0=cb.legend,b6=cb.optionsMarginTop,b7=cb.optionsMarginLeft,cf=cb.optionsMarginRight,cc=cb.optionsMarginBottom,bZ=cb.chartTitleOptions,ce=cb.chartSubtitleOptions,b5=cb.options.legend,b3=aJ(b5.margin,10),ca=b5.x,b9=b5.y,cd=b5.align,L=b5.verticalAlign,bY;cb.resetMargins();b2=cb.axisOffset;if((cb.title||cb.subtitle)&&!ad(cb.optionsMarginTop)){bY=bW((cb.title&&!bZ.floating&&!bZ.verticalAlign&&bZ.y)||0,(cb.subtitle&&!ce.floating&&!ce.verticalAlign&&ce.y)||0);if(bY){cb.plotTop=bW(cb.plotTop,bY+aJ(bZ.margin,15)+cg)}}if(b0.display&&!b5.floating){if(cd==="right"){if(!ad(cf)){cb.marginRight=bW(cb.marginRight,b0.legendWidth-ca+b3+M)}}else{if(cd==="left"){if(!ad(b7)){cb.plotLeft=bW(cb.plotLeft,b0.legendWidth+ca+b3+b1)}}else{if(L==="top"){if(!ad(b6)){cb.plotTop=bW(cb.plotTop,b0.legendHeight+b9+b3+cg)}}else{if(L==="bottom"){if(!ad(cc)){cb.marginBottom=bW(cb.marginBottom,b0.legendHeight-b9+b3+b8)}}}}}}if(cb.extraBottomMargin){cb.marginBottom+=cb.extraBottomMargin}if(cb.extraTopMargin){cb.plotTop+=cb.extraTopMargin}if(cb.hasCartesianSeries){D(cb.axes,function(ch){ch.getOffset()})}if(!ad(b7)){cb.plotLeft+=b2[3]}if(!ad(b6)){cb.plotTop+=b2[0]}if(!ad(cc)){cb.marginBottom+=b2[2]}if(!ad(cf)){cb.marginRight+=b2[1]}cb.setChartSize()},initReflow:function(){var M=this,b0=M.options.chart,bZ=M.renderTo,bY;function L(b4){var b2=b0.width||aF(bZ,"width"),b1=b0.height||aF(bZ,"height"),b3=b4?b4.target:aU;if(b2&&b1&&(b3===aU||b3===bs)){if(b2!==M.containerWidth||b1!==M.containerHeight){clearTimeout(bY);M.reflowTimeout=bY=setTimeout(function(){if(M.container){M.resize(b2,b1,false)}},100)}M.containerWidth=b2;M.containerHeight=b1}}w(aU,"resize",L);w(M,"destroy",function(){aW(aU,"resize",L)})},resize:function(L,b6,b0){var b4=this,b3,bZ,b1,bY=b4.resetZoomButton,M=b4.title,b5=b4.subtitle,b2;b4.isResizing+=1;b2=function(){if(b4){bk(b4,"endResize",null,function(){b4.isResizing-=1})}};bS(b0,b4);b4.oldChartHeight=b4.chartHeight;b4.oldChartWidth=b4.chartWidth;if(ad(L)){b4.chartWidth=b3=m(L)}if(ad(b6)){b4.chartHeight=bZ=m(b6)}bR(b4.container,{width:b3+V,height:bZ+V});b4.renderer.setSize(b3,bZ,b0);b4.plotWidth=b3-b4.plotLeft-b4.marginRight;b4.plotHeight=bZ-b4.plotTop-b4.marginBottom;b4.maxTicks=null;D(b4.axes,function(b7){b7.isDirty=true;b7.setScale()});D(b4.series,function(b7){b7.isDirty=true});b4.isDirtyLegend=true;b4.isDirtyBox=true;b4.getMargins();b1=b4.spacingBox;if(M){M.align(null,null,b1)}if(b5){b5.align(null,null,b1)}if(bY&&bY.align){bY.align(null,null,b4[bY.alignTo])}b4.redraw(b0);b4.oldChartHeight=null;bk(b4,"resize");if(bX===false){b2()}else{setTimeout(b2,(bX&&bX.duration)||500)}},setChartSize:function(){var b6=this,b0=b6.inverted,b2=b6.chartWidth,bZ=b6.chartHeight,b4=b6.options.chart,b5=b4.spacingTop,b1=b4.spacingRight,L=b4.spacingBottom,b3=b4.spacingLeft,bY,b9,b8,b7,M;b6.plotLeft=bY=m(b6.plotLeft);b6.plotTop=b9=m(b6.plotTop);b6.plotWidth=b8=m(b2-bY-b6.marginRight);b6.plotHeight=b7=m(bZ-b9-b6.marginBottom);b6.plotSizeX=b0?b7:b8;b6.plotSizeY=b0?b8:b7;b6.plotBorderWidth=M=b4.plotBorderWidth||0;b6.spacingBox={x:b3,y:b5,width:b2-b3-b1,height:bZ-b5-L};b6.plotBox={x:bY,y:b9,width:b8,height:b7};b6.clipBox={x:M/2,y:M/2,width:b6.plotSizeX-M,height:b6.plotSizeY-M};D(b6.axes,function(ca){ca.setAxisSize();ca.setAxisTranslation()})},resetMargins:function(){var bY=this,b1=bY.options.chart,b0=b1.spacingTop,M=b1.spacingRight,L=b1.spacingBottom,bZ=b1.spacingLeft;bY.plotTop=aJ(bY.optionsMarginTop,b0);bY.marginRight=aJ(bY.optionsMarginRight,M);bY.marginBottom=aJ(bY.optionsMarginBottom,L);bY.plotLeft=aJ(bY.optionsMarginLeft,bZ);bY.axisOffset=[0,0,0,0]},drawChartBox:function(){var b6=this,bY=b6.options.chart,cb=b6.renderer,cf=b6.chartWidth,bZ=b6.chartHeight,ca=b6.chartBackground,b1=b6.plotBackground,cg=b6.plotBorder,b8=b6.plotBGImage,cc=bY.borderWidth||0,ci=bY.backgroundColor,b2=bY.plotBackgroundColor,M=bY.plotBackgroundImage,ch=bY.plotBorderWidth||0,L,b3,b7=b6.plotLeft,b9=b6.plotTop,b0=b6.plotWidth,ce=b6.plotHeight,b4=b6.plotBox,cd=b6.clipRect,b5=b6.clipBox;L=cc+(bY.shadow?8:0);if(cc||ci){if(!ca){b3={fill:ci||y};if(cc){b3.stroke=bY.borderColor;b3["stroke-width"]=cc}b6.chartBackground=cb.rect(L/2,L/2,cf-L,bZ-L,bY.borderRadius,cc).attr(b3).add().shadow(bY.shadow)}else{ca.animate(ca.crisp(null,null,null,cf-L,bZ-L))}}if(b2){if(!b1){b6.plotBackground=cb.rect(b7,b9,b0,ce,0).attr({fill:b2}).add().shadow(bY.plotShadow)}else{b1.animate(b4)}}if(M){if(!b8){b6.plotBGImage=cb.image(M,b7,b9,b0,ce).add()}else{b8.animate(b4)}}if(!cd){b6.clipRect=cb.clipRect(b5)}else{cd.animate({width:b5.width,height:b5.height})}if(ch){if(!cg){b6.plotBorder=cb.rect(b7,b9,b0,ce,0,ch).attr({stroke:bY.plotBorderColor,"stroke-width":ch,zIndex:1}).add()}else{cg.animate(cg.crisp(null,b7,b9,b0,ce))}}b6.isDirtyBox=false},propFromSeries:function(){var bZ=this,b1=bZ.options.chart,L,M=bZ.options.series,bY,b0;D(["inverted","angular","polar"],function(b2){L=a[b1.type||b1.defaultSeriesType];b0=(bZ[b2]||b1[b2]||(L&&L.prototype[b2]));bY=M&&M.length;while(!b0&&bY--){L=a[M[bY].type];if(L&&L.prototype[b2]){b0=true}}bZ[b2]=b0})},render:function(){var bY=this,b0=bY.axes,bZ=bY.renderer,L=bY.options;var b2=L.labels,M=L.credits,b1;bY.setTitle();bY.legend=new bn(bY);D(b0,function(b3){b3.setScale()});bY.getMargins();bY.maxTicks=null;D(b0,function(b3){b3.setTickPositions(true);b3.setMaxTicks()});bY.adjustTickAmounts();bY.getMargins();bY.drawChartBox();if(bY.hasCartesianSeries){D(b0,function(b3){b3.render()})}if(!bY.seriesGroup){bY.seriesGroup=bZ.g("series-group").attr({zIndex:3}).add()}D(bY.series,function(b3){b3.translate();b3.setTooltipPoints();b3.render()});if(b2.items){D(b2.items,function(b4){var b5=bd(b2.style,b4.style),b3=bD(b5.left)+bY.plotLeft,b6=bD(b5.top)+bY.plotTop+12;delete b5.left;delete b5.top;bZ.text(b4.html,b3,b6).attr({zIndex:2}).css(b5).add()})}if(M.enabled&&!bY.credits){b1=M.href;bY.credits=bZ.text(M.text,0,0).on("click",function(){if(b1){location.href=b1}}).attr({align:M.position.align,zIndex:8}).css(M.style).add().align(M.position)}bY.hasRendered=true},destroy:function(){var b0=this,b1=b0.axes,bZ=b0.series,M=b0.container,bY,L=M&&M.parentNode;bk(b0,"destroy");aW(b0);bY=b1.length;while(bY--){b1[bY]=b1[bY].destroy()}bY=bZ.length;while(bY--){bZ[bY]=bZ[bY].destroy()}D(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","tracker","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(b2){var b3=b0[b2];if(b3&&b3.destroy){b0[b2]=b3.destroy()}});if(M){M.innerHTML="";aW(M);if(L){bF(M)}}for(bY in b0){delete b0[bY]}},firstRender:function(){var M=this,L=M.options,b0=M.callback;var bY="onreadystatechange",bZ="complete";if((!bM&&(aU==aU.top&&bs.readyState!==bZ))||(aY&&!aU.canvg)){if(aY){aX.push(function(){M.firstRender()},L.global.canvasToolsURL)}else{bs.attachEvent(bY,function(){bs.detachEvent(bY,M.firstRender);if(bs.readyState===bZ){M.firstRender()}})}return}M.getContainer();bk(M,"init");if(Highcharts.RangeSelector&&L.rangeSelector.enabled){M.rangeSelector=new Highcharts.RangeSelector(M)}M.resetMargins();M.setChartSize();M.propFromSeries();M.getAxes();D(L.series||[],function(b1){M.initSeries(b1)});if(Highcharts.Scroller&&(L.navigator.enabled||L.scrollbar.enabled)){M.scroller=new Highcharts.Scroller(M)}M.tracker=new H(M,L);M.render();M.renderer.draw();if(b0){b0.apply(M,[M])}D(M.callbacks,function(b1){b1.apply(M,[M])});M.cloneRenderTo(true);bk(M,"load")},init:function(bY){var M=this,bZ=M.options.chart,L;if(bZ.reflow!==false){w(M,"load",M.initReflow)}if(bY){for(L in bY){w(M,L,bY[L])}}M.xAxis=[];M.yAxis=[];M.animation=aY?false:aJ(bZ.animation,true);M.setSize=M.resize;M.pointCount=0;M.counters=new K();M.firstRender()}};bb.prototype.callbacks=[];var bq=function(){};bq.prototype={init:function(bZ,bY,M){var L=this,b0=bZ.chart.counters,b1;L.series=bZ;L.applyOptions(bY,M);L.pointAttr={};if(bZ.options.colorByPoint){b1=bZ.chart.options.colors;L.color=L.color||b1[b0.color++];b0.wrapColor(b1.length)}bZ.chart.pointCount++;return L},applyOptions:function(bY,M){var L=this,bZ=L.series,b0=typeof bY;L.config=bY;if(b0==="number"||bY===null){L.y=bY}else{if(typeof bY[0]==="number"){L.x=bY[0];L.y=bY[1]}else{if(b0==="object"&&typeof bY.length!=="number"){bd(L,bY);L.options=bY;if(bY.dataLabels){bZ._hasPointLabels=true}if(bY.marker){bZ._hasPointMarkers=true}}else{if(typeof bY[0]==="string"){L.name=bY[0];L.y=bY[1]}}}}if(L.x===k){L.x=M===k?bZ.autoIncrement():M}},destroy:function(){var L=this,M=L.series,bZ=M.chart,bY=bZ.hoverPoints,b0;bZ.pointCount--;if(bY){L.setState();O(bY,L);if(!bY.length){bZ.hoverPoints=null}}if(L===bZ.hoverPoint){L.onMouseOut()}if(L.graphic||L.dataLabel){aW(L);L.destroyElements()}if(L.legendItem){bZ.legend.destroyItem(L)}for(b0 in L){L[b0]=null}},destroyElements:function(){var L=this,bY=["graphic","tracker","dataLabel","group","connector","shadowGroup"],bZ,M=6;while(M--){bZ=bY[M];if(L[bZ]){L[bZ]=L[bZ].destroy()}}},getLabelConfig:function(){var L=this;return{x:L.category,y:L.y,key:L.name||L.category,series:L.series,point:L,percentage:L.percentage,total:L.total||L.stackTotal}},select:function(b0,M){var L=this,bY=L.series,bZ=bY.chart;b0=aJ(b0,!L.selected);L.firePointEvent(b0?"select":"unselect",{accumulate:M},function(){L.selected=b0;L.setState(b0&&bh);if(!M){D(bZ.getSelectedPoints(),function(b1){if(b1.selected&&b1!==L){b1.selected=false;b1.setState(ai);b1.firePointEvent("unselect")}})}})},onMouseOver:function(){var L=this,bY=L.series,bZ=bY.chart,b0=bZ.tooltip,M=bZ.hoverPoint;if(M&&M!==L){M.onMouseOut()}L.firePointEvent("mouseOver");if(b0&&(!b0.shared||bY.noSharedTooltip)){b0.refresh(L)}L.setState(aK);bZ.hoverPoint=L},onMouseOut:function(){var M=this.series.chart,L=M.hoverPoints;if(!L||x(this,L)===-1){this.firePointEvent("mouseOut");this.setState();M.hoverPoint=null}},tooltipFormatter:function(b6){var b7=this,b3=b7.series,b9=b3.tooltipOptions,b4=b6.match(/\{(series|point)\.[a-zA-Z]+\}/g),M=/[{\.}]/,b2,b8,bZ,bY,b0,L,b1,b5={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};b9.valuePrefix=b9.valuePrefix||b9.yPrefix;b9.valueDecimals=b9.valueDecimals||b9.yDecimals;b9.valueSuffix=b9.valueSuffix||b9.ySuffix;for(b1 in b4){b8=b4[b1];if(bi(b8)&&b8!==b6){b0=(" "+b8).split(M);b2={point:b7,series:b3}[b0[1]];L=b0[2];if(b2===b7&&b5.hasOwnProperty(L)){bY=b5[L]?L:"value";bZ=(b9[bY+"Prefix"]||"")+l(b7[L],aJ(b9[bY+"Decimals"],-1))+(b9[bY+"Suffix"]||"")}else{bZ=b2[L]}b6=b6.replace(b8,bZ)}}return b6},update:function(b5,b4,bY){var b3=this,b0=b3.series,L=b3.graphic,b1,bZ=b0.data,M=bZ.length,b2=b0.chart;b4=aJ(b4,true);b3.firePointEvent("update",{options:b5},function(){b3.applyOptions(b5);if(bT(b5)){b0.getAttribs();if(L){L.attr(b3.pointAttr[b0.state])}}for(b1=0;b1<M;b1++){if(bZ[b1]===b3){b0.xData[b1]=b3.x;b0.yData[b1]=b3.y;b0.options.data[b1]=b5;break}}b0.isDirty=true;b0.isDirtyData=true;if(b4){b2.redraw(bY)}})},remove:function(b3,b1){var L=this,bY=L.series,bZ=bY.chart,M,b0=bY.data,b2=b0.length;bS(b1,bZ);b3=aJ(b3,true);L.firePointEvent("remove",null,function(){for(M=0;M<b2;M++){if(b0[M]===L){b0.splice(M,1);bY.options.data.splice(M,1);bY.xData.splice(M,1);bY.yData.splice(M,1);break}}L.destroy();bY.isDirty=true;bY.isDirtyData=true;if(b3){bZ.redraw()}})},firePointEvent:function(b1,bZ,M){var L=this,b0=this.series,bY=b0.options;if(bY.point.events[b1]||(L.options&&L.options.events&&L.options.events[b1])){this.importEvents()}if(b1==="click"&&bY.allowPointSelect){M=function(b2){L.select(null,b2.ctrlKey||b2.metaKey||b2.shiftKey)}}bk(this,b1,bZ,M)},importEvents:function(){if(!this.hasImportedEvents){var L=this,M=aI(L.series.options.point,L.options),bZ=M.events,bY;L.events=bZ;for(bY in bZ){w(L,bY,bZ[bY])}this.hasImportedEvents=true}},setState:function(bY){var b7=this,M=b7.plotX,b9=b7.plotY,b2=b7.series,b8=b2.options.states,bZ=ah[b2.type].marker&&b2.options.marker,b1=bZ&&!bZ.enabled,b0=bZ&&bZ.states[bY],b4=b0&&b0.enabled===false,b6=b2.stateMarkerGraphic,b5=b2.chart,b3,L=b7.pointAttr;bY=bY||ai;if(bY===b7.state||(b7.selected&&bY!==bh)||(b8[bY]&&b8[bY].enabled===false)||(bY&&(b4||(b1&&!b0.enabled)))){return}if(b7.graphic){b3=bZ&&b7.graphic.symbolName&&L[bY].r;b7.graphic.attr(aI(L[bY],b3?{x:M-b3,y:b9-b3,width:2*b3,height:2*b3}:{}))}else{if(bY&&b0){b3=b0.radius;if(!b6){b2.stateMarkerGraphic=b6=b5.renderer.symbol(b2.symbol,M-b3,b9-b3,2*b3,2*b3).attr(L[bY]).add(b2.markerGroup)}else{b6.attr({x:M-b3,y:b9-b3})}}if(b6){b6[bY&&b5.isInsidePlot(M,b9)?"show":"hide"]()}}b7.state=bY}};var a4=function(){};a4.prototype={isCartesian:true,type:"line",pointClass:bq,sorted:true,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(b0,L){var bZ=this,bY,M;bZ.chart=b0;bZ.options=L=bZ.setOptions(L);bZ.bindAxes();bd(bZ,{name:L.name,state:ai,pointAttr:{},visible:L.visible!==false,selected:L.selected===true});if(aY){L.animation=false}M=L.events;for(bY in M){w(bZ,bY,M[bY])}if((M&&M.click)||(L.point&&L.point.events&&L.point.events.click)||L.allowPointSelect){b0.runTrackerClick=true}bZ.getColor();bZ.getSymbol();bZ.setData(L.data,false);if(bZ.isCartesian){b0.hasCartesianSeries=true}b0.series.push(bZ);aE(b0.series,function(b2,b1){return(b2.options.index||0)-(b1.options.index||0)});D(b0.series,function(b2,b1){b2.index=b1;b2.name=b2.name||"Series "+(b1+1)})},bindAxes:function(){var M=this,L=M.options,bY=M.chart,bZ;if(M.isCartesian){D(["xAxis","yAxis"],function(b0){D(bY[b0],function(b1){bZ=b1.options;if((L[b0]===bZ.index)||(L[b0]===k&&bZ.index===0)){b1.series.push(M);M[b0]=b1;b1.isDirty=true}})})}},autoIncrement:function(){var M=this,L=M.options,bY=M.xIncrement;bY=aJ(bY,L.pointStart,0);M.pointInterval=aJ(M.pointInterval,L.pointInterval,1);M.xIncrement=bY+M.pointInterval;return bY},getSegments:function(){var bZ=this,L=-1,M=[],bY,b1=bZ.points,b0=b1.length;if(b0){if(bZ.options.connectNulls){bY=b0;while(bY--){if(b1[bY].y===null){b1.splice(bY,1)}}if(b1.length){M=[b1]}}else{D(b1,function(b2,b3){if(b2.y===null){if(b3>L+1){M.push(b1.slice(L+1,b3))}L=b3}else{if(b3===b0-1){M.push(b1.slice(L+1,b3+1))}}})}}bZ.segments=M},setOptions:function(bZ){var bY=this.chart,b2=bY.options,L=b2.plotOptions,b1=L[this.type],b0=bZ.data,M;bZ.data=null;M=aI(b1,L.series,bZ);M.data=bZ.data=b0;this.tooltipOptions=aI(b2.tooltip,M.tooltip);if(b1.marker===null){delete M.marker}return M},getColor:function(){var L=this.options,bY=this.chart.options.colors,M=this.chart.counters;this.color=L.color||(!L.colorByPoint&&bY[M.color++])||"gray";M.wrapColor(bY.length)},getSymbol:function(){var M=this,b0=M.options.marker,bZ=M.chart,L=bZ.options.symbols,bY=bZ.counters;M.symbol=b0.symbol||L[bY.symbol++];if(/^url/.test(M.symbol)){b0.radius=0}bY.wrapSymbol(L.length)},drawLegendSymbol:function(b4){var b6=this.options,L=b6.marker,b0,b5=b4.options,M,bZ=b5.symbolWidth,b3=this.chart.renderer,bY=this.legendGroup,b2=b4.baseline,b1;if(b6.lineWidth){b1={"stroke-width":b6.lineWidth};if(b6.dashStyle){b1.dashstyle=b6.dashStyle}this.legendLine=b3.path([bl,0,b2-4,bm,bZ,b2-4]).attr(b1).add(bY)}if(L&&L.enabled){b0=L.radius;this.legendSymbol=M=b3.symbol(this.symbol,(bZ/2)-b0,b2-4-b0,2*b0,2*b0).add(bY)}},addPoint:function(ca,b8,M,b1){var b3=this,b2=b3.data,b7=b3.graph,L=b3.area,b5=b3.chart,b0=b3.xData,bZ=b3.yData,bY=(b7&&b7.shift)||0,b9=b3.options.data,b6,b4=b3.pointClass.prototype;bS(b1,b5);if(b7&&M){b7.shift=bY+1}if(L){if(M){L.shift=bY+1}L.isArea=true}b8=aJ(b8,true);b6={series:b3};b4.applyOptions.apply(b6,[ca]);b0.push(b6.x);bZ.push(b4.toYData?b4.toYData.call(b6):b6.y);b9.push(ca);if(M){if(b2[0]&&b2[0].remove){b2[0].remove(false)}else{b2.shift();b0.shift();bZ.shift();b9.shift()}}b3.getAttribs();b3.isDirty=true;b3.isDirtyData=true;if(b8){b5.redraw()}},setData:function(cf,ca){var b5=this,ce=b5.points,bY=b5.options,b1=b5.initialColor,b7=b5.chart,b6=null,b3=b5.xAxis,cb,M=b5.pointClass.prototype;b5.xIncrement=null;b5.pointRange=b3&&b3.categories?1:bY.pointRange;if(ad(b1)){b7.counters.color=b1}var b0=[],cd=[],b2=cf?cf.length:[],L=bY.turboThreshold||1000,b9,b8=b5.pointArrayMap,bZ=b8&&b8.length;if(b2>L){cb=0;while(b6===null&&cb<b2){b6=cf[cb];cb++}if(aq(b6)){var b4=aJ(bY.pointStart,0),cc=aJ(bY.pointInterval,1);for(cb=0;cb<b2;cb++){b0[cb]=b4;cd[cb]=cf[cb];b4+=cc}b5.xIncrement=b4}else{if(aD(b6)){if(bZ){for(cb=0;cb<b2;cb++){b9=cf[cb];b0[cb]=b9[0];cd[cb]=b9.slice(1,bZ+1)}}else{for(cb=0;cb<b2;cb++){b9=cf[cb];b0[cb]=b9[0];cd[cb]=b9[1]}}}}}else{for(cb=0;cb<b2;cb++){b9={series:b5};M.applyOptions.apply(b9,[cf[cb]]);b0[cb]=b9.x;cd[cb]=M.toYData?M.toYData.call(b9):b9.y}}if(bi(cd[0])){bE(14,true)}b5.data=[];b5.options.data=cf;b5.xData=b0;b5.yData=cd;cb=(ce&&ce.length)||0;while(cb--){if(ce[cb]&&ce[cb].destroy){ce[cb].destroy()}}if(b3){b3.minRange=b3.userMinRange}b5.isDirty=b5.isDirtyData=b7.isDirtyBox=true;if(aJ(ca,true)){b7.redraw(false)}},remove:function(bZ,bY){var L=this,M=L.chart;bZ=aJ(bZ,true);if(!L.isRemoving){L.isRemoving=true;bk(L,"remove",null,function(){L.destroy();M.isDirtyLegend=M.isDirtyBox=true;if(bZ){M.redraw(bY)}})}L.isRemoving=false},processData:function(bZ){var b5=this,b2=b5.xData,cd=b5.yData,b3=b2.length,b8=0,cc=b3,b6,b1,bY,b4=b5.xAxis,cb,b0=b5.options,b7=b0.cropThreshold,L=b5.isCartesian;if(L&&!b5.isDirty&&!b4.isDirty&&!b5.yAxis.isDirty&&!bZ){return false}if(L&&b5.sorted&&(!b7||b3>b7||b5.forceCrop)){var M=b4.getExtremes(),b9=M.min,ca=M.max;if(b2[b3-1]<b9||b2[0]>ca){b2=[];cd=[]}else{if(b2[0]<b9||b2[b3-1]>ca){for(cb=0;cb<b3;cb++){if(b2[cb]>=b9){b8=bW(0,cb-1);break}}for(;cb<b3;cb++){if(b2[cb]>ca){cc=cb+1;break}}b2=b2.slice(b8,cc);cd=cd.slice(b8,cc);b6=true}}}for(cb=b2.length-1;cb>0;cb--){b1=b2[cb]-b2[cb-1];if(b1>0&&(bY===k||b1<bY)){bY=b1}}b5.cropped=b6;b5.cropStart=b8;b5.processedXData=b2;b5.processedYData=cd;if(b0.pointRange===null){b5.pointRange=bY||1}b5.closestPointRange=bY},generatePoints:function(){var b0=this,cb=b0.options,ca=cb.data,bZ=b0.data,L,b7=b0.processedXData,b3=b0.processedYData,b2=b0.pointClass,M=b7.length,b6=b0.cropStart||0,b9,b5=b0.hasGroupedData,b4,b8=[],bY;if(!bZ&&!b5){var b1=[];b1.length=ca.length;bZ=b0.data=b1}for(bY=0;bY<M;bY++){b9=b6+bY;if(!b5){if(bZ[b9]){b4=bZ[b9]}else{if(ca[b9]!==k){bZ[b9]=b4=(new b2()).init(b0,ca[b9],b7[bY])}}b8[bY]=b4}else{b8[bY]=(new b2()).init(b0,[b7[bY]].concat(a7(b3[bY])))}}if(bZ&&(M!==(L=bZ.length)||b5)){for(bY=0;bY<L;bY++){if(bY===b6&&!b5){bY+=M}if(bZ[bY]){bZ[bY].destroyElements();bZ[bY].plotX=k}}}b0.data=bZ;b0.points=b8},translate:function(){if(!this.processedXData){this.processData()}this.generatePoints();var b5=this,b6=b5.chart,b1=b5.options,b0=b1.stacking,b4=b5.xAxis,b7=b4.categories,M=b5.yAxis,ca=b5.points,b3=ca.length,ce=!!b5.modifyValue,cf,bY=M.series,cb=bY.length,cg=b1.pointPlacement==="between";while(cb--){if(bY[cb].visible){if(bY[cb]===b5){cf=true}break}}for(cb=0;cb<b3;cb++){var b8=ca[cb],b9=b8.x,cc=b8.y,L=b8.low,b2=M.stacks[(cc<b1.threshold?"-":"")+b5.stackKey],cd,bZ;b8.plotX=b4.translate(b9,0,0,0,1,cg);if(b0&&b5.visible&&b2&&b2[b9]){cd=b2[b9];bZ=cd.total;cd.cum=L=cd.cum-cc;cc=L+cc;if(cf){L=aJ(b1.threshold,M.min)}if(M.isLog&&L<=0){L=null}if(b0==="percent"){L=bZ?L*100/bZ:0;cc=bZ?cc*100/bZ:0}b8.percentage=bZ?b8.y*100/bZ:0;b8.total=b8.stackTotal=bZ;b8.stackY=cc}b8.yBottom=ad(L)?M.translate(L,0,1,0,1):null;if(ce){cc=b5.modifyValue(cc,b8)}b8.plotY=(typeof cc==="number")?m(M.translate(cc,0,1,0,1)*10)/10:k;b8.clientX=b6.inverted?b6.plotHeight-b8.plotX:b8.plotX;b8.category=b7&&b7[b8.x]!==k?b7[b8.x]:b8.x}b5.getSegments()},setTooltipPoints:function(b0){var b2=this,b7=[],b5,b4,bZ,bY=b2.xAxis,b3=bY?(bY.tooltipLen||bY.len):b2.chart.plotSizeX,L=(bY&&bY.tooltipPosName)||"plotX",b6,b1,M=[];if(b2.options.enableMouseTracking===false){return}if(b0){b2.tooltipPoints=null}D(b2.segments||b2.points,function(b8){b7=b7.concat(b8)});if(bY&&bY.reversed){b7=b7.reverse()}b5=b7.length;for(b1=0;b1<b5;b1++){b6=b7[b1];b4=b7[b1-1]?bZ+1:0;bZ=b7[b1+1]?bW(0,be((b6[L]+(b7[b1+1]?b7[b1+1][L]:b3))/2)):b3;while(b4>=0&&b4<=bZ){M[b4++]=b6}}b2.tooltipPoints=M},tooltipHeaderFormatter:function(bY){var M=this,L=M.tooltipOptions,b1=L.xDateFormat,b0=M.xAxis,bZ=b0&&b0.options.type==="datetime",b2;if(bZ&&!b1){for(b2 in aV){if(aV[b2]>=b0.closestPointRange){b1=L.dateTimeLabelFormats[b2];break}}}return L.headerFormat.replace("{point.key}",bZ&&aq(bY)?bG(b1,bY):bY).replace("{series.name}",M.name).replace("{series.color}",M.color)},onMouseOver:function(){var M=this,bY=M.chart,L=bY.hoverSeries;if(L&&L!==M){L.onMouseOut()}if(M.options.events.mouseOver){bk(M,"mouseOver")}M.setState(aK);bY.hoverSeries=M},onMouseOut:function(){var bY=this,M=bY.options,bZ=bY.chart,b0=bZ.tooltip,L=bZ.hoverPoint;if(L){L.onMouseOut()}if(bY&&M.events.mouseOut){bk(bY,"mouseOut")}if(b0&&!M.stickyTracking&&!b0.shared){b0.hide()}bY.setState();bZ.hoverSeries=null},animate:function(b5){var b2=this,b4=b2.chart,b3=b4.renderer,b1,b0,bZ=b2.options.animation,L=b4.clipBox,bY=b4.inverted,M;if(bZ&&!bT(bZ)){bZ=ah[b2.type].animation}M="_sharedClip"+bZ.duration+bZ.easing;if(b5){b1=b4[M];b0=b4[M+"m"];if(!b1){b4[M]=b1=b3.clipRect(bd(L,{width:0}));b4[M+"m"]=b0=b3.clipRect(-99,bY?-b4.plotLeft:-b4.plotTop,99,bY?b4.chartWidth:b4.chartHeight)}b2.group.clip(b1);b2.markerGroup.clip(b0);b2.sharedClipKey=M}else{b1=b4[M];if(b1){b1.animate({width:b4.plotSizeX},bZ);b4[M+"m"].animate({width:b4.plotSizeX+99},bZ)}b2.animate=null;b2.animationTimeout=setTimeout(function(){b2.afterAnimate()},bZ.duration)}},afterAnimate:function(){var L=this.chart,bY=this.sharedClipKey,M=this.group;if(M&&this.options.clip!==false){M.clip(L.clipRect);this.markerGroup.clip()}setTimeout(function(){if(bY&&L[bY]){L[bY]=L[bY].destroy();L[bY+"m"]=L[bY+"m"].destroy()}},100)},drawPoints:function(){var b2=this,b4,cb=b2.points,b6=b2.chart,bZ,L,cc,b8,bY,b9,ca,b5,M=b2.options,cd=M.marker,b7,b1,b0,b3=b2.markerGroup;if(cd.enabled||b2._hasPointMarkers){cc=cb.length;while(cc--){b8=cb[cc];bZ=b8.plotX;L=b8.plotY;b5=b8.graphic;b7=b8.marker||{};b1=(cd.enabled&&b7.enabled===k)||b7.enabled;b0=b6.isInsidePlot(bZ,L,b6.inverted);if(b1&&L!==k&&!isNaN(L)){b4=b8.pointAttr[b8.selected?bh:ai];bY=b4.r;b9=aJ(b7.symbol,b2.symbol);ca=b9.indexOf("url")===0;if(b5){b5.attr({visibility:b0?(bM?"inherit":aj):af}).animate(bd({x:bZ-bY,y:L-bY},b5.symbolName?{width:2*bY,height:2*bY}:{}))}else{if(b0&&(bY>0||ca)){b8.graphic=b5=b6.renderer.symbol(b9,bZ-bY,L-bY,2*bY,2*bY).attr(b4).add(b3)}}}else{if(b5){b8.graphic=b5.destroy()}}}}},convertAttribs:function(bY,M,b3,b2){var b0=this.pointAttrToOptions,L,bZ,b1={};bY=bY||{};M=M||{};b3=b3||{};b2=b2||{};for(L in b0){bZ=b0[L];b1[L]=aJ(bY[bZ],M[L],b3[L],b2[L])}return b1},getAttribs:function(){var b3=this,bY=ah[b3.type].marker?b3.options.marker:b3.options,ca=bY.states,M=ca[aK],b4,bZ=b3.color,b5={stroke:bZ,fill:bZ},b9=b3.points||[],b2,b7,b1=[],L,b0=b3.pointAttrToOptions,b6,b8;if(b3.options.marker){M.radius=M.radius||bY.radius+2;M.lineWidth=M.lineWidth||bY.lineWidth+1}else{M.color=M.color||bB(M.color||bZ).brighten(M.brightness).get()}b1[ai]=b3.convertAttribs(bY,b5);D([aK,bh],function(cb){b1[cb]=b3.convertAttribs(ca[cb],b1[ai])});b3.pointAttr=b1;b2=b9.length;while(b2--){b7=b9[b2];bY=(b7.options&&b7.options.marker)||b7.options;if(bY&&bY.enabled===false){bY.radius=0}b6=b3.options.colorByPoint;if(b7.options){for(b8 in b0){if(ad(bY[b0[b8]])){b6=true}}}if(b6){bY=bY||{};L=[];ca=bY.states||{};b4=ca[aK]=ca[aK]||{};if(!b3.options.marker){b4.color=bB(b4.color||b7.color).brighten(b4.brightness||M.brightness).get()}L[ai]=b3.convertAttribs(bd({color:b7.color},bY),b1[ai]);L[aK]=b3.convertAttribs(ca[aK],b1[aK],L[ai]);L[bh]=b3.convertAttribs(ca[bh],b1[bh],L[ai])}else{L=b1}b7.pointAttr=L}},destroy:function(){var bZ=this,b1=bZ.chart,b4=/AppleWebKit\/533/.test(r),b2,b0,bY=bZ.data||[],b3,L,M;bk(bZ,"destroy");aW(bZ);D(["xAxis","yAxis"],function(b5){M=bZ[b5];if(M){O(M.series,bZ);M.isDirty=true}});if(bZ.legendItem){bZ.chart.legend.destroyItem(bZ)}b0=bY.length;while(b0--){b3=bY[b0];if(b3&&b3.destroy){b3.destroy()}}bZ.points=null;clearTimeout(bZ.animationTimeout);D(["area","graph","dataLabelsGroup","group","markerGroup","tracker","trackerGroup"],function(b5){if(bZ[b5]){b2=b4&&b5==="group"?"hide":"destroy";bZ[b5][b2]()}});if(b1.hoverSeries===bZ){b1.hoverSeries=null}O(b1.series,bZ);for(L in bZ){delete bZ[L]}},drawDataLabels:function(){var bY=this,L=bY.options,M=L.dataLabels,b0=bY.points,bZ,b3,b2,b1;if(M.enabled||bY._hasPointLabels){if(bY.dlProcessOptions){bY.dlProcessOptions(M)}b1=bY.plotGroup("dataLabelsGroup","data-labels",bY.visible?aj:af,6);b3=M;D(b0,function(b6){var b8,ca=b6.dataLabel,b5,b7,b9,b4=true;bZ=b6.options&&b6.options.dataLabels;b8=b3.enabled||(bZ&&bZ.enabled);if(ca&&!b8){b6.dataLabel=ca.destroy()}else{if(b8){b9=M.rotation;M=aI(b3,bZ);b2=M.formatter.call(b6.getLabelConfig(),M);M.style.color=aJ(M.color,M.style.color,bY.color,"black");if(ca){ca.attr({text:b2});b4=false}else{if(ad(b2)){b5={fill:M.backgroundColor,stroke:M.borderColor,"stroke-width":M.borderWidth,r:M.borderRadius||0,rotation:b9,padding:M.padding,zIndex:1};for(b7 in b5){if(b5[b7]===k){delete b5[b7]}}ca=b6.dataLabel=bY.chart.renderer[b9?"text":"label"](b2,0,-999,null,null,null,M.useHTML).attr(b5).css(M.style).add(b1).shadow(M.shadow)}}if(ca){bY.alignDataLabel(b6,ca,M,null,b4)}}}})}},alignDataLabel:function(b2,b5,b6,b0,bZ){var b1=this.chart,M=b1.inverted,L=aJ(b2.plotX,-999),b4=aJ(b2.plotY,-999),b3=b5.getBBox(),bY;b0=bd({x:M?b1.plotWidth-b4:L,y:m(M?b1.plotHeight-L:b4),width:0,height:0},b0);bd(b6,{width:b3.width,height:b3.height});if(b6.rotation){bY={align:b6.align,x:b0.x+b6.x+b0.width/2,y:b0.y+b6.y+b0.height/2};b5[bZ?"attr":"animate"](bY)}else{b5.align(b6,null,b0);bY=b5.alignAttr}b5.attr({visibility:b6.crop===false||b1.isInsidePlot(bY.x,bY.y)||b1.isInsidePlot(L,b4,M)?(bM?"inherit":aj):af})},getSegmentPath:function(bY){var M=this,L=[];D(bY,function(bZ,b0){if(M.getPointSpline){L.push.apply(L,M.getPointSpline(bY,bZ,b0))}else{L.push(b0?bm:bl);if(b0&&M.options.step){var b1=bY[b0-1];L.push(bZ.plotX,b1.plotY)}L.push(bZ.plotX,bZ.plotY)}});return L},getGraphPath:function(){var bY=this,bZ=[],L,M=[];D(bY.segments,function(b0){L=bY.getSegmentPath(b0);if(b0.length>1){bZ=bZ.concat(L)}else{M.push(b0[0])}});bY.singlePoints=M;bY.graphPath=bZ;return bZ},drawGraph:function(){var bY=this.options,bZ=this.graph,b1=this.group,M=bY.lineColor||this.color,L=bY.lineWidth,b0=bY.dashStyle,b3,b2=this.getGraphPath();if(bZ){aQ(bZ);bZ.animate({d:b2})}else{if(L){b3={stroke:M,"stroke-width":L,zIndex:1};if(b0){b3.dashstyle=b0}this.graph=this.chart.renderer.path(b2).attr(b3).add(b1).shadow(bY.shadow)}}},invertGroups:function(){var L=this,M=L.chart;function bY(){var bZ={width:L.yAxis.len,height:L.xAxis.len};D(["group","trackerGroup","markerGroup"],function(b0){if(L[b0]){L[b0].attr(bZ).invert()}})}w(M,"resize",bY);w(L,"destroy",function(){aW(M,"resize",bY)});bY();L.invertGroups=bY},plotGroup:function(M,bY,bZ,b2,b3){var b4=this[M],b1=this.chart,b0=this.xAxis,L=this.yAxis;if(!b4){this[M]=b4=b1.renderer.g(bY).attr({visibility:bZ,zIndex:b2||0.1}).add(b3)}b4.translate(b0?b0.left:b1.plotLeft,L?L.top:b1.plotTop);return b4},render:function(){var bY=this,b0=bY.chart,b3,b5=bY.options,M=b5.animation,b4=M&&!!bY.animate,L=bY.visible?aj:af,b1=b5.zIndex,bZ=bY.hasRendered,b2=b0.seriesGroup;b3=bY.plotGroup("group","series",L,b1,b2);bY.markerGroup=bY.plotGroup("markerGroup","markers",L,b1,b2);if(b4){bY.animate(true)}bY.getAttribs();b3.inverted=b0.inverted;if(bY.drawGraph){bY.drawGraph()}bY.drawPoints();bY.drawDataLabels();if(bY.options.enableMouseTracking!==false){bY.drawTracker()}if(b0.inverted){bY.invertGroups()}if(b5.clip!==false&&!bY.sharedClipKey&&!bZ){b3.clip(b0.clipRect);if(this.trackerGroup){this.trackerGroup.clip(b0.clipRect)}}if(b4){bY.animate()}else{if(!bZ){bY.afterAnimate()}}bY.isDirty=bY.isDirtyData=false;bY.hasRendered=true},redraw:function(){var M=this,bY=M.chart,L=M.isDirtyData,bZ=M.group;if(bZ){if(bY.inverted){bZ.attr({width:bY.plotWidth,height:bY.plotHeight})}bZ.animate({translateX:M.xAxis.left,translateY:M.yAxis.top})}M.translate();M.setTooltipPoints(true);M.render();if(L){bk(M,"updatedData")}},setState:function(b0){var bY=this,M=bY.options,bZ=bY.graph,b1=M.states,L=M.lineWidth;b0=b0||ai;if(bY.state!==b0){bY.state=b0;if(b1[b0]&&b1[b0].enabled===false){return}if(b0){L=b1[b0].lineWidth||L+1}if(bZ&&!bZ.dashstyle){bZ.attr({"stroke-width":L},b0?0:500)}}},setVisible:function(M,b8){var bZ=this,b3=bZ.chart,b2=bZ.legendItem,b4=bZ.group,ca=bZ.tracker,b1=bZ.dataLabelsGroup,b7=bZ.markerGroup,L,bY,b6=bZ.points,b5,b9=b3.options.chart.ignoreHiddenSeries,b0=bZ.visible;bZ.visible=M=M===k?!b0:M;L=M?"show":"hide";if(b4){b4[L]()}if(b7){b7[L]()}if(ca){ca[L]()}else{if(b6){bY=b6.length;while(bY--){b5=b6[bY];if(b5.tracker){b5.tracker[L]()}}}}if(b1){b1[L]()}if(b2){b3.legend.colorizeItem(bZ,M)}bZ.isDirty=true;if(bZ.options.stacking){D(b3.series,function(cb){if(cb.options.stacking&&cb.visible){cb.isDirty=true}})}if(b9){b3.isDirtyBox=true}if(b8!==false){b3.redraw()}bk(bZ,L)},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},select:function(M){var L=this;L.selected=M=(M===k)?!L.selected:M;if(L.checkbox){L.checkbox.checked=M}bk(L,M?"select":"unselect")},drawTracker:function(){var b1=this,ca=b1.options,b9=ca.trackByArea,L=[].concat(b9?b1.areaPath:b1.graphPath),b5=L.length,b4=b1.chart,b3=b4.renderer,M=b4.options.tooltip.snap,b7=b1.tracker,b8=ca.cursor,b2=b8&&{cursor:b8},b0=b1.singlePoints,b6=this.isCartesian&&this.plotGroup("trackerGroup",null,aj,ca.zIndex||1,b4.trackerGroup),bY,bZ;if(b5&&!b9){bZ=b5+1;while(bZ--){if(L[bZ]===bl){L.splice(bZ+1,0,L[bZ+1]-M,L[bZ+2],bm)}if((bZ&&L[bZ]===bl)||bZ===b5){L.splice(bZ,0,bm,L[bZ-2]+M,L[bZ-1])}}}for(bZ=0;bZ<b0.length;bZ++){bY=b0[bZ];L.push(bl,bY.plotX-M,bY.plotY,bm,bY.plotX+M,bY.plotY)}if(b7){b7.attr({d:L})}else{b1.tracker=b3.path(L).attr({isTracker:true,"stroke-linejoin":"bevel",visibility:b1.visible?aj:af,stroke:bQ,fill:b9?bQ:y,"stroke-width":ca.lineWidth+(b9?0:2*M)}).on(C?"touchstart":"mouseover",function(){if(b4.hoverSeries!==b1){b1.onMouseOver()}}).on("mouseout",function(){if(!ca.stickyTracking){b1.onMouseOut()}}).css(b2).add(b6)}}};var S=ba(a4);a.line=S;ah.area=aI(aM,{threshold:0});var aA=ba(a4,{type:"area",getSegmentPath:function(b0){var L=a4.prototype.getSegmentPath.call(this,b0),b1=[].concat(L),bZ,bY=this.options,M=L.length;if(M===3){b1.push(bm,L[1],L[2])}if(bY.stacking&&!this.closedStacks){for(bZ=b0.length-1;bZ>=0;bZ--){if(bZ<b0.length-1&&bY.step){b1.push(b0[bZ+1].plotX,b0[bZ].yBottom)}b1.push(b0[bZ].plotX,b0[bZ].yBottom)}}else{this.closeSegment(b1,b0)}this.areaPath=this.areaPath.concat(b1);return L},closeSegment:function(M,L){var bY=this.yAxis.getThreshold(this.options.threshold);M.push(bm,L[L.length-1].plotX,bY,bm,L[0].plotX,bY)},drawGraph:function(){this.areaPath=[];a4.prototype.drawGraph.apply(this);var M=this.areaPath,L=this.options,bY=this.area;if(bY){bY.animate({d:M})}else{this.area=this.chart.renderer.path(M).attr({fill:aJ(L.fillColor,bB(this.color).setOpacity(L.fillOpacity||0.75).get()),zIndex:0}).add(this.group)}},drawLegendSymbol:function(L,M){M.legendSymbol=this.chart.renderer.rect(0,L.baseline-11,L.options.symbolWidth,12,2).attr({zIndex:3}).add(M.legendGroup)}});a.area=aA;ah.spline=aI(aM);var b=ba(a4,{type:"spline",getPointSpline:function(M,b9,ca){var b7=1.5,L=b7+1,b0=b9.plotX,bY=b9.plotY,bZ=M[ca-1],cb=M[ca+1],b4,b3,b6,b5,ce;if(bZ&&cb){var b2=bZ.plotX,b1=bZ.plotY,cd=cb.plotX,cc=cb.plotY,b8;b4=(b7*b0+b2)/L;b3=(b7*bY+b1)/L;b6=(b7*b0+cd)/L;b5=(b7*bY+cc)/L;b8=((b5-b3)*(b6-b0))/(b6-b4)+bY-b5;b3+=b8;b5+=b8;if(b3>b1&&b3>bY){b3=bW(b1,bY);b5=2*bY-b3}else{if(b3<b1&&b3<bY){b3=ak(b1,bY);b5=2*bY-b3}}if(b5>cc&&b5>bY){b5=bW(cc,bY);b3=2*bY-b5}else{if(b5<cc&&b5<bY){b5=ak(cc,bY);b3=2*bY-b5}}b9.rightContX=b6;b9.rightContY=b5}if(!ca){ce=[bl,b0,bY]}else{ce=["C",bZ.rightContX||bZ.plotX,bZ.rightContY||bZ.plotY,b4||b0,b3||bY,b0,bY];bZ.rightContX=bZ.rightContY=null}return ce}});a.spline=b;ah.areaspline=aI(ah.area);var aT=aA.prototype,u=ba(b,{type:"areaspline",closedStacks:true,getSegmentPath:aT.getSegmentPath,closeSegment:aT.closeSegment,drawGraph:aT.drawGraph});a.areaspline=u;ah.column=aI(aM,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:false},select:{color:"#C0C0C0",borderColor:"#000000",shadow:false}},dataLabels:{align:null,verticalAlign:null,y:null},threshold:0});var h=ba(a4,{type:"column",tooltipOutsidePlot:true,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){a4.prototype.init.apply(this,arguments);var L=this,M=L.chart;if(M.hasRendered){D(M.series,function(bY){if(bY.type===L.type){bY.isDirty=true}})}},translate:function(){var b7=this,ca=b7.chart,b0=b7.options,bY=b0.stacking,ck=b0.borderWidth,ch=0,b6=b7.xAxis,L=b6.reversed,cj={},M,ci;a4.prototype.translate.apply(b7);if(b0.grouping===false){ch=1}else{D(ca.series,function(cm){var cl=cm.options;if(cm.type===b7.type&&cm.visible&&b7.options.group===cl.group){if(cl.stacking){M=cm.stackKey;if(cj[M]===k){cj[M]=ch++}ci=cj[M]}else{if(cl.grouping!==false){ci=ch++}}cm.columnIndex=ci}})}var cf=b7.points,b1=e(b6.transA)*(b6.ordinalSlope||b0.pointRange||b6.closestPointRange||1),ce=b1*b0.groupPadding,b8=b1-2*ce,cd=b8/ch,cc=b0.pointWidth,b5=ad(cc)?(cd-cc)/2:cd*b0.pointPadding,b3=aJ(cc,cd-2*b5),b2=ay(bW(b3,1+2*ck)),cb=(L?ch-b7.columnIndex:b7.columnIndex)||0,cg=b5+(ce+cb*cd-(b1/2))*(L?-1:1),bZ=b0.threshold,b9=b7.translatedThreshold=b7.yAxis.getThreshold(bZ),b4=aJ(b0.minPointLength,5);D(cf,function(cn){var cp=cn.plotY,cm=aJ(cn.yBottom,b9),cs=cn.plotX+cg,cr=ay(ak(cp,cm)),co=ay(bW(cp,cm)-cr),cl=b7.yAxis.stacks[(cn.y<0?"-":"")+b7.stackKey],cq;if(bY&&b7.visible&&cl&&cl[cn.x]){cl[cn.x].setOffset(cg,b2)}if(e(co)<b4){if(b4){co=b4;cr=e(cr-b9)>b4?cm-b4:b9-(cp<=b9?b4:0)}}cn.barX=cs;cn.pointWidth=b3;cn.shapeType="rect";cn.shapeArgs=cq=ca.renderer.Element.prototype.crisp.call(0,ck,cs,cr,b2,co);if(ck%2){cq.y-=1;cq.height+=1}cn.trackerArgs=e(co)<3&&aI(cn.shapeArgs,{height:6,y:cr-3})})},getSymbol:j,drawLegendSymbol:aA.prototype.drawLegendSymbol,drawGraph:j,drawPoints:function(){var bY=this,L=bY.options,bZ=bY.chart.renderer,M;D(bY.points,function(b0){var b1=b0.plotY,b2=b0.graphic;if(b1!==k&&!isNaN(b1)&&b0.y!==null){M=b0.shapeArgs;if(b2){aQ(b2);b2.animate(aI(M))}else{b0.graphic=b2=bZ[b0.shapeType](M).attr(b0.pointAttr[b0.selected?bh:ai]).add(bY.group).shadow(L.shadow,null,L.stacking&&!L.borderRadius)}}else{if(b2){b0.graphic=b2.destroy()}}})},drawTracker:function(){var bY=this,b2=bY.chart,b1=b2.renderer,M,b4,b0=+new Date(),b8=bY.options,b5=b8.cursor,bZ=b5&&{cursor:b5},b3=bY.isCartesian&&bY.plotGroup("trackerGroup",null,aj,b8.zIndex||1,b2.trackerGroup),b6,b7,L;D(bY.points,function(b9){b4=b9.tracker;M=b9.trackerArgs||b9.shapeArgs;b7=b9.plotY;L=!bY.isCartesian||(b7!==k&&!isNaN(b7));delete M.strokeWidth;if(b9.y!==null&&L){if(b4){b4.attr(M)}else{b9.tracker=b1[b9.shapeType](M).attr({isTracker:b0,fill:bQ,visibility:bY.visible?aj:af}).on(C?"touchstart":"mouseover",function(ca){b6=ca.relatedTarget||ca.fromElement;if(b2.hoverSeries!==bY&&Q(b6,"isTracker")!==b0){bY.onMouseOver()}b9.onMouseOver()}).on("mouseout",function(ca){if(!b8.stickyTracking){b6=ca.relatedTarget||ca.toElement;if(Q(b6,"isTracker")!==b0){bY.onMouseOut()}}}).css(bZ).add(b9.group||b3)}}})},alignDataLabel:function(b2,b3,b4,bZ,bY){var b0=this.chart,M=b0.inverted,b1=b2.below||(b2.plotY>(this.translatedThreshold||b0.plotSizeY)),L=(this.options.stacking||b4.inside);if(b2.shapeArgs){bZ=aI(b2.shapeArgs);if(M){bZ={x:b0.plotWidth-bZ.y-bZ.height,y:b0.plotHeight-bZ.x-bZ.width,width:bZ.height,height:bZ.width}}if(!L){if(M){bZ.x+=b1?0:bZ.width;bZ.width=0}else{bZ.y+=b1?bZ.height:0;bZ.height=0}}}b4.align=aJ(b4.align,!M||L?"center":b1?"right":"left");b4.verticalAlign=aJ(b4.verticalAlign,M||L?"middle":b1?"top":"bottom");a4.prototype.alignDataLabel.call(this,b2,b3,b4,bZ,bY)},animate:function(bZ){var M=this,bY=M.points,L=M.options;if(!bZ){D(bY,function(b1){var b4=b1.graphic,b3=b1.shapeArgs,b2=M.yAxis,b0=L.threshold;if(b4){b4.attr({height:0,y:ad(b0)?b2.getThreshold(b0):b2.translate(b2.getExtremes().min,0,1,0,1)});b4.animate({height:b3.height,y:b3.y},L.animation)}});M.animate=null}},remove:function(){var L=this,M=L.chart;if(M.hasRendered){D(M.series,function(bY){if(bY.type===L.type){bY.isDirty=true}})}a4.prototype.remove.apply(L,arguments)}});a.column=h;ah.bar=aI(ah.column);var bj=ba(h,{type:"bar",inverted:true});a.bar=bj;ah.scatter=aI(aM,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var br=ba(a4,{type:"scatter",sorted:false,translate:function(){var L=this;a4.prototype.translate.apply(L);D(L.points,function(M){M.shapeType="circle";M.shapeArgs={x:M.plotX,y:M.plotY,r:L.chart.options.tooltip.snap}})},drawTracker:function(){var bY=this,b0=bY.options.cursor,M=b0&&{cursor:b0},bZ=bY.points,L=bZ.length,b1;while(L--){b1=bZ[L].graphic;if(b1){b1.element._i=L}}if(!bY._hasTracking){bY.markerGroup.attr({isTracker:true}).on(C?"touchstart":"mouseover",function(b2){bY.onMouseOver();if(b2.target._i!==k){bZ[b2.target._i].onMouseOver()}}).on("mouseout",function(){if(!bY.options.stickyTracking){bY.onMouseOut()}}).css(M)}else{bY._hasTracking=true}}});a.scatter=br;ah.pie=aI(aM,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name}},legendType:"point",marker:null,size:"75%",showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});var aP=ba(bq,{init:function(){bq.prototype.init.apply(this,arguments);var L=this,M;bd(L,{visible:L.visible!==false,name:aJ(L.name,"Slice")});M=function(){L.slice()};w(L,"select",M);w(L,"unselect",M);return L},setVisible:function(bY){var b3=this,b0=b3.series,b1=b0.chart,b2=b3.tracker,b4=b3.dataLabel,bZ=b3.connector,M=b3.shadowGroup,L;b3.visible=bY=bY===k?!b3.visible:bY;L=bY?"show":"hide";b3.group[L]();if(b2){b2[L]()}if(b4){b4[L]()}if(bZ){bZ[L]()}if(M){M[L]()}if(b3.legendItem){b1.legend.colorizeItem(b3,bY)}if(!b0.isDirty&&b0.options.ignoreHiddenPoint){b0.isDirty=true;b1.redraw()}},slice:function(bY,b3,b1){var L=this,bZ=L.series,b0=bZ.chart,M=L.slicedTranslation,b2;bS(b1,b0);b3=aJ(b3,true);bY=L.sliced=ad(bY)?bY:!L.sliced;b2={translateX:(bY?M[0]:b0.plotLeft),translateY:(bY?M[1]:b0.plotTop)};L.group.animate(b2);if(L.shadowGroup){L.shadowGroup.animate(b2)}}});var n={type:"pie",isCartesian:false,pointClass:aP,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var L=this,M=L.points;D(M,function(bZ){var b1=bZ.graphic,b0=bZ.shapeArgs,bY=-N/2;if(b1){b1.attr({r:0,start:bY,end:bY});b1.animate({r:b0.r,start:b0.start,end:b0.end},L.options.animation)}});L.animate=null},setData:function(L,M){a4.prototype.setData.call(this,L,false);this.processData();this.generatePoints();if(aJ(M,true)){this.chart.redraw()}},getCenter:function(){var M=this.options,b0=this.chart,bZ=b0.plotWidth,bY=b0.plotHeight,L=M.center.concat([M.size,M.innerSize||0]),b1=ak(bZ,bY),b2;return ag(L,function(b4,b3){b2=/%$/.test(b4);return b2?[bZ,bY,b1,b1][b3]*bD(b4)/100:b4})},translate:function(){this.generatePoints();var ch=0,b7=this,ca=-0.25,cf=1000,M=b7.options,bZ=M.slicedOffset,b6=bZ+M.borderWidth,b5,b9=b7.chart,b0,bY,cg,cd=b7.points,b8=2*N,b2,b4,b3,b1=M.dataLabels.distance,L=M.ignoreHiddenPoint,cc,ce=cd.length,cb;b7.center=b5=b7.getCenter();b7.getX=function(cj,ci){cg=aO.asin((cj-b5[1])/(b5[2]/2+b1));return b5[0]+(ci?-1:1)*(bN(cg)*(b5[2]/2+b1))};for(cc=0;cc<ce;cc++){cb=cd[cc];ch+=(L&&!cb.visible)?0:cb.y}for(cc=0;cc<ce;cc++){cb=cd[cc];b2=ch?cb.y/ch:0;b0=m(ca*b8*cf)/cf;if(!L||cb.visible){ca+=b2}bY=m(ca*b8*cf)/cf;cb.shapeType="arc";cb.shapeArgs={x:b5[0],y:b5[1],r:b5[2]/2,innerR:b5[3]/2,start:b0,end:bY};cg=(bY+b0)/2;cb.slicedTranslation=ag([bN(cg)*bZ+b9.plotLeft,Z(cg)*bZ+b9.plotTop],m);b4=bN(cg)*b5[2]/2;b3=Z(cg)*b5[2]/2;cb.tooltipPos=[b5[0]+b4*0.7,b5[1]+b3*0.7];cb.labelPos=[b5[0]+b4+bN(cg)*b1,b5[1]+b3+Z(cg)*b1,b5[0]+b4+bN(cg)*b6,b5[1]+b3+Z(cg)*b6,b5[0]+b4,b5[1]+b3,b1<0?"center":cg<b8/4?"left":"right",cg];cb.percentage=b2*100;cb.total=ch}this.setTooltipPoints()},render:function(){var L=this;L.getAttribs();this.drawPoints();if(L.options.enableMouseTracking!==false){L.drawTracker()}this.drawDataLabels();if(L.options.animation&&L.animate){L.animate()}L.isDirty=false},drawPoints:function(){var b0=this,b2=b0.chart,b1=b2.renderer,bY,L,b4,b3=b0.options.shadow,M,bZ;D(b0.points,function(b5){L=b5.graphic;bZ=b5.shapeArgs;b4=b5.group;M=b5.shadowGroup;if(b3&&!M){M=b5.shadowGroup=b1.g("shadow").attr({zIndex:4}).add()}if(!b4){b4=b5.group=b1.g("point").attr({zIndex:5}).add()}bY=b5.sliced?b5.slicedTranslation:[b2.plotLeft,b2.plotTop];b4.translate(bY[0],bY[1]);if(M){M.translate(bY[0],bY[1])}if(L){L.animate(bZ)}else{b5.graphic=L=b1.arc(bZ).setRadialReference(b0.center).attr(bd(b5.pointAttr[ai],{"stroke-linejoin":"round"})).add(b5.group).shadow(b3,M)}if(b5.visible===false){b5.setVisible(false)}})},drawDataLabels:function(){var b2=this,cu=b2.data,ck,cv=b2.chart,ch=b2.options.dataLabels,bZ=aJ(ch.connectorPadding,10),cf=aJ(ch.connectorWidth,1),L,cr,cg=aJ(ch.softConnector,true),b8=ch.distance,b1=b2.center,cp=b1[2]/2,M=b1[1],b6=b8>0,b0,b7,co,cj=[[],[]],cn,cm,b9,b4,ct,cs=2,cq;if(!ch.enabled&&!b2._hasPointLabels){return}a4.prototype.drawDataLabels.apply(b2);D(cu,function(cy){if(cy.dataLabel){cj[cy.labelPos[7]<N/2?0:1].push(cy)}});cj[1].reverse();ct=function(cz,cy){return cy.y-cz.y};co=cj[0][0]&&cj[0][0].dataLabel&&(cj[0][0].dataLabel.getBBox().height||21);while(cs--){var cw=[],b3,cd=[],cl=cj[cs],ci,cb=cl.length,cx;if(b8>0){for(ci=M-cp-b8;ci<=M+cp+b8;ci+=co){cw.push(ci)}b3=cw.length;if(cb>b3){b4=[].concat(cl);b4.sort(ct);cq=cb;while(cq--){b4[cq].rank=cq}cq=cb;while(cq--){if(cl[cq].rank>=b3){cl.splice(cq,1)}}cb=cl.length}for(cq=0;cq<cb;cq++){ck=cl[cq];b7=ck.labelPos;var ca=9999,ce,cc;for(cc=0;cc<b3;cc++){ce=e(cw[cc]-b7[1]);if(ce<ca){ca=ce;cx=cc}}if(cx<cq&&cw[cq]!==null){cx=cq}else{if(b3<cb-cq+cx&&cw[cq]!==null){cx=b3-cb+cq;while(cw[cx]===null){cx++}}else{while(cw[cx]===null){cx++}}}cd.push({i:cx,y:cw[cx]});cw[cx]=null}cd.sort(ct)}for(cq=0;cq<cb;cq++){var b5,bY;ck=cl[cq];b7=ck.labelPos;b0=ck.dataLabel;b9=ck.visible===false?af:aj;bY=b7[1];if(b8>0){b5=cd.pop();cx=b5.i;cm=b5.y;if((bY>cm&&cw[cx+1]!==null)||(bY<cm&&cw[cx-1]!==null)){cm=bY}}else{cm=bY}cn=ch.justify?b1[0]+(cs?-1:1)*(cp+b8):b2.getX(cx===0||cx===cw.length-1?bY:cm,cs);b0.attr({visibility:b9,align:b7[6]})[b0.moved?"animate":"attr"]({x:cn+ch.x+({left:bZ,right:-bZ}[b7[6]]||0),y:cm+ch.y-10});b0.moved=true;if(b6&&cf){L=ck.connector;cr=cg?[bl,cn+(b7[6]==="left"?5:-5),cm,"C",cn,cm,2*b7[2]-b7[4],2*b7[3]-b7[5],b7[2],b7[3],bm,b7[4],b7[5]]:[bl,cn+(b7[6]==="left"?5:-5),cm,bm,b7[2],b7[3],bm,b7[4],b7[5]];if(L){L.animate({d:cr});L.attr("visibility",b9)}else{ck.connector=L=b2.chart.renderer.path(cr).attr({"stroke-width":cf,stroke:ch.connectorColor||ck.color||"#606060",visibility:b9,zIndex:3}).translate(cv.plotLeft,cv.plotTop).add()}}}}},alignDataLabel:j,drawTracker:h.prototype.drawTracker,drawLegendSymbol:aA.prototype.drawLegendSymbol,getSymbol:function(){}};n=ba(a4,n);a.pie=n;bd(Highcharts,{Axis:A,CanVGRenderer:bV,Chart:bb,Color:bB,Legend:bn,MouseTracker:H,Point:bq,Tick:az,Tooltip:bJ,Renderer:bI,Series:a4,SVGRenderer:d,VMLRenderer:bU,dateFormat:bG,pathAnim:ao,getOptions:aC,hasBidiBug:ab,numberFormat:l,seriesTypes:a,setOptions:a0,addEvent:w,removeEvent:aW,createElement:bf,discardElement:bF,css:bR,each:D,extend:bd,map:ag,merge:aI,pick:aJ,splat:a7,extendClass:ba,pInt:bD,wrap:aR,svg:bM,canvas:aY,vml:!bM&&!aY,product:"Highcharts",version:"2.3.3"})}());
/*!
 * Isotope PACKAGED v2.0.1
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */
(function(c){var d=Array.prototype.slice;function b(){}function a(f){if(!f){return}function j(k){if(k.prototype.option){return}k.prototype.option=function(l){if(!f.isPlainObject(l)){return}this.options=f.extend(true,this.options,l)}}var e=typeof console==="undefined"?b:function(k){console.error(k)};function h(k,l){f.fn[k]=function(q){if(typeof q==="string"){var o=d.call(arguments,1);for(var r=0,n=this.length;r<n;r++){var t=this[r];var m=f.data(t,k);if(!m){e("cannot call methods on "+k+" prior to initialization; attempted to call '"+q+"'");continue}if(!f.isFunction(m[q])||q.charAt(0)==="_"){e("no such method '"+q+"' for "+k+" instance");continue}var s=m[q].apply(m,o);if(s!==undefined){return s}}return this}else{return this.each(function(){var u=f.data(this,k);if(u){u.option(q);u._init()}else{u=new l(this,q);f.data(this,k,u)}})}}}f.bridget=function(k,l){j(l);h(k,l)};return f.bridget}if(typeof define==="function"&&define.amd){define("jquery-bridget/jquery.bridget",["jquery"],a)}else{a(c.jQuery)}})(window);
/*!
 * eventie v1.0.5
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
(function(e){var b=document.documentElement;var f=function(){};function a(j){var h=e.event;h.target=h.target||h.srcElement||j;return h}if(b.addEventListener){f=function(k,j,h){k.addEventListener(j,h,false)}}else{if(b.attachEvent){f=function(k,j,h){k[j+h]=h.handleEvent?function(){var l=a(k);h.handleEvent.call(h,l)}:function(){var l=a(k);h.call(k,l)};k.attachEvent("on"+j,k[j+h])}}}var d=function(){};if(b.removeEventListener){d=function(k,j,h){k.removeEventListener(j,h,false)}}else{if(b.detachEvent){d=function(l,j,h){l.detachEvent("on"+j,l[j+h]);try{delete l[j+h]}catch(k){l[j+h]=undefined}}}}var c={bind:f,unbind:d};if(typeof define==="function"&&define.amd){define("eventie/eventie",c)}else{if(typeof exports==="object"){module.exports=c}else{e.eventie=c}}})(this);
/*!
 * docReady
 * Cross browser DOMContentLoaded event emitter
 */
(function(d){var b=d.document;var a=[];function c(h){if(typeof h!=="function"){return}if(c.isReady){h()}else{a.push(h)}}c.isReady=false;function f(m){var l=m.type==="readystatechange"&&b.readyState!=="complete";if(c.isReady||l){return}c.isReady=true;for(var j=0,h=a.length;j<h;j++){var k=a[j];k()}}function e(h){h.bind(b,"DOMContentLoaded",f);h.bind(b,"readystatechange",f);h.bind(d,"load",f);return c}if(typeof define==="function"&&define.amd){c.isReady=typeof requirejs==="function";define("doc-ready/doc-ready",["eventie/eventie"],e)}else{d.docReady=e(d.eventie)}})(this);
/*!
 * EventEmitter v4.2.7 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){function c(){}var n=c.prototype;var y=this;var A=y.EventEmitter;function j(C,D){var B=C.length;while(B--){if(C[B].listener===D){return B}}return -1}function l(B){return function C(){return this[B].apply(this,arguments)}}n.getListeners=function w(B){var E=this._getEvents();var C;var D;if(B instanceof RegExp){C={};for(D in E){if(E.hasOwnProperty(D)&&B.test(D)){C[D]=E[D]}}}else{C=E[B]||(E[B]=[])}return C};n.flattenListeners=function u(D){var B=[];var C;for(C=0;C<D.length;C+=1){B.push(D[C].listener)}return B};n.getListenersAsObject=function e(B){var D=this.getListeners(B);var C;if(D instanceof Array){C={};C[B]=D}return C||D};n.addListener=function f(B,E){var D=this.getListenersAsObject(B);var F=typeof E==="object";var C;for(C in D){if(D.hasOwnProperty(C)&&j(D[C],E)===-1){D[C].push(F?E:{listener:E,once:false})}}return this};n.on=l("addListener");n.addOnceListener=function a(B,C){return this.addListener(B,{listener:C,once:true})};n.once=l("addOnceListener");n.defineEvent=function s(B){this.getListeners(B);return this};n.defineEvents=function t(B){for(var C=0;C<B.length;C+=1){this.defineEvent(B[C])}return this};n.removeListener=function b(B,F){var E=this.getListenersAsObject(B);var C;var D;for(D in E){if(E.hasOwnProperty(D)){C=j(E[D],F);if(C!==-1){E[D].splice(C,1)}}}return this};n.off=l("removeListener");n.addListeners=function o(B,C){return this.manipulateListeners(false,B,C)};n.removeListeners=function v(B,C){return this.manipulateListeners(true,B,C)};n.manipulateListeners=function h(C,D,F){var E;var G;var H=C?this.removeListener:this.addListener;var B=C?this.removeListeners:this.addListeners;if(typeof D==="object"&&!(D instanceof RegExp)){for(E in D){if(D.hasOwnProperty(E)&&(G=D[E])){if(typeof G==="function"){H.call(this,E,G)}else{B.call(this,E,G)}}}}else{E=F.length;while(E--){H.call(this,D,F[E])}}return this};n.removeEvent=function r(B){var E=typeof B;var D=this._getEvents();var C;if(E==="string"){delete D[B]}else{if(B instanceof RegExp){for(C in D){if(D.hasOwnProperty(C)&&B.test(C)){delete D[C]}}}else{delete this._events}}return this};n.removeAllListeners=l("removeEvent");n.emitEvent=function x(B,D){var G=this.getListenersAsObject(B);var H;var F;var E;var C;for(E in G){if(G.hasOwnProperty(E)){F=G[E].length;while(F--){H=G[E][F];if(H.once===true){this.removeListener(B,H.listener)}C=H.listener.apply(this,D||[]);if(C===this._getOnceReturnValue()){this.removeListener(B,H.listener)}}}}return this};n.trigger=l("emitEvent");n.emit=function m(B){var C=Array.prototype.slice.call(arguments,1);return this.emitEvent(B,C)};n.setOnceReturnValue=function k(B){this._onceReturnValue=B;return this};n._getOnceReturnValue=function q(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};n._getEvents=function d(){return this._events||(this._events={})};c.noConflict=function z(){y.EventEmitter=A;return c};if(typeof define==="function"&&define.amd){define("eventEmitter/EventEmitter",[],function(){return c})}else{if(typeof module==="object"&&module.exports){module.exports=c}else{this.EventEmitter=c}}}.call(this));
/*!
 * getStyleProperty v1.0.3
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 */
(function(c){var d="Webkit Moz ms Ms O".split(" ");var b=document.documentElement.style;function a(j){if(!j){return}if(typeof b[j]==="string"){return j}j=j.charAt(0).toUpperCase()+j.slice(1);var f;for(var h=0,e=d.length;h<e;h++){f=d[h]+j;if(typeof b[f]==="string"){return f}}}if(typeof define==="function"&&define.amd){define("get-style-property/get-style-property",[],function(){return a})}else{if(typeof exports==="object"){module.exports=a}else{c.getStyleProperty=a}}})(window);(function(d,h){var e=d.getComputedStyle;var a=e?function(k){return e(k,null)}:function(k){return k.currentStyle};function c(l){var k=parseFloat(l);var m=l.indexOf("%")===-1&&!isNaN(k);return m&&k}var b=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function f(){var m={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var l=0,k=b.length;l<k;l++){var n=b[l];m[n]=0}return m}function j(n){var l=n("boxSizing");var m;(function(){if(!l){return}var s=document.createElement("div");s.style.width="200px";s.style.padding="1px 2px 3px 4px";s.style.borderStyle="solid";s.style.borderWidth="1px 2px 3px 4px";s.style[l]="border-box";var q=document.body||document.documentElement;q.appendChild(s);var r=a(s);m=c(r.width)===200;q.removeChild(s)})();function o(F){if(typeof F==="string"){F=document.querySelector(F)}if(!F||typeof F!=="object"||!F.nodeType){return}var D=a(F);if(D.display==="none"){return f()}var w={};w.width=F.offsetWidth;w.height=F.offsetHeight;var E=w.isBorderBox=!!(l&&D[l]&&D[l]==="border-box");for(var A=0,B=b.length;A<B;A++){var y=b[A];var z=D[y];z=k(F,z);var q=parseFloat(z);w[y]=!isNaN(q)?q:0}var C=w.paddingLeft+w.paddingRight;var v=w.paddingTop+w.paddingBottom;var H=w.marginLeft+w.marginRight;var t=w.marginTop+w.marginBottom;var G=w.borderLeftWidth+w.borderRightWidth;var s=w.borderTopWidth+w.borderBottomWidth;var r=E&&m;var u=c(D.width);if(u!==false){w.width=u+(r?0:C+G)}var x=c(D.height);if(x!==false){w.height=x+(r?0:v+s)}w.innerWidth=w.width-(C+G);w.innerHeight=w.height-(v+s);w.outerWidth=w.width+H;w.outerHeight=w.height+t;return w}function k(t,u){if(e||u.indexOf("%")===-1){return u}var s=t.style;var v=s.left;var r=t.runtimeStyle;var q=r&&r.left;if(q){r.left=t.currentStyle.left}s.left=u;u=s.pixelLeft;s.left=v;if(q){r.left=q}return u}return o}if(typeof define==="function"&&define.amd){define("get-size/get-size",["get-style-property/get-style-property"],j)}else{if(typeof exports==="object"){module.exports=j(require("get-style-property"))}else{d.getSize=j(d.getStyleProperty)}}})(window);(function(b,k){var h=(function(){if(k.matchesSelector){return"matchesSelector"}var q=["webkit","moz","ms","o"];for(var n=0,m=q.length;n<m;n++){var o=q[n];var r=o+"MatchesSelector";if(k[r]){return r}}})();function e(n,m){return n[h](m)}function j(n){if(n.parentNode){return}var m=document.createDocumentFragment();m.appendChild(n)}function f(r,n){j(r);var o=r.parentNode.querySelectorAll(n);for(var q=0,m=o.length;q<m;q++){if(o[q]===r){return true}}return false}function d(n,m){j(n);return e(n,m)}var l;if(h){var a=document.createElement("div");var c=e(a,"div");l=c?e:d}else{l=f}if(typeof define==="function"&&define.amd){define("matches-selector/matches-selector",[],function(){return l})}else{window.matchesSelector=l}})(this,Element.prototype);(function(c){var e=c.getComputedStyle;var b=e?function(j){return e(j,null)}:function(j){return j.currentStyle};function h(k,j){for(var l in j){k[l]=j[l]}return k}function a(j){for(var k in j){return false}k=null;return true}function d(j){return j.replace(/([A-Z])/g,function(k){return"-"+k.toLowerCase()})}function f(y,x,m){var w=m("transition");var t=m("transform");var u=w&&t;var r=!!m("perspective");var j={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[w];var o=["transform","transition","transitionDuration","transitionProperty"];var v=(function(){var A={};for(var B=0,z=o.length;B<z;B++){var D=o[B];var C=m(D);if(C&&C!==D){A[D]=C}}return A})();function l(z,A){if(!z){return}this.element=z;this.layout=A;this.position={x:0,y:0};this._create()}h(l.prototype,y.prototype);l.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};l.prototype.handleEvent=function(z){var A="on"+z.type;if(this[A]){this[A](z)}};l.prototype.getSize=function(){this.size=x(this.element)};l.prototype.css=function(B){var z=this.element.style;for(var C in B){var A=v[C]||C;z[A]=B[C]}};l.prototype.getPosition=function(){var C=b(this.element);var A=this.layout.options;var F=A.isOriginLeft;var E=A.isOriginTop;var z=parseInt(C[F?"left":"right"],10);var D=parseInt(C[E?"top":"bottom"],10);z=isNaN(z)?0:z;D=isNaN(D)?0:D;var B=this.layout.size;z-=F?B.paddingLeft:B.paddingRight;D-=E?B.paddingTop:B.paddingBottom;this.position.x=z;this.position.y=D};l.prototype.layoutPosition=function(){var A=this.layout.size;var z=this.layout.options;var B={};if(z.isOriginLeft){B.left=(this.position.x+A.paddingLeft)+"px";B.right=""}else{B.right=(this.position.x+A.paddingRight)+"px";B.left=""}if(z.isOriginTop){B.top=(this.position.y+A.paddingTop)+"px";B.bottom=""}else{B.bottom=(this.position.y+A.paddingBottom)+"px";B.top=""}this.css(B);this.emitEvent("layout",[this])};var k=r?function(z,A){return"translate3d("+z+"px, "+A+"px, 0)"}:function(z,A){return"translate("+z+"px, "+A+"px)"};l.prototype._transitionTo=function(I,H){this.getPosition();var A=this.position.x;var z=this.position.y;var G=parseInt(I,10);var F=parseInt(H,10);var E=G===this.position.x&&F===this.position.y;this.setPosition(I,H);if(E&&!this.isTransitioning){this.layoutPosition();return}var D=I-A;var C=H-z;var B={};var J=this.layout.options;D=J.isOriginLeft?D:-D;C=J.isOriginTop?C:-C;B.transform=k(D,C);this.transition({to:B,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true})};l.prototype.goTo=function(z,A){this.setPosition(z,A);this.layoutPosition()};l.prototype.moveTo=u?l.prototype._transitionTo:l.prototype.goTo;l.prototype.setPosition=function(z,A){this.position.x=parseInt(z,10);this.position.y=parseInt(A,10)};l.prototype._nonTransition=function(z){this.css(z.to);if(z.isCleaning){this._removeStyles(z.to)}for(var A in z.onTransitionEnd){z.onTransitionEnd[A].call(this)}};l.prototype._transition=function(z){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(z);return}var B=this._transn;for(var C in z.onTransitionEnd){B.onEnd[C]=z.onTransitionEnd[C]}for(C in z.to){B.ingProperties[C]=true;if(z.isCleaning){B.clean[C]=true}}if(z.from){this.css(z.from);var A=this.element.offsetHeight;A=null}this.enableTransition(z.to);this.css(z.to);this.isTransitioning=true};var n=t&&(d(t)+",opacity");l.prototype.enableTransition=function(){if(this.isTransitioning){return}this.css({transitionProperty:n,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(j,this,false)};l.prototype.transition=l.prototype[w?"_transition":"_nonTransition"];l.prototype.onwebkitTransitionEnd=function(z){this.ontransitionend(z)};l.prototype.onotransitionend=function(z){this.ontransitionend(z)};var q={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};l.prototype.ontransitionend=function(C){if(C.target!==this.element){return}var B=this._transn;var z=q[C.propertyName]||C.propertyName;delete B.ingProperties[z];if(a(B.ingProperties)){this.disableTransition()}if(z in B.clean){this.element.style[C.propertyName]="";delete B.clean[z]}if(z in B.onEnd){var A=B.onEnd[z];A.call(this);delete B.onEnd[z]}this.emitEvent("transitionEnd",[this])};l.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(j,this,false);this.isTransitioning=false};l.prototype._removeStyles=function(A){var z={};for(var B in A){z[B]=""}this.css(z)};var s={transitionProperty:"",transitionDuration:""};l.prototype.removeTransitionStyles=function(){this.css(s)};l.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};l.prototype.remove=function(){if(!w||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var z=this;this.on("transitionEnd",function(){z.removeElem();return true});this.hide()};l.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var z=this.layout.options;this.transition({from:z.hiddenStyle,to:z.visibleStyle,isCleaning:true})};l.prototype.hide=function(){this.isHidden=true;this.css({display:""});var z=this.layout.options;this.transition({from:z.visibleStyle,to:z.hiddenStyle,isCleaning:true,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:"none"})}}}})};l.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return l}if(typeof define==="function"&&define.amd){define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],f)}else{c.Outlayer={};c.Outlayer.Item=f(c.EventEmitter,c.getSize,c.getStyleProperty)}})(window);
/*!
 * Outlayer v1.2.0
 * the brains and guts of a layout library
 * MIT license
 */
(function(f){var k=f.document;var c=f.console;var r=f.jQuery;var q=function(){};function j(u,t){for(var v in t){u[v]=t[v]}return u}var s=Object.prototype.toString;function d(t){return s.call(t)==="[object Array]"}function a(w){var v=[];if(d(w)){v=w}else{if(w&&typeof w.length==="number"){for(var u=0,t=w.length;u<t;u++){v.push(w[u])}}else{v.push(w)}}return v}var h=(typeof HTMLElement==="object")?function e(t){return t instanceof HTMLElement}:function b(t){return t&&typeof t==="object"&&t.nodeType===1&&typeof t.nodeName==="string"};var l=Array.prototype.indexOf?function(t,u){return t.indexOf(u)}:function(v,w){for(var u=0,t=v.length;u<t;u++){if(v[u]===w){return u}}return -1};function n(v,u){var t=l(u,v);if(t!==-1){u.splice(t,1)}}function m(t){return t.replace(/(.)([A-Z])/g,function(v,u,w){return u+"-"+w}).toLowerCase()}function o(y,u,A,z,B,v){var x=0;var t={};function w(D,C){if(typeof D==="string"){D=k.querySelector(D)}if(!D||!h(D)){if(c){c.error("Bad "+this.constructor.namespace+" element: "+D)}return}this.element=D;this.options=j({},this.constructor.defaults);this.option(C);var E=++x;this.element.outlayerGUID=E;t[E]=this;this._create();if(this.options.isInitLayout){this.layout()}}w.namespace="outlayer";w.Item=v;w.defaults={containerStyle:{position:"relative"},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,isResizingContainer:true,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};j(w.prototype,A.prototype);w.prototype.option=function(C){j(this.options,C)};w.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);j(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize()}};w.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};w.prototype._itemize=function(E){var H=this._filterFindItemElements(E);var F=this.constructor.Item;var D=[];for(var G=0,C=H.length;G<C;G++){var J=H[G];var I=new F(J,this);D.push(I)}return D};w.prototype._filterFindItemElements=function(C){C=a(C);var D=this.options.itemSelector;var H=[];for(var G=0,I=C.length;G<I;G++){var E=C[G];if(!h(E)){continue}if(D){if(B(E,D)){H.push(E)}var J=E.querySelectorAll(D);for(var F=0,K=J.length;F<K;F++){H.push(J[F])}}else{H.push(E)}}return H};w.prototype.getItemElements=function(){var D=[];for(var E=0,C=this.items.length;E<C;E++){D.push(this.items[E].element)}return D};w.prototype.layout=function(){this._resetLayout();this._manageStamps();var C=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,C);this._isLayoutInited=true};w.prototype._init=w.prototype.layout;w.prototype._resetLayout=function(){this.getSize()};w.prototype.getSize=function(){this.size=z(this.element)};w.prototype._getMeasurement=function(E,C){var D=this.options[E];var F;if(!D){this[E]=0}else{if(typeof D==="string"){F=this.element.querySelector(D)}else{if(h(D)){F=D}}this[E]=F?z(F)[C]:D}};w.prototype.layoutItems=function(C,D){C=this._getItemsForLayout(C);this._layoutItems(C,D);this._postLayout()};w.prototype._getItemsForLayout=function(D){var G=[];for(var E=0,C=D.length;E<C;E++){var F=D[E];if(!F.isIgnored){G.push(F)}}return G};w.prototype._layoutItems=function(J,I){var G=this;function C(){G.emitEvent("layoutComplete",[G,J])}if(!J||!J.length){C();return}this._itemsOn(J,"layout",C);var F=[];for(var D=0,H=J.length;D<H;D++){var K=J[D];var E=this._getItemLayoutPosition(K);E.item=K;E.isInstant=I||K.isLayoutInstant;F.push(E)}this._processLayoutQueue(F)};w.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};w.prototype._processLayoutQueue=function(D){for(var E=0,C=D.length;E<C;E++){var F=D[E];this._positionItem(F.item,F.x,F.y,F.isInstant)}};w.prototype._positionItem=function(D,C,F,E){if(E){D.goTo(C,F)}else{D.moveTo(C,F)}};w.prototype._postLayout=function(){this.resizeContainer()};w.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return}var C=this._getContainerSize();if(C){this._setContainerMeasure(C.width,true);this._setContainerMeasure(C.height,false)}};w.prototype._getContainerSize=q;w.prototype._setContainerMeasure=function(C,D){if(C===undefined){return}var E=this.size;if(E.isBorderBox){C+=D?E.paddingLeft+E.paddingRight+E.borderLeftWidth+E.borderRightWidth:E.paddingBottom+E.paddingTop+E.borderTopWidth+E.borderBottomWidth}C=Math.max(C,0);this.element.style[D?"width":"height"]=C+"px"};w.prototype._itemsOn=function(J,F,K){var C=0;var I=J.length;var H=this;function E(){C++;if(C===I){K.call(H)}return true}for(var D=0,G=J.length;D<G;D++){var L=J[D];L.on(F,E)}};w.prototype.ignore=function(D){var C=this.getItem(D);if(C){C.isIgnored=true}};w.prototype.unignore=function(D){var C=this.getItem(D);if(C){delete C.isIgnored}};w.prototype.stamp=function(D){D=this._find(D);if(!D){return}this.stamps=this.stamps.concat(D);for(var E=0,C=D.length;E<C;E++){var F=D[E];this.ignore(F)}};w.prototype.unstamp=function(D){D=this._find(D);if(!D){return}for(var E=0,C=D.length;E<C;E++){var F=D[E];n(F,this.stamps);this.unignore(F)}};w.prototype._find=function(C){if(!C){return}if(typeof C==="string"){C=this.element.querySelectorAll(C)}C=a(C);return C};w.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();for(var E=0,C=this.stamps.length;E<C;E++){var D=this.stamps[E];this._manageStamp(D)}};w.prototype._getBoundingRect=function(){var C=this.element.getBoundingClientRect();var D=this.size;this._boundingRect={left:C.left+D.paddingLeft+D.borderLeftWidth,top:C.top+D.paddingTop+D.borderTopWidth,right:C.right-(D.paddingRight+D.borderRightWidth),bottom:C.bottom-(D.paddingBottom+D.borderBottomWidth)}};w.prototype._manageStamp=q;w.prototype._getElementOffset=function(F){var C=F.getBoundingClientRect();var E=this._boundingRect;var D=z(F);var G={left:C.left-E.left-D.marginLeft,top:C.top-E.top-D.marginTop,right:E.right-C.right-D.marginRight,bottom:E.bottom-C.bottom-D.marginBottom};return G};w.prototype.handleEvent=function(C){var D="on"+C.type;if(this[D]){this[D](C)}};w.prototype.bindResize=function(){if(this.isResizeBound){return}y.bind(f,"resize",this);this.isResizeBound=true};w.prototype.unbindResize=function(){if(this.isResizeBound){y.unbind(f,"resize",this)}this.isResizeBound=false};w.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}var D=this;function C(){D.resize();delete D.resizeTimeout}this.resizeTimeout=setTimeout(C,100)};w.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}this.layout()};w.prototype.needsResizeLayout=function(){var D=z(this.element);var C=this.size&&D;return C&&D.innerWidth!==this.size.innerWidth};w.prototype.addItems=function(D){var C=this._itemize(D);if(C.length){this.items=this.items.concat(C)}return C};w.prototype.appended=function(D){var C=this.addItems(D);if(!C.length){return}this.layoutItems(C,true);this.reveal(C)};w.prototype.prepended=function(D){var C=this._itemize(D);if(!C.length){return}var E=this.items.slice(0);this.items=C.concat(E);this._resetLayout();this._manageStamps();this.layoutItems(C,true);this.reveal(C);this.layoutItems(E)};w.prototype.reveal=function(D){var C=D&&D.length;if(!C){return}for(var E=0;E<C;E++){var F=D[E];F.reveal()}};w.prototype.hide=function(D){var C=D&&D.length;if(!C){return}for(var E=0;E<C;E++){var F=D[E];F.hide()}};w.prototype.getItem=function(F){for(var D=0,C=this.items.length;D<C;D++){var E=this.items[D];if(E.element===F){return E}}};w.prototype.getItems=function(E){if(!E||!E.length){return}var D=[];for(var F=0,C=E.length;F<C;F++){var H=E[F];var G=this.getItem(H);if(G){D.push(G)}}return D};w.prototype.remove=function(D){D=a(D);var F=this.getItems(D);if(!F||!F.length){return}this._itemsOn(F,"remove",function(){this.emitEvent("removeComplete",[this,F])});for(var E=0,C=F.length;E<C;E++){var G=F[E];G.remove();n(G,this.items)}};w.prototype.destroy=function(){var E=this.element.style;E.height="";E.position="";E.width="";for(var D=0,C=this.items.length;D<C;D++){var F=this.items[D];F.destroy()}this.unbindResize();delete this.element.outlayerGUID;if(r){r.removeData(this.element,this.constructor.namespace)}};w.data=function(C){var D=C&&C.outlayerGUID;return D&&t[D]};w.create=function(F,D){function E(){w.apply(this,arguments)}if(Object.create){E.prototype=Object.create(w.prototype)}else{j(E.prototype,w.prototype)}E.prototype.constructor=E;E.defaults=j({},w.defaults);j(E.defaults,D);E.prototype.settings={};E.namespace=F;E.data=w.data;E.Item=function C(){v.apply(this,arguments)};E.Item.prototype=new v();u(function(){var M=m(F);var G=k.querySelectorAll(".js-"+M);var N="data-"+M+"-options";for(var I=0,J=G.length;I<J;I++){var H=G[I];var K=H.getAttribute(N);var P;try{P=K&&JSON.parse(K)}catch(L){if(c){c.error("Error parsing "+N+" on "+H.nodeName.toLowerCase()+(H.id?"#"+H.id:"")+": "+L)}continue}var O=new E(H,P);if(r){r.data(H,F,O)}}});if(r&&r.bridget){r.bridget(F,E)}return E};w.Item=v;return w}if(typeof define==="function"&&define.amd){define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o)}else{f.Outlayer=o(f.eventie,f.docReady,f.EventEmitter,f.getSize,f.matchesSelector,f.Outlayer.Item)}})(window);(function(b){function a(e){function d(){e.Item.apply(this,arguments)}d.prototype=new e.Item();d.prototype._create=function(){this.id=this.layout.itemGUID++;e.Item.prototype._create.call(this);this.sortData={}};d.prototype.updateSortData=function(){if(this.isIgnored){return}this.sortData.id=this.id;this.sortData["original-order"]=this.id;this.sortData.random=Math.random();var h=this.layout.options.getSortData;var j=this.layout._sorters;for(var f in h){var k=j[f];this.sortData[f]=k(this.element,this)}};var c=d.prototype.destroy;d.prototype.destroy=function(){c.apply(this,arguments);this.css({display:""})};return d}if(typeof define==="function"&&define.amd){define("isotope/js/item",["outlayer/outlayer"],a)}else{b.Isotope=b.Isotope||{};b.Isotope.Item=a(b.Outlayer)}})(window);(function(b){function a(e,d){function c(f){this.isotope=f;if(f){this.options=f.options[this.namespace];this.element=f.element;this.items=f.filteredItems;this.size=f.size}}(function(){var j=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"];for(var k=0,f=j.length;k<f;k++){var h=j[k];c.prototype[h]=l(h)}function l(m){return function(){return d.prototype[m].apply(this.isotope,arguments)}}})();c.prototype.needsVerticalResizeLayout=function(){var h=e(this.isotope.element);var f=this.isotope.size&&h;return f&&h.innerHeight!==this.isotope.size.innerHeight};c.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)};c.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")};c.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")};c.prototype.getSegmentSize=function(l,j){var k=l+j;var f="outer"+j;this._getMeasurement(k,f);if(this[k]){return}var h=this.getFirstItemSize();this[k]=h&&h[f]||this.isotope.size["inner"+j]};c.prototype.getFirstItemSize=function(){var f=this.isotope.filteredItems[0];return f&&f.element&&e(f.element)};c.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)};c.prototype.getSize=function(){this.isotope.getSize();this.size=this.isotope.size};c.modes={};c.create=function(h,f){function j(){c.apply(this,arguments)}j.prototype=new c();if(f){j.options=f}j.prototype.namespace=h;c.modes[h]=j;return j};return c}if(typeof define==="function"&&define.amd){define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],a)}else{b.Isotope=b.Isotope||{};b.Isotope.LayoutMode=a(b.getSize,b.Outlayer)}})(window);
/*!
 * Masonry v3.1.5
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(c){var b=Array.prototype.indexOf?function(d,e){return d.indexOf(e)}:function(e,j){for(var f=0,d=e.length;f<d;f++){var h=e[f];if(h===j){return f}}return -1};function a(e,f){var d=e.create("masonry");d.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var h=this.cols;this.colYs=[];while(h--){this.colYs.push(0)}this.maxY=0};d.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var j=this.items[0];var h=j&&j.element;this.columnWidth=h&&f(h).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};d.prototype.getContainerWidth=function(){var h=this.options.isFitWidth?this.element.parentNode:this.element;var j=f(h);this.containerWidth=j&&j.innerWidth};d.prototype._getItemLayoutPosition=function(t){t.getSize();var s=t.size.outerWidth%this.columnWidth;var n=s&&s<1?"round":"ceil";var o=Math[n](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);var h=this._getColGroup(o);var j=Math.min.apply(Math,h);var q=b(h,j);var m={x:this.columnWidth*q,y:j};var r=j+t.size.outerHeight;var k=this.cols+1-h.length;for(var l=0;l<k;l++){this.colYs[q+l]=r}return m};d.prototype._getColGroup=function(k){if(k<2){return this.colYs}var l=[];var m=this.cols+1-k;for(var h=0;h<m;h++){var j=this.colYs.slice(h,h+k);l[h]=Math.max.apply(Math,j)}return l};d.prototype._manageStamp=function(h){var o=f(h);var m=this._getElementOffset(h);var l=this.options.isOriginLeft?m.left:m.right;var j=l+o.outerWidth;var r=Math.floor(l/this.columnWidth);r=Math.max(0,r);var k=Math.floor(j/this.columnWidth);k-=j%this.columnWidth?0:1;k=Math.min(this.cols-1,k);var q=(this.options.isOriginTop?m.top:m.bottom)+o.outerHeight;for(var n=r;n<=k;n++){this.colYs[n]=Math.max(q,this.colYs[n])}};d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var h={height:this.maxY};if(this.options.isFitWidth){h.width=this._getContainerFitWidth()}return h};d.prototype._getContainerFitWidth=function(){var j=0;var h=this.cols;while(--h){if(this.colYs[h]!==0){break}j++}return(this.cols-j)*this.columnWidth-this.gutter};d.prototype.needsResizeLayout=function(){var h=this.containerWidth;this.getContainerWidth();return h!==this.containerWidth};return d}if(typeof define==="function"&&define.amd){define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],a)}else{c.Masonry=a(c.Outlayer,c.getSize)}})(window);
/*!
 * Masonry layout mode
 * sub-classes Masonry
 * http://masonry.desandro.com
 */
(function(b){function c(e,d){for(var f in d){e[f]=d[f]}return e}function a(j,e){var d=j.create("masonry");var l=d.prototype._getElementOffset;var k=d.prototype.layout;var h=d.prototype._getMeasurement;c(d.prototype,e.prototype);d.prototype._getElementOffset=l;d.prototype.layout=k;d.prototype._getMeasurement=h;var f=d.prototype.measureColumns;d.prototype.measureColumns=function(){this.items=this.isotope.filteredItems;f.call(this)};var m=d.prototype._manageStamp;d.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft;this.options.isOriginTop=this.isotope.options.isOriginTop;m.apply(this,arguments)};return d}if(typeof define==="function"&&define.amd){define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],a)}else{a(b.Isotope.LayoutMode,b.Masonry)}})(window);(function(b){function a(d){var c=d.create("fitRows");c.prototype._resetLayout=function(){this.x=0;this.y=0;this.maxY=0};c.prototype._getItemLayoutPosition=function(f){f.getSize();if(this.x!==0&&f.size.outerWidth+this.x>this.isotope.size.innerWidth){this.x=0;this.y=this.maxY}var e={x:this.x,y:this.y};this.maxY=Math.max(this.maxY,this.y+f.size.outerHeight);this.x+=f.size.outerWidth;return e};c.prototype._getContainerSize=function(){return{height:this.maxY}};return c}if(typeof define==="function"&&define.amd){define("isotope/js/layout-modes/fit-rows",["../layout-mode"],a)}else{a(b.Isotope.LayoutMode)}})(window);(function(b){function a(d){var c=d.create("vertical",{horizontalAlignment:0});c.prototype._resetLayout=function(){this.y=0};c.prototype._getItemLayoutPosition=function(f){f.getSize();var e=(this.isotope.size.innerWidth-f.size.outerWidth)*this.options.horizontalAlignment;var h=this.y;this.y+=f.size.outerHeight;return{x:e,y:h}};c.prototype._getContainerSize=function(){return{height:this.y}};return c}if(typeof define==="function"&&define.amd){define("isotope/js/layout-modes/vertical",["../layout-mode"],a)}else{a(b.Isotope.LayoutMode)}})(window);
/*!
 * Isotope v2.0.1
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */
(function(e){var m=e.jQuery;function h(q,o){for(var r in o){q[r]=o[r]}return q}var c=String.prototype.trim?function(o){return o.trim()}:function(o){return o.replace(/^\s+|\s+$/g,"")};var b=document.documentElement;var l=b.textContent?function(o){return o.textContent}:function(o){return o.innerText};var n=Object.prototype.toString;function d(o){return n.call(o)==="[object Array]"}var j=Array.prototype.indexOf?function(o,q){return o.indexOf(q)}:function(r,s){for(var q=0,o=r.length;q<o;q++){if(r[q]===s){return q}}return -1};function a(s){var r=[];if(d(s)){r=s}else{if(s&&typeof s.length==="number"){for(var q=0,o=s.length;q<o;q++){r.push(s[q])}}else{r.push(s)}}return r}function k(r,q){var o=j(q,r);if(o!==-1){q.splice(o,1)}}function f(s,w,x,o,r){var t=s.create("isotope",{layoutMode:"masonry",isJQueryFiltering:true,sortAscending:true});t.Item=o;t.LayoutMode=r;t.prototype._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();s.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=["original-order"];for(var y in r.modes){this._initLayoutMode(y)}};t.prototype.reloadItems=function(){this.itemGUID=0;s.prototype.reloadItems.call(this)};t.prototype._itemize=function(){var z=s.prototype._itemize.apply(this,arguments);for(var A=0,y=z.length;A<y;A++){var B=z[A];B.id=this.itemGUID++}this._updateItemsSortData(z);return z};t.prototype._initLayoutMode=function(y){var z=r.modes[y];var A=this.options[y]||{};this.options[y]=z.options?h(z.options,A):A;this.modes[y]=new z(this)};t.prototype.layout=function(){if(!this._isLayoutInited&&this.options.isInitLayout){this.arrange();return}this._layout()};t.prototype._layout=function(){var y=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,y);this._isLayoutInited=true};t.prototype.arrange=function(y){this.option(y);this._getIsInstant();this.filteredItems=this._filter(this.items);this._sort();this._layout()};t.prototype._init=t.prototype.arrange;t.prototype._getIsInstant=function(){var y=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this._isInstant=y;return y};t.prototype._filter=function(I){var z=this.options.filter;z=z||"*";var C=[];var D=[];var y=[];var H=this._getFilterTest(z);for(var B=0,F=I.length;B<F;B++){var J=I[B];if(J.isIgnored){continue}var G=H(J);if(G){C.push(J)}if(G&&J.isHidden){D.push(J)}else{if(!G&&!J.isHidden){y.push(J)}}}var E=this;function A(){E.reveal(D);E.hide(y)}if(this._isInstant){this._noTransition(A)}else{A()}return C};t.prototype._getFilterTest=function(y){if(m&&this.options.isJQueryFiltering){return function(z){return m(z.element).is(y)}}if(typeof y==="function"){return function(z){return y(z.element)}}return function(z){return x(z.element,y)}};t.prototype.updateSortData=function(z){this._getSorters();z=a(z);var y=this.getItems(z);y=y.length?y:this.items;this._updateItemsSortData(y)};t.prototype._getSorters=function(){var z=this.options.getSortData;for(var y in z){var A=z[y];this._sorters[y]=q(A)}};t.prototype._updateItemsSortData=function(z){for(var A=0,y=z.length;A<y;A++){var B=z[A];B.updateSortData()}};var q=(function(){function z(G){if(typeof G!=="string"){return G}var C=c(G).split(" ");var E=C[0];var D=E.match(/^\[(.+)\]$/);var A=D&&D[1];var B=y(A,E);var F=t.sortDataParsers[C[1]];G=F?function(H){return H&&F(B(H))}:function(H){return H&&B(H)};return G}function y(A,C){var B;if(A){B=function(D){return D.getAttribute(A)}}else{B=function(D){var E=D.querySelector(C);return E&&l(E)}}return B}return z})();t.sortDataParsers={parseInt:function(y){return parseInt(y,10)},parseFloat:function(y){return parseFloat(y)}};t.prototype._sort=function(){var A=this.options.sortBy;if(!A){return}var y=[].concat.apply(A,this.sortHistory);var z=v(y,this.options.sortAscending);this.filteredItems.sort(z);if(A!==this.sortHistory[0]){this.sortHistory.unshift(A)}};function v(z,y){return function A(I,G){for(var C=0,D=z.length;C<D;C++){var J=z[C];var H=I.sortData[J];var E=G.sortData[J];if(H>E||H<E){var B=y[J]!==undefined?y[J]:y;var F=B?1:-1;return(H>E?1:-1)*F}}return 0}}t.prototype._mode=function(){var z=this.options.layoutMode;var y=this.modes[z];if(!y){throw new Error("No layout mode: "+z)}y.options=this.options[z];return y};t.prototype._resetLayout=function(){s.prototype._resetLayout.call(this);this._mode()._resetLayout()};t.prototype._getItemLayoutPosition=function(y){return this._mode()._getItemLayoutPosition(y)};t.prototype._manageStamp=function(y){this._mode()._manageStamp(y)};t.prototype._getContainerSize=function(){return this._mode()._getContainerSize()};t.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()};t.prototype.appended=function(z){var y=this.addItems(z);if(!y.length){return}var A=this._filterRevealAdded(y);this.filteredItems=this.filteredItems.concat(A)};t.prototype.prepended=function(z){var y=this._itemize(z);if(!y.length){return}var B=this.items.slice(0);this.items=y.concat(B);this._resetLayout();this._manageStamps();var A=this._filterRevealAdded(y);this.layoutItems(B);this.filteredItems=A.concat(this.filteredItems)};t.prototype._filterRevealAdded=function(y){var z=this._noTransition(function(){return this._filter(y)});this.layoutItems(z,true);this.reveal(z);return y};t.prototype.insert=function(B){var A=this.addItems(B);if(!A.length){return}var C,D;var y=A.length;for(C=0;C<y;C++){D=A[C];this.element.appendChild(D.element)}var z=this._filter(A);this._noTransition(function(){this.hide(z)});for(C=0;C<y;C++){A[C].isLayoutInstant=true}this.arrange();for(C=0;C<y;C++){delete A[C].isLayoutInstant}this.reveal(z)};var u=t.prototype.remove;t.prototype.remove=function(z){z=a(z);var B=this.getItems(z);u.call(this,z);if(!B||!B.length){return}for(var A=0,y=B.length;A<y;A++){var C=B[A];k(C,this.filteredItems)}};t.prototype.shuffle=function(){for(var z=0,y=this.items.length;z<y;z++){var A=this.items[z];A.sortData.random=Math.random()}this.options.sortBy="random";this._sort();this._layout()};t.prototype._noTransition=function(A){var y=this.options.transitionDuration;this.options.transitionDuration=0;var z=A.call(this);this.options.transitionDuration=y;return z};t.prototype.getFilteredItemElements=function(){var z=[];for(var A=0,y=this.filteredItems.length;A<y;A++){z.push(this.filteredItems[A].element)}return z};return t}if(typeof define==="function"&&define.amd){define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],f)}else{e.Isotope=f(e.Outlayer,e.getSize,e.matchesSelector,e.Isotope.Item,e.Isotope.LayoutMode)}})(window);Swiper=function(X,Y){function U(b){return document.querySelectorAll(b)}function W(){var b=K-S*Y.slidesPerSlide;Y.loop&&(b-=P);return b}function I(){Z.init();Z.swipeTo(Z.activeSlide,0,!1)}function O(b){if(Z.isTouched||Y.onlyExternal){return !1}if(!b.assignedToSwiper&&(b.assignedToSwiper=!0,Z.isTouched=!0,!Z.isSupportTouch()||1==b.targetTouches.length)){Y.loop&&Z.fixLoop();Z.isSupportTouch()||(b.preventDefault?b.preventDefault():b.returnValue=!1);var a=Z.isSupportTouch()?b.targetTouches[0].pageX:b.pageX?b.pageX:b.clientX,b=Z.isSupportTouch()?b.targetTouches[0].pageY:b.pageY?b.pageY:b.clientY;Z.touches.startX=Z.touches.currentX=a;Z.touches.startY=Z.touches.currentY=b;Z.touches.start=Z.touches.current=V?Z.touches.startX:Z.touches.startY;Z.setTransition(0);Z.positions.start=Z.positions.current=V?Z.getTranslate("x"):Z.getTranslate("y");V?Z.setTransform(Z.positions.start,0,0):Z.setTransform(0,Z.positions.start,0);Z.times.start=(new Date).getTime();N=void 0;if(Y.onTouchStart){Y.onTouchStart(Z)}}}function h(e){if(Z.isTouched&&!Y.onlyExternal){if(Z.isSupportTouch()&&("undefined"==typeof N&&V&&(N=!!(N||Math.abs(e.targetTouches[0].pageY-Z.touches.startY)>Math.abs(e.targetTouches[0].pageX-Z.touches.startX))),"undefined"==typeof N&&!V&&(N=!!(N||Math.abs(e.targetTouches[0].pageY-Z.touches.startY)<Math.abs(e.targetTouches[0].pageX-Z.touches.startX))),N)){return}if(!e.assignedToSwiper&&(e.assignedToSwiper=!0,Y.autoPlay&&Z.stopAutoPlay(),!Z.isSupportTouch()||1==e.touches.length)){e.preventDefault?e.preventDefault():e.returnValue=!1;if(Y.onTouchMove){Y.onTouchMove(Z)}var a=Z.isSupportTouch()?e.targetTouches[0].pageX:e.pageX?e.pageX:e.clientX,e=Z.isSupportTouch()?e.targetTouches[0].pageY:e.pageY?e.pageY:e.clientY;Z.touches.current=V?a:e;Z.positions.current=(Z.touches.current-Z.touches.start)*Y.ratio+Z.positions.start;if(0<Z.positions.current&&(!Y.freeMode||Y.freeModeFluid)){Y.loop?(a=1,0<Z.positions.current&&(Z.positions.current=0)):a=(2*P-Z.positions.current)/P/2,Z.positions.current=0.5>a?P/2:Z.positions.current*a}if(Math.abs(Z.positions.current)>K-S*Y.slidesPerSlide&&(!Y.freeMode||Y.freeModeFluid)){if(Y.loop){var a=1,e=Z.positions.current,b=-W()-P}else{e=(Z.touches.current-Z.touches.start)*Y.ratio+(W()+Z.positions.start),a=(P+e)/P,e=Z.positions.current-e*(1-a)/2,b=-W()-P/2}Z.positions.current=e<b||0>=a?b:e}Y.followFinger&&(V?Z.setTransform(Z.positions.current,0,0):Z.setTransform(0,Z.positions.current,0),Y.freeMode&&Z.updateActiveSlide(Z.positions.current))}}}function c(){if(!Y.onlyExternal&&Z.isTouched){Z.isTouched=!1;!Z.positions.current&&0!==Z.positions.current&&(Z.positions.current=Z.positions.start);V?Z.setTransform(Z.positions.current,0,0):Z.setTransform(0,Z.positions.current,0);Z.times.end=(new Date).getTime();Z.touches.diff=Z.touches.current-Z.touches.start;Z.touches.abs=Math.abs(Z.touches.diff);Z.positions.diff=Z.positions.current-Z.positions.start;Z.positions.abs=Math.abs(Z.positions.diff);var e=Z.positions.diff,a=Z.positions.abs;5>a&&Z.swipeReset();var b=K-S*Y.slidesPerSlide;0<Z.positions.current?Z.swipeReset():Math.abs(Z.positions.current)>b?Z.swipeReset():Y.freeMode?(300>Z.times.end-Z.times.start&&Y.freeModeFluid&&(e=Z.positions.current+2*Z.touches.diff,e<-1*b&&(e=-b),0<e&&(e=0),V?Z.setTransform(e,0,0):Z.setTransform(0,e,0),Z.setTransition(2*(Z.times.end-Z.times.start)),Z.updateActiveSlide(e)),(!Y.freeModeFluid||300<=Z.times.end-Z.times.start)&&Z.updateActiveSlide(Z.positions.current)):(G=0>e?"toNext":"toPrev","toNext"==G&&300>=Z.times.end-Z.times.start&&(30>a?Z.swipeReset():Z.swipeNext(!0)),"toPrev"==G&&300>=Z.times.end-Z.times.start&&(30>a?Z.swipeReset():Z.swipePrev(!0)),"toNext"==G&&300<Z.times.end-Z.times.start&&(a>=0.5*S?Z.swipeNext(!0):Z.swipeReset()),"toPrev"==G&&300<Z.times.end-Z.times.start&&(a>=0.5*S?Z.swipePrev(!0):Z.swipeReset()));if(Y.onTouchEnd){Y.onTouchEnd(Z)}}}function A(){if(Y.onSlideChangeStart){Y.onSlideChangeStart(Z)}Y.onSlideChangeEnd&&Z.transitionEnd(Y.onSlideChangeEnd)}window.addEventListener||(window.Element||(Element=function(){}),Element.prototype.addEventListener=HTMLDocument.prototype.addEventListener=addEventListener=function(e,d){this.attachEvent("on"+e,d)},Element.prototype.removeEventListener=HTMLDocument.prototype.removeEventListener=removeEventListener=function(e,d){this.detachEvent("on"+e,d)});if(document.body.__defineGetter__&&HTMLElement){var R=HTMLElement.prototype;R.__defineGetter__&&R.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}window.getComputedStyle||(window.getComputedStyle=function(b){this.el=b;this.getPropertyValue=function(a){var e=/(\-([a-z]){1})/g;"float"==a&&(a="styleFloat");e.test(a)&&(a=a.replace(e,function(f,d,j){return j.toUpperCase()}));return b.currentStyle[a]?b.currentStyle[a]:null};return this});if(document.querySelectorAll&&0!=document.querySelectorAll(X).length){var Z=this;Z.touches={};Z.positions={current:0};Z.times={};Z.isTouched=!1;Z.realIndex=0;Z.activeSlide=0;Z.previousSlide=null;Z.use3D=Z.isSupport3D();Y=Y||{};Z.params=Y;Y.mode=Y.mode||"horizontal";Y.ratio=Y.ratio||1;Y.speed=Y.speed||300;Y.freeMode=Y.freeMode||!1;Y.freeModeFluid=Y.freeModeFluid||!1;Y.slidesPerSlide=Y.slidesPerSlide||1;Y.simulateTouch=!1===Y.simulateTouch?!1:!0;Y.followFinger=!1===Y.followFinger?!1:!0;Y.autoPlay=Y.autoPlay||!1;Y.onlyExternal=Y.onlyExternal||!1;Y.createPagination=!1===Y.createPagination?!1:!0;Y.pagination=Y.pagination||!1;Y.slideClass=Y.slideClass||"swiper-slide";Y.wrapperClass=Y.wrapperClass||"swiper-wrapper";Y.paginationClass=Y.paginationClass||"swiper-pagination-switch";Y.paginationActiveClass=Y.paginationActiveClass||"swiper-active-switch";var M=U(X+" ."+Y.wrapperClass).item(0),V,S,T,K,G,N,P;Z.wrapper=M;V="horizontal"==Y.mode;var L=Z.isSupportTouch()||!Y.simulateTouch?"touchstart":"mousedown",J=Z.isSupportTouch()||!Y.simulateTouch?"touchmove":"mousemove",H=Z.isSupportTouch()||!Y.simulateTouch?"touchend":"mouseup";if(Y.loop){T=U(X+" > ."+Y.wrapperClass+" > ."+Y.slideClass).length;for(var F=R="",Q=0;Q<Y.slidesPerSlide;Q++){R+=U(X+" > ."+Y.wrapperClass+" > ."+Y.slideClass).item(Q).outerHTML}for(Q=T-Y.slidesPerSlide;Q<T;Q++){F+=U(X+" > ."+Y.wrapperClass+" > ."+Y.slideClass).item(Q).outerHTML}M.innerHTML=F+M.innerHTML+R;setTimeout(function(){Z.swipeTo(0,0)},0)}Z.init=function(){var m=U(X).item(0).offsetWidth,f=U(X).item(0).offsetHeight;S=P=V?m:f;T=U(X+" > ."+Y.wrapperClass+" > ."+Y.slideClass).length;for(var j=V?1:Y.slidesPerSlide,a=V?Y.slidesPerSlide:1,d=0;d<T;d++){var b=U(X+" > ."+Y.wrapperClass+" > ."+Y.slideClass).item(d);b.style.width=m/a+"px";b.style.height=f/j+"px";if(Y.onSlideInitialize){Y.onSlideInitialize(Z,b)}}m=T*m/a;f=T*f/j;K=V?m:f;V?M.style.width=m+"px":M.style.height=f+"px";Y.slidesPerSlide&&1<Y.slidesPerSlide&&(S/=Y.slidesPerSlide)};Z.init();if(Y.pagination&&Y.createPagination){R="";F=Y.loop?T-2*Y.slidesPerSlide:T;for(Q=0;Q<F;Q++){R+='<span class="'+Y.paginationClass+'"></span>'}U(Y.pagination)[0].innerHTML=R;setTimeout(function(){Z.updatePagination()},0)}Y.disableAutoResize||window.addEventListener("resize",I,!1);var o;Z.startAutoPlay=function(){Y.autoPlay&&(o=setInterval(function(){var a=Z.realIndex+1;a==T&&(a=0);Z.swipeTo(a)},Y.autoPlay))};Z.stopAutoPlay=function(){o&&clearInterval(o)};Y.autoPlay&&Z.startAutoPlay();M.addEventListener(L,O,!1);var E=Z.isSupportTouch()?M:document;E.addEventListener(J,h,!1);E.addEventListener(H,c,!1);Z.destroy=function(b){(!1===b?b:1)&&window.removeEventListener("resize",I,!1);M.removeEventListener(L,O,!1);E.removeEventListener(J,h,!1);E.removeEventListener(H,c,!1)};Z.swipeNext=function(a){!a&&Y.loop&&Z.fixLoop();a=V?Z.getTranslate("x"):Z.getTranslate("y");a=Math.floor(Math.abs(a)/Math.floor(S))*S+S;if(a!=K&&(!(a>W())||Y.loop)){return Y.loop&&a>=W()+P&&(a=W()+P),V?Z.setTransform(-a,0,0):Z.setTransform(0,-a,0),Z.setTransition(Y.speed),Z.updateActiveSlide(-a),A(),!0}};Z.swipePrev=function(a){!a&&Y.loop&&Z.fixLoop();a=V?Z.getTranslate("x"):Z.getTranslate("y");a=(Math.ceil(-a/S)-1)*S;0>a&&(a=0);V?Z.setTransform(-a,0,0):Z.setTransform(0,-a,0);Z.setTransition(Y.speed);Z.updateActiveSlide(-a);A();return !0};Z.swipeReset=function(){var b=V?Z.getTranslate("x"):Z.getTranslate("y"),b=0>b?Math.round(b/S)*S:0,a=-W();b<=a&&(b=a);"horizontal"==Y.mode?Z.setTransform(b,0,0):Z.setTransform(0,b,0);Z.setTransition(Y.speed);Z.updateActiveSlide(b);if(Y.onSlideReset){Y.onSlideReset(Z)}return !0};Z.swipeTo=function(f,b,a){if(!(f>T-1)&&(!(0>f)||Y.loop)){return a=!1===a?!1:a||!0,b=0===b?b:b||Y.speed,Y.loop&&(f+=Y.slidesPerSlide),f>T-Y.slidesPerSlide&&(f=T-Y.slidesPerSlide),f=-f*S,V?Z.setTransform(f,0,0):Z.setTransform(0,f,0),Z.setTransition(b),Z.updateActiveSlide(f),a&&A(),!0}};Z.updateActiveSlide=function(a){Z.previousSlide=Z.realIndex;Z.realIndex=Math.round(-a/S);Y.loop?(Z.activeSlide=Z.realIndex-Y.slidesPerSlide,Z.activeSlide>=T-2*Y.slidesPerSlide&&(Z.activeSlide=T-2*Y.slidesPerSlide-Z.activeSlide),0>Z.activeSlide&&(Z.activeSlide=T-2*Y.slidesPerSlide+Z.activeSlide)):Z.activeSlide=Z.realIndex;Z.realIndex==T&&(Z.realIndex=T-1);0>Z.realIndex&&(Z.realIndex=0);Y.pagination&&Z.updatePagination()};Z.updatePagination=function(){var k=U(Y.pagination+" ."+Y.paginationActiveClass);if(k){for(var j=0;j<k.length;j++){0<=k.item(j).className.indexOf("active")&&(k.item(j).className=k.item(j).className.replace(Y.paginationActiveClass,""))}for(var k=U(Y.pagination+" ."+Y.paginationClass).length,j=Y.loop?Z.realIndex-Y.slidesPerSlide:Z.realIndex,b=j+(Y.slidesPerSlide-1);j<=b;j++){var a=j;a>=k&&(a-=k);0>a&&(a=k+a);a<T&&(U(Y.pagination+" ."+Y.paginationClass).item(a).className=U(Y.pagination+" ."+Y.paginationClass).item(a).className+" "+Y.paginationActiveClass)}}};Z.fixLoop=function(){if(Z.realIndex<Y.slidesPerSlide){var a=T-3*Y.slidesPerSlide+Z.realIndex;Z.swipeTo(a,0)}Z.realIndex>T-2*Y.slidesPerSlide&&(a=-T+Z.realIndex+Y.slidesPerSlide,Z.swipeTo(a,0))}}};Swiper.prototype={transitionEnd:function(j){var a=this,f=a.wrapper,h=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(j){for(var c=function(){j(a);for(var b=0;b<h.length;b++){f.removeEventListener(h[b],c,!1)}},k=0;k<h.length;k++){f.addEventListener(h[k],c,!1)}}},isSupportTouch:function(){return"ontouchstart" in window||window.DocumentTouch&&document instanceof DocumentTouch},isSupport3D:function(){var e=document.createElement("div");e.id="test3d";var a=!1;"webkitPerspective" in e.style&&(a=!0);"MozPerspective" in e.style&&(a=!0);"OPerspective" in e.style&&(a=!0);"MsPerspective" in e.style&&(a=!0);"perspective" in e.style&&(a=!0);if(a&&"webkitPerspective" in e.style){var c=document.createElement("style");c.textContent="@media (-webkit-transform-3d), (transform-3d), (-moz-transform-3d), (-o-transform-3d), (-ms-transform-3d) {#test3d{height:5px}}";document.getElementsByTagName("head")[0].appendChild(c);document.body.appendChild(e);a=5===e.offsetHeight;c.parentNode.removeChild(c);e.parentNode.removeChild(e)}return a},getTranslate:function(e){var a=this.wrapper,c,a=(window.WebKitCSSMatrix?new WebKitCSSMatrix(window.getComputedStyle(a,null).webkitTransform):window.getComputedStyle(a,null).MozTransform||window.getComputedStyle(a,null).OTransform||window.getComputedStyle(a,null).MsTransform||window.getComputedStyle(a,null).msTransform||window.getComputedStyle(a,null).transform||window.getComputedStyle(a,null).getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(",");"x"==e&&(c=16==a.length?parseInt(a[12],10):parseInt(a[4],10));"y"==e&&(c=16==a.length?parseInt(a[13],10):parseInt(a[5],10));return c},setTransform:function(h,a,c){var f=this.wrapper.style,h=h||0,a=a||0;this.use3D?f.webkitTransform=f.MsTransform=f.msTransform=f.MozTransform=f.OTransform=f.transform="translate3d("+h+"px, "+a+"px, "+(c||0)+"px)":(f.webkitTransform=f.MsTransform=f.msTransform=f.MozTransform=f.OTransform=f.transform="translate("+h+"px, "+a+"px)",this.ie8&&(f.filter="progid:DXImageTransform.Microsoft.Matrix(Dx="+h+",Dy="+a+")"))},setTransition:function(c){var a=this.wrapper.style;a.webkitTransitionDuration=a.MsTransitionDuration=a.msTransitionDuration=a.MozTransitionDuration=a.OTransitionDuration=a.transitionDuration=c/1000+"s"},ie8:function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return -1!=a&&9>a}()};if(window.jQuery||window.Zepto){(function(a){a.fn.swiper=function(c){return new Swiper(a(this).selector,c)}})(window.jQuery||window.Zepto)}(function(b){function d(f){var e=["transform","WebkitTransform","msTransform","MozTransform","OTransform"];var h;while(h=e.shift()){if(typeof f.style[h]!="undefined"){return h}}return"transform"}var c=null;var a=b.fn.css;b.fn.css=function(e,f){if(c===null){if(typeof b.cssProps!="undefined"){c=b.cssProps}else{if(typeof b.props!="undefined"){c=b.props}else{c={}}}}if(typeof c.transform=="undefined"&&(e=="transform"||(typeof e=="object"&&typeof e.transform!="undefined"))){c.transform=d(this.get(0))}if(c.transform!="transform"){if(e=="transform"){e=c.transform;if(typeof f=="undefined"&&jQuery.style){return jQuery.style(this.get(0),e)}}else{if(typeof e=="object"&&typeof e.transform!="undefined"){e[c.transform]=e.transform;delete e.transform}}}return a.apply(this,arguments)}})(jQuery);(function(M,n,Z){var N={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},A="colorbox",V="cbox",u=V+"Element",Y=V+"_open",e=V+"_load",X=V+"_complete",x=V+"_cleanup",af=V+"_closed",k=V+"_purge",y=!M.support.opacity&&!M.support.style,ai=y&&!Z.XMLHttpRequest,ad=V+"_IE6",T,aj,ak,d,K,s,b,S,c,ac,Q,m,j,r,w,aa,v,U,C,E,ah,al,o,h,a,z,L,q,G,ab,P,D,O,ag="div",ae;function J(am,ap,ao){var an=n.createElement(am);if(ap){an.id=V+ap}if(ao){an.style.cssText=ao}return M(an)}function H(an){var am=c.length,ao=(L+an)%am;return(ao<0)?am+ao:ao}function R(am,an){return Math.round((/%/.test(am)?((an==="x"?ac.width():ac.height())/100):1)*parseInt(am,10))}function F(am){return ah.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(am)}function W(){var am;ah=M.extend({},M.data(z,A));for(am in ah){if(M.isFunction(ah[am])&&am.slice(0,2)!=="on"){ah[am]=ah[am].call(z)}}ah.rel=ah.rel||z.rel||"nofollow";ah.href=ah.href||M(z).attr("href");ah.title=ah.title||z.title;if(typeof ah.href==="string"){ah.href=M.trim(ah.href)}}function I(am,an){M.event.trigger(am);if(an){an.call(z)}}function B(){var an,ap=V+"Slideshow_",aq="click."+V,ar,ao,am;if(ah.slideshow&&c[1]){ar=function(){aa.text(ah.slideshowStop).unbind(aq).bind(X,function(){if(ah.loop||c[L+1]){an=setTimeout(O.next,ah.slideshowSpeed)}}).bind(e,function(){clearTimeout(an)}).one(aq+" "+x,ao);aj.removeClass(ap+"off").addClass(ap+"on");an=setTimeout(O.next,ah.slideshowSpeed)};ao=function(){clearTimeout(an);aa.text(ah.slideshowStart).unbind([X,e,x,aq].join(" ")).one(aq,function(){O.next();ar()});aj.removeClass(ap+"on").addClass(ap+"off")};if(ah.slideshowAuto){ar()}else{ao()}}else{aj.removeClass(ap+"off "+ap+"on")}}function f(am){if(!P){z=am;W();c=M(z);L=0;if(ah.rel!=="nofollow"){c=M("."+u).filter(function(){var an=M.data(this,A).rel||this.rel;return(an===ah.rel)});L=c.index(z);if(L===-1){c=c.add(z);L=c.length-1}}if(!G){G=ab=true;aj.show();if(ah.returnFocus){M(z).blur().one(af,function(){M(this).focus()})}T.css({opacity:+ah.opacity,cursor:ah.overlayClose?"pointer":"auto"}).show();ah.w=R(ah.initialWidth,"x");ah.h=R(ah.initialHeight,"y");O.position();if(ai){ac.bind("resize."+ad+" scroll."+ad,function(){T.css({width:ac.width(),height:ac.height(),top:ac.scrollTop(),left:ac.scrollLeft()})}).trigger("resize."+ad)}I(Y,ah.onOpen);E.add(r).hide()}O.load(true)}}function t(){if(!aj&&n.body){ae=false;ac=M(Z);aj=J(ag).attr({id:A,"class":y?V+(ai?"IE6":"IE"):""}).hide();T=J(ag,"Overlay",ai?"position:absolute":"").hide();ak=J(ag,"Wrapper");d=J(ag,"Content").append(Q=J(ag,"LoadedContent","width:0; height:0; overflow:hidden"),j=J(ag,"LoadingOverlay").add(J(ag,"LoadingGraphic")),r=J(ag,"Title"),w=J(ag,"Current"),v=J(ag,"Next"),U=J(ag,"Previous"),aa=J(ag,"Slideshow").bind(Y,B),C=J(ag,"Close"));ak.append(J(ag).append(J(ag,"TopLeft"),K=J(ag,"TopCenter"),J(ag,"TopRight")),J(ag,false,"clear:left").append(s=J(ag,"MiddleLeft"),d,b=J(ag,"MiddleRight")),J(ag,false,"clear:left").append(J(ag,"BottomLeft"),S=J(ag,"BottomCenter"),J(ag,"BottomRight"))).find("div div").css({"float":"left"});m=J(ag,false,"position:absolute; width:9999px; visibility:hidden; display:none");E=v.add(U).add(w).add(aa);M(n.body).append(T,aj.append(ak,m))}}function l(){if(aj){if(!ae){ae=true;al=K.height()+S.height()+d.outerHeight(true)-d.height();o=s.width()+b.width()+d.outerWidth(true)-d.width();h=Q.outerHeight(true);a=Q.outerWidth(true);aj.css({"padding-bottom":al,"padding-right":o});v.click(function(){O.next()});U.click(function(){O.prev()});C.click(function(){O.close()});T.click(function(){if(ah.overlayClose){O.close()}});M(n).bind("keydown."+V,function(an){var am=an.keyCode;if(G&&ah.escKey&&am===27){an.preventDefault();O.close()}if(G&&ah.arrowKey&&c[1]){if(am===37){an.preventDefault();U.click()}else{if(am===39){an.preventDefault();v.click()}}}});M("."+u,n).live("click",function(am){if(!(am.which>1||am.shiftKey||am.altKey||am.metaKey)){am.preventDefault();f(this)}})}return true}return false}if(M.colorbox){return}M(t);O=M.fn[A]=M[A]=function(am,ao){var an=this;am=am||{};t();if(l()){if(!an[0]){if(an.selector){return an}an=M("<a/>");am.open=true}if(ao){am.onComplete=ao}an.each(function(){M.data(this,A,M.extend({},M.data(this,A)||N,am))}).addClass(u);if((M.isFunction(am.open)&&am.open.call(an))||am.open){f(an[0])}}return an};O.position=function(an,am){var aq=0,ap=0,at=aj.offset(),ao=ac.scrollTop(),ar=ac.scrollLeft();ac.unbind("resize."+V);aj.css({top:-90000,left:-90000});if(ah.fixed&&!ai){at.top-=ao;at.left-=ar;aj.css({position:"fixed"})}else{aq=ao;ap=ar;aj.css({position:"absolute"})}if(ah.right!==false){ap+=Math.max(ac.width()-ah.w-a-o-R(ah.right,"x"),0)}else{if(ah.left!==false){ap+=R(ah.left,"x")}else{ap+=Math.round(Math.max(ac.width()-ah.w-a-o,0)/2)}}if(ah.bottom!==false){aq+=Math.max(ac.height()-ah.h-h-al-R(ah.bottom,"y"),0)}else{if(ah.top!==false){aq+=R(ah.top,"y")}else{aq+=Math.round(Math.max(ac.height()-ah.h-h-al,0)/2)}}aj.css({top:at.top,left:at.left});an=(aj.width()===ah.w+a&&aj.height()===ah.h+h)?0:an||0;ak[0].style.width=ak[0].style.height="9999px";function au(av){K[0].style.width=S[0].style.width=d[0].style.width=av.style.width;d[0].style.height=s[0].style.height=b[0].style.height=av.style.height}aj.dequeue().animate({width:ah.w+a,height:ah.h+h,top:aq,left:ap},{duration:an,complete:function(){au(this);ab=false;ak[0].style.width=(ah.w+a+o)+"px";ak[0].style.height=(ah.h+h+al)+"px";if(ah.reposition){setTimeout(function(){ac.bind("resize."+V,O.position)},1)}if(am){am()}},step:function(){au(this)}})};O.resize=function(am){if(G){am=am||{};if(am.width){ah.w=R(am.width,"x")-a-o}if(am.innerWidth){ah.w=R(am.innerWidth,"x")}Q.css({width:ah.w});if(am.height){ah.h=R(am.height,"y")-h-al}if(am.innerHeight){ah.h=R(am.innerHeight,"y")}if(!am.innerHeight&&!am.height){Q.css({height:"auto"});ah.h=Q.height()}Q.css({height:ah.h});O.position(ah.transition==="none"?0:ah.speed)}};O.prep=function(an){if(!G){return}var aq,ao=ah.transition==="none"?0:ah.speed;Q.remove();Q=J(ag,"LoadedContent").append(an);function am(){ah.w=ah.w||Q.width();ah.w=ah.mw&&ah.mw<ah.w?ah.mw:ah.w;return ah.w}function ap(){ah.h=ah.h||Q.height();ah.h=ah.mh&&ah.mh<ah.h?ah.mh:ah.h;return ah.h}Q.hide().appendTo(m.show()).css({width:am(),overflow:ah.scrolling?"auto":"hidden"}).css({height:ap()}).prependTo(d);m.hide();M(q).css({"float":"none"});if(ai){M("select").not(aj.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(x,function(){this.style.visibility="inherit"})}aq=function(){var aB,ay,az=c.length,aw,aA="frameBorder",av="allowTransparency",at,ar,ax;if(!G){return}function au(){if(y){aj[0].style.removeAttribute("filter")}}at=function(){clearTimeout(D);j.hide();I(X,ah.onComplete)};if(y){if(q){Q.fadeIn(100)}}r.html(ah.title).add(Q).show();if(az>1){if(typeof ah.current==="string"){w.html(ah.current.replace("{current}",L+1).replace("{total}",az)).show()}v[(ah.loop||L<az-1)?"show":"hide"]().html(ah.next);U[(ah.loop||L)?"show":"hide"]().html(ah.previous);if(ah.slideshow){aa.show()}if(ah.preloading){aB=[H(-1),H(1)];while(ay=c[aB.pop()]){ar=M.data(ay,A).href||ay.href;if(M.isFunction(ar)){ar=ar.call(ay)}if(F(ar)){ax=new Image();ax.src=ar}}}}else{E.hide()}if(ah.iframe){aw=J("iframe")[0];if(aA in aw){aw[aA]=0}if(av in aw){aw[av]="true"}aw.name=V+(+new Date());if(ah.fastIframe){at()}else{M(aw).one("load",at)}aw.src=ah.href;if(!ah.scrolling){aw.scrolling="no"}M(aw).addClass(V+"Iframe").appendTo(Q).one(k,function(){aw.src="//about:blank"})}else{at()}if(ah.transition==="fade"){aj.fadeTo(ao,1,au)}else{au()}};if(ah.transition==="fade"){aj.fadeTo(ao,0,function(){O.position(0,aq)})}else{O.position(ao,aq)}};O.load=function(ao){var an,ap,am=O.prep;ab=true;q=false;z=c[L];if(!ao){W()}I(k);I(e,ah.onLoad);ah.h=ah.height?R(ah.height,"y")-h-al:ah.innerHeight&&R(ah.innerHeight,"y");ah.w=ah.width?R(ah.width,"x")-a-o:ah.innerWidth&&R(ah.innerWidth,"x");ah.mw=ah.w;ah.mh=ah.h;if(ah.maxWidth){ah.mw=R(ah.maxWidth,"x")-a-o;ah.mw=ah.w&&ah.w<ah.mw?ah.w:ah.mw}if(ah.maxHeight){ah.mh=R(ah.maxHeight,"y")-h-al;ah.mh=ah.h&&ah.h<ah.mh?ah.h:ah.mh}an=ah.href;D=setTimeout(function(){j.show()},100);if(ah.inline){J(ag).hide().insertBefore(M(an)[0]).one(k,function(){M(this).replaceWith(Q.children())});am(M(an))}else{if(ah.iframe){am(" ")}else{if(ah.html){am(ah.html)}else{if(F(an)){M(q=new Image()).addClass(V+"Photo").error(function(){ah.title=false;am(J(ag,"Error").text("This image could not be loaded"))}).load(function(){var aq;q.onload=null;if(ah.scalePhotos){ap=function(){q.height-=q.height*aq;q.width-=q.width*aq};if(ah.mw&&q.width>ah.mw){aq=(q.width-ah.mw)/q.width;ap()}if(ah.mh&&q.height>ah.mh){aq=(q.height-ah.mh)/q.height;ap()}}if(ah.h){q.style.marginTop=Math.max(ah.h-q.height,0)/2+"px"}if(c[1]&&(ah.loop||c[L+1])){q.style.cursor="pointer";q.onclick=function(){O.next()}}if(y){q.style.msInterpolationMode="bicubic"}setTimeout(function(){am(q)},1)});setTimeout(function(){q.src=an},1)}else{if(an){m.load(an,ah.data,function(ar,aq,at){am(aq==="error"?J(ag,"Error").text("Request unsuccessful: "+at.statusText):M(this).contents())})}}}}}};O.next=function(){if(!ab&&c[1]&&(ah.loop||c[L+1])){L=H(1);O.load()}};O.prev=function(){if(!ab&&c[1]&&(ah.loop||L)){L=H(-1);O.load()}};O.close=function(){if(G&&!P){P=true;G=false;I(x,ah.onCleanup);ac.unbind("."+V+" ."+ad);T.fadeTo(200,0);aj.stop().fadeTo(300,0,function(){aj.add(T).css({opacity:1,cursor:"auto"}).hide();I(k);Q.remove();setTimeout(function(){P=false;I(af,ah.onClosed)},1)})}};O.remove=function(){M([]).add(aj).add(T).remove();aj=null;M("."+u).removeData(A).removeClass(u).die()};O.element=function(){return M(z)};O.settings=N}(jQuery,document,this));jQuery.cookie=function(b,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var e="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var f;if(typeof n.expires=="number"){f=new Date();f.setTime(f.getTime()+(n.expires*24*60*60*1000))}else{f=n.expires}e="; expires="+f.toUTCString()}var m=n.path?"; path="+(n.path):"";var h=n.domain?"; domain="+(n.domain):"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(k),e,m,h,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var c=jQuery.trim(l[j]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};
/*!
 * jQuery Cycle Plugin (with Transition Definitions)
 * Examples and documentation at: http://jquery.malsup.com/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version: 2.9994 (28-JUL-2011)
 * Dual licensed under the MIT and GPL licenses.
 * http://jquery.malsup.com/license.html
 * Requires: jQuery v1.3.2 or later
 */
(function(k){var n="2.9994";if(k.support==undefined){k.support={opacity:!(k.browser.msie)}}function a(u){k.fn.cycle.debug&&f(u)}function f(){window.console&&console.log&&console.log("[cycle] "+Array.prototype.join.call(arguments," "))}k.expr[":"].paused=function(u){return u.cyclePause};k.fn.cycle=function(v,u){var w={s:this.selector,c:this.context};if(this.length===0&&v!="stop"){if(!k.isReady&&w.s){f("DOM not ready, queuing slideshow");k(function(){k(w.s,w.c).cycle(v,u)});return this}f("terminating; zero elements found by selector"+(k.isReady?"":" (DOM not ready)"));return this}return this.each(function(){var A=q(this,v,u);if(A===false){return}A.updateActivePagerLink=A.updateActivePagerLink||k.fn.cycle.updateActivePagerLink;if(this.cycleTimeout){clearTimeout(this.cycleTimeout)}this.cycleTimeout=this.cyclePause=0;var B=k(this);var C=A.slideExpr?k(A.slideExpr,this):B.children();var y=C.get();var x=m(B,C,y,A,w);if(x===false){return}if(y.length<2){f("terminating; too few slides: "+y.length);return}var z=x.continuous?10:j(y[x.currSlide],y[x.nextSlide],x,!x.backwards);if(z){z+=(x.delay||0);if(z<10){z=10}a("first timeout: "+z);this.cycleTimeout=setTimeout(function(){e(y,x,0,!A.backwards)},z)}})};function o(u,x,w){var y=k(u).data("cycle.opts");var v=!!u.cyclePause;if(v&&y.paused){y.paused(u,y,x,w)}else{if(!v&&y.resumed){y.resumed(u,y,x,w)}}}function q(u,x,v){if(u.cycleStop==undefined){u.cycleStop=0}if(x===undefined||x===null){x={}}if(x.constructor==String){switch(x){case"destroy":case"stop":var z=k(u).data("cycle.opts");if(!z){return false}u.cycleStop++;if(u.cycleTimeout){clearTimeout(u.cycleTimeout)}u.cycleTimeout=0;z.elements&&k(z.elements).stop();k(u).removeData("cycle.opts");if(x=="destroy"){t(z)}return false;case"toggle":u.cyclePause=(u.cyclePause===1)?0:1;y(u.cyclePause,v,u);o(u);return false;case"pause":u.cyclePause=1;o(u);return false;case"resume":u.cyclePause=0;y(false,v,u);o(u);return false;case"prev":case"next":var z=k(u).data("cycle.opts");if(!z){f('options not found, "prev/next" ignored');return false}k.fn.cycle[x](z);return false;default:x={fx:x}}return x}else{if(x.constructor==Number){var w=x;x=k(u).data("cycle.opts");if(!x){f("options not found, can not advance slide");return false}if(w<0||w>=x.elements.length){f("invalid slide index: "+w);return false}x.nextSlide=w;if(u.cycleTimeout){clearTimeout(u.cycleTimeout);u.cycleTimeout=0}if(typeof v=="string"){x.oneTimeFx=v}e(x.elements,x,1,w>=x.currSlide);return false}}return x;function y(B,C,A){if(!B&&C===true){var D=k(A).data("cycle.opts");if(!D){f("options not found, can not resume");return false}if(A.cycleTimeout){clearTimeout(A.cycleTimeout);A.cycleTimeout=0}e(D.elements,D,1,!D.backwards)}}}function b(u,v){if(!k.support.opacity&&v.cleartype&&u.style.filter){try{u.style.removeAttribute("filter")}catch(w){}}}function t(u){if(u.next){k(u.next).unbind(u.prevNextEvent)}if(u.prev){k(u.prev).unbind(u.prevNextEvent)}if(u.pager||u.pagerAnchorBuilder){k.each(u.pagerAnchors||[],function(){this.unbind().remove()})}u.pagerAnchors=null;if(u.destroy){u.destroy(u)}}function m(D,Q,A,z,K){var I=k.extend({},k.fn.cycle.defaults,z||{},k.metadata?D.metadata():k.meta?D.data():{});var G=k.isFunction(D.data)?D.data(I.metaAttr):null;if(G){I=k.extend(I,G)}if(I.autostop){I.countdown=I.autostopCount||A.length}var v=D[0];D.data("cycle.opts",I);I.$cont=D;I.stopCount=v.cycleStop;I.elements=A;I.before=I.before?[I.before]:[];I.after=I.after?[I.after]:[];if(!k.support.opacity&&I.cleartype){I.after.push(function(){b(this,I)})}if(I.continuous){I.after.push(function(){e(A,I,0,!I.backwards)})}r(I);if(!k.support.opacity&&I.cleartype&&!I.cleartypeNoBg){h(Q)}if(D.css("position")=="static"){D.css("position","relative")}if(I.width){D.width(I.width)}if(I.height&&I.height!="auto"){D.height(I.height)}if(I.startingSlide){I.startingSlide=parseInt(I.startingSlide,10)}else{if(I.backwards){I.startingSlide=A.length-1}}if(I.random){I.randomMap=[];for(var O=0;O<A.length;O++){I.randomMap.push(O)}I.randomMap.sort(function(S,w){return Math.random()-0.5});I.randomIndex=1;I.startingSlide=I.randomMap[1]}else{if(I.startingSlide>=A.length){I.startingSlide=0}}I.currSlide=I.startingSlide||0;var C=I.startingSlide;Q.css({position:"absolute",top:0,left:0}).hide().each(function(w){var S;if(I.backwards){S=C?w<=C?A.length+(w-C):C-w:A.length-w}else{S=C?w>=C?A.length-(w-C):C-w:A.length-w}k(this).css("z-index",S)});k(A[C]).css("opacity",1).show();b(A[C],I);if(I.fit){if(!I.aspect){if(I.width){Q.width(I.width)}if(I.height&&I.height!="auto"){Q.height(I.height)}}else{Q.each(function(){var S=k(this);var w=(I.aspect===true)?S.width()/S.height():I.aspect;if(I.width&&S.width()!=I.width){S.width(I.width);S.height(I.width/w)}if(I.height&&S.height()<I.height){S.height(I.height);S.width(I.height*w)}})}}if(I.center&&((!I.fit)||I.aspect)){Q.each(function(){var w=k(this);w.css({"margin-left":I.width?((I.width-w.width())/2)+"px":0,"margin-top":I.height?((I.height-w.height())/2)+"px":0})})}if(I.center&&!I.fit&&!I.slideResize){Q.each(function(){var w=k(this);w.css({"margin-left":I.width?((I.width-w.width())/2)+"px":0,"margin-top":I.height?((I.height-w.height())/2)+"px":0})})}var J=I.containerResize&&!D.innerHeight();if(J){var B=0,H=0;for(var M=0;M<A.length;M++){var u=k(A[M]),R=u[0],F=u.outerWidth(),P=u.outerHeight();if(!F){F=R.offsetWidth||R.width||u.attr("width")}if(!P){P=R.offsetHeight||R.height||u.attr("height")}B=F>B?F:B;H=P>H?P:H}if(B>0&&H>0){D.css({width:B+"px",height:H+"px"})}}var y=false;if(I.pause){D.hover(function(){y=true;this.cyclePause++;o(v,true)},function(){y&&this.cyclePause--;o(v,true)})}if(c(I)===false){return false}var x=false;z.requeueAttempts=z.requeueAttempts||0;Q.each(function(){var U=k(this);this.cycleH=(I.fit&&I.height)?I.height:(U.height()||this.offsetHeight||this.height||U.attr("height")||0);this.cycleW=(I.fit&&I.width)?I.width:(U.width()||this.offsetWidth||this.width||U.attr("width")||0);if(U.is("img")){var S=(k.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var V=(k.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var T=(k.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var w=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(S||V||T||w){if(K.s&&I.requeueOnImageNotLoaded&&++z.requeueAttempts<100){f(z.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){k(K.s,K.c).cycle(z)},I.requeueTimeout);x=true;return false}else{f("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}}return true});if(x){return false}I.cssBefore=I.cssBefore||{};I.cssAfter=I.cssAfter||{};I.cssFirst=I.cssFirst||{};I.animIn=I.animIn||{};I.animOut=I.animOut||{};Q.not(":eq("+C+")").css(I.cssBefore);k(Q[C]).css(I.cssFirst);if(I.timeout){I.timeout=parseInt(I.timeout,10);if(I.speed.constructor==String){I.speed=k.fx.speeds[I.speed]||parseInt(I.speed,10)}if(!I.sync){I.speed=I.speed/2}var L=I.fx=="none"?0:I.fx=="shuffle"?500:250;while((I.timeout-I.speed)<L){I.timeout+=I.speed}}if(I.easing){I.easeIn=I.easeOut=I.easing}if(!I.speedIn){I.speedIn=I.speed}if(!I.speedOut){I.speedOut=I.speed}I.slideCount=A.length;I.currSlide=I.lastSlide=C;if(I.random){if(++I.randomIndex==A.length){I.randomIndex=0}I.nextSlide=I.randomMap[I.randomIndex]}else{if(I.backwards){I.nextSlide=I.startingSlide==0?(A.length-1):I.startingSlide-1}else{I.nextSlide=I.startingSlide>=(A.length-1)?0:I.startingSlide+1}}if(!I.multiFx){var N=k.fn.cycle.transitions[I.fx];if(k.isFunction(N)){N(D,Q,I)}else{if(I.fx!="custom"&&!I.multiFx){f("unknown transition: "+I.fx,"; slideshow terminating");return false}}}var E=Q[C];if(!I.skipInitializationCallbacks){if(I.before.length){I.before[0].apply(E,[E,E,I,true])}if(I.after.length){I.after[0].apply(E,[E,E,I,true])}}if(I.next){k(I.next).bind(I.prevNextEvent,function(){return s(I,1)})}if(I.prev){k(I.prev).bind(I.prevNextEvent,function(){return s(I,0)})}if(I.pager||I.pagerAnchorBuilder){d(A,I)}l(I,A);return I}function r(u){u.original={before:[],after:[]};u.original.cssBefore=k.extend({},u.cssBefore);u.original.cssAfter=k.extend({},u.cssAfter);u.original.animIn=k.extend({},u.animIn);u.original.animOut=k.extend({},u.animOut);k.each(u.before,function(){u.original.before.push(this)});k.each(u.after,function(){u.original.after.push(this)})}function c(A){var y,w,v=k.fn.cycle.transitions;if(A.fx.indexOf(",")>0){A.multiFx=true;A.fxs=A.fx.replace(/\s*/g,"").split(",");for(y=0;y<A.fxs.length;y++){var z=A.fxs[y];w=v[z];if(!w||!v.hasOwnProperty(z)||!k.isFunction(w)){f("discarding unknown transition: ",z);A.fxs.splice(y,1);y--}}if(!A.fxs.length){f("No valid transitions named; slideshow terminating.");return false}}else{if(A.fx=="all"){A.multiFx=true;A.fxs=[];for(p in v){w=v[p];if(v.hasOwnProperty(p)&&k.isFunction(w)){A.fxs.push(p)}}}}if(A.multiFx&&A.randomizeEffects){var x=Math.floor(Math.random()*20)+30;for(y=0;y<x;y++){var u=Math.floor(Math.random()*A.fxs.length);A.fxs.push(A.fxs.splice(u,1)[0])}a("randomized fx sequence: ",A.fxs)}return true}function l(v,u){v.addSlide=function(x,y){var w=k(x),z=w[0];if(!v.autostopCount){v.countdown++}u[y?"unshift":"push"](z);if(v.els){v.els[y?"unshift":"push"](z)}v.slideCount=u.length;w.css("position","absolute");w[y?"prependTo":"appendTo"](v.$cont);if(y){v.currSlide++;v.nextSlide++}if(!k.support.opacity&&v.cleartype&&!v.cleartypeNoBg){h(w)}if(v.fit&&v.width){w.width(v.width)}if(v.fit&&v.height&&v.height!="auto"){w.height(v.height)}z.cycleH=(v.fit&&v.height)?v.height:w.height();z.cycleW=(v.fit&&v.width)?v.width:w.width();w.css(v.cssBefore);if(v.pager||v.pagerAnchorBuilder){k.fn.cycle.createPagerAnchor(u.length-1,z,k(v.pager),u,v)}if(k.isFunction(v.onAddSlide)){v.onAddSlide(w)}else{w.hide()}}}k.fn.cycle.resetState=function(v,u){u=u||v.fx;v.before=[];v.after=[];v.cssBefore=k.extend({},v.original.cssBefore);v.cssAfter=k.extend({},v.original.cssAfter);v.animIn=k.extend({},v.original.animIn);v.animOut=k.extend({},v.original.animOut);v.fxFn=null;k.each(v.original.before,function(){v.before.push(this)});k.each(v.original.after,function(){v.after.push(this)});var w=k.fn.cycle.transitions[u];if(k.isFunction(w)){w(v.$cont,k(v.elements),v)}};function e(B,u,A,D){if(A&&u.busy&&u.manualTrump){a("manualTrump in go(), stopping active transition");k(B).stop(true,true);u.busy=0}if(u.busy){a("transition active, ignoring new tx request");return}var y=u.$cont[0],F=B[u.currSlide],E=B[u.nextSlide];if(y.cycleStop!=u.stopCount||y.cycleTimeout===0&&!A){return}if(!A&&!y.cyclePause&&!u.bounce&&((u.autostop&&(--u.countdown<=0))||(u.nowrap&&!u.random&&u.nextSlide<u.currSlide))){if(u.end){u.end(u)}return}var C=false;if((A||!y.cyclePause)&&(u.nextSlide!=u.currSlide)){C=true;var z=u.fx;F.cycleH=F.cycleH||k(F).height();F.cycleW=F.cycleW||k(F).width();E.cycleH=E.cycleH||k(E).height();E.cycleW=E.cycleW||k(E).width();if(u.multiFx){if(D&&(u.lastFx==undefined||++u.lastFx>=u.fxs.length)){u.lastFx=0}else{if(!D&&(u.lastFx==undefined||--u.lastFx<0)){u.lastFx=u.fxs.length-1}}z=u.fxs[u.lastFx]}if(u.oneTimeFx){z=u.oneTimeFx;u.oneTimeFx=null}k.fn.cycle.resetState(u,z);if(u.before.length){k.each(u.before,function(G,H){if(y.cycleStop!=u.stopCount){return}H.apply(E,[F,E,u,D])})}var w=function(){u.busy=0;k.each(u.after,function(G,H){if(y.cycleStop!=u.stopCount){return}H.apply(E,[F,E,u,D])})};a("tx firing("+z+"); currSlide: "+u.currSlide+"; nextSlide: "+u.nextSlide);u.busy=1;if(u.fxFn){u.fxFn(F,E,u,w,D,A&&u.fastOnEvent)}else{if(k.isFunction(k.fn.cycle[u.fx])){k.fn.cycle[u.fx](F,E,u,w,D,A&&u.fastOnEvent)}else{k.fn.cycle.custom(F,E,u,w,D,A&&u.fastOnEvent)}}}if(C||u.nextSlide==u.currSlide){u.lastSlide=u.currSlide;if(u.random){u.currSlide=u.nextSlide;if(++u.randomIndex==B.length){u.randomIndex=0}u.nextSlide=u.randomMap[u.randomIndex];if(u.nextSlide==u.currSlide){u.nextSlide=(u.currSlide==u.slideCount-1)?0:u.currSlide+1}}else{if(u.backwards){var x=(u.nextSlide-1)<0;if(x&&u.bounce){u.backwards=!u.backwards;u.nextSlide=1;u.currSlide=0}else{u.nextSlide=x?(B.length-1):u.nextSlide-1;u.currSlide=x?0:u.nextSlide+1}}else{var x=(u.nextSlide+1)==B.length;if(x&&u.bounce){u.backwards=!u.backwards;u.nextSlide=B.length-2;u.currSlide=B.length-1}else{u.nextSlide=x?0:u.nextSlide+1;u.currSlide=x?B.length-1:u.nextSlide-1}}}}if(C&&u.pager){u.updateActivePagerLink(u.pager,u.currSlide,u.activePagerClass)}var v=0;if(u.timeout&&!u.continuous){v=j(B[u.currSlide],B[u.nextSlide],u,D)}else{if(u.continuous&&y.cyclePause){v=10}}if(v>0){y.cycleTimeout=setTimeout(function(){e(B,u,0,!u.backwards)},v)}}k.fn.cycle.updateActivePagerLink=function(u,w,v){k(u).each(function(){k(this).children().removeClass(v).eq(w).addClass(v)})};function j(y,w,x,v){if(x.timeoutFn){var u=x.timeoutFn.call(y,y,w,x,v);while(x.fx!="none"&&(u-x.speed)<250){u+=x.speed}a("calculated timeout: "+u+"; speed: "+x.speed);if(u!==false){return u}}return x.timeout}k.fn.cycle.next=function(u){s(u,1)};k.fn.cycle.prev=function(u){s(u,0)};function s(x,w){var A=w?1:-1;var v=x.elements;var z=x.$cont[0],y=z.cycleTimeout;if(y){clearTimeout(y);z.cycleTimeout=0}if(x.random&&A<0){x.randomIndex--;if(--x.randomIndex==-2){x.randomIndex=v.length-2}else{if(x.randomIndex==-1){x.randomIndex=v.length-1}}x.nextSlide=x.randomMap[x.randomIndex]}else{if(x.random){x.nextSlide=x.randomMap[x.randomIndex]}else{x.nextSlide=x.currSlide+A;if(x.nextSlide<0){if(x.nowrap){return false}x.nextSlide=v.length-1}else{if(x.nextSlide>=v.length){if(x.nowrap){return false}x.nextSlide=0}}}}var u=x.onPrevNextEvent||x.prevNextClick;if(k.isFunction(u)){u(A>0,x.nextSlide,v[x.nextSlide])}e(v,x,1,w);return false}function d(v,w){var u=k(w.pager);k.each(v,function(x,y){k.fn.cycle.createPagerAnchor(x,y,u,v,w)});w.updateActivePagerLink(w.pager,w.startingSlide,w.activePagerClass)}k.fn.cycle.createPagerAnchor=function(z,w,B,y,v){var C;if(k.isFunction(v.pagerAnchorBuilder)){C=v.pagerAnchorBuilder(z,w);a("pagerAnchorBuilder("+z+", el) returned: "+C)}else{C='<a href="#">'+(z+1)+"</a>"}if(!C){return}var x=k(C);if(x.parents("body").length===0){var A=[];if(B.length>1){B.each(function(){var E=x.clone(true);k(this).append(E);A.push(E[0])});x=k(A)}else{x.appendTo(B)}}v.pagerAnchors=v.pagerAnchors||[];v.pagerAnchors.push(x);x.bind(v.pagerEvent,function(H){H.preventDefault();v.nextSlide=z;var G=v.$cont[0],F=G.cycleTimeout;if(F){clearTimeout(F);G.cycleTimeout=0}var E=v.onPagerEvent||v.pagerClick;if(k.isFunction(E)){E(v.nextSlide,y[v.nextSlide])}e(y,v,1,v.currSlide<z)});if(!/^click/.test(v.pagerEvent)&&!v.allowPagerClickBubble){x.bind("click.cycle",function(){return false})}var D=v.$cont[0];var u=false;if(v.pauseOnPagerHover){x.hover(function(){u=true;D.cyclePause++;o(D,true,true)},function(){u&&D.cyclePause--;o(D,true,true)})}};k.fn.cycle.hopsFromLast=function(x,w){var v,u=x.lastSlide,y=x.currSlide;if(w){v=y>u?y-u:x.slideCount-u}else{v=y<u?u-y:u+x.slideCount-y}return v};function h(w){a("applying clearType background-color hack");function v(x){x=parseInt(x,10).toString(16);return x.length<2?"0"+x:x}function u(z){for(;z&&z.nodeName.toLowerCase()!="html";z=z.parentNode){var x=k.css(z,"background-color");if(x&&x.indexOf("rgb")>=0){var y=x.match(/\d+/g);return"#"+v(y[0])+v(y[1])+v(y[2])}if(x&&x!="transparent"){return x}}return"#ffffff"}w.each(function(){k(this).css("background-color",u(this))})}k.fn.cycle.commonReset=function(A,y,z,v,x,u){k(z.elements).not(A).hide();if(typeof z.cssBefore.opacity=="undefined"){z.cssBefore.opacity=1}z.cssBefore.display="block";if(z.slideResize&&v!==false&&y.cycleW>0){z.cssBefore.width=y.cycleW}if(z.slideResize&&x!==false&&y.cycleH>0){z.cssBefore.height=y.cycleH}z.cssAfter=z.cssAfter||{};z.cssAfter.display="none";k(A).css("zIndex",z.slideCount+(u===true?1:0));k(y).css("zIndex",z.slideCount+(u===true?0:1))};k.fn.cycle.custom=function(G,A,u,x,z,v){var F=k(G),B=k(A);var w=u.speedIn,E=u.speedOut,y=u.easeIn,D=u.easeOut;B.css(u.cssBefore);if(v){if(typeof v=="number"){w=E=v}else{w=E=1}y=D=null}var C=function(){B.animate(u.animIn,w,y,function(){x()})};F.animate(u.animOut,E,D,function(){F.css(u.cssAfter);if(!u.sync){C()}});if(u.sync){C()}};k.fn.cycle.transitions={fade:function(v,w,u){w.not(":eq("+u.currSlide+")").css("opacity",0);u.before.push(function(z,x,y){k.fn.cycle.commonReset(z,x,y);y.cssBefore.opacity=0});u.animIn={opacity:1};u.animOut={opacity:0};u.cssBefore={top:0,left:0}}};k.fn.cycle.ver=function(){return n};k.fn.cycle.defaults={activePagerClass:"activeSlide",after:null,allowPagerClickBubble:false,animIn:null,animOut:null,aspect:false,autostop:0,autostopCount:0,backwards:false,before:null,center:null,cleartype:!k.support.opacity,cleartypeNoBg:false,containerResize:1,continuous:0,cssAfter:null,cssBefore:null,delay:0,easeIn:null,easeOut:null,easing:null,end:null,fastOnEvent:0,fit:0,fx:"fade",fxFn:null,height:"auto",manualTrump:true,metaAttr:"cycle",next:null,nowrap:0,onPagerEvent:null,onPrevNextEvent:null,pager:null,pagerAnchorBuilder:null,pagerEvent:"click.cycle",pause:0,pauseOnPagerHover:0,prev:null,prevNextEvent:"click.cycle",random:0,randomizeEffects:1,requeueOnImageNotLoaded:true,requeueTimeout:250,rev:0,shuffle:null,skipInitializationCallbacks:false,slideExpr:null,slideResize:1,speed:1000,speedIn:null,speedOut:null,startingSlide:0,sync:1,timeout:4000,timeoutFn:null,updateActivePagerLink:null,width:null}})(jQuery);
/*!
 * jQuery Cycle Plugin Transition Definitions
 * This script is a plugin for the jQuery Cycle Plugin
 * Examples and documentation at: http://malsup.com/jquery/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version:	 2.73
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function(a){a.fn.cycle.transitions.none=function(c,d,b){b.fxFn=function(h,e,f,j){a(e).show();a(h).hide();j()}};a.fn.cycle.transitions.fadeout=function(c,d,b){d.not(":eq("+b.currSlide+")").css({display:"block",opacity:1});b.before.push(function(m,k,l,f,j,e){a(m).css("zIndex",l.slideCount+(!e===true?1:0));a(k).css("zIndex",l.slideCount+(!e===true?0:1))});b.animIn.opacity=1;b.animOut.opacity=0;b.cssBefore.opacity=1;b.cssBefore.display="block";b.cssAfter.zIndex=0};a.fn.cycle.transitions.scrollUp=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.height();c.cssBefore.top=b;c.cssBefore.left=0;c.cssFirst.top=0;c.animIn.top=0;c.animOut.top=-b};a.fn.cycle.transitions.scrollDown=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.height();c.cssFirst.top=0;c.cssBefore.top=-b;c.cssBefore.left=0;c.animIn.top=0;c.animOut.top=b};a.fn.cycle.transitions.scrollLeft=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.width();c.cssFirst.left=0;c.cssBefore.left=b;c.cssBefore.top=0;c.animIn.left=0;c.animOut.left=0-b};a.fn.cycle.transitions.scrollRight=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.width();c.cssFirst.left=0;c.cssBefore.left=-b;c.cssBefore.top=0;c.animIn.left=0;c.animOut.left=b};a.fn.cycle.transitions.scrollHorz=function(c,d,b){c.css("overflow","hidden").width();b.before.push(function(j,f,h,e){if(h.rev){e=!e}a.fn.cycle.commonReset(j,f,h);h.cssBefore.left=e?(f.cycleW-1):(1-f.cycleW);h.animOut.left=e?-j.cycleW:j.cycleW});b.cssFirst.left=0;b.cssBefore.top=0;b.animIn.left=0;b.animOut.top=0};a.fn.cycle.transitions.scrollVert=function(c,d,b){c.css("overflow","hidden");b.before.push(function(j,f,h,e){if(h.rev){e=!e}a.fn.cycle.commonReset(j,f,h);h.cssBefore.top=e?(1-f.cycleH):(f.cycleH-1);h.animOut.top=e?j.cycleH:-j.cycleH});b.cssFirst.top=0;b.cssBefore.left=0;b.animIn.top=0;b.animOut.left=0};a.fn.cycle.transitions.slideX=function(c,d,b){b.before.push(function(h,e,f){a(f.elements).not(h).hide();a.fn.cycle.commonReset(h,e,f,false,true);f.animIn.width=e.cycleW});b.cssBefore.left=0;b.cssBefore.top=0;b.cssBefore.width=0;b.animIn.width="show";b.animOut.width=0};a.fn.cycle.transitions.slideY=function(c,d,b){b.before.push(function(h,e,f){a(f.elements).not(h).hide();a.fn.cycle.commonReset(h,e,f,true,false);f.animIn.height=e.cycleH});b.cssBefore.left=0;b.cssBefore.top=0;b.cssBefore.height=0;b.animIn.height="show";b.animOut.height=0};a.fn.cycle.transitions.shuffle=function(e,f,d){var c,b=e.css("overflow","visible").width();f.css({left:0,top:0});d.before.push(function(k,h,j){a.fn.cycle.commonReset(k,h,j,true,true,true)});if(!d.speedAdjusted){d.speed=d.speed/2;d.speedAdjusted=true}d.random=0;d.shuffle=d.shuffle||{left:-b,top:15};d.els=[];for(c=0;c<f.length;c++){d.els.push(f[c])}for(c=0;c<d.currSlide;c++){d.els.push(d.els.shift())}d.fxFn=function(o,l,n,h,k){if(n.rev){k=!k}var j=k?a(o):a(l);a(l).css(n.cssBefore);var m=n.slideCount;j.animate(n.shuffle,n.speedIn,n.easeIn,function(){var r=a.fn.cycle.hopsFromLast(n,k);for(var s=0;s<r;s++){k?n.els.push(n.els.shift()):n.els.unshift(n.els.pop())}if(k){for(var t=0,q=n.els.length;t<q;t++){a(n.els[t]).css("z-index",q-t+m)}}else{var u=a(o).css("z-index");j.css("z-index",parseInt(u,10)+1+m)}j.animate({left:0,top:0},n.speedOut,n.easeOut,function(){a(k?this:o).hide();if(h){h()}})})};a.extend(d.cssBefore,{display:"block",opacity:1,top:0,left:0})};a.fn.cycle.transitions.turnUp=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,true,false);f.cssBefore.top=e.cycleH;f.animIn.height=e.cycleH;f.animOut.width=e.cycleW});b.cssFirst.top=0;b.cssBefore.left=0;b.cssBefore.height=0;b.animIn.top=0;b.animOut.height=0};a.fn.cycle.transitions.turnDown=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,true,false);f.animIn.height=e.cycleH;f.animOut.top=h.cycleH});b.cssFirst.top=0;b.cssBefore.left=0;b.cssBefore.top=0;b.cssBefore.height=0;b.animOut.height=0};a.fn.cycle.transitions.turnLeft=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,false,true);f.cssBefore.left=e.cycleW;f.animIn.width=e.cycleW});b.cssBefore.top=0;b.cssBefore.width=0;b.animIn.left=0;b.animOut.width=0};a.fn.cycle.transitions.turnRight=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,false,true);f.animIn.width=e.cycleW;f.animOut.left=h.cycleW});a.extend(b.cssBefore,{top:0,left:0,width:0});b.animIn.left=0;b.animOut.width=0};a.fn.cycle.transitions.zoom=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,false,false,true);f.cssBefore.top=e.cycleH/2;f.cssBefore.left=e.cycleW/2;a.extend(f.animIn,{top:0,left:0,width:e.cycleW,height:e.cycleH});a.extend(f.animOut,{width:0,height:0,top:h.cycleH/2,left:h.cycleW/2})});b.cssFirst.top=0;b.cssFirst.left=0;b.cssBefore.width=0;b.cssBefore.height=0};a.fn.cycle.transitions.fadeZoom=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,false,false);f.cssBefore.left=e.cycleW/2;f.cssBefore.top=e.cycleH/2;a.extend(f.animIn,{top:0,left:0,width:e.cycleW,height:e.cycleH})});b.cssBefore.width=0;b.cssBefore.height=0;b.animOut.opacity=0};a.fn.cycle.transitions.blindX=function(d,e,c){var b=d.css("overflow","hidden").width();c.before.push(function(j,f,h){a.fn.cycle.commonReset(j,f,h);h.animIn.width=f.cycleW;h.animOut.left=j.cycleW});c.cssBefore.left=b;c.cssBefore.top=0;c.animIn.left=0;c.animOut.left=b};a.fn.cycle.transitions.blindY=function(d,e,c){var b=d.css("overflow","hidden").height();c.before.push(function(j,f,h){a.fn.cycle.commonReset(j,f,h);h.animIn.height=f.cycleH;h.animOut.top=j.cycleH});c.cssBefore.top=b;c.cssBefore.left=0;c.animIn.top=0;c.animOut.top=b};a.fn.cycle.transitions.blindZ=function(e,f,d){var c=e.css("overflow","hidden").height();var b=e.width();d.before.push(function(k,h,j){a.fn.cycle.commonReset(k,h,j);j.animIn.height=h.cycleH;j.animOut.top=k.cycleH});d.cssBefore.top=c;d.cssBefore.left=b;d.animIn.top=0;d.animIn.left=0;d.animOut.top=c;d.animOut.left=b};a.fn.cycle.transitions.growX=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,false,true);f.cssBefore.left=this.cycleW/2;f.animIn.left=0;f.animIn.width=this.cycleW;f.animOut.left=0});b.cssBefore.top=0;b.cssBefore.width=0};a.fn.cycle.transitions.growY=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,true,false);f.cssBefore.top=this.cycleH/2;f.animIn.top=0;f.animIn.height=this.cycleH;f.animOut.top=0});b.cssBefore.height=0;b.cssBefore.left=0};a.fn.cycle.transitions.curtainX=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,false,true,true);f.cssBefore.left=e.cycleW/2;f.animIn.left=0;f.animIn.width=this.cycleW;f.animOut.left=h.cycleW/2;f.animOut.width=0});b.cssBefore.top=0;b.cssBefore.width=0};a.fn.cycle.transitions.curtainY=function(c,d,b){b.before.push(function(h,e,f){a.fn.cycle.commonReset(h,e,f,true,false,true);f.cssBefore.top=e.cycleH/2;f.animIn.top=0;f.animIn.height=e.cycleH;f.animOut.top=h.cycleH/2;f.animOut.height=0});b.cssBefore.height=0;b.cssBefore.left=0};a.fn.cycle.transitions.cover=function(f,j,e){var k=e.direction||"left";var b=f.css("overflow","hidden").width();var c=f.height();e.before.push(function(l,d,h){a.fn.cycle.commonReset(l,d,h);if(k=="right"){h.cssBefore.left=-b}else{if(k=="up"){h.cssBefore.top=c}else{if(k=="down"){h.cssBefore.top=-c}else{h.cssBefore.left=b}}}});e.animIn.left=0;e.animIn.top=0;e.cssBefore.top=0;e.cssBefore.left=0};a.fn.cycle.transitions.uncover=function(f,j,e){var k=e.direction||"left";var b=f.css("overflow","hidden").width();var c=f.height();e.before.push(function(l,d,h){a.fn.cycle.commonReset(l,d,h,true,true,true);if(k=="right"){h.animOut.left=b}else{if(k=="up"){h.animOut.top=-c}else{if(k=="down"){h.animOut.top=c}else{h.animOut.left=-b}}}});e.animIn.left=0;e.animIn.top=0;e.cssBefore.top=0;e.cssBefore.left=0};a.fn.cycle.transitions.toss=function(e,f,d){var b=e.css("overflow","visible").width();var c=e.height();d.before.push(function(k,h,j){a.fn.cycle.commonReset(k,h,j,true,true,true);if(!j.animOut.left&&!j.animOut.top){a.extend(j.animOut,{left:b*2,top:-c/2,opacity:0})}else{j.animOut.opacity=0}});d.cssBefore.left=0;d.cssBefore.top=0;d.animIn.left=0};a.fn.cycle.transitions.wipe=function(v,o,e){var u=v.css("overflow","hidden").width();var m=v.height();e.cssBefore=e.cssBefore||{};var j;if(e.clip){if(/l2r/.test(e.clip)){j="rect(0px 0px "+m+"px 0px)"}else{if(/r2l/.test(e.clip)){j="rect(0px "+u+"px "+m+"px "+u+"px)"}else{if(/t2b/.test(e.clip)){j="rect(0px "+u+"px 0px 0px)"}else{if(/b2t/.test(e.clip)){j="rect("+m+"px "+u+"px "+m+"px 0px)"}else{if(/zoom/.test(e.clip)){var s=parseInt(m/2,10);var f=parseInt(u/2,10);j="rect("+s+"px "+f+"px "+s+"px "+f+"px)"}}}}}}e.cssBefore.clip=e.cssBefore.clip||j||"rect(0px 0px 0px 0px)";var n=e.cssBefore.clip.match(/(\d+)/g);var x=parseInt(n[0],10),c=parseInt(n[1],10),q=parseInt(n[2],10),k=parseInt(n[3],10);e.before.push(function(y,h,t){if(y==h){return}var d=a(y),b=a(h);a.fn.cycle.commonReset(y,h,t,true,true,false);t.cssAfter.display="block";var r=1,l=parseInt((t.speedIn/13),10)-1;(function w(){var A=x?x-parseInt(r*(x/l),10):0;var B=k?k-parseInt(r*(k/l),10):0;var C=q<m?q+parseInt(r*((m-q)/l||1),10):m;var z=c<u?c+parseInt(r*((u-c)/l||1),10):u;b.css({clip:"rect("+A+"px "+z+"px "+C+"px "+B+"px)"});(r++<=l)?setTimeout(w,13):d.css("display","none")})()});a.extend(e.cssBefore,{display:"block",opacity:1,top:0,left:0});e.animIn={left:0};e.animOut={left:0}}})(jQuery);$(window).load(function(){var a=document.createElement("canvas");if(a.getContext){$(".greyscale img").each(function(){var b=$(this);b.css({position:"absolute"}).wrap("<div class='img_wrapper' style='display: inline-block'>").clone().addClass("img_grayscale").css({position:"absolute","z-index":"998",opacity:"0"}).insertBefore(b).queue(function(){var c=$(this);c.parent().css({width:this.width,height:this.height});c.dequeue()});this.src=grayscale(this.src)})}$(".greyscale img").mouseover(function(){if(!$(this).parent().parent().hasClass("selected")){$(this).parent().find("img:first").stop().animate({opacity:1},500)}});$(".img_grayscale").mouseout(function(){if(!$(this).parent().parent().hasClass("selected")){$(this).stop().animate({opacity:0},500)}})});function grayscale(a){var c=document.createElement("canvas");if(c.getContext){var k=c.getContext("2d");var d=new Image();d.src=a;c.width=d.width;c.height=d.height;k.drawImage(d,0,0);var b=k.getImageData(0,0,c.width,c.height);for(var h=0;h<b.height;h++){for(var j=0;j<b.width;j++){var e=(h*4)*b.width+j*4;var f=(b.data[e]+b.data[e+1]+b.data[e+2])/3;b.data[e]=f;b.data[e+1]=f;b.data[e+2]=f}}k.putImageData(b,0,0,0,0,b.width,b.height);return c.toDataURL()}}(function(d){var A=0;var n=0;var h=0;var k=0;var f=10;var m=0;var j="ontouchstart" in window;var c="onorientationchange" in window;var o=false;var r=false;var q=false;var l=false;var D=false;var s=false;var y="pointer";var C="pointer";var v=new Array();var t=new Array();var a=new Array();var b=new Array();var z=new Array();var e=new Array();var w=new Array();var x=new Array();var u={showScrollbar:function(E,F){if(E.scrollbarHide){d("."+F).css({opacity:E.scrollbarOpacity,filter:"alpha(opacity:"+(E.scrollbarOpacity*100)+")"})}},hideScrollbar:function(G,H,I,E,F,N,M,O,L,K){if(G.scrollbar&&G.scrollbarHide){for(var J=I;J<I+25;J++){H[H.length]=u.hideScrollbarIntervalTimer(f*J,E[I],((I+24)-J)/24,F,N,M,O,L,K,G)}}},hideScrollbarInterval:function(I,K,E,L,J,M,H,G,F){m=(I*-1)/(E)*(M-H-G-J);u.setSliderOffset("."+L,m);d("."+L).css({opacity:F.scrollbarOpacity*K,filter:"alpha(opacity:"+(F.scrollbarOpacity*K*100)+")"})},slowScrollHorizontalInterval:function(J,P,H,S,Q,T,I,O,N,M,U,R,L,F,E,K){newChildOffset=u.calcActiveOffset(K,P,0,U,H,T,L,M);if((newChildOffset!=w[E])&&(K.onSlideChange!="")){K.onSlideChange(new u.args(K,J,d(J).children(":eq("+M+")"),M%L))}w[E]=newChildOffset;P=Math.floor(P);u.setSliderOffset(J,P);if(K.scrollbar){m=Math.floor((P*-1)/(H)*(I-O-Q));var G=Q-N;if(P>=n){G=Q-N-(m*-1);u.setSliderOffset(d("."+S),0);d("."+S).css({width:G+"px"})}else{if(P<=((H*-1)+1)){G=I-O-N-m;u.setSliderOffset(d("."+S),m);d("."+S).css({width:G+"px"})}else{u.setSliderOffset(d("."+S),m);d("."+S).css({width:G+"px"})}}}},slowScrollHorizontal:function(V,M,T,W,O,Q,ad,ae,Z,ab,ag,N,G,J,S,X,R,ac){var af=new Array();var E=u.getSliderOffset(V,"x");var L=0;var F=25/1024*ae;var U=false;frictionCoefficient=ac.frictionCoefficient;elasticFrictionCoefficient=ac.elasticFrictionCoefficient;snapFrictionCoefficient=ac.snapFrictionCoefficient;snapToChildren=ac.snapToChildren;if((O>5)&&snapToChildren){L=1}else{if((O<-5)&&snapToChildren){L=-1}}if(O<(F*-1)){O=F*-1}else{if(O>F){O=F}}if(!(d(V)[0]===d(R)[0])){L=L*-1;O=O*-2}var H=u.getAnimationSteps(ac,O,E,T,n,N);var ah=u.calcActiveOffset(ac,H[H.length-1],L,N,T,ae,J,w[G]);if(ac.infiniteSlider){if(N[ah]>(N[X+1]+ae)){ah=ah+X}if(N[ah]<(N[(X*2-1)]-ae)){ah=ah-X}}if(((H[H.length-1]<N[ah])&&(L<0))||((H[H.length-1]>N[ah])&&(L>0))||(!snapToChildren)){while((O>1)||(O<-1)){O=O*frictionCoefficient;E=E+O;if((E>n)||(E<(T*-1))){O=O*elasticFrictionCoefficient;E=E+O}af[af.length]=E}}if(snapToChildren||(E>n)||(E<(T*-1))){while((E<(N[ah]-0.5))||(E>(N[ah]+0.5))){E=((E-(N[ah]))*snapFrictionCoefficient)+(N[ah]);af[af.length]=E}af[af.length]=N[ah]}var P=1;if((af.length%2)!=0){P=0}var aa=0;var I=0;if(ac.infiniteSlider){ah=(ah%X)+X}for(var Y=0;Y<M.length;Y++){clearTimeout(M[Y])}var K=0;for(var Y=P;Y<af.length;Y=Y+2){if(ac.infiniteSlider){if(af[Y]<(N[(X*2)]+ae)){af[Y]=af[Y]-(N[X])}}if((Y==P)||(Math.abs(af[Y]-K)>1)||(Y>=(af.length-2))){K=af[Y];M[M.length]=u.slowScrollHorizontalIntervalTimer(f*Y,V,af[Y],T,W,ad,ae,Z,ab,ag,ah,N,S,J,X,G,ac)}}M[M.length]=u.onSlideCompleteTimer(f*(Y+1),ac,V,d(V).children(":eq("+ah+")"),ah%J,G);e[G]=M;u.hideScrollbar(ac,M,Y,af,T,W,ad,ae,ab,ag)},onSlideComplete:function(F,H,G,I,E){if((v[E]!=I)&&(F.onSlideComplete!="")){F.onSlideComplete(new u.args(F,d(H),G,I))}v[E]=I},getSliderOffset:function(F,H){var G=0;if(H=="x"){H=4}else{H=5}if(j&&o){var E=d(F).css("-webkit-transform").split(",");G=parseInt(E[H],10)}else{G=parseInt(d(F).css("left"),10)}return G},setSliderOffset:function(E,F){if(j&&o){d(E).css({webkitTransform:"matrix(1,0,0,1,"+F+",0)"})}else{d(E).css({left:F+"px"})}},setBrowserInfo:function(){if(navigator.userAgent.match("WebKit")!=null){o=true;y="-webkit-grab";C="-webkit-grabbing"}else{if(navigator.userAgent.match("Gecko")!=null){s=true;y="move";C="-moz-grabbing"}else{if(navigator.userAgent.match("MSIE 7")!=null){r=true;D=true}else{if(navigator.userAgent.match("MSIE 8")!=null){q=true;D=true}else{if(navigator.userAgent.match("MSIE 9")!=null){l=true;D=true}}}}}},getAnimationSteps:function(H,F,G,K,E,J){var I=new Array();if((F<=1)&&(F>=0)){F=-2}else{if((F>=-1)&&(F<=0)){F=2}}while((F>1)||(F<-1)){F=F*H.frictionCoefficient;G=G+F;if((G>E)||(G<(K*-1))){F=F*H.elasticFrictionCoefficient;G=G+F}I[I.length]=G}activeChildOffset=0;return I},calcActiveOffset:function(G,N,P,S,F,Q,H,I){var M=false;var L=new Array();var K;for(var O=0;O<S.length;O++){if((S[O]<=N)&&(S[O]>(N-Q))){if(!M&&(S[O]!=N)){L[L.length]=S[O-1]}L[L.length]=S[O];M=true}}if(L.length==0){L[0]=S[S.length-1]}var E=Q;var J=0;for(var O=0;O<L.length;O++){var R=Math.abs(N-L[O]);if(R<E){J=L[O];E=R}}for(var O=0;O<S.length;O++){if(J==S[O]){K=O}}if((P<0)&&(K%H==I%H)){K=I+1;if(K>=S.length){K=S.length-1}}else{if((P>0)&&(K%H==I%H)){K=I-1;if(K<0){K=0}}}return K},changeSlide:function(E,P,J,N,Q,Z,ac,X,Y,ad,K,aa,H,M,R,ab){u.autoSlidePause(aa);for(var S=0;S<J.length;S++){clearTimeout(J[S])}var W=Math.ceil(ab.autoSlideTransTimer/10)+1;var U=u.getSliderOffset(P,"x");if(ab.infiniteSlider){if((U>(K[R+1]+ac))&&(E==(R*2-2))){U=U-M}}var G=K[E];var O=G-U;var F=new Array();var L;var V;u.showScrollbar(ab,Q);for(var T=0;T<=W;T++){L=T;L/=W;L--;V=U+O*(Math.pow(L,5)+1);if(ab.infiniteSlider){if(V>(K[R+1]+ac)){V=V-M}if(V<(K[R*2-1]-ac)){V=V+M}}F[F.length]=V}if(ab.infiniteSlider){E=(E%R)+R}var I=0;for(var T=0;T<F.length;T++){if(ab.infiniteSlider){if(F[T]<(K[(R*2)]+ac)){F[T]=F[T]-(K[R])}}if((T==0)||(Math.abs(F[T]-I)>1)||(T>=(F.length-2))){I=F[T];J[T]=u.slowScrollHorizontalIntervalTimer(f*(T+1),P,F[T],N,Q,Z,ac,X,Y,ad,E,K,M,H,R,aa,ab)}if((T==0)&&(ab.onSlideStart!="")){ab.onSlideStart(new u.args(ab,P,d(P).children(":eq("+E+")"),E%H))}}if(O!=0){J[J.length]=u.onSlideCompleteTimer(f*(T+1),ab,P,d(P).children(":eq("+E+")"),E%H,aa)}e[aa]=J;u.hideScrollbar(ab,J,T,F,N,Q,Z,ac,Y,ad);u.autoSlide(P,J,N,Q,Z,ac,X,Y,ad,K,aa,H,M,R,ab)},autoSlide:function(N,K,G,Q,O,R,H,M,L,S,E,J,P,F,I){if(!I.autoSlide){return false}u.autoSlidePause(E);t[E]=setTimeout(function(){if(!I.infiniteSlider&&(w[E]>S.length-1)){w[E]=w[E]-F}var T=I.infiniteSlider?w[E]+1:(w[E]+1)%F;u.changeSlide(T,N,K,G,Q,O,R,H,M,L,S,E,J,P,F,I);u.autoSlide(N,K,G,Q,O,R,H,M,L,S,E,J,P,F,I)},I.autoSlideTimer+I.autoSlideTransTimer)},autoSlidePause:function(E){clearTimeout(t[E])},isUnselectable:function(F,E){if(E.unselectableSelector!=""){if(d(F).closest(E.unselectableSelector).size()==1){return true}}return false},slowScrollHorizontalIntervalTimer:function(H,N,G,L,O,S,U,Q,R,V,E,J,K,I,P,F,T){var M=setTimeout(function(){u.slowScrollHorizontalInterval(N,G,L,O,S,U,Q,R,V,E,J,K,I,P,F,T)},H);return M},onSlideCompleteTimer:function(H,I,K,J,E,G){var F=setTimeout(function(){u.onSlideComplete(I,K,J,E,G)},H);return F},hideScrollbarIntervalTimer:function(M,I,K,E,L,J,N,H,G,F){var O=setTimeout(function(){u.hideScrollbarInterval(I,K,E,L,J,N,H,G,F)},M);return O},args:function(F,G,E,H){this.settings=F;this.data=d(G).parent().data("iosslider");this.sliderObject=G;this.sliderContainerObject=d(G).parent();this.currentSlideObject=E;this.currentSlideNumber=H;this.currentSliderOffset=u.getSliderOffset(G,"x")*-1},preventDrag:function(E){E.preventDefault()},preventClick:function(E){E.stopImmediatePropagation();return false},enableClick:function(){return true}};u.setBrowserInfo();var B={init:function(E,G){var F=d.extend(true,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:false,startAtSlide:1,scrollbar:false,scrollbarDrag:false,scrollbarHide:true,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:false,keyboardControls:false,responsiveSlideContainer:true,responsiveSlides:true,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:false,autoSlideTimer:5000,autoSlideTransTimer:750,infiniteSlider:false,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},sliderCSS:{overflow:"hidden"},unselectableSelector:"",onSliderLoaded:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},E);if(G==undefined){G=this}return d(G).each(function(aF){A++;var Q=A;var H=new Array();b[Q]=F;var ap;var av=0;var aw=new Array(0,0);var P=new Array(0,0);var ax="scrollbarBlock"+A;var ag="scrollbar"+A;var aC;var ac;var S;var M;var Z;var aE;var ab=d(this);var J;var ak;var W;var am;var ao;var af;w[Q]=F.startAtSlide-1;var at=-1;var K=new Array();var an;var R=0;var aq=0;var al=0;var U=0;var Y=d(this).children(":first-child");var aJ;var ae=d(Y).children().not("script").size();var T=false;var ai=0;var ad=false;var aj=undefined;var N=0;var ay;var aa=ae;var ah=true;v[Q]=-1;var L=false;a[Q]=ab;z[Q]=false;var au;var I=-1;var aK=false;x[Q]=false;e[Q]=new Array();if(F.scrollbarDrag){F.scrollbar=true;F.scrollbarHide=false}var V=d(this);var aI=V.data("iosslider");if(aI!=undefined){return true}d(this).find("img").bind("dragstart.iosSliderEvent",function(aL){aL.preventDefault()});if(F.infiniteSlider){F.scrollbar=false;d(Y).children().clone(true,true).prependTo(Y).clone(true,true).appendTo(Y);aa=ae}if(F.scrollbar){if(F.scrollbarContainer!=""){d(F.scrollbarContainer).append("<div class = '"+ax+"'><div class = '"+ag+"'></div></div>")}else{d(Y).parent().append("<div class = '"+ax+"'><div class = '"+ag+"'></div></div>")}}if(!aD()){return true}if(F.infiniteSlider){w[Q]=w[Q]+aa;u.setSliderOffset(Y,an[w[Q]])}d(this).find("a").bind("mousedown",u.preventDrag);d(this).find("[onclick]").bind("click",u.preventDrag).each(function(){d(this).data("onclick",this.onclick)});if(F.onSliderLoaded!=""){F.onSliderLoaded(new u.args(F,Y,d(Y).children(":eq("+w[Q]+")"),w[Q]%aa))}v[Q]=w[Q]%aa;function aD(){u.autoSlidePause(Q);d(ab).css("width","");d(ab).css("height","");d(Y).css("width","");aJ=d(Y).children().not("script");d(aJ).css("width","");ap=0;an=new Array();Z=d(ab).parent().width();J=d(ab).outerWidth(true);if(F.responsiveSlideContainer){J=(d(ab).outerWidth(true)>Z)?Z:d(ab).outerWidth(true)}d(ab).css({position:F.stageCSS.position,top:F.stageCSS.top,left:F.stageCSS.left,overflow:F.stageCSS.overflow,zIndex:F.stageCSS.zIndex,webkitPerspective:1000,webkitBackfaceVisibility:"hidden",width:J});d(F.unselectableSelector).css({cursor:"default"});if(F.responsiveSlides){d(aJ).each(function(aN){var aM=d(this).outerWidth(true);if(aM>J){aM=J+(d(this).outerWidth(true)-d(this).width())*-1}else{aM=d(this).width()}d(this).css({width:aM})})}d(aJ).each(function(aM){d(this).css({"float":"left"});an[aM]=ap*-1;ap=ap+d(this).outerWidth(true)});for(var aL=0;aL<an.length;aL++){if(an[aL]<=((ap-J)*-1)){break}ai=aL}an.splice(ai+1,an.length);an[an.length]=(ap-J)*-1;ap=ap-J;d(Y).css({position:"relative",overflow:F.sliderCSS.overflow,cursor:y,webkitPerspective:1000,webkitBackfaceVisibility:"hidden",width:ap+J+"px"});aE=d(ab).parent().outerHeight(true);ak=d(ab).height();if(F.responsiveSlideContainer){ak=(d(ab).height()>aE)?aE:d(ab).height()}d(ab).css({height:ak});u.setSliderOffset(Y,an[w[Q]]);if(ap<=0){d(Y).css({cursor:"default"});return false}if(!j&&!F.desktopClickDrag){d(Y).css({cursor:"default"})}if(F.scrollbar){d("."+ax).css({margin:F.scrollbarMargin,overflow:"hidden",display:"none"});d("."+ax+" ."+ag).css({border:F.scrollbarBorder});am=parseInt(d("."+ax).css("marginLeft"))+parseInt(d("."+ax).css("marginRight"));ao=parseInt(d("."+ax+" ."+ag).css("borderLeftWidth"),10)+parseInt(d("."+ax+" ."+ag).css("borderRightWidth"),10);S=(F.scrollbarContainer!="")?d(F.scrollbarContainer).width():J;M=(S-am)/ae;if(!F.scrollbarHide){R=F.scrollbarOpacity}d("."+ax).css({position:"absolute",left:0,width:S-am+"px",margin:F.scrollbarMargin});if(F.scrollbarLocation=="top"){d("."+ax).css("top","0")}else{d("."+ax).css("bottom","0")}d("."+ax+" ."+ag).css({borderRadius:F.scrollbarBorderRadius,background:F.scrollbarBackground,height:F.scrollbarHeight,width:M-ao+"px",minWidth:F.scrollbarHeight,border:F.scrollbarBorder,webkitPerspective:1000,webkitBackfaceVisibility:"hidden",position:"relative",opacity:R,filter:"alpha(opacity:"+(R*100)+")",boxShadow:F.scrollbarShadow});u.setSliderOffset(d("."+ax+" ."+ag),Math.floor((an[w[Q]]*-1)/(ap)*(S-am-M)));d("."+ax).css({display:"block"});aC=d("."+ax+" ."+ag);ac=d("."+ax)}if(F.scrollbarDrag){d("."+ax+" ."+ag).css({cursor:y})}if(F.infiniteSlider){ay=(ap+J)/3}if(F.navSlideSelector!=""){d(F.navSlideSelector).each(function(aM){d(this).css({cursor:"pointer"});d(this).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){var aN=aM;if(F.infiniteSlider){aN=aM+aa}u.changeSlide(aN,Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)})})}if(F.navPrevSelector!=""){d(F.navPrevSelector).css({cursor:"pointer"});d(F.navPrevSelector).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){if((w[Q]>0)||F.infiniteSlider){u.changeSlide(w[Q]-1,Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}})}if(F.navNextSelector!=""){d(F.navNextSelector).css({cursor:"pointer"});d(F.navNextSelector).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){if((w[Q]<an.length-1)||F.infiniteSlider){u.changeSlide(w[Q]+1,Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}})}if(F.autoSlide){if(F.autoSlideToggleSelector!=""){d(F.autoSlideToggleSelector).css({cursor:"pointer"});d(F.autoSlideToggleSelector).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){if(!L){u.autoSlidePause(Q);L=true;d(F.autoSlideToggleSelector).addClass("on")}else{u.autoSlide(Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F);L=false;d(F.autoSlideToggleSelector).removeClass("on")}})}if(!L){u.autoSlide(Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}if(!j){d(ab).bind("mouseenter.iosSliderEvent",function(){u.autoSlidePause(Q)});d(ab).bind("mouseleave.iosSliderEvent",function(){if(!L){u.autoSlide(Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}})}else{d(ab).bind("touchend.iosSliderEvent",function(){if(!L){u.autoSlide(Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}})}}d(ab).data("iosslider",{obj:V,settings:F,scrollerNode:Y,numberOfSlides:ae,sliderNumber:Q,childrenOffsets:an,sliderMax:ap,scrollbarClass:ag,scrollbarWidth:M,scrollbarStageWidth:S,stageWidth:J,scrollMargin:am,scrollBorder:ao,infiniteSliderOffset:aa,infiniteSliderWidth:ay});ah=false;return true}if(b[Q].responsiveSlides||b[Q].responsiveSlideContainer){var X=c?"orientationchange":"resize";d(window).bind(X+".iosSliderEvent",function(){if(!aD()){return true}})}if(F.keyboardControls){d(document).bind("keydown.iosSliderEvent",function(aL){if((!r)&&(!q)){var aL=aL.originalEvent}switch(aL.keyCode){case 37:if((w[Q]>0)||F.infiniteSlider){u.changeSlide(w[Q]-1,Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}break;case 39:if((w[Q]<an.length-1)||F.infiniteSlider){u.changeSlide(w[Q]+1,Y,H,ap,ag,M,J,S,am,ao,an,Q,aa,ay,ae,F)}break}})}if(j||F.desktopClickDrag){var aB=j?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent";var aH=d(Y);var aA=d(Y);var ar=null;var O=false;if(F.scrollbarDrag){aH=aH.add(aC);aA=aA.add(ac)}d(aH).bind(aB,function(aN){if(x[Q]){return true}O=u.isUnselectable(aN.target,F);if(O){return true}au=(d(this)[0]===d(aC)[0])?aC:Y;if((!r)&&(!q)){var aN=aN.originalEvent}u.autoSlidePause(Q);if(!j){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else{if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}}else{if(document.selection){document.selection.empty()}}eventX=aN.pageX;eventY=aN.pageY;ad=true;aj=Y;d(this).css({cursor:C})}else{eventX=aN.touches[0].pageX;eventY=aN.touches[0].pageY}aw=new Array(0,0);P=new Array(0,0);h=0;T=false;for(var aM=0;aM<H.length;aM++){clearTimeout(H[aM])}var aL=u.getSliderOffset(Y,"x");I=w[Q];if(F.infiniteSlider){if(w[Q]%ae==0){d(Y).children().each(function(aO){if((aO%ae==0)&&(aO!=w[Q])){d(this).replaceWith(function(){return d(Y).children(":eq("+w[Q]+")").clone(true)})}})}}if(aL>n){aL=n;u.setSliderOffset(d("."+ag),aL);d("."+ag).css({width:(M-ao)+"px"})}else{if(aL<(ap*-1)){aL=ap*-1;u.setSliderOffset(Y,aL);u.setSliderOffset(d("."+ag),(S-am-M));d("."+ag).css({width:(M-ao)+"px"})}}aq=(u.getSliderOffset(this,"x")-eventX)*-1;al=(u.getSliderOffset(this,"y")-eventY)*-1;aw[1]=eventX;P[1]=eventY});var aG=j?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent";d(aA).bind(aG,function(aQ){if((!r)&&(!q)){var aQ=aQ.originalEvent}if(O){return true}var aO=0;if(!j){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else{if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}}else{if(document.selection){document.selection.empty()}}}if(j){eventX=aQ.touches[0].pageX;eventY=aQ.touches[0].pageY}else{eventX=aQ.pageX;eventY=aQ.pageY;if(!ad){return false}}if(F.infiniteSlider){if(u.getSliderOffset(Y,"x")>(an[ae+1]+J)){aq=aq+ay}if(u.getSliderOffset(Y,"x")<(an[ae*2-1]-J)){aq=aq-ay}}aw[0]=aw[1];aw[1]=eventX;h=(aw[1]-aw[0])/2;P[0]=P[1];P[1]=eventY;k=(P[1]-P[0])/2;if(!T){if(F.onSlideStart!=""){F.onSlideStart(new u.args(F,Y,d(Y).children(":eq("+w[Q]+")"),w[Q]%aa))}}if(((k>3)||(k<-3))&&((h<3)&&(h>-3))&&(j)&&(!T)){aK=true}if(((h>5)||(h<-5))&&(j)){aQ.preventDefault();T=true}else{if(!j){T=true}}if(T&&!aK){var aL=u.getSliderOffset(Y,"x");var aM=(d(this)[0]===d(ac)[0])?(-1*(ap)/(S-am-M)):1;var aP=(d(this)[0]===d(ac)[0])?F.scrollbarElasticPullResistance:F.elasticPullResistance;if(j){if(U!=aQ.touches.length){aq=(aL*-1)+eventX}U=aQ.touches.length}if(aL>n){aO=((aq-eventX)*aM)*aP/aM}if(aL<(ap*-1)){aO=(ap+((aq-eventX)*-1*aM))*aP*-1/aM}u.setSliderOffset(Y,(aq-eventX-aO)*-1*aM);if(F.scrollbar){u.showScrollbar(F,ag);m=Math.floor((aq-eventX-aO)/(ap)*(S-am-M)*aM);var aN=M;if(aL>=n){aN=M-ao-(m*-1);u.setSliderOffset(d("."+ag),0);d("."+ag).css({width:aN+"px"})}else{if(aL<=((ap*-1)+1)){aN=S-am-ao-m;u.setSliderOffset(d("."+ag),m);d("."+ag).css({width:aN+"px"})}else{u.setSliderOffset(d("."+ag),m)}}}if(j){af=aQ.touches[0].pageX}at=u.calcActiveOffset(F,(aq-eventX-aO)*-1,0,an,ap,J,aa,undefined);if((at!=w[Q])&&(F.onSlideChange!="")){w[Q]=at;F.onSlideChange(new u.args(F,Y,d(Y).children(":eq("+at+")"),at%aa))}}});d(aH).bind("touchend.iosSliderEvent",function(aM){var aM=aM.originalEvent;if(O){return true}if(aM.touches.length!=0){for(var aL=0;aL<aM.touches.length;aL++){if(aM.touches[aL].pageX==af){u.slowScrollHorizontal(Y,H,ap,ag,h,k,M,J,S,am,ao,an,Q,aa,ay,ae,au,F)}}}else{u.slowScrollHorizontal(Y,H,ap,ag,h,k,M,J,S,am,ao,an,Q,aa,ay,ae,au,F)}aK=false});if(!j){var az=d(window);if(q||r){var az=d(document)}d(az).bind("mouseup.iosSliderEvent",function(aL){if(T){d(Y).children(":eq("+w[Q]+")").find("a").unbind("click.disableClick").bind("click.disableClick",u.preventClick)}else{d(Y).children(":eq("+w[Q]+")").find("a").unbind("click.disableClick").bind("click.disableClick",u.enableClick)}d(Y).children(":eq("+w[Q]+")").find("[onclick]").each(function(){this.onclick=function(aM){if(T){return false}d(this).data("onclick").call(this,aM||window.event)}});if(parseFloat(d().jquery)>=1.6){d(Y).children(":eq("+w[Q]+")").find("*").each(function(){var aO=d(this).data("events");if(aO!=undefined){if(aO.click!=undefined){if(aO.click[0].namespace!="iosSliderEvent"){if(!T){return false}d(this).one("click.disableClick",u.preventClick);var aM=d(this).data("events").click;var aN=aM.pop();aM.splice(0,0,aN)}}}})}if(!z[Q]){d(aH).css({cursor:y});ad=false;if(aj==undefined){return false}u.slowScrollHorizontal(aj,H,ap,ag,h,k,M,J,S,am,ao,an,Q,aa,ay,ae,au,F);aj=undefined}aK=false})}}})},destroy:function(F,E){if(E==undefined){E=this}return d(E).each(function(){var J=d(this);var I=J.data("iosslider");if(I==undefined){return false}if(F==undefined){F=true}u.autoSlidePause(I.sliderNumber);z[I.sliderNumber]=true;d(window).unbind(".iosSliderEvent");d(document).unbind(".iosSliderEvent");d(this).unbind(".iosSliderEvent");d(this).children(":first-child").unbind(".iosSliderEvent");d(this).children(":first-child").children().unbind(".iosSliderEvent");if(F){d(this).attr("style","");d(this).children(":first-child").attr("style","");d(this).children(":first-child").children().attr("style","");d(I.settings.navSlideSelector).attr("style","");d(I.settings.navPrevSelector).attr("style","");d(I.settings.navNextSelector).attr("style","");d(I.settings.autoSlideToggleSelector).attr("style","");d(I.settings.unselectableSelector).attr("style","")}if(I.settings.infiniteSlider){d(this).children(":first-child").html();d(this).children(":first-child").html(d(this).children(":first-child").children(":nth-child(-n+"+I.numberOfSlides+")").clone(true))}if(I.settings.scrollbar){d(".scrollbarBlock"+I.sliderNumber).remove()}var H=e[I.sliderNumber];for(var G=0;G<H.length;G++){clearTimeout(H[G])}J.removeData("iosslider")})},update:function(E){if(E==undefined){E=this}return d(E).each(function(){var G=d(this);var F=G.data("iosslider");if(F==undefined){return false}B.destroy(false,this);F.settings.startAtSlide=w[F.sliderNumber]+1;B.init(F.settings,this)})},addSlide:function(E,F){return this.each(function(){var H=d(this);var G=H.data("iosslider");if(G==undefined){return false}if(F<=G.numberOfSlides){d(G.scrollerNode).children(":eq("+(F-1)+")").before(E)}else{d(G.scrollerNode).children(":eq("+(F-2)+")").after(E)}if(w[G.sliderNumber]>(F-2)){w[G.sliderNumber]++}B.update(this)})},removeSlide:function(E){return this.each(function(){var G=d(this);var F=G.data("iosslider");if(F==undefined){return false}d(F.scrollerNode).children(":eq("+(E-1)+")").remove();if(w[F.sliderNumber]>(E-1)){w[F.sliderNumber]--}B.update(this)})},goToSlide:function(E,F){if(F==undefined){F=this}return d(F).each(function(){var K=d(this);var I=K.data("iosslider");if(I==undefined){return false}E=(E-1)%I.numberOfSlides;if(I.settings.infiniteSlider){var G=I.numberOfSlides*0.5;var H=(G+w[I.sliderNumber])%I.numberOfSlides;var J=(E<H)?1:-1;E=E+I.infiniteSliderOffset;if((J<0)&&((w[I.sliderNumber]%I.numberOfSlides)<G)){E=E-I.infiniteSliderOffset}if((J>0)&&((w[I.sliderNumber]%I.numberOfSlides)>G)){E=E+I.infiniteSliderOffset}}u.changeSlide(E,d(I.scrollerNode),e[I.sliderNumber],I.sliderMax,I.scrollbarClass,I.scrollbarWidth,I.stageWidth,I.scrollbarStageWidth,I.scrollMargin,I.scrollBorder,I.childrenOffsets,I.sliderNumber,I.infiniteSliderOffset,I.infiniteSliderWidth,I.numberOfSlides,I.settings);w[I.sliderNumber]=E})},lock:function(){return this.each(function(){var F=d(this);var E=F.data("iosslider");if(E==undefined){return false}x[E.sliderNumber]=true})},unlock:function(){return this.each(function(){var F=d(this);var E=F.data("iosslider");if(E==undefined){return false}x[E.sliderNumber]=false})}};d.fn.iosSlider=function(E){if(B[E]){return B[E].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof E==="object"||!E){return B.init.apply(this,arguments)}else{d.error("invalid method call!")}}}})(jQuery);
/*!
 * jquery.qtip. The jQuery tooltip plugin
 *
 * Copyright (c) 2009 Craig Thompson
 * http://craigsworks.com
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Launch  : February 2009
 * Version : 1.0.0-rc3
 * Released: Tuesday 12th May, 2009 - 00:00
 * Debug: jquery.qtip.debug.js
 */
(function(f){f.fn.qtip=function(D,w){var A,v,C,u,z,y,x,B;if(typeof D=="string"){if(typeof f(this).data("qtip")!=="object"){f.fn.qtip.log.error.call(self,1,f.fn.qtip.constants.NO_TOOLTIP_PRESENT,false)}if(D=="api"){return f(this).data("qtip").interfaces[f(this).data("qtip").current]}else{if(D=="interfaces"){return f(this).data("qtip").interfaces}}}else{if(!D){D={}}if(typeof D.content!=="object"||(D.content.jquery&&D.content.length>0)){D.content={text:D.content}}if(typeof D.content.title!=="object"){D.content.title={text:D.content.title}}if(typeof D.position!=="object"){D.position={corner:D.position}}if(typeof D.position.corner!=="object"){D.position.corner={target:D.position.corner,tooltip:D.position.corner}}if(typeof D.show!=="object"){D.show={when:D.show}}if(typeof D.show.when!=="object"){D.show.when={event:D.show.when}}if(typeof D.show.effect!=="object"){D.show.effect={type:D.show.effect}}if(typeof D.hide!=="object"){D.hide={when:D.hide}}if(typeof D.hide.when!=="object"){D.hide.when={event:D.hide.when}}if(typeof D.hide.effect!=="object"){D.hide.effect={type:D.hide.effect}}if(typeof D.style!=="object"){D.style={name:D.style}}D.style=c(D.style);u=f.extend(true,{},f.fn.qtip.defaults,D);u.style=a.call({options:u},u.style);u.user=f.extend(true,{},D)}return f(this).each(function(){if(typeof D=="string"){y=D.toLowerCase();C=f(this).qtip("interfaces");if(typeof C=="object"){if(w===true&&y=="destroy"){while(C.length>0){C[C.length-1].destroy()}}else{if(w!==true){C=[f(this).qtip("api")]}for(A=0;A<C.length;A++){if(y=="destroy"){C[A].destroy()}else{if(C[A].status.rendered===true){if(y=="show"){C[A].show()}else{if(y=="hide"){C[A].hide()}else{if(y=="focus"){C[A].focus()}else{if(y=="disable"){C[A].disable(true)}else{if(y=="enable"){C[A].disable(false)}}}}}}}}}}}else{x=f.extend(true,{},u);x.hide.effect.length=u.hide.effect.length;x.show.effect.length=u.show.effect.length;if(x.position.container===false){x.position.container=f(document.body)}if(x.position.target===false){x.position.target=f(this)}if(x.show.when.target===false){x.show.when.target=f(this)}if(x.hide.when.target===false){x.hide.when.target=f(this)}v=f.fn.qtip.interfaces.length;for(A=0;A<v;A++){if(typeof f.fn.qtip.interfaces[A]=="undefined"){v=A;break}}z=new d(f(this),x,v);f.fn.qtip.interfaces[v]=z;if(typeof f(this).data("qtip")=="object"){if(typeof f(this).attr("qtip")==="undefined"){f(this).data("qtip").current=f(this).data("qtip").interfaces.length}f(this).data("qtip").interfaces.push(z)}else{f(this).data("qtip",{current:0,interfaces:[z]})}if(x.content.prerender===false&&x.show.when.event!==false&&x.show.ready!==true){x.show.when.target.bind(x.show.when.event+".qtip-"+v+"-create",{qtip:v},function(E){B=f.fn.qtip.interfaces[E.data.qtip];B.options.show.when.target.unbind(B.options.show.when.event+".qtip-"+E.data.qtip+"-create");B.cache.mouse={x:E.pageX,y:E.pageY};r.call(B);B.options.show.when.target.trigger(B.options.show.when.event)})}else{z.cache.mouse={x:x.show.when.target.offset().left,y:x.show.when.target.offset().top};r.call(z)}}})};function d(w,v,x){var u=this;u.id=x;u.options=v;u.status={animated:false,rendered:false,disabled:false,focused:false};u.elements={target:w.addClass(u.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};u.cache={mouse:{},position:{},toggle:0};u.timers={};f.extend(u,u.options.api,{show:function(A){var z,B;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show")}if(u.elements.tooltip.css("display")!=="none"){return u}u.elements.tooltip.stop(true,false);z=u.beforeShow.call(u,A);if(z===false){return u}function y(){if(u.options.position.type!=="static"){u.focus()}u.onShow.call(u,A);if(f.browser.msie){u.elements.tooltip.get(0).style.removeAttribute("filter")}}u.cache.toggle=1;if(u.options.position.type!=="static"){u.updatePosition(A,(u.options.show.effect.length>0))}if(typeof u.options.show.solo=="object"){B=f(u.options.show.solo)}else{if(u.options.show.solo===true){B=f("div.qtip").not(u.elements.tooltip)}}if(B){B.each(function(){if(f(this).qtip("api").status.rendered===true){f(this).qtip("api").hide()}})}if(typeof u.options.show.effect.type=="function"){u.options.show.effect.type.call(u.elements.tooltip,u.options.show.effect.length);u.elements.tooltip.queue(function(){y();f(this).dequeue()})}else{switch(u.options.show.effect.type.toLowerCase()){case"fade":u.elements.tooltip.fadeIn(u.options.show.effect.length,y);break;case"slide":u.elements.tooltip.slideDown(u.options.show.effect.length,function(){y();if(u.options.position.type!=="static"){u.updatePosition(A,true)}});break;case"grow":u.elements.tooltip.show(u.options.show.effect.length,y);break;default:u.elements.tooltip.show(null,y);break}u.elements.tooltip.addClass(u.options.style.classes.active)}return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(A){var z;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide")}else{if(u.elements.tooltip.css("display")==="none"){return u}}clearTimeout(u.timers.show);u.elements.tooltip.stop(true,false);z=u.beforeHide.call(u,A);if(z===false){return u}function y(){u.onHide.call(u,A)}u.cache.toggle=0;if(typeof u.options.hide.effect.type=="function"){u.options.hide.effect.type.call(u.elements.tooltip,u.options.hide.effect.length);u.elements.tooltip.queue(function(){y();f(this).dequeue()})}else{switch(u.options.hide.effect.type.toLowerCase()){case"fade":u.elements.tooltip.fadeOut(u.options.hide.effect.length,y);break;case"slide":u.elements.tooltip.slideUp(u.options.hide.effect.length,y);break;case"grow":u.elements.tooltip.hide(u.options.hide.effect.length,y);break;default:u.elements.tooltip.hide(null,y);break}u.elements.tooltip.removeClass(u.options.style.classes.active)}return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(y,z){var E,I,N,L,J,G,A,K,D,F,M,C,H,B;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition")}else{if(u.options.position.type=="static"){return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition")}}I={position:{left:0,top:0},dimensions:{height:0,width:0},corner:u.options.position.corner.target};N={position:u.getPosition(),dimensions:u.getDimensions(),corner:u.options.position.corner.tooltip};if(u.options.position.target!=="mouse"){if(u.options.position.target.get(0).nodeName.toLowerCase()=="area"){L=u.options.position.target.attr("coords").split(",");for(E=0;E<L.length;E++){L[E]=parseInt(L[E])}J=u.options.position.target.parent("map").attr("name");G=f('img[usemap="#'+J+'"]:first').offset();I.position={left:Math.floor(G.left+L[0]),top:Math.floor(G.top+L[1])};switch(u.options.position.target.attr("shape").toLowerCase()){case"rect":I.dimensions={width:Math.ceil(Math.abs(L[2]-L[0])),height:Math.ceil(Math.abs(L[3]-L[1]))};break;case"circle":I.dimensions={width:L[2]+1,height:L[2]+1};break;case"poly":I.dimensions={width:L[0],height:L[1]};for(E=0;E<L.length;E++){if(E%2==0){if(L[E]>I.dimensions.width){I.dimensions.width=L[E]}if(L[E]<L[0]){I.position.left=Math.floor(G.left+L[E])}}else{if(L[E]>I.dimensions.height){I.dimensions.height=L[E]}if(L[E]<L[1]){I.position.top=Math.floor(G.top+L[E])}}}I.dimensions.width=I.dimensions.width-(I.position.left-G.left);I.dimensions.height=I.dimensions.height-(I.position.top-G.top);break;default:return f.fn.qtip.log.error.call(u,4,f.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition");break}I.dimensions.width-=2;I.dimensions.height-=2}else{if(u.options.position.target.add(document.body).length===1){I.position={left:f(document).scrollLeft(),top:f(document).scrollTop()};I.dimensions={height:f(window).height(),width:f(window).width()}}else{if(typeof u.options.position.target.attr("qtip")!=="undefined"){I.position=u.options.position.target.qtip("api").cache.position}else{I.position=u.options.position.target.offset()}I.dimensions={height:u.options.position.target.outerHeight(),width:u.options.position.target.outerWidth()}}}A=f.extend({},I.position);if(I.corner.search(/right/i)!==-1){A.left+=I.dimensions.width}if(I.corner.search(/bottom/i)!==-1){A.top+=I.dimensions.height}if(I.corner.search(/((top|bottom)Middle)|center/)!==-1){A.left+=(I.dimensions.width/2)}if(I.corner.search(/((left|right)Middle)|center/)!==-1){A.top+=(I.dimensions.height/2)}}else{I.position=A={left:u.cache.mouse.x,top:u.cache.mouse.y};I.dimensions={height:1,width:1}}if(N.corner.search(/right/i)!==-1){A.left-=N.dimensions.width}if(N.corner.search(/bottom/i)!==-1){A.top-=N.dimensions.height}if(N.corner.search(/((top|bottom)Middle)|center/)!==-1){A.left-=(N.dimensions.width/2)}if(N.corner.search(/((left|right)Middle)|center/)!==-1){A.top-=(N.dimensions.height/2)}K=(f.browser.msie)?1:0;D=(f.browser.msie&&parseInt(f.browser.version.charAt(0))===6)?1:0;if(u.options.style.border.radius>0){if(N.corner.search(/Left/)!==-1){A.left-=u.options.style.border.radius}else{if(N.corner.search(/Right/)!==-1){A.left+=u.options.style.border.radius}}if(N.corner.search(/Top/)!==-1){A.top-=u.options.style.border.radius}else{if(N.corner.search(/Bottom/)!==-1){A.top+=u.options.style.border.radius}}}if(K){if(N.corner.search(/top/)!==-1){A.top-=K}else{if(N.corner.search(/bottom/)!==-1){A.top+=K}}if(N.corner.search(/left/)!==-1){A.left-=K}else{if(N.corner.search(/right/)!==-1){A.left+=K}}if(N.corner.search(/leftMiddle|rightMiddle/)!==-1){A.top-=1}}if(u.options.position.adjust.screen===true){A=q.call(u,A,I,N)}if(u.options.position.target==="mouse"&&u.options.position.adjust.mouse===true){if(u.options.position.adjust.screen===true&&u.elements.tip){M=u.elements.tip.attr("rel")}else{M=u.options.position.corner.tooltip}A.left+=(M.search(/right/i)!==-1)?-6:6;A.top+=(M.search(/bottom/i)!==-1)?-6:6}if(!u.elements.bgiframe&&f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){f("select, object").each(function(){C=f(this).offset();C.bottom=C.top+f(this).height();C.right=C.left+f(this).width();if(A.top+N.dimensions.height>=C.top&&A.left+N.dimensions.width>=C.left){l.call(u)}})}A.left+=u.options.position.adjust.x;A.top+=u.options.position.adjust.y;H=u.getPosition();if(A.left!=H.left||A.top!=H.top){B=u.beforePositionUpdate.call(u,y);if(B===false){return u}u.cache.position=A;if(z===true){u.status.animated=true;u.elements.tooltip.animate(A,200,"swing",function(){u.status.animated=false})}else{u.elements.tooltip.css(A)}u.onPositionUpdate.call(u,y);if(typeof y!=="undefined"&&y.type&&y.type!=="mousemove"){f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}}return u},updateWidth:function(y){var z;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")}else{if(y&&typeof y!=="number"){return f.fn.qtip.log.error.call(u,2,"newWidth must be of type number","updateWidth")}}z=u.elements.contentWrapper.siblings().add(u.elements.tip).add(u.elements.button);if(!y){if(typeof u.options.style.width.value=="number"){y=u.options.style.width.value}else{u.elements.tooltip.css({width:"auto"});z.hide();if(f.browser.msie){u.elements.wrapper.add(u.elements.contentWrapper.children()).css({zoom:"normal"})}y=u.getDimensions().width+1;if(!u.options.style.width.value){if(y>u.options.style.width.max){y=u.options.style.width.max}if(y<u.options.style.width.min){y=u.options.style.width.min}}}}if(y%2!==0){y-=1}u.elements.tooltip.width(y);z.show();if(u.options.style.border.radius){u.elements.tooltip.find(".qtip-betweenCorners").each(function(A){f(this).width(y-(u.options.style.border.radius*2))})}if(f.browser.msie){u.elements.wrapper.add(u.elements.contentWrapper.children()).css({zoom:"1"});u.elements.wrapper.width(y);if(u.elements.bgiframe){u.elements.bgiframe.width(y).height(u.getDimensions.height)}}return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")},updateStyle:function(y){var B,C,z,A,D;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")}else{if(typeof y!=="string"||!f.fn.qtip.styles[y]){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle")}}u.options.style=a.call(u,f.fn.qtip.styles[y],u.options.user.style);u.elements.content.css(s(u.options.style));if(u.options.content.title.text!==false){u.elements.title.css(s(u.options.style.title,true))}u.elements.contentWrapper.css({borderColor:u.options.style.border.color});if(u.options.style.tip.corner!==false){if(f("<canvas>").get(0).getContext){B=u.elements.tooltip.find(".qtip-tip canvas:first");z=B.get(0).getContext("2d");z.clearRect(0,0,300,300);A=B.parent("div[rel]:first").attr("rel");D=b(A,u.options.style.tip.size.width,u.options.style.tip.size.height);j.call(u,B,D,u.options.style.tip.color||u.options.style.border.color)}else{if(f.browser.msie){B=u.elements.tooltip.find('.qtip-tip [nodeName="shape"]');B.attr("fillcolor",u.options.style.tip.color||u.options.style.border.color)}}}if(u.options.style.border.radius>0){u.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:u.options.style.border.color});if(f("<canvas>").get(0).getContext){C=h(u.options.style.border.radius);u.elements.tooltip.find(".qtip-wrapper canvas").each(function(){z=f(this).get(0).getContext("2d");z.clearRect(0,0,300,300);A=f(this).parent("div[rel]:first").attr("rel");t.call(u,f(this),C[A],u.options.style.border.radius,u.options.style.border.color)})}else{if(f.browser.msie){u.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){f(this).attr("fillcolor",u.options.style.border.color)})}}}return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")},updateContent:function(C,A){var B,z,y;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent")}else{if(!C){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent")}}B=u.beforeContentUpdate.call(u,C);if(typeof B=="string"){C=B}else{if(B===false){return}}if(f.browser.msie){u.elements.contentWrapper.children().css({zoom:"normal"})}if(C.jquery&&C.length>0){C.clone(true).appendTo(u.elements.content).show()}else{u.elements.content.html(C)}z=u.elements.content.find("img[complete=false]");if(z.length>0){y=0;z.each(function(E){f('<img src="'+f(this).attr("src")+'" />').load(function(){if(++y==z.length){D()}})})}else{D()}function D(){u.updateWidth();if(A!==false){if(u.options.position.type!=="static"){u.updatePosition(u.elements.tooltip.is(":visible"),true)}if(u.options.style.tip.corner!==false){o.call(u)}}}u.onContentUpdate.call(u);return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(y,B,C){var A;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")}A=u.beforeContentLoad.call(u);if(A===false){return u}if(C=="post"){f.post(y,B,z)}else{f.get(y,B,z)}function z(D){u.onContentLoad.call(u);f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");u.updateContent(D)}return u},updateTitle:function(y){if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")}else{if(!y){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle")}}returned=u.beforeTitleUpdate.call(u);if(returned===false){return u}if(u.elements.button){u.elements.button=u.elements.button.clone(true)}u.elements.title.html(y);if(u.elements.button){u.elements.title.prepend(u.elements.button)}u.onTitleUpdate.call(u);return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle")},focus:function(C){var A,z,y,B;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus")}else{if(u.options.position.type=="static"){return f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus")}}A=parseInt(u.elements.tooltip.css("z-index"));z=6000+f("div.qtip[qtip]").length-1;if(!u.status.focused&&A!==z){B=u.beforeFocus.call(u,C);if(B===false){return u}f("div.qtip[qtip]").not(u.elements.tooltip).each(function(){if(f(this).qtip("api").status.rendered===true){y=parseInt(f(this).css("z-index"));if(typeof y=="number"&&y>-1){f(this).css({zIndex:parseInt(f(this).css("z-index"))-1})}f(this).qtip("api").status.focused=false}});u.elements.tooltip.css({zIndex:z});u.status.focused=true;u.onFocus.call(u,C);f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_FOCUSED,"focus")}return u},disable:function(y){if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")}if(y){if(!u.status.disabled){u.status.disabled=true;f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_DISABLED,"disable")}else{f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable")}}else{if(u.status.disabled){u.status.disabled=false;f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_ENABLED,"disable")}else{f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable")}}return u},destroy:function(){var y,z,A;z=u.beforeDestroy.call(u);if(z===false){return u}if(u.status.rendered){u.options.show.when.target.unbind("mousemove.qtip",u.updatePosition);u.options.show.when.target.unbind("mouseout.qtip",u.hide);u.options.show.when.target.unbind(u.options.show.when.event+".qtip");u.options.hide.when.target.unbind(u.options.hide.when.event+".qtip");u.elements.tooltip.unbind(u.options.hide.when.event+".qtip");u.elements.tooltip.unbind("mouseover.qtip",u.focus);u.elements.tooltip.remove()}else{u.options.show.when.target.unbind(u.options.show.when.event+".qtip-create")}if(typeof u.elements.target.data("qtip")=="object"){A=u.elements.target.data("qtip").interfaces;if(typeof A=="object"&&A.length>0){for(y=0;y<A.length-1;y++){if(A[y].id==u.id){A.splice(y,1)}}}}delete f.fn.qtip.interfaces[u.id];if(typeof A=="object"&&A.length>0){u.elements.target.data("qtip").current=A.length-1}else{u.elements.target.removeData("qtip")}u.onDestroy.call(u);f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_DESTROYED,"destroy");return u.elements.target},getPosition:function(){var y,z;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")}y=(u.elements.tooltip.css("display")!=="none")?false:true;if(y){u.elements.tooltip.css({visiblity:"hidden"}).show()}z=u.elements.tooltip.offset();if(y){u.elements.tooltip.css({visiblity:"visible"}).hide()}return z},getDimensions:function(){var y,z;if(!u.status.rendered){return f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}y=(!u.elements.tooltip.is(":visible"))?true:false;if(y){u.elements.tooltip.css({visiblity:"hidden"}).show()}z={height:u.elements.tooltip.outerHeight(),width:u.elements.tooltip.outerWidth()};if(y){u.elements.tooltip.css({visiblity:"visible"}).hide()}return z}})}function r(){var u,y,w,v,x,A,z;u=this;u.beforeRender.call(u);u.status.rendered=true;u.elements.tooltip='<div qtip="'+u.id+'" class="qtip '+(u.options.style.classes.tooltip||u.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+u.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content"></div></div></div></div>';u.elements.tooltip=f(u.elements.tooltip);u.elements.tooltip.appendTo(u.options.position.container);u.elements.tooltip.data("qtip",{current:0,interfaces:[u]});u.elements.wrapper=u.elements.tooltip.children("div:first");u.elements.contentWrapper=u.elements.wrapper.children("div:first").css({background:u.options.style.background});u.elements.content=u.elements.contentWrapper.children("div:first");if(f.browser.msie){u.elements.wrapper.add(u.elements.content).css({zoom:1})}if(u.options.hide.when.event=="unfocus"){u.elements.tooltip.attr("unfocus",true)}if(typeof u.options.style.width.value=="number"){u.updateWidth()}if(f("<canvas>").get(0).getContext||f.browser.msie){if(u.options.style.border.radius>0){n.call(u)}else{u.elements.contentWrapper.css({border:u.options.style.border.width+"px solid "+u.options.style.border.color})}if(u.options.style.tip.corner!==false){e.call(u)}}else{u.elements.contentWrapper.css({border:u.options.style.border.width+"px solid "+u.options.style.border.color});u.options.style.border.radius=0;u.options.style.tip.corner=false;f.fn.qtip.log.error.call(u,2,f.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")}if((typeof u.options.content.text=="string"&&u.options.content.text.length>0)||(u.options.content.text.jquery&&u.options.content.text.length>0)){w=u.options.content.text}else{if(typeof u.elements.target.attr("title")=="string"&&u.elements.target.attr("title").length>0){w=u.elements.target.attr("title").replace("\\n","<br />");u.elements.target.attr("title","")}else{if(typeof u.elements.target.attr("alt")=="string"&&u.elements.target.attr("alt").length>0){w=u.elements.target.attr("alt").replace("\\n","<br />");u.elements.target.attr("alt","")}else{w=" ";f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.NO_VALID_CONTENT,"render")}}}if(u.options.content.title.text!==false){k.call(u)}u.updateContent(w);m.call(u);if(u.options.show.ready===true){u.show()}if(u.options.content.url!==false){v=u.options.content.url;x=u.options.content.data;A=u.options.content.method||"get";u.loadContent(v,x,A)}u.onRender.call(u);f.fn.qtip.log.error.call(u,1,f.fn.qtip.constants.EVENT_RENDERED,"render")}function n(){var H,B,v,D,z,G,w,I,F,A,y,E,C,u,x;H=this;H.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();v=H.options.style.border.width;D=H.options.style.border.radius;z=H.options.style.border.color||H.options.style.tip.color;G=h(D);w={};for(B in G){w[B]='<div rel="'+B+'" style="'+((B.search(/Left/)!==-1)?"left":"right")+":0; position:absolute; height:"+D+"px; width:"+D+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if(f("<canvas>").get(0).getContext){w[B]+='<canvas height="'+D+'" width="'+D+'" style="vertical-align: top"></canvas>'}else{if(f.browser.msie){I=D*2+3;w[B]+='<v:arc stroked="false" fillcolor="'+z+'" startangle="'+G[B][0]+'" endangle="'+G[B][1]+'" style="width:'+I+"px; height:"+I+"px; margin-top:"+((B.search(/bottom/)!==-1)?-2:-1)+"px; margin-left:"+((B.search(/Right/)!==-1)?G[B][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'}}w[B]+="</div>"}F=H.getDimensions().width-(Math.max(v,D)*2);A='<div class="qtip-betweenCorners" style="height:'+D+"px; width:"+F+"px; overflow:hidden; background-color:"+z+'; line-height:0.1px; font-size:1px;">';y='<div class="qtip-borderTop" dir="ltr" style="height:'+D+"px; margin-left:"+D+'px; line-height:0.1px; font-size:1px; padding:0;">'+w.topLeft+w.topRight+A;H.elements.wrapper.prepend(y);E='<div class="qtip-borderBottom" dir="ltr" style="height:'+D+"px; margin-left:"+D+'px; line-height:0.1px; font-size:1px; padding:0;">'+w.bottomLeft+w.bottomRight+A;H.elements.wrapper.append(E);if(f("<canvas>").get(0).getContext){H.elements.wrapper.find("canvas").each(function(){C=G[f(this).parent("[rel]:first").attr("rel")];t.call(H,f(this),C,D,z)})}else{if(f.browser.msie){H.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>')}}u=Math.max(D,(D+(v-D)));x=Math.max(v-D,0);H.elements.contentWrapper.css({border:"0px solid "+z,borderWidth:x+"px "+u+"px"})}function t(w,y,u,v){var x=w.get(0).getContext("2d");x.fillStyle=v;x.beginPath();x.arc(y[0],y[1],u,0,Math.PI*2,false);x.fill()}function e(x){var v,u,z,w,y;v=this;if(v.elements.tip!==null){v.elements.tip.remove()}u=v.options.style.tip.color||v.options.style.border.color;if(v.options.style.tip.corner===false){return}else{if(!x){x=v.options.style.tip.corner}}z=b(x,v.options.style.tip.size.width,v.options.style.tip.size.height);v.elements.tip='<div class="'+v.options.style.classes.tip+'" dir="ltr" rel="'+x+'" style="position:absolute; height:'+v.options.style.tip.size.height+"px; width:"+v.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';if(f("<canvas>").get(0).getContext){v.elements.tip+='<canvas height="'+v.options.style.tip.size.height+'" width="'+v.options.style.tip.size.width+'"></canvas>'}else{if(f.browser.msie){w=v.options.style.tip.size.width+","+v.options.style.tip.size.height;y="m"+z[0][0]+","+z[0][1];y+=" l"+z[1][0]+","+z[1][1];y+=" "+z[2][0]+","+z[2][1];y+=" xe";v.elements.tip+='<v:shape fillcolor="'+u+'" stroked="false" filled="true" path="'+y+'" coordsize="'+w+'" style="width:'+v.options.style.tip.size.width+"px; height:"+v.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+((x.search(/top/)!==-1)?"bottom":"top")+'"></v:shape>';v.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';v.elements.contentWrapper.css("position","relative")}}v.elements.tooltip.prepend(v.elements.tip+"</div>");v.elements.tip=v.elements.tooltip.find("."+v.options.style.classes.tip).eq(0);if(f("<canvas>").get(0).getContext){j.call(v,v.elements.tip.find("canvas:first"),z,u)}if(x.search(/top/)!==-1&&f.browser.msie&&parseInt(f.browser.version.charAt(0))===6){v.elements.tip.css({marginTop:-4})}o.call(v,x)}function j(v,x,u){var w=v.get(0).getContext("2d");w.fillStyle=u;w.beginPath();w.moveTo(x[0][0],x[0][1]);w.lineTo(x[1][0],x[1][1]);w.lineTo(x[2][0],x[2][1]);w.fill()}function o(w){var v,y,u,z,x;v=this;if(v.options.style.tip.corner===false||!v.elements.tip){return}if(!w){w=v.elements.tip.attr("rel")}y=positionAdjust=(f.browser.msie)?1:0;v.elements.tip.css(w.match(/left|right|top|bottom/)[0],0);if(w.search(/top|bottom/)!==-1){if(f.browser.msie){if(parseInt(f.browser.version.charAt(0))===6){positionAdjust=(w.search(/top/)!==-1)?-3:1}else{positionAdjust=(w.search(/top/)!==-1)?1:2}}if(w.search(/Middle/)!==-1){v.elements.tip.css({left:"50%",marginLeft:-(v.options.style.tip.size.width/2)})}else{if(w.search(/Left/)!==-1){v.elements.tip.css({left:v.options.style.border.radius-y})}else{if(w.search(/Right/)!==-1){v.elements.tip.css({right:v.options.style.border.radius+y})}}}if(w.search(/top/)!==-1){v.elements.tip.css({top:-positionAdjust})}else{v.elements.tip.css({bottom:positionAdjust})}}else{if(w.search(/left|right/)!==-1){if(f.browser.msie){positionAdjust=(parseInt(f.browser.version.charAt(0))===6)?1:((w.search(/left/)!==-1)?1:2)}if(w.search(/Middle/)!==-1){v.elements.tip.css({top:"50%",marginTop:-(v.options.style.tip.size.height/2)})}else{if(w.search(/Top/)!==-1){v.elements.tip.css({top:v.options.style.border.radius-y})}else{if(w.search(/Bottom/)!==-1){v.elements.tip.css({bottom:v.options.style.border.radius+y})}}}if(w.search(/left/)!==-1){v.elements.tip.css({left:-positionAdjust})}else{v.elements.tip.css({right:positionAdjust})}}}u="padding-"+w.match(/left|right|top|bottom/)[0];z=v.options.style.tip.size[(u.search(/left|right/)!==-1)?"width":"height"];v.elements.tooltip.css("padding",0);v.elements.tooltip.css(u,z);if(f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){x=parseInt(v.elements.tip.css("margin-top"))||0;x+=parseInt(v.elements.content.css("margin-top"))||0;v.elements.tip.css({marginTop:x})}}function k(){var u=this;if(u.elements.title!==null){u.elements.title.remove()}u.elements.title=f('<div class="'+u.options.style.classes.title+'">').css(s(u.options.style.title,true)).css({zoom:(f.browser.msie)?1:0}).prependTo(u.elements.contentWrapper);if(u.options.content.title.text){u.updateTitle.call(u,u.options.content.title.text)}if(u.options.content.title.button!==false&&typeof u.options.content.title.button=="string"){u.elements.button=f('<a class="'+u.options.style.classes.button+'" style="float:right; position: relative"></a>').css(s(u.options.style.button,true)).html(u.options.content.title.button).prependTo(u.elements.title).click(function(v){if(!u.status.disabled){u.hide(v)}})}}function m(){var v,x,w,u;v=this;x=v.options.show.when.target;w=v.options.hide.when.target;if(v.options.hide.fixed){w=w.add(v.elements.tooltip)}if(v.options.hide.when.event=="inactive"){u=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];function A(B){if(v.status.disabled===true){return}clearTimeout(v.timers.inactive);v.timers.inactive=setTimeout(function(){f(u).each(function(){w.unbind(this+".qtip-inactive");v.elements.content.unbind(this+".qtip-inactive")});v.hide(B)},v.options.hide.delay)}}else{if(v.options.hide.fixed===true){v.elements.tooltip.bind("mouseover.qtip",function(){if(v.status.disabled===true){return}clearTimeout(v.timers.hide)})}}function z(B){if(v.status.disabled===true){return}if(v.options.hide.when.event=="inactive"){f(u).each(function(){w.bind(this+".qtip-inactive",A);v.elements.content.bind(this+".qtip-inactive",A)});A()}clearTimeout(v.timers.show);clearTimeout(v.timers.hide);v.timers.show=setTimeout(function(){v.show(B)},v.options.show.delay)}function y(B){if(v.status.disabled===true){return}if(v.options.hide.fixed===true&&v.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&f(B.relatedTarget).parents("div.qtip[qtip]").length>0){B.stopPropagation();B.preventDefault();clearTimeout(v.timers.hide);return false}clearTimeout(v.timers.show);clearTimeout(v.timers.hide);v.elements.tooltip.stop(true,true);v.timers.hide=setTimeout(function(){v.hide(B)},v.options.hide.delay)}if((v.options.show.when.target.add(v.options.hide.when.target).length===1&&v.options.show.when.event==v.options.hide.when.event&&v.options.hide.when.event!=="inactive")||v.options.hide.when.event=="unfocus"){v.cache.toggle=0;x.bind(v.options.show.when.event+".qtip",function(B){if(v.cache.toggle==0){z(B)}else{y(B)}})}else{x.bind(v.options.show.when.event+".qtip",z);if(v.options.hide.when.event!=="inactive"){w.bind(v.options.hide.when.event+".qtip",y)}}if(v.options.position.type.search(/(fixed|absolute)/)!==-1){v.elements.tooltip.bind("mouseover.qtip",v.focus)}if(v.options.position.target==="mouse"&&v.options.position.type!=="static"){x.bind("mousemove.qtip",function(B){v.cache.mouse={x:B.pageX,y:B.pageY};if(v.status.disabled===false&&v.options.position.adjust.mouse===true&&v.options.position.type!=="static"&&v.elements.tooltip.css("display")!=="none"){v.updatePosition(B)}})}}function q(w,x,C){var B,u,z,A,v,y;B=this;if(C.corner=="center"){return x.position}u=f.extend({},w);A={x:false,y:false};v={left:(u.left<f.fn.qtip.cache.screen.scroll.left),right:(u.left+C.dimensions.width+2>=f.fn.qtip.cache.screen.width+f.fn.qtip.cache.screen.scroll.left),top:(u.top<f.fn.qtip.cache.screen.scroll.top),bottom:(u.top+C.dimensions.height+2>=f.fn.qtip.cache.screen.height+f.fn.qtip.cache.screen.scroll.top)};z={left:(v.left&&(C.corner.search(/right/i)!=-1||(C.corner.search(/right/i)==-1&&!v.right))),right:(v.right&&(C.corner.search(/left/i)!=-1||(C.corner.search(/left/i)==-1&&!v.left))),top:(v.top&&C.corner.search(/top/i)==-1),bottom:(v.bottom&&C.corner.search(/bottom/i)==-1)};if(z.left){if(B.options.position.target!=="mouse"){u.left=x.position.left+x.dimensions.width}else{u.left=B.cache.mouse.x}A.x="Left"}else{if(z.right){if(B.options.position.target!=="mouse"){u.left=x.position.left-C.dimensions.width}else{u.left=B.cache.mouse.x-C.dimensions.width}A.x="Right"}}if(z.top){if(B.options.position.target!=="mouse"){u.top=x.position.top+x.dimensions.height}else{u.top=B.cache.mouse.y}A.y="top"}else{if(z.bottom){if(B.options.position.target!=="mouse"){u.top=x.position.top-C.dimensions.height}else{u.top=B.cache.mouse.y-C.dimensions.height}A.y="bottom"}}if(u.left<0){u.left=w.left;A.x=false}if(u.top<0){u.top=w.top;A.y=false}if(B.options.style.tip.corner!==false){u.corner=new String(C.corner);if(A.x!==false){u.corner=u.corner.replace(/Left|Right|Middle/,A.x)}if(A.y!==false){u.corner=u.corner.replace(/top|bottom/,A.y)}if(u.corner!==B.elements.tip.attr("rel")){e.call(B,u.corner)}}return u}function s(w,v){var x,u;x=f.extend(true,{},w);for(u in x){if(v===true&&u.search(/(tip|classes)/i)!==-1){delete x[u]}else{if(!v&&u.search(/(width|border|tip|title|classes|user)/i)!==-1){delete x[u]}}}return x}function c(u){if(typeof u.tip!=="object"){u.tip={corner:u.tip}}if(typeof u.tip.size!=="object"){u.tip.size={width:u.tip.size,height:u.tip.size}}if(typeof u.border!=="object"){u.border={width:u.border}}if(typeof u.width!=="object"){u.width={value:u.width}}if(typeof u.width.max=="string"){u.width.max=parseInt(u.width.max.replace(/([0-9]+)/i,"$1"))}if(typeof u.width.min=="string"){u.width.min=parseInt(u.width.min.replace(/([0-9]+)/i,"$1"))}if(typeof u.tip.size.x=="number"){u.tip.size.width=u.tip.size.x;delete u.tip.size.x}if(typeof u.tip.size.y=="number"){u.tip.size.height=u.tip.size.y;delete u.tip.size.y}return u}function a(){var u,v,w,z,x,y;u=this;w=[true,{}];for(v=0;v<arguments.length;v++){w.push(arguments[v])}z=[f.extend.apply(f,w)];while(typeof z[0].name=="string"){z.unshift(c(f.fn.qtip.styles[z[0].name]))}z.unshift(true,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},f.fn.qtip.styles.defaults);x=f.extend.apply(f,z);y=(f.browser.msie)?1:0;x.tip.size.width+=y;x.tip.size.height+=y;if(x.tip.size.width%2>0){x.tip.size.width+=1}if(x.tip.size.height%2>0){x.tip.size.height+=1}if(x.tip.corner===true){x.tip.corner=(u.options.position.corner.tooltip==="center")?false:u.options.position.corner.tooltip}return x}function b(x,w,v){var u={bottomRight:[[0,0],[w,v],[w,0]],bottomLeft:[[0,0],[w,0],[0,v]],topRight:[[0,v],[w,0],[w,v]],topLeft:[[0,0],[0,v],[w,v]],topMiddle:[[0,v],[w/2,0],[w,v]],bottomMiddle:[[0,0],[w,0],[w/2,v]],rightMiddle:[[0,0],[w,v/2],[0,v]],leftMiddle:[[w,0],[w,v],[0,v/2]]};u.leftTop=u.bottomRight;u.rightTop=u.bottomLeft;u.leftBottom=u.topRight;u.rightBottom=u.topLeft;return u[x]}function h(u){var v;if(f("<canvas>").get(0).getContext){v={topLeft:[u,u],topRight:[0,u],bottomLeft:[u,0],bottomRight:[0,0]}}else{if(f.browser.msie){v={topLeft:[-90,90,0],topRight:[-90,90,-u],bottomLeft:[90,270,0],bottomRight:[90,270,-u]}}}return v}function l(){var u,v,w;u=this;w=u.getDimensions();v='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+w.height+"px; width:"+w.width+'px" />';u.elements.bgiframe=u.elements.wrapper.prepend(v).children(".qtip-bgiframe:first")}f(document).ready(function(){f.fn.qtip.cache={screen:{scroll:{left:f(window).scrollLeft(),top:f(window).scrollTop()},width:f(window).width(),height:f(window).height()}};var u;f(window).bind("resize scroll",function(v){clearTimeout(u);u=setTimeout(function(){if(v.type==="scroll"){f.fn.qtip.cache.screen.scroll={left:f(window).scrollLeft(),top:f(window).scrollTop()}}else{f.fn.qtip.cache.screen.width=f(window).width();f.fn.qtip.cache.screen.height=f(window).height()}for(i=0;i<f.fn.qtip.interfaces.length;i++){var w=f.fn.qtip.interfaces[i];if(w.status.rendered===true&&(w.options.position.type!=="static"||w.options.position.adjust.scroll&&v.type==="scroll"||w.options.position.adjust.resize&&v.type==="resize")){w.updatePosition(v,true)}}},100)});f(document).bind("mousedown.qtip",function(v){if(f(v.target).parents("div.qtip").length===0){f(".qtip[unfocus]").each(function(){var w=f(this).qtip("api");if(f(this).is(":visible")&&!w.status.disabled&&f(v.target).add(w.elements.target).length>1){w.hide(v)}})}})});f.fn.qtip.interfaces=[];f.fn.qtip.log={error:function(){return this}};f.fn.qtip.constants={};f.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:"absolute",container:false},show:{when:{target:false,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};f.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#0b4e7e"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}})(jQuery);(function(){(function(e,c,a){var b,f,d;d="slidesjs";f={width:940,height:528,start:1,navigation:{active:true,effect:"slide"},keyboard_controls:true,pagination:{active:true,effect:"slide",customPaginationClass:""},play:{active:false,effect:"slide",interval:5000,auto:false,swap:true,pauseOnHover:false,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:true}},callback:{loaded:function(){},start:function(){},complete:function(){}}};b=(function(){function h(k,j){this.element=k;this.options=e.extend(true,{},f,j);this._defaults=f;this._name=d;this.init()}return h})();b.prototype.init=function(){var j,o,h,n,l,m,q=this;j=e(this.element);this.data=e.data(this);e.data(this,"animating",false);e.data(this,"total",j.children().not(".slidesjs-navigation",j).length);e.data(this,"current",this.options.start-1);e.data(this,"vendorPrefix",this._getVendorPrefix());if(typeof TouchEvent!=="undefined"){e.data(this,"touch",true);this.options.effect.slide.speed=this.options.effect.slide.speed/2}j.css({overflow:"hidden"});j.slidesContainer=j.children().not(".slidesjs-navigation, .pagination",j).wrapAll("<div class='slidesjs-container'>",j).parent().css({overflow:"hidden",position:"relative"});e(".slidesjs-container",j).wrapInner("<div class='slidesjs-control'>",j).children();e(".slidesjs-control",j).css({position:"relative",left:0});e(".slidesjs-control",j).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"});e.each(e(".slidesjs-control",j).children(),function(r){var s;s=e(this);return s.attr("slidesjs-index",r)});if(this.data.touch){e(".slidesjs-control",j).on("touchstart",function(r){return q._touchstart(r)});e(".slidesjs-control",j).on("touchmove",function(r){return q._touchmove(r)});e(".slidesjs-control",j).on("touchend",function(r){return q._touchend(r)})}e(a).keydown(function(r){return q._keydown(r)});j.fadeIn(0);this.update();if(this.data.touch){this._setuptouch()}e(".slidesjs-control",j).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return e(this).css({zIndex:10})});if(this.options.navigation.active){l=e("<a>",{"class":"slidesjs-previous slidesjs-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(j);o=e("<a>",{"class":"slidesjs-next slidesjs-navigation",href:"#",title:"Next",text:"Next"}).appendTo(j)}e(".slidesjs-next",j).click(function(r){r.preventDefault();q.stop(true);return q.next(q.options.navigation.effect)});e(".slidesjs-previous",j).click(function(r){r.preventDefault();q.stop(true);return q.previous(q.options.navigation.effect)});if(this.options.play.active){n=e("<a>",{"class":"slidesjs-play slidesjs-navigation",href:"#",title:"Play",text:"Play"}).appendTo(j);m=e("<a>",{"class":"slidesjs-stop slidesjs-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(j);n.click(function(r){r.preventDefault();return q.play(true)});m.click(function(r){r.preventDefault();return q.stop(true)});if(this.options.play.swap){m.css({display:"none"})}}if(this.options.pagination.active){if(this.options.pagination.customPaginationClass!==""){var k=this.options.pagination.customPaginationClass;h=e(this.options.pagination.customPaginationClass);e.each(new Array(this.data.total),function(r){var t,s;t=e("."+k+" li")[r];s=e(t).children("a");return s.click(function(u){u.preventDefault();q.stop(true);return q.gotoIndex((e(u.currentTarget).attr("data_item")*1)+1)})})}else{h=e("<ul>",{"class":"slidesjs-pagination"}).appendTo(j);e.each(new Array(this.data.total),function(r){var t,s;t=e("<li>",{"class":"slidesjs-pagination-item"}).appendTo(h);s=e("<a>",{href:"#","data-slidesjs-item":r,html:r+1}).appendTo(t);return s.click(function(u){u.preventDefault();q.stop(true);return q.gotoIndex((e(u.currentTarget).attr("data-slidesjs-item")*1)+1)})})}}e(c).bind("resize",function(){return q.update()});this._setActive();if(this.options.play.auto){this.play()}return this.options.callback.loaded(this.options.start)};b.prototype._setActive=function(j){var h,k;h=e(this.element);this.data=e.data(this);k=j>-1?j:this.data.current;e(".active",h).removeClass("active");e(".pagination li.current").removeClass("current");e(".pagination li:eq("+k+")").addClass("current");return e(".slidesjs-pagination li:eq("+k+") a",h).addClass("active")};b.prototype.update=function(){var j,h,k;j=e(this.element);this.data=e.data(this);e(".slidesjs-control",j).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0});k=j.width();currentSlide=e(".slide")[this.data.current];h=e(currentSlide).height();this.options.width=k;this.options.height=h;return e(".slidesjs-control, .slidesjs-container",j).css({width:k,height:h})};b.prototype.next=function(j){var h;h=e(this.element);this.data=e.data(this);e.data(this,"direction","next");if(j===void 0){j=this.options.navigation.effect}if(j==="fade"){return this._fade()}else{return this._slide()}};b.prototype.previous=function(j){var h;h=e(this.element);this.data=e.data(this);e.data(this,"direction","previous");if(j===void 0){j=this.options.navigation.effect}if(j==="fade"){return this._fade()}else{return this._slide()}};b.prototype.gotoIndex=function(k){var h,j;h=e(this.element);this.data=e.data(this);if(j===void 0){j=this.options.pagination.effect}if(k>this.data.total){k=this.data.total}else{if(k<1){k=1}}if(typeof k==="number"){if(j==="fade"){return this._fade(k)}else{return this._slide(k)}}else{if(typeof k==="string"){if(k==="first"){if(j==="fade"){return this._fade(0)}else{return this._slide(0)}}else{if(k==="last"){if(j==="fade"){return this._fade(this.data.total)}else{return this._slide(this.data.total)}}}}}};b.prototype._keydown=function(h){_this=this;if(h.which==37||h.which==39){this.data=e.data(this);if(h.which==37){e.data(this,"direction","previous")}if(h.which==39){e.data(this,"direction","next")}this._slide()}};b.prototype._setuptouch=function(){var h,k,l,j;h=e(this.element);this.data=e.data(this);j=e(".slidesjs-control",h);k=this.data.current+1;l=this.data.current-1;if(l<0){l=this.data.total-1}if(k>this.data.total-1){k=0}j.children(":eq("+k+")").css({display:"block",left:this.options.width});return j.children(":eq("+l+")").css({display:"block",left:-this.options.width})};b.prototype._touchstart=function(k){var h,j;h=e(this.element);this.data=e.data(this);j=k.originalEvent.touches[0];this._setuptouch();e.data(this,"touchtimer",Number(new Date()));e.data(this,"touchstartx",j.pageX);e.data(this,"touchstarty",j.pageY);return k.stopPropagation()};b.prototype._touchend=function(q){var r,l,n,k,h,m,j,o=this;r=e(this.element);this.data=e.data(this);m=q.originalEvent.touches[0];k=e(".slidesjs-control",r);if(k.position().left>this.options.width*0.5||k.position().left>this.options.width*0.1&&(Number(new Date())-this.data.touchtimer<250)){e.data(this,"direction","previous");this._slide()}else{if(k.position().left<-(this.options.width*0.5)||k.position().left<-(this.options.width*0.1)&&(Number(new Date())-this.data.touchtimer<250)){e.data(this,"direction","next");this._slide()}else{n=this.data.vendorPrefix;j=n+"Transform";l=n+"TransitionDuration";h=n+"TransitionTimingFunction";k[0].style[j]="translateX(0px)";k[0].style[l]=this.options.effect.slide.speed*0.85+"ms"}}k.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n=o.data.vendorPrefix;j=n+"Transform";l=n+"TransitionDuration";h=n+"TransitionTimingFunction";k[0].style[j]="";k[0].style[l]="";return k[0].style[h]=""});return q.stopPropagation()};b.prototype._touchmove=function(n){var h,l,k,m,j;h=e(this.element);this.data=e.data(this);m=n.originalEvent.touches[0];l=this.data.vendorPrefix;k=e(".slidesjs-control",h);j=l+"Transform";e.data(this,"scrolling",Math.abs(m.pageX-this.data.touchstartx)<Math.abs(m.pageY-this.data.touchstarty));if(!this.data.animating&&!this.data.scrolling){n.preventDefault();this._setuptouch();k[0].style[j]="translateX("+(m.pageX-this.data.touchstartx)+"px)"}return n.stopPropagation()};b.prototype.play=function(j){var h,l,k,m=this;h=e(this.element);this.data=e.data(this);if(!this.data.playInterval){if(j){l=this.data.current;this.data.direction="next";if(this.options.play.effect==="fade"){this._fade()}else{this._slide()}}e.data(this,"playInterval",setInterval((function(){l=m.data.current;m.data.direction="next";if(m.options.play.effect==="fade"){return m._fade()}else{return m._slide()}}),this.options.play.interval));k=e(".slidesjs-container",h);if(this.options.play.pauseOnHover){k.unbind();k.bind("mouseenter",function(){return m.stop()});k.bind("mouseleave",function(){if(m.options.play.restartDelay){return e.data(m,"restartDelay",setTimeout((function(){return m.play(true)}),m.options.play.restartDelay))}else{return m.play()}})}e.data(this,"playing",true);e(".slidesjs-play",h).addClass("slidesjs-playing");if(this.options.play.swap){e(".slidesjs-play",h).hide();return e(".slidesjs-stop",h).show()}}};b.prototype.stop=function(j){var h;h=e(this.element);this.data=e.data(this);clearInterval(this.data.playInterval);if(this.options.play.pauseOnHover&&j){e(".slidesjs-container",h).unbind()}e.data(this,"playInterval",null);e.data(this,"playing",false);e(".slidesjs-play",h).removeClass("slidesjs-playing");if(this.options.play.swap){e(".slidesjs-stop",h).hide();return e(".slidesjs-play",h).show()}};b.prototype._slide=function(m){var u,o,s,l,n,q,k,h,j,t,r=this;u=e(this.element);this.data=e.data(this);this.update();if(!this.data.animating&&m!==this.data.current+1){e.data(this,"animating",true);o=this.data.current;if(m>-1){m=m-1;t=m>o?1:-1;s=m>o?-this.options.width:this.options.width;n=m}else{t=this.data.direction==="next"?1:-1;s=this.data.direction==="next"?-this.options.width:this.options.width;n=o+t}if(n===-1){n=this.data.total-1}if(n===this.data.total){n=0}this._setActive(n);k=e(".slidesjs-control",u);if(m>-1){k.children(":not(:eq("+o+"))").css({display:"none",left:0,zIndex:0})}k.children(":eq("+n+")").css({display:"block",left:t*this.options.width,zIndex:10});this.options.callback.start(n);if(this.data.vendorPrefix){q=this.data.vendorPrefix;j=q+"Transform";l=q+"TransitionDuration";h=q+"TransitionTimingFunction";k[0].style[j]="translateX("+s+"px)";k[0].style[l]=this.options.effect.slide.speed+"ms";return k.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){k[0].style[j]="";k[0].style[l]="";k.children(":eq("+n+")").css({left:0});k.children(":eq("+o+")").css({display:"none",left:0,zIndex:0});e.data(r,"current",n);e.data(r,"animating",false);k.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd");k.children(":not(:eq("+n+"))").css({display:"none",left:0,zIndex:0});if(r.data.touch){r._setuptouch()}return r.options.callback.complete(n)})}else{return k.stop().animate({left:s},this.options.effect.slide.speed,(function(){k.css({left:0});k.children(":eq("+n+")").css({left:0});return k.children(":eq("+o+")").css({display:"none",left:0,zIndex:0},e.data(r,"current",n),e.data(r,"animating",false),r.options.callback.complete(n+1))}))}}};b.prototype._fade=function(l){var h,n,k,j,m,o=this;h=e(this.element);this.data=e.data(this);if(!this.data.animating&&l!==this.data.current+1){e.data(this,"animating",true);n=this.data.current;if(l){l=l-1;m=l>n?1:-1;k=l}else{m=this.data.direction==="next"?1:-1;k=n+m}if(k===-1){k=this.data.total-1}if(k===this.data.total){k=0}this._setActive(k);j=e(".slidesjs-control",h);j.children(":eq("+k+")").css({display:"none",left:0,zIndex:10});this.options.callback.start(n+1);if(this.options.effect.fade.crossfade){j.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed);return j.children(":eq("+k+")").stop().fadeIn(this.options.effect.fade.speed,(function(){j.children(":eq("+k+")").css({zIndex:0});e.data(o,"animating",false);e.data(o,"current",k);o.update();return o.options.callback.complete(k+1)}))}else{return j.children(":eq("+n+")").stop().fadeOut(this.options.effect.fade.speed,(function(){j.children(":eq("+k+")").stop().fadeIn(o.options.effect.fade.speed,(function(){return j.children(":eq("+k+")").css({zIndex:10})}));e.data(o,"animating",false);e.data(o,"current",k);o.update();return o.options.callback.complete(k+1)}))}}};b.prototype._getVendorPrefix=function(){var h,j,k,l,m;h=a.body||a.documentElement;k=h.style;l="transition";m=["Moz","Webkit","Khtml","O","ms"];l=l.charAt(0).toUpperCase()+l.substr(1);j=0;while(j<m.length){if(typeof k[m[j]+l]==="string"){return m[j]}j++}return false};return e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){return e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document)}).call(this);(function(f){var e={common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:false},line:{spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",drawNormalOnTop:false,chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined},bar:{barColor:"#00f",negBarColor:"#f44",zeroColor:undefined,nullColor:undefined,zeroAxis:undefined,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false,colorMap:undefined},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},discrete:{lineHeight:"auto",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false},bullet:{targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE","#A8B6FF","#7F94FF"],base:undefined},pie:{sliceColors:["#f00","#0f0","#00f"]},box:{raw:false,boxLineColor:"black",boxFillColor:"#cdf",whiskerColor:"black",outlierLineColor:"#333",outlierFillColor:"white",medianColor:"red",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:"#4a2",chartRangeMax:undefined,chartRangeMin:undefined}};var k,b,c;f.fn.simpledraw=function(n,m,o){if(o&&this[0].VCanvas){return this[0].VCanvas}if(n===undefined){n=f(this).innerWidth()}if(m===undefined){m=f(this).innerHeight()}if(f.browser.hasCanvas){return new b(n,m,this)}else{if(f.browser.msie){return new c(n,m,this)}else{return false}}};var a=[];f.fn.sparkline=function(m,n){return this.each(function(){var o=new f.fn.sparkline.options(this,n);var q=function(){var s,u,r;if(m==="html"||m===undefined){var v=this.getAttribute(o.get("tagValuesAttribute"));if(v===undefined||v===null){v=f(this).html()}s=v.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else{s=m}u=o.get("width")=="auto"?s.length*o.get("defaultPixelsPerValue"):o.get("width");if(o.get("height")=="auto"){if(!o.get("composite")||!this.VCanvas){var t=document.createElement("span");t.innerHTML="a";f(this).html(t);r=f(t).innerHeight();f(t).remove()}}else{r=o.get("height")}f.fn.sparkline[o.get("type")].call(this,s,o,u,r)};if((f(this).html()&&f(this).is(":hidden"))||(f.fn.jquery<"1.3.0"&&f(this).parents().is(":hidden"))||!f(this).parents("body").length){a.push([this,q])}else{q.call(this)}})};f.fn.sparkline.defaults=e;f.sparkline_display_visible=function(){for(var m=a.length-1;m>=0;m--){var n=a[m][0];if(f(n).is(":visible")&&!f(n).parents().is(":hidden")){a[m][1].call(n);a.splice(m,1)}}};var h={};var d=function(n){switch(n){case"undefined":n=undefined;break;case"null":n=null;break;case"true":n=true;break;case"false":n=false;break;default:var m=parseFloat(n);if(n==m){n=m}}return n};f.fn.sparkline.options=function(m,s){var r;this.userOptions=s=s||{};this.tag=m;this.tagValCache={};var q=f.fn.sparkline.defaults;var o=q.common;this.tagOptionsPrefix=s.enableTagOptions&&(s.tagOptionsPrefix||o.tagOptionsPrefix);var n=this.getTagSetting("type");if(n===h){r=q[s.type||o.type]}else{r=q[n]}this.mergedOptions=f.extend({},o,r,s)};f.fn.sparkline.options.prototype.getTagSetting=function(o){var s,n,r=this.tagOptionsPrefix;if(r===false||r===undefined){return h}if(this.tagValCache.hasOwnProperty(o)){s=this.tagValCache.key}else{s=this.tag.getAttribute(r+o);if(s===undefined||s===null){s=h}else{if(s.substr(0,1)=="["){s=s.substr(1,s.length-2).split(",");for(n=s.length;n--;){s[n]=d(s[n].replace(/(^\s*)|(\s*$)/g,""))}}else{if(s.substr(0,1)=="{"){var q=s.substr(1,s.length-2).split(",");s={};for(n=q.length;n--;){var m=q[n].split(":",2);s[m[0].replace(/(^\s*)|(\s*$)/g,"")]=d(m[1].replace(/(^\s*)|(\s*$)/g,""))}}else{s=d(s)}}}this.tagValCache.key=s}return s};f.fn.sparkline.options.prototype.get=function(n){var m=this.getTagSetting(n);if(m!==h){return m}return this.mergedOptions[n]};f.fn.sparkline.line=function(aa,I,n,o){var z=[],w=[],H=[];for(var Z=0;Z<aa.length;Z++){var K=aa[Z];var t=typeof(aa[Z])=="string";var T=typeof(aa[Z])=="object"&&aa[Z] instanceof Array;var B=t&&aa[Z].split(":");if(t&&B.length==2){z.push(Number(B[0]));w.push(Number(B[1]));H.push(Number(B[1]))}else{if(T){z.push(K[0]);w.push(K[1]);H.push(K[1])}else{z.push(Z);if(aa[Z]===null||aa[Z]=="null"){w.push(null)}else{w.push(Number(K));H.push(Number(K))}}}}if(I.get("xvalues")){z=I.get("xvalues")}var r=Math.max.apply(Math,H);var R=r;var F=Math.min.apply(Math,H);var N=F;var s=Math.max.apply(Math,z);var G=Math.min.apply(Math,z);var M=I.get("normalRangeMin");var q=I.get("normalRangeMax");if(M!==undefined){if(M<F){F=M}if(q>r){r=q}}if(I.get("chartRangeMin")!==undefined&&(I.get("chartRangeClip")||I.get("chartRangeMin")<F)){F=I.get("chartRangeMin")}if(I.get("chartRangeMax")!==undefined&&(I.get("chartRangeClip")||I.get("chartRangeMax")>r)){r=I.get("chartRangeMax")}if(I.get("chartRangeMinX")!==undefined&&(I.get("chartRangeClipX")||I.get("chartRangeMinX")<G)){G=I.get("chartRangeMinX")}if(I.get("chartRangeMaxX")!==undefined&&(I.get("chartRangeClipX")||I.get("chartRangeMaxX")>s)){s=I.get("chartRangeMaxX")}var C=s-G===0?1:s-G;var A=r-F===0?1:r-F;var E=w.length-1;if(E<1){this.innerHTML="";return}var m=f(this).simpledraw(n,o,I.get("composite"));if(m){var Q=m.pixel_width;var V=m.pixel_height;var J=0;var v=0;var Y=I.get("spotRadius");if(Y&&(Q<(Y*4)||V<(Y*4))){Y=0}if(Y){if(I.get("minSpotColor")||(I.get("spotColor")&&w[E]==F)){V-=Math.ceil(Y)}if(I.get("maxSpotColor")||(I.get("spotColor")&&w[E]==r)){V-=Math.ceil(Y);J+=Math.ceil(Y)}if(I.get("minSpotColor")||I.get("maxSpotColor")&&(w[0]==F||w[0]==r)){v+=Math.ceil(Y);Q-=Math.ceil(Y)}if(I.get("spotColor")||(I.get("minSpotColor")||I.get("maxSpotColor")&&(w[E]==F||w[E]==r))){Q-=Math.ceil(Y)}}V--;var L=function(){if(M!==undefined){var y=J+Math.round(V-(V*((q-F)/A)));var x=Math.round((V*(q-M))/A);m.drawRect(v,y,Q,x,undefined,I.get("normalRangeColor"))}};if(!I.get("drawNormalOnTop")){L()}var W=[];var O=[W];var U,S,X=w.length;for(Z=0;Z<X;Z++){U=z[Z];S=w[Z];if(S===null){if(Z){if(w[Z-1]!==null){W=[];O.push(W)}}}else{if(S<F){S=F}if(S>r){S=r}if(!W.length){W.push([v+Math.round((U-G)*(Q/C)),J+V])}W.push([v+Math.round((U-G)*(Q/C)),J+Math.round(V-(V*((S-F)/A)))])}}var P=[];var u=[];var D=O.length;for(Z=0;Z<D;Z++){W=O[Z];if(!W.length){continue}if(I.get("fillColor")){W.push([W[W.length-1][0],J+V-1]);u.push(W.slice(0));W.pop()}if(W.length>2){W[0]=[W[0][0],W[1][1]]}P.push(W)}D=u.length;for(Z=0;Z<D;Z++){m.drawShape(u[Z],undefined,I.get("fillColor"))}if(I.get("drawNormalOnTop")){L()}D=P.length;for(Z=0;Z<D;Z++){m.drawShape(P[Z],I.get("lineColor"),undefined,I.get("lineWidth"))}if(Y&&I.get("spotColor")){m.drawCircle(v+Math.round(z[z.length-1]*(Q/C)),J+Math.round(V-(V*((w[E]-F)/A))),Y,undefined,I.get("spotColor"))}if(r!=N){if(Y&&I.get("minSpotColor")){U=z[f.inArray(N,w)];m.drawCircle(v+Math.round((U-G)*(Q/C)),J+Math.round(V-(V*((N-F)/A))),Y,undefined,I.get("minSpotColor"))}if(Y&&I.get("maxSpotColor")){U=z[f.inArray(R,w)];m.drawCircle(v+Math.round((U-G)*(Q/C)),J+Math.round(V-(V*((R-F)/A))),Y,undefined,I.get("maxSpotColor"))}}}else{this.innerHTML=""}};f.fn.sparkline.bar=function(m,o,A,w){A=(m.length*o.get("barWidth"))+((m.length-1)*o.get("barSpacing"));var q=[];for(var G=0,s=m.length;G<s;G++){if(m[G]=="null"||m[G]===null){m[G]=null}else{m[G]=Number(m[G]);q.push(Number(m[G]))}}var F=Math.max.apply(Math,q),B=Math.min.apply(Math,q);if(o.get("chartRangeMin")!==undefined&&(o.get("chartRangeClip")||o.get("chartRangeMin")<B)){B=o.get("chartRangeMin")}if(o.get("chartRangeMax")!==undefined&&(o.get("chartRangeClip")||o.get("chartRangeMax")>F)){F=o.get("chartRangeMax")}var E=o.get("zeroAxis");if(E===undefined){E=B<0}var v=F-B===0?1:F-B;var r,z;if(f.isArray(o.get("colorMap"))){r=o.get("colorMap");z=null}else{r=null;z=o.get("colorMap")}var H=f(this).simpledraw(A,w,o.get("composite"));if(H){var C,D=H.pixel_height,n=B<0&&E?D-Math.round(D*(Math.abs(B)/v))-1:D-1;for(G=m.length;G--;){var u=G*(o.get("barWidth")+o.get("barSpacing")),t,I=m[G];if(I===null){if(o.get("nullColor")){C=o.get("nullColor");I=(E&&B<0)?0:B;w=1;t=(E&&B<0)?n:D-w}else{continue}}else{if(I<B){I=B}if(I>F){I=F}C=(I<0)?o.get("negBarColor"):o.get("barColor");if(E&&B<0){w=Math.round(D*((Math.abs(I)/v)))+1;t=(I<0)?n:n-w}else{w=Math.round(D*((I-B)/v))+1;t=D-w}if(I===0&&o.get("zeroColor")!==undefined){C=o.get("zeroColor")}if(z&&z[I]){C=z[I]}else{if(r&&r.length>G){C=r[G]}}if(C===null){continue}}H.drawRect(u,t,o.get("barWidth")-1,w-1,C,C)}}else{this.innerHTML=""}};f.fn.sparkline.tristate=function(z,B,n,A){z=f.map(z,Number);n=(z.length*B.get("barWidth"))+((z.length-1)*B.get("barSpacing"));var s,w;if(f.isArray(B.get("colorMap"))){s=B.get("colorMap");w=null}else{s=null;w=B.get("colorMap")}var t=f(this).simpledraw(n,A,B.get("composite"));if(t){var m=t.pixel_height,r=Math.round(m/2);for(var q=z.length;q--;){var v=q*(B.get("barWidth")+B.get("barSpacing")),u,o;if(z[q]<0){u=r;A=r-1;o=B.get("negBarColor")}else{if(z[q]>0){u=0;A=r-1;o=B.get("posBarColor")}else{u=r-1;A=2;o=B.get("zeroBarColor")}}if(w&&w[z[q]]){o=w[z[q]]}else{if(s&&s.length>q){o=s[q]}}if(o===null){continue}t.drawRect(v,u,B.get("barWidth")-1,A-1,o,o)}}else{this.innerHTML=""}};f.fn.sparkline.discrete=function(B,D,n,C){B=f.map(B,Number);n=D.get("width")=="auto"?B.length*2:n;var q=Math.floor(n/B.length);var w=f(this).simpledraw(n,C,D.get("composite"));if(w){var m=w.pixel_height,A=D.get("lineHeight")=="auto"?Math.round(m*0.3):D.get("lineHeight"),v=m-A,s=Math.min.apply(Math,B),y=Math.max.apply(Math,B);if(D.get("chartRangeMin")!==undefined&&(D.get("chartRangeClip")||D.get("chartRangeMin")<s)){s=D.get("chartRangeMin")}if(D.get("chartRangeMax")!==undefined&&(D.get("chartRangeClip")||D.get("chartRangeMax")>y)){y=D.get("chartRangeMax")}var u=y-s;for(var t=B.length;t--;){var r=B[t];if(r<s){r=s}if(r>y){r=y}var z=(t*q),o=Math.round(v-v*((r-s)/u));w.drawLine(z,o,z,o+A,(D.get("thresholdColor")&&r<D.get("thresholdValue"))?D.get("thresholdColor"):D.get("lineColor"))}}else{this.innerHTML=""}};f.fn.sparkline.bullet=function(o,r,A,y){o=f.map(o,Number);A=r.get("width")=="auto"?"4.0em":A;var H=f(this).simpledraw(A,y,r.get("composite"));if(H&&o.length>1){var G=H.pixel_width-Math.ceil(r.get("targetWidth")/2),C=H.pixel_height,B=Math.min.apply(Math,o),D=Math.max.apply(Math,o);if(r.get("base")===undefined){B=B<0?B:0}else{B=r.get("base")}var v=D-B;for(var E=2,t=o.length;E<t;E++){var s=o[E],n=Math.round(G*((s-B)/v));H.drawRect(0,0,n-1,C-1,r.get("rangeColors")[E-2],r.get("rangeColors")[E-2])}var z=o[1],m=Math.round(G*((z-B)/v));H.drawRect(0,Math.round(C*0.3),m-1,Math.round(C*0.4)-1,r.get("performanceColor"),r.get("performanceColor"));var w=o[0],u=Math.round(G*((w-B)/v)-(r.get("targetWidth")/2)),q=Math.round(C*0.1),F=C-(q*2);H.drawRect(u,q,r.get("targetWidth")-1,F-1,r.get("targetColor"),r.get("targetColor"))}else{this.innerHTML=""}};f.fn.sparkline.pie=function(z,B,q,A){z=f.map(z,Number);q=B.get("width")=="auto"?A:q;var v=f(this).simpledraw(q,A,B.get("composite"));if(v&&z.length>1){var w=v.pixel_width,m=v.pixel_height,u=Math.floor(Math.min(w,m)/2),x=0,t=0,n=2*Math.PI;for(var s=z.length;s--;){x+=z[s]}if(B.get("offset")){t+=(2*Math.PI)*(B.get("offset")/360)}var y=z.length;for(s=0;s<y;s++){var o=t;var r=t;if(x>0){r=t+(n*(z[s]/x))}v.drawPieSlice(u,u,u,o,r,undefined,B.get("sliceColors")[s%B.get("sliceColors").length]);t=r}}};var j=function(n,o){if(o==2){var m=Math.floor(n.length/2);return n.length%2?n[m]:(n[m]+n[m+1])/2}else{var r=Math.floor(n.length/4);return n.length%2?(n[r*o]+n[r*o+1])/2:n[r*o]}};f.fn.sparkline.box=function(n,q,B,z){n=f.map(n,Number);B=q.get("width")=="auto"?"4.0em":B;var r=q.get("chartRangeMin")===undefined?Math.min.apply(Math,n):q.get("chartRangeMin"),A=q.get("chartRangeMax")===undefined?Math.max.apply(Math,n):q.get("chartRangeMax"),I=f(this).simpledraw(B,z,q.get("composite")),t=n.length,x,G,w,v,u,m,s;if(I&&n.length>1){var F=I.pixel_width,C=I.pixel_height;if(q.get("raw")){if(q.get("showOutliers")&&n.length>5){G=n[0];x=n[1];w=n[2];v=n[3];u=n[4];m=n[5];s=n[6]}else{x=n[0];w=n[1];v=n[2];u=n[3];m=n[4]}}else{n.sort(function(K,J){return K-J});w=j(n,1);v=j(n,2);u=j(n,3);var o=u-w;if(q.get("showOutliers")){x=undefined;m=undefined;for(var D=0;D<t;D++){if(x===undefined&&n[D]>w-(o*q.get("outlierIQR"))){x=n[D]}if(n[D]<u+(o*q.get("outlierIQR"))){m=n[D]}}G=n[0];s=n[t-1]}else{x=n[0];m=n[t-1]}}var H=F/(A-r+1),E=0;if(q.get("showOutliers")){E=Math.ceil(q.get("spotRadius"));F-=2*Math.ceil(q.get("spotRadius"));H=F/(A-r+1);if(G<x){I.drawCircle((G-r)*H+E,C/2,q.get("spotRadius"),q.get("outlierLineColor"),q.get("outlierFillColor"))}if(s>m){I.drawCircle((s-r)*H+E,C/2,q.get("spotRadius"),q.get("outlierLineColor"),q.get("outlierFillColor"))}}I.drawRect(Math.round((w-r)*H+E),Math.round(C*0.1),Math.round((u-w)*H),Math.round(C*0.8),q.get("boxLineColor"),q.get("boxFillColor"));I.drawLine(Math.round((x-r)*H+E),Math.round(C/2),Math.round((w-r)*H+E),Math.round(C/2),q.get("lineColor"));I.drawLine(Math.round((x-r)*H+E),Math.round(C/4),Math.round((x-r)*H+E),Math.round(C-C/4),q.get("whiskerColor"));I.drawLine(Math.round((m-r)*H+E),Math.round(C/2),Math.round((u-r)*H+E),Math.round(C/2),q.get("lineColor"));I.drawLine(Math.round((m-r)*H+E),Math.round(C/4),Math.round((m-r)*H+E),Math.round(C-C/4),q.get("whiskerColor"));I.drawLine(Math.round((v-r)*H+E),Math.round(C*0.1),Math.round((v-r)*H+E),Math.round(C*0.9),q.get("medianColor"));if(q.get("target")){var y=Math.ceil(q.get("spotRadius"));I.drawLine(Math.round((q.get("target")-r)*H+E),Math.round((C/2)-y),Math.round((q.get("target")-r)*H+E),Math.round((C/2)+y),q.get("targetColor"));I.drawLine(Math.round((q.get("target")-r)*H+E-y),Math.round(C/2),Math.round((q.get("target")-r)*H+E+y),Math.round(C/2),q.get("targetColor"))}}else{this.innerHTML=""}};if(f.browser.msie&&document.namespaces&&!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")}if(f.browser.hasCanvas===undefined){var l=document.createElement("canvas");f.browser.hasCanvas=l.getContext!==undefined}k=function(n,m,o){};k.prototype={init:function(n,m,o){this.width=n;this.height=m;this.target=o;if(o[0]){o=o[0]}o.VCanvas=this},drawShape:function(o,n,q,m){alert("drawShape not implemented")},drawLine:function(o,r,n,q,s,m){return this.drawShape([[o,r],[n,q]],s,m)},drawCircle:function(n,r,m,o,q){alert("drawCircle not implemented")},drawPieSlice:function(n,t,m,q,o,r,s){alert("drawPieSlice not implemented")},drawRect:function(n,s,o,m,q,r){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(m,n){f(n).html(m)}};b=function(n,m,o){return this.init(n,m,o)};b.prototype=f.extend(new k(),{_super:k.prototype,init:function(n,m,o){this._super.init(n,m,o);this.canvas=document.createElement("canvas");if(o[0]){o=o[0]}o.VCanvas=this;f(this.canvas).css({display:"inline-block",width:n,height:m,verticalAlign:"top"});this._insert(this.canvas,o);this.pixel_height=f(this.canvas).height();this.pixel_width=f(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;f(this.canvas).css({width:this.pixel_width,height:this.pixel_height})},_getContext:function(o,q,m){var n=this.canvas.getContext("2d");if(o!==undefined){n.strokeStyle=o}n.lineWidth=m===undefined?1:m;if(q!==undefined){n.fillStyle=q}return n},drawShape:function(s,r,t,m){var o=this._getContext(r,t,m);o.beginPath();o.moveTo(s[0][0]+0.5,s[0][1]+0.5);for(var n=1,q=s.length;n<q;n++){o.lineTo(s[n][0]+0.5,s[n][1]+0.5)}if(r!==undefined){o.stroke()}if(t!==undefined){o.fill()}},drawCircle:function(n,s,m,q,r){var o=this._getContext(q,r);o.beginPath();o.arc(n,s,m,0,2*Math.PI,false);if(q!==undefined){o.stroke()}if(r!==undefined){o.fill()}},drawPieSlice:function(n,u,m,r,o,s,t){var q=this._getContext(s,t);q.beginPath();q.moveTo(n,u);q.arc(n,u,m,r,o,false);q.lineTo(n,u);q.closePath();if(s!==undefined){q.stroke()}if(t){q.fill()}},drawRect:function(n,s,o,m,q,r){return this.drawShape([[n,s],[n+o,s],[n+o,s+m],[n,s+m],[n,s]],q,r)}});c=function(n,m,o){return this.init(n,m,o)};c.prototype=f.extend(new k(),{_super:k.prototype,init:function(n,m,q){this._super.init(n,m,q);if(q[0]){q=q[0]}q.VCanvas=this;this.canvas=document.createElement("span");f(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:n,height:m,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,q);this.pixel_height=f(this.canvas).height();this.pixel_width=f(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;var o='<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",o);this.group=f(this.canvas).children()[0]},drawShape:function(y,t,m,q){var u=[];for(var o=0,n=y.length;o<n;o++){u[o]=""+(y[o][0])+","+(y[o][1])}var s=u.splice(0,1);q=q===undefined?1:q;var x=t===undefined?' stroked="false" ':' strokeWeight="'+q+'" strokeColor="'+t+'" ';var w=m===undefined?' filled="false"':' fillColor="'+m+'" filled="true" ';var r=u[0]==u[u.length-1]?"x ":"";var v='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+x+w+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+s+" l "+u.join(", ")+" "+r+'e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",v)},drawCircle:function(n,u,m,s,t){n-=m+1;u-=m+1;var r=s===undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+s+'" ';var q=t===undefined?' filled="false"':' fillColor="'+t+'" filled="true" ';var o="<v:oval "+r+q+' style="position:absolute;top:'+u+"px; left:"+n+"px; width:"+(m*2)+"px; height:"+(m*2)+'px"></v:oval>';this.group.insertAdjacentHTML("beforeEnd",o)},drawPieSlice:function(A,w,t,u,q,z,o){if(u==q){return}if((q-u)==(2*Math.PI)){u=0;q=(2*Math.PI)}var n=A+Math.round(Math.cos(u)*t);var m=w+Math.round(Math.sin(u)*t);var s=A+Math.round(Math.cos(q)*t);var r=w+Math.round(Math.sin(q)*t);if(n==s&&m==r&&(q-u)<Math.PI){return}var v=[A-t,w-t,A+t,w+t,n,m,s,r];var D=z===undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+z+'" ';var C=o===undefined?' filled="false"':' fillColor="'+o+'" filled="true" ';var B='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+D+C+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+A+","+w+" wa "+v.join(", ")+' x e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",B)},drawRect:function(n,s,o,m,q,r){return this.drawShape([[n,s],[n,s+m],[n+o,s+m],[n+o,s],[n,s]],q,r)}})})(jQuery);(function(a){a.fn.spin=function(d,c){var b={tiny:{lines:8,length:2,width:2,radius:3},xsmall:{lines:8,length:3,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner){return this.each(function(){var f=a(this),e=f.data();if(e.spinner){e.spinner.stop();delete e.spinner}if(d!==false){if(typeof d==="string"){if(d in b){d=b[d]}else{d={}}if(c){d.color=c}}e.spinner=new Spinner(a.extend({color:f.css("color")},d)).spin(this)}})}else{throw"Spinner class not available."}}})(jQuery);(function(f,l,d){var o="watermark",j="watermarkClass",c="watermarkFocus",k="watermarkSubmit",e="watermarkMaxLength",h="watermarkPassword",s="watermarkText",n=/\r/g,b="input:data("+o+"),textarea:data("+o+")",m="input:text,input:password,input[type=search],input:not([type]),textarea",r=["Page_ClientValidate"],q=false,a=("placeholder" in document.createElement("input"));f.watermark=f.watermark||{version:"3.1.3",runOnce:true,options:{className:"watermark",useNative:true,hideBeforeUnload:true},hide:function(t){f(t).filter(b).each(function(){f.watermark._hide(f(this))})},_hide:function(z,B){var v=z[0],t=(v.value||"").replace(n,""),x=z.data(s)||"",w=z.data(e)||0,y=z.data(j);if((x.length)&&(t==x)){v.value="";if(z.data(h)){if((z.attr("type")||"")==="text"){var u=z.data(h)||[],A=z.parent()||[];if((u.length)&&(A.length)){A[0].removeChild(z[0]);A[0].appendChild(u[0]);z=u}}}if(w){z.attr("maxLength",w);z.removeData(e)}if(B){z.attr("autocomplete","off");l.setTimeout(function(){z.select()},1)}}y&&z.removeClass(y)},show:function(t){f(t).filter(b).each(function(){f.watermark._show(f(this))})},_show:function(z){var v=z[0],u=(v.value||"").replace(n,""),A=z.data(s)||"",y=z.attr("type")||"",x=z.data(j);if(((u.length==0)||(u==A))&&(!z.data(c))){q=true;if(z.data(h)){if(y==="password"){var t=z.data(h)||[],B=z.parent()||[];if((t.length)&&(B.length)){B[0].removeChild(z[0]);B[0].appendChild(t[0]);z=t;z.attr("maxLength",A.length);v=z[0]}}}if((y==="text")||(y==="search")){var w=z.attr("maxLength")||0;if((w>0)&&(A.length>w)){z.data(e,w);z.attr("maxLength",A.length)}}x&&z.addClass(x);v.value=A}else{f.watermark._hide(z)}},hideAll:function(){if(q){f.watermark.hide(m);q=false}},showAll:function(){f.watermark.show(m)}};f.fn.watermark=f.fn.watermark||function(w,t){if(!this.length){return this}var v=false,u=(typeof(w)==="string");if(u){w=w.replace(n,"")}if(typeof(t)==="object"){v=(typeof(t.className)==="string");t=f.extend({},f.watermark.options,t)}else{if(typeof(t)==="string"){v=true;t=f.extend({},f.watermark.options,{className:t})}else{t=f.watermark.options}}if(typeof(t.useNative)!=="function"){t.useNative=t.useNative?function(){return true}:function(){return false}}return this.each(function(){var B=f(this);if(!B.is(m)){return}if(B.data(o)){if(u||v){f.watermark._hide(B);if(u){B.data(s,w)}if(v){B.data(j,t.className)}}}else{if((a)&&(t.useNative.call(this,B))&&((B.attr("tagName")||"")!=="TEXTAREA")){if(u){B.attr("placeholder",w)}return}B.data(s,u?w:"");B.data(j,t.className);B.data(o,1);if((B.attr("type")||"")==="password"){var x=B.wrap("<span>").parent(),A=f(x.html().replace(/type=["']?password["']?/i,'type="text"'));A.data(s,B.data(s));A.data(j,B.data(j));A.data(o,1);A.attr("maxLength",w.length);A.focus(function(){f.watermark._hide(A,true)}).bind("dragenter",function(){f.watermark._hide(A)}).bind("dragend",function(){l.setTimeout(function(){A.blur()},1)});B.blur(function(){f.watermark._show(B)}).bind("dragleave",function(){f.watermark._show(B)});A.data(h,B);B.data(h,A)}else{B.focus(function(){B.data(c,1);f.watermark._hide(B,true)}).blur(function(){B.data(c,0);f.watermark._show(B)}).bind("dragenter",function(){f.watermark._hide(B)}).bind("dragleave",function(){f.watermark._show(B)}).bind("dragend",function(){l.setTimeout(function(){f.watermark._show(B)},1)}).bind("drop",function(C){var E=B[0],D=C.originalEvent.dataTransfer.getData("Text");if((E.value||"").replace(n,"").replace(D,"")===B.data(s)){E.value=D}B.focus()})}if(this.form){var z=this.form,y=f(z);if(!y.data(k)){y.submit(f.watermark.hideAll);if(z.submit){y.data(k,z.submit);z.submit=(function(D,C){return function(){var E=C.data(k);f.watermark.hideAll();if(E.apply){E.apply(D,Array.prototype.slice.call(arguments))}else{E()}}})(z,y)}else{y.data(k,1);z.submit=(function(C){return function(){f.watermark.hideAll();delete C.submit;C.submit()}})(z)}}}}f.watermark._show(B)})};if(f.watermark.runOnce){f.watermark.runOnce=false;f.extend(f.expr[":"],{data:function(v,u,t){return !!f.data(v,t[3])}});(function(t){f.fn.val=function(){if(!this.length){return arguments.length?this:d}if(!arguments.length){if(this.data(o)){var u=(this[0].value||"").replace(n,"");return(u===(this.data(s)||""))?"":u}else{return t.apply(this,arguments)}}else{t.apply(this,arguments);f.watermark.show(this);return this}}})(f.fn.val);if(r.length){f(function(){var u,t,v;for(u=r.length-1;u>=0;u--){t=r[u];v=l[t];if(typeof(v)==="function"){l[t]=(function(w){return function(){f.watermark.hideAll();return w.apply(null,Array.prototype.slice.call(arguments))}})(v)}}})}f(l).bind("beforeunload",function(){if(f.watermark.options.hideBeforeUnload){f.watermark.hideAll()}})}})(jQuery,window);
/*!
jQuery Waypoints - v1.1.7
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
(function($,m,o,k,d){var e=$(k),h="waypoint.reached",b=function(r,q){r.element.trigger(h,q);if(r.options.triggerOnce){r.element[m]("destroy")}},j=function(s,r){if(!r){return -1}var q=r.waypoints.length-1;while(q>=0&&r.waypoints[q].element[0]!==s[0]){q-=1}return q},f=[],n=function(q){$.extend(this,{element:$(q),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:$.proxy(function(){var t=this.element.scrollTop(),s=t>this.oldScroll,v=this,u=$.grep(this.waypoints,function(x,w){return s?(x.offset>v.oldScroll&&x.offset<=t):(x.offset<=v.oldScroll&&x.offset>t)}),r=u.length;if(!this.oldScroll||!t){$[o]("refresh")}this.oldScroll=t;if(!r){return}if(!s){u.reverse()}$.each(u,function(x,w){if(w.options.continuous||x===r-1){b(w,[s?"down":"up"])}})},this)});$(q).bind("scroll.waypoints",$.proxy(function(){if(!this.didScroll){this.didScroll=true;k.setTimeout($.proxy(function(){this.doScroll();this.didScroll=false},this),$[o].settings.scrollThrottle)}},this)).bind("resize.waypoints",$.proxy(function(){if(!this.didResize){this.didResize=true;k.setTimeout($.proxy(function(){$[o]("refresh");this.didResize=false},this),$[o].settings.resizeThrottle)}},this));e.load($.proxy(function(){this.doScroll()},this))},l=function(q){var r=null;$.each(f,function(s,t){if(t.element[0]===q){r=t;return false}});return r},c={init:function(r,q){this.each(function(){var x=$.fn[m].defaults.context,t,w=$(this);if(q&&q.context){x=q.context}if(!$.isWindow(x)){x=w.closest(x)[0]}t=l(x);if(!t){t=new n(x);f.push(t)}var s=j(w,t),v=s<0?$.fn[m].defaults:t.waypoints[s].options,u=$.extend({},v,q);u.offset=u.offset==="bottom-in-view"?function(){var y=$.isWindow(x)?$[o]("viewportHeight"):$(x).height();return y-$(this).outerHeight()}:u.offset;if(s<0){t.waypoints.push({element:w,offset:null,options:u})}else{t.waypoints[s].options=u}if(r){w.bind(h,r)}if(q&&q.handler){w.bind(h,q.handler)}});$[o]("refresh");return this},remove:function(){return this.each(function(r,s){var q=$(s);$.each(f,function(u,v){var t=j(q,v);if(t>=0){v.waypoints.splice(t,1);if(!v.waypoints.length){v.element.unbind("scroll.waypoints resize.waypoints");f.splice(u,1)}}})})},destroy:function(){return this.unbind(h)[m]("remove")}},a={refresh:function(){$.each(f,function(u,v){var t=$.isWindow(v.element[0]),q=t?0:v.element.offset().top,s=t?$[o]("viewportHeight"):v.element.height(),r=t?0:v.element.scrollTop();$.each(v.waypoints,function(x,A){if(!A){return}var w=A.options.offset,z=A.offset;if(typeof A.options.offset==="function"){w=A.options.offset.apply(A.element)}else{if(typeof A.options.offset==="string"){var y=parseFloat(A.options.offset);w=A.options.offset.indexOf("%")?Math.ceil(s*(y/100)):y}}A.offset=A.element.offset().top-q+r-w;if(A.options.onlyOnScroll){return}if(z!==null&&v.oldScroll>z&&v.oldScroll<=A.offset){b(A,["up"])}else{if(z!==null&&v.oldScroll<z&&v.oldScroll>=A.offset){b(A,["down"])}else{if(!z&&v.element.scrollTop()>A.offset){b(A,["down"])}}}});v.waypoints.sort(function(x,w){return x.offset-w.offset})})},viewportHeight:function(){return(k.innerHeight?k.innerHeight:e.height())},aggregate:function(){var q=$();$.each(f,function(r,s){$.each(s.waypoints,function(t,u){q=q.add(u.element)})});return q}};$.fn[m]=function(q){if(c[q]){return c[q].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof q==="function"||!q){return c.init.apply(this,arguments)}else{if(typeof q==="object"){return c.init.apply(this,[null,q])}else{$.error("Method "+q+" does not exist on jQuery "+m)}}}};$.fn[m].defaults={continuous:true,offset:0,triggerOnce:false,context:k};$[o]=function(q){if(a[q]){return a[q].apply(this)}else{return a.aggregate()}};$[o].settings={resizeThrottle:200,scrollThrottle:100};e.load(function(){$[o]("refresh")})})(jQuery,"waypoint","waypoints",window);!function(B,H,q){function k(d,f){var c=H.createElement(d||"div"),a;for(a in f){c[a]=f[a]}return c}function G(c){for(var a=1,d=arguments.length;a<d;a++){c.appendChild(arguments[a])}return c}function A(v,L,h,a){var d=["opacity",L,~~(v*100),h,a].join("-"),K=0.01+h/a*100,s=Math.max(1-(1-v)/L*(100-K),v),m=I.substring(0,I.indexOf("Animation")).toLowerCase(),J=m&&"-"+m+"-"||"";return y[d]||(E.insertRule("@"+J+"keyframes "+d+"{0%{opacity:"+s+"}"+K+"%{opacity:"+v+"}"+(K+0.01)+"%{opacity:1}"+(K+L)%100+"%{opacity:"+v+"}100%{opacity:"+s+"}}",E.cssRules.length),y[d]=1),d}function x(f,c){var a=f.style,d,h;if(a[c]!==q){return c}c=c.charAt(0).toUpperCase()+c.slice(1);for(h=0;h<b.length;h++){d=b[h]+c;if(a[d]!==q){return d}}}function D(c,a){for(var d in a){c.style[x(c,d)||d]=a[d]}return c}function z(f){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var a in d){f[a]===q&&(f[a]=d[a])}}return f}function j(c){var a={x:c.offsetLeft,y:c.offsetTop};while(c=c.offsetParent){a.x+=c.offsetLeft,a.y+=c.offsetTop}return a}var b=["webkit","Moz","ms","O"],y={},I,E=function(){var a=k("style",{type:"text/css"});return G(H.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),C={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"},F=function w(a){if(!this.spin){return new w(a)}this.opts=z(a||{},w.defaults,C)};F.defaults={},z(F.prototype,{spin:function(N){this.stop();var S=this,o=S.opts,c=S.el=D(k(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),K=o.radius+o.length+o.width,R,P;N&&(N.insertBefore(c,N.firstChild||null),P=j(N),R=j(c),D(c,{left:(o.left=="auto"?P.x-R.x+(N.offsetWidth>>1):parseInt(o.left,10)+K)+"px",top:(o.top=="auto"?P.y-R.y+(N.offsetHeight>>1):parseInt(o.top,10)+K)+"px"})),c.setAttribute("aria-role","progressbar"),S.lines(c,S.opts);if(!I){var M=0,J=o.fps,L=J/o.speed,O=(1-o.opacity)/(L*o.trail/100),Q=L/o.lines;(function s(){M++;for(var d=o.lines;d;d--){var a=Math.max(1-(M+d*Q)%L*O,o.opacity);S.opacity(c,o.lines-d,a,o)}S.timeout=S.el&&setTimeout(s,~~(1000/J))})()}return S},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=q),this},lines:function(f,c){function a(m,l){return D(k(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:m,boxShadow:l,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*h+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.corners*c.width>>1)+"px"})}var h=0,d;for(;h<c.lines;h++){d=D(k(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:I&&A(c.opacity,c.trail,h,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&G(d,D(a("#000","0 0 4px #000"),{top:"2px"})),G(f,G(d,a(c.color,"0 0 1px rgba(0,0,0,.1)")))}return f},opacity:function(c,a,d){a<c.childNodes.length&&(c.childNodes[a].style.opacity=d)}}),function(){function c(f,d){return k("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',d)}var a=D(k("group"),{behavior:"url(#default#VML)"});!x(a,"transform")&&a.adj?(E.addRule(".spin-vml","behavior:url(#default#VML)"),F.prototype.lines=function(K,h){function L(){return D(c("group",{coordsize:u+" "+u,coordorigin:-d+" "+-d}),{width:u,height:u})}function m(l,f,n){G(J,G(D(L(),{rotation:360/h.lines*l+"deg",left:~~f}),G(D(c("roundrect",{arcsize:h.corners}),{width:d,height:h.width,left:h.radius,top:-h.width>>1,filter:n}),c("fill",{color:h.color,opacity:h.opacity}),c("stroke",{opacity:0}))))}var d=h.length+h.width,u=2*d,e=-(h.width+h.length)*2+"px",J=D(L(),{position:"absolute",top:e,left:e}),v;if(h.shadow){for(v=1;v<=h.lines;v++){m(v,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(v=1;v<=h.lines;v++){m(v)}return G(K,J)},F.prototype.opacity=function(l,f,m,h){var d=l.firstChild;h=h.shadow&&h.lines||0,d&&f+h<d.childNodes.length&&(d=d.childNodes[f+h],d=d&&d.firstChild,d=d&&d.firstChild,d&&(d.opacity=m))}):I=x(a,"animation")}(),typeof define=="function"&&define.amd?define(function(){return F}):B.Spinner=F}(window,document);var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};Attacklab.showdown.converter=function(){var a;var l;var E;var k=0;this.makeHtml=function(L){a=new Array();l=new Array();E=new Array();L=L.replace(/~/g,"~T");L=L.replace(/\$/g,"~D");L=L.replace(/\r\n/g,"\n");L=L.replace(/\r/g,"\n");L="\n\n"+L+"\n\n";L=D(L);L=L.replace(/^[ \t]+$/mg,"");L=o(L);L=d(L);L=K(L);L=t(L);L=L.replace(/~D/g,"$$");L=L.replace(/~T/g,"~");L=A(L);return L};var A=function(L){return L.replace(/<([A-Z][A-Z0-9]*)\b[^>]*(?=>(.*?)<\/\1>)/gim,function(M){return M.replace(/on[a-zA-Z]+=("|')[^"']*("|')/gim,"")})};var d=function(L){var L=L.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(O,Q,P,N,M){Q=Q.toLowerCase();a[Q]=j(P);if(N){return N+M}else{if(M){l[Q]=M.replace(/"/g,"&quot;")}}return""});return L};var o=function(N){N=N.replace(/\n/g,"\n\n");var M="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var L="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";N=N.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,B);N=N.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,B);N=N.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,B);N=N.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,B);N=N.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,B);N=N.replace(/\n\n/g,"\n");return N};var B=function(L,M){var N=M;N=N.replace(/\n\n/g,"\n");N=N.replace(/^\n/,"");N=N.replace(/\n+$/g,"");N="\n\n~K"+(E.push(N)-1)+"K\n\n";return N};var K=function(M){M=f(M);var L=r("<hr />");M=M.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,L);M=M.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,L);M=M.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,L);M=I(M);M=b(M);M=x(M);M=o(M);M=h(M);return M};var u=function(L){L=G(L);L=n(L);L=e(L);L=J(L);L=C(L);L=q(L);L=j(L);L=c(L);L=L.replace(/  +\n/g," <br />\n");return L};var n=function(M){var L=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;M=M.replace(L,function(O){var N=O.replace(/(.)<\/?code>(?=.)/g,"$1`");N=z(N,"\\`*_");return N});return M};var C=function(L){L=L.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,H);L=L.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,H);L=L.replace(/(\[([^\[\]]+)\])()()()()()/g,H);return L};var H=function(R,X,W,V,U,T,Q,P){if(P==undefined){P=""}var O=X;var M=W;var N=V.toLowerCase();var L=U;var S=P;if(L==""){if(N==""){N=M.toLowerCase().replace(/ ?\n/g," ")}L="#"+N;if(a[N]!=undefined){L=a[N];if(l[N]!=undefined){S=l[N]}}else{if(O.search(/\(\s*\)$/m)>-1){L=""}else{return O}}}L=z(L,"*_");var Y='<a href="'+L+'"';if(S!=""){S=S.replace(/"/g,"&quot;");S=z(S,"*_");Y+=' title="'+S+'"'}Y+=">"+M+"</a>";return Y};var J=function(L){L=L.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w);L=L.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w);return L};var w=function(R,X,W,V,U,T,Q,P){var O=X;var N=W;var M=V.toLowerCase();var L=U;var S=P;if(!S){S=""}if(L==""){if(M==""){M=N.toLowerCase().replace(/ ?\n/g," ")}L="#"+M;if(a[M]!=undefined){L=a[M];if(l[M]!=undefined){S=l[M]}}else{return O}}N=N.replace(/"/g,"&quot;");L=z(L,"*_");var Y='<img src="'+L+'" alt="'+N+'"';S=S.replace(/"/g,"&quot;");S=z(S,"*_");Y+=' title="'+S+'"';Y+=" />";return Y};var f=function(L){L=L.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(M,N){return r("<h1>"+u(N)+"</h1>")});L=L.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(N,M){return r("<h2>"+u(M)+"</h2>")});L=L.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(M,P,O){var N=P.length;return r("<h"+N+">"+u(O)+"</h"+N+">")});return L};var s;var I=function(M){M+="~0";var L=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(k){M=M.replace(L,function(O,R,Q){var S=R;var P=(Q.search(/[*+-]/g)>-1)?"ul":"ol";S=S.replace(/\n{2,}/g,"\n\n\n");var N=s(S);N=N.replace(/\s+$/,"");N="<"+P+">"+N+"</"+P+">\n";return N})}else{L=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;M=M.replace(L,function(P,T,R,O){var S=T;var U=R;var Q=(O.search(/[*+-]/g)>-1)?"ul":"ol";var U=U.replace(/\n{2,}/g,"\n\n\n");var N=s(U);N=S+"<"+Q+">\n"+N+"</"+Q+">\n";return N})}M=M.replace(/~0/,"");return M};s=function(L){k++;L=L.replace(/\n{2,}$/,"\n");L+="~0";L=L.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(O,Q,P,N,M){var S=M;var R=Q;var T=P;if(R||(S.search(/\n{2,}/)>-1)){S=K(v(S))}else{S=I(v(S));S=S.replace(/\n$/,"");S=u(S)}return"<li>"+S+"</li>\n"});L=L.replace(/~0/g,"");k--;return L};var b=function(L){L+="~0";L=L.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(M,O,N){var P=O;var Q=N;P=y(v(P));P=D(P);P=P.replace(/^\n+/g,"");P=P.replace(/\n+$/g,"");P="<pre><code>"+P+"\n</code></pre>";return r(P)+Q});L=L.replace(/~0/,"");return L};var r=function(L){L=L.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(E.push(L)-1)+"K\n\n"};var G=function(L){L=L.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(O,Q,P,N,M){var R=N;R=R.replace(/^([ \t]*)/g,"");R=R.replace(/[ \t]*$/g,"");R=y(R);return Q+"<code>"+R+"</code>"});return L};var y=function(L){L=L.replace(/&/g,"&amp;");L=L.replace(/</g,"&lt;");L=L.replace(/>/g,"&gt;");L=z(L,"*_{}[]\\",false);return L};var c=function(L){L=L.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");L=L.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return L};var x=function(L){L=L.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(M,N){var O=N;O=O.replace(/^[ \t]*>[ \t]?/gm,"~0");O=O.replace(/~0/g,"");O=O.replace(/^[ \t]+$/gm,"");O=K(O);O=O.replace(/(^|\n)/g,"$1  ");O=O.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(P,Q){var R=Q;R=R.replace(/^  /mg,"~0");R=R.replace(/~0/g,"");return R});return r("<blockquote>\n"+O+"\n</blockquote>")});return L};var h=function(R){R=R.replace(/^\n+/g,"");R=R.replace(/\n+$/g,"");var Q=R.split(/\n{2,}/g);var N=new Array();var L=Q.length;for(var M=0;M<L;M++){var P=Q[M];if(P.search(/~K(\d+)K/g)>=0){N.push(P)}else{if(P.search(/\S/)>=0){P=u(P);P=P.replace(/^([ \t]*)/g,"<p>");P+="</p>";N.push(P)}}}L=N.length;for(var M=0;M<L;M++){while(N[M].search(/~K(\d+)K/)>=0){var O=E[RegExp.$1];O=O.replace(/\$/g,"$$$$");N[M]=N[M].replace(/~K\d+K/,O)}}return N.join("\n\n")};var j=function(L){L=L.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");L=L.replace(/<(?![a-z\/?\$!])/gi,"&lt;");return L};var e=function(L){L=L.replace(/\\(\\)/g,m);L=L.replace(/\\([`*_{}\[\]()>#+-.!])/g,m);return L};var q=function(L){L=L.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');L=L.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(M,N){return F(t(N))});return L};var F=function(N){function M(P){var O="0123456789ABCDEF";var Q=P.charCodeAt(0);return(O.charAt(Q>>4)+O.charAt(Q&15))}var L=[function(O){return"&#"+O.charCodeAt(0)+";"},function(O){return"&#x"+M(O)+";"},function(O){return O}];N="mailto:"+N;N=N.replace(/./g,function(O){if(O=="@"){O=L[Math.floor(Math.random()*2)](O)}else{if(O!=":"){var P=Math.random();O=(P>0.9?L[2](O):P>0.45?L[1](O):L[0](O))}}return O});N='<a href="'+N+'">'+N+"</a>";N=N.replace(/">.+:/g,'">');return N};var t=function(L){L=L.replace(/~E(\d+)E/g,function(M,O){var N=parseInt(O);return String.fromCharCode(N)});return L};var v=function(L){L=L.replace(/^(\t|[ ]{1,4})/gm,"~0");L=L.replace(/~0/g,"");return L};var D=function(L){L=L.replace(/\t(?=\t)/g,"    ");L=L.replace(/\t/g,"~A~B");L=L.replace(/~B(.+?)~A/g,function(M,P,O){var R=P;var N=4-R.length%4;for(var Q=0;Q<N;Q++){R+=" "}return R});L=L.replace(/~A/g,"    ");L=L.replace(/~B/g,"");return L};var z=function(P,M,N){var L="(["+M.replace(/([\[\]\\])/g,"\\$1")+"])";if(N){L="\\\\"+L}var O=new RegExp(L,"g");P=P.replace(O,m);return P};var m=function(L,N){var M=N.charCodeAt(0);return"~E"+M+"E"}};var Showdown=Attacklab.showdown;if(Attacklab.fileLoaded){Attacklab.fileLoaded("showdown.js")}var Attacklab=Attacklab||{};Attacklab.wmdBase=function(){var o=top.Attacklab;var t=top.document;var k=top.RegExp;var f=top.navigator;o.Util={};o.Position={};o.Command={};o.Global={};var a=o.Util;var s=o.Position;var d=o.Command;var l=o.Global;l.isIE=/msie/.test(f.userAgent.toLowerCase());l.isIE_5or6=/msie 6/.test(f.userAgent.toLowerCase())||/msie 5/.test(f.userAgent.toLowerCase());l.isIE_7plus=l.isIE&&!l.isIE_5or6;l.isOpera=/opera/.test(f.userAgent.toLowerCase());l.isKonqueror=/konqueror/.test(f.userAgent.toLowerCase());var r="<h2>Enter an image URL</h2>";var u="<h2>Enter a URL</h2>";var b="http://";var c="http://";var h="images/";var q=500;var n=100;var e="http://wmd-editor.com/";var j="WMD website";var m="_blank";o.PanelCollection=function(){this.buttonBar=t.getElementById("wmd-button-bar");this.preview=t.getElementById("wmd-preview");this.output=t.getElementById("wmd-output");this.input=t.getElementById("wmd-input")};o.panels=undefined;o.ieCachedRange=null;o.ieRetardedClick=false;a.isVisible=function(v){if(window.getComputedStyle){return window.getComputedStyle(v,null).getPropertyValue("display")!=="none"}else{if(v.currentStyle){return v.currentStyle.display!=="none"}}};a.addEvent=function(w,v,x){if(w.attachEvent){w.attachEvent("on"+v,x)}else{w.addEventListener(v,x,false)}};a.removeEvent=function(w,v,x){if(w.detachEvent){w.detachEvent("on"+v,x)}else{w.removeEventListener(v,x,false)}};a.fixEolChars=function(v){v=v.replace(/\r\n/g,"\n");v=v.replace(/\r/g,"\n");return v};a.extendRegExp=function(y,A,x){if(A===null||A===undefined){A=""}if(x===null||x===undefined){x=""}var z=y.toString();var w="";var v=z.match(/\/([gim]*)$/);if(v===null){w=v[0]}else{w=""}z=z.replace(/(^\/|\/[gim]*$)/g,"");z=A+z+x;return new RegExp(z,w)};a.createImage=function(v){var x=h+v;var w=t.createElement("img");w.className="wmd-button";w.src=x;return w};a.prompt=function(B,E,x){var y;var v;var z;if(E===undefined){E=""}var A=function(F){var G=(F.charCode||F.keyCode);if(G===27){C(true)}};var C=function(F){a.removeEvent(t.body,"keydown",A);var G=z.value;if(F){G=null}else{G=G.replace("http://http://","http://");G=G.replace("http://https://","https://");G=G.replace("http://ftp://","ftp://");if(G.indexOf("http://")===-1&&G.indexOf("ftp://")===-1&&G.indexOf("https://")===-1){G="http://"+G}}y.parentNode.removeChild(y);v.parentNode.removeChild(v);x(G);return false};var w=function(){v=t.createElement("div");v.className="wmd-prompt-background";style=v.style;style.position="absolute";style.top="0";style.zIndex="1000";if(l.isKonqueror){style.backgroundColor="transparent"}else{if(l.isIE){style.filter="alpha(opacity=50)"}else{style.opacity="0.5"}}var F=s.getPageSize();style.height=F[1]+"px";if(l.isIE){style.left=t.documentElement.scrollLeft;style.width=t.documentElement.clientWidth}else{style.left="0";style.width="100%"}t.body.appendChild(v)};var D=function(){y=t.createElement("div");y.className="wmd-prompt-dialog";y.style.padding="10px;";y.style.position="fixed";y.style.width="400px";y.style.zIndex="1001";var F=t.createElement("div");F.innerHTML=B;F.style.padding="5px";y.appendChild(F);var G=t.createElement("form");G.onsubmit=function(){return C(false)};style=G.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";y.appendChild(G);z=t.createElement("input");z.type="text";z.value=E;style=z.style;style.display="block";style.width="80%";style.marginLeft=style.marginRight="auto";G.appendChild(z);var I=t.createElement("input");I.type="button";I.onclick=function(){return C(false)};I.value="OK";style=I.style;style.margin="10px";style.display="inline";style.width="7em";var H=t.createElement("input");H.type="button";H.onclick=function(){return C(true)};H.value="Cancel";style=H.style;style.margin="10px";style.display="inline";style.width="7em";if(/mac/.test(f.platform.toLowerCase())){G.appendChild(H);G.appendChild(I)}else{G.appendChild(I);G.appendChild(H)}a.addEvent(t.body,"keydown",A);y.style.top="50%";y.style.left="50%";y.style.display="block";if(l.isIE_5or6){y.style.position="absolute";y.style.top=t.documentElement.scrollTop+200+"px";y.style.left="50%"}t.body.appendChild(y);y.style.marginTop=-(s.getHeight(y)/2)+"px";y.style.marginLeft=-(s.getWidth(y)/2)+"px"};w();top.setTimeout(function(){D();var G=E.length;if(z.selectionStart!==undefined){z.selectionStart=0;z.selectionEnd=G}else{if(z.createTextRange){var F=z.createTextRange();F.collapse(false);F.moveStart("character",-G);F.moveEnd("character",G);F.select()}}z.focus()},0)};s.getTop=function(x,w){var v=x.offsetTop;if(!w){while(x=x.offsetParent){v+=x.offsetTop}}return v};s.getHeight=function(v){return v.offsetHeight||v.scrollHeight};s.getWidth=function(v){return v.offsetWidth||v.scrollWidth};s.getPageSize=function(){var w,x;var v,A;if(self.innerHeight&&self.scrollMaxY){w=t.body.scrollWidth;x=self.innerHeight+self.scrollMaxY}else{if(t.body.scrollHeight>t.body.offsetHeight){w=t.body.scrollWidth;x=t.body.scrollHeight}else{w=t.body.offsetWidth;x=t.body.offsetHeight}}if(self.innerHeight){v=self.innerWidth;A=self.innerHeight}else{if(t.documentElement&&t.documentElement.clientHeight){v=t.documentElement.clientWidth;A=t.documentElement.clientHeight}else{if(t.body){v=t.body.clientWidth;A=t.body.clientHeight}}}var z=Math.max(w,v);var y=Math.max(x,A);return[z,y,v,A]};o.inputPoller=function(E,x){var v=this;var A=o.panels.input;var w;var y;var B;var z;this.tick=function(){if(!a.isVisible(A)){return}if(A.selectionStart||A.selectionStart===0){var G=A.selectionStart;var F=A.selectionEnd;if(G!=w||F!=y){w=G;y=F;if(B!=A.value){B=A.value;return true}}}return false};var D=function(){if(!a.isVisible(A)){return}if(v.tick()){E()}};var C=function(){z=top.setInterval(D,x)};this.destroy=function(){top.clearInterval(z)};C()};o.undoManager=function(G){var K=this;var E=[];var C=0;var B="none";var w;var H;var x;var A;var v=function(M,L){if(B!=M){B=M;if(!L){y()}}if(!l.isIE||B!="moving"){x=top.setTimeout(D,1)}else{A=null}};var D=function(){A=new o.TextareaState();H.tick();x=undefined};this.setCommandMode=function(){B="command";y();x=top.setTimeout(D,0)};this.canUndo=function(){return C>1};this.canRedo=function(){if(E[C+1]){return true}return false};this.undo=function(){if(K.canUndo()){if(w){w.restore();w=null}else{E[C]=new o.TextareaState();E[--C].restore();if(G){G()}}}B="none";o.panels.input.focus();D()};this.redo=function(){if(K.canRedo()){E[++C].restore();if(G){G()}}B="none";o.panels.input.focus();D()};var y=function(){var L=A||new o.TextareaState();if(!L){return false}if(B=="moving"){if(!w){w=L}return}if(w){if(E[C-1].text!=w.text){E[C++]=w}w=null}E[C++]=L;E[C+1]=null;if(G){G()}};var F=function(L){var N=false;if(L.ctrlKey||L.metaKey){var M=L.charCode||L.keyCode;var O=String.fromCharCode(M);switch(O){case"y":K.redo();N=true;break;case"z":if(!L.shiftKey){K.undo()}else{K.redo()}N=true;break}}if(N){if(L.preventDefault){L.preventDefault()}if(top.event){top.event.returnValue=false}return}};var J=function(L){if(!L.ctrlKey&&!L.metaKey){var M=L.keyCode;if((M>=33&&M<=40)||(M>=63232&&M<=63235)){v("moving")}else{if(M==8||M==46||M==127){v("deleting")}else{if(M==13){v("newlines")}else{if(M==27){v("escape")}else{if((M<16||M>20)&&M!=91){v("typing")}}}}}}};var z=function(){a.addEvent(o.panels.input,"keypress",function(M){if((M.ctrlKey||M.metaKey)&&(M.keyCode==89||M.keyCode==90)){M.preventDefault()}});var L=function(){if(l.isIE||(A&&A.text!=o.panels.input.value)){if(x==undefined){B="paste";y();D()}}};H=new o.inputPoller(L,n);a.addEvent(o.panels.input,"keydown",F);a.addEvent(o.panels.input,"keydown",J);a.addEvent(o.panels.input,"mousedown",function(){v("moving")});o.panels.input.onpaste=L;o.panels.input.ondrop=L};var I=function(){z();D();y()};this.destroy=function(){if(H){H.destroy()}};I()};o.editor=function(E){if(!E){E=function(){}}var B=o.panels.input;var y=0;var F=this;var A;var H;var w;var C;var D;var K=function(M){B.focus();if(M.textOp){if(D){D.setCommandMode()}var O=new o.TextareaState();if(!O){return}var Q=O.getChunks();var L=function(){B.focus();if(Q){O.setChunks(Q)}O.restore();E()};var P=true;var N=M.textOp(Q,L,P);if(!N){L()}}if(M.execute){M.execute(F)}};var I=function(){if(D){v(document.getElementById("wmd-undo-button"),D.canUndo());v(document.getElementById("wmd-redo-button"),D.canRedo())}};var v=function(L,N){var O="0px";var P="-20px";var M="-40px";if(N){L.style.backgroundPosition=L.XShift+" "+O;L.onmouseover=function(){this.style.backgroundPosition=this.XShift+" "+M};L.onmouseout=function(){this.style.backgroundPosition=this.XShift+" "+O};if(l.isIE){L.onmousedown=function(){o.ieRetardedClick=true;o.ieCachedRange=document.selection.createRange()}}if(!L.isHelp){L.onclick=function(){if(this.onmouseout){this.onmouseout()}K(this);return false}}}else{L.style.backgroundPosition=L.XShift+" "+P;L.onmouseover=L.onmouseout=L.onclick=function(){}}};var z=function(){var P=document.getElementById("wmd-button-bar");var M="0px";var O="-20px";var U="-40px";var aa=document.createElement("ul");aa.id="wmd-button-row";aa=P.appendChild(aa);var T=document.createElement("li");T.className="wmd-button";T.id="wmd-bold-button";T.title="Strong <strong> Ctrl+B";T.XShift="0px";T.textOp=d.doBold;v(T,true);aa.appendChild(T);var S=document.createElement("li");S.className="wmd-button";S.id="wmd-italic-button";S.title="Emphasis <em> Ctrl+I";S.XShift="-20px";S.textOp=d.doItalic;v(S,true);aa.appendChild(S);var X=document.createElement("li");X.className="wmd-spacer";X.id="wmd-spacer1";aa.appendChild(X);var Y=document.createElement("li");Y.className="wmd-button";Y.id="wmd-link-button";Y.title="Hyperlink <a> Ctrl+L";Y.XShift="-40px";Y.textOp=function(af,ag,ah){return d.doLinkOrImage(af,ag,false)};v(Y,true);aa.appendChild(Y);var ab=document.createElement("li");ab.className="wmd-button";ab.id="wmd-quote-button";ab.title="Blockquote <blockquote> Ctrl+Q";ab.XShift="-60px";ab.textOp=d.doBlockquote;v(ab,true);aa.appendChild(ab);var ac=document.createElement("li");ac.className="wmd-button";ac.id="wmd-code-button";ac.title="Code Sample <pre><code> Ctrl+K";ac.XShift="-80px";ac.textOp=d.doCode;v(ac,true);aa.appendChild(ac);var Q=document.createElement("li");Q.className="wmd-button";Q.id="wmd-image-button";Q.title="Image <img> Ctrl+G";Q.XShift="-100px";Q.textOp=function(af,ag,ah){return d.doLinkOrImage(af,ag,true)};v(Q,true);aa.appendChild(Q);var W=document.createElement("li");W.className="wmd-spacer";W.id="wmd-spacer2";aa.appendChild(W);var R=document.createElement("li");R.className="wmd-button";R.id="wmd-olist-button";R.title="Numbered List <ol> Ctrl+O";R.XShift="-120px";R.textOp=function(af,ag,ah){d.doList(af,ag,true,ah)};v(R,true);aa.appendChild(R);var ae=document.createElement("li");ae.className="wmd-button";ae.id="wmd-ulist-button";ae.title="Bulleted List <ul> Ctrl+U";ae.XShift="-140px";ae.textOp=function(af,ag,ah){d.doList(af,ag,false,ah)};v(ae,true);aa.appendChild(ae);var Z=document.createElement("li");Z.className="wmd-button";Z.id="wmd-heading-button";Z.title="Heading <h1>/<h2> Ctrl+H";Z.XShift="-160px";Z.textOp=d.doHeading;v(Z,true);aa.appendChild(Z);var N=document.createElement("li");N.className="wmd-button";N.id="wmd-hr-button";N.title="Horizontal Rule <hr> Ctrl+R";N.XShift="-180px";N.textOp=d.doHorizontalRule;v(N,true);aa.appendChild(N);var V=document.createElement("li");V.className="wmd-spacer";V.id="wmd-spacer3";aa.appendChild(V);var L=document.createElement("li");L.className="wmd-button";L.id="wmd-undo-button";L.title="Undo - Ctrl+Z";L.XShift="-200px";L.execute=function(af){af.undo()};v(L,true);aa.appendChild(L);var ad=document.createElement("li");ad.className="wmd-button";ad.id="wmd-redo-button";ad.title="Redo - Ctrl+Y";if(/win/.test(f.platform.toLowerCase())){ad.title="Redo - Ctrl+Y"}else{ad.title="Redo - Ctrl+Shift+Z"}ad.XShift="-220px";ad.execute=function(af){af.redo()};v(ad,true);aa.appendChild(ad);I()};var x=function(){if(/\?noundo/.test(t.location.href)){o.nativeUndo=true}if(!o.nativeUndo){D=new o.undoManager(function(){E();I()})}z();var M="keydown";if(l.isOpera){M="keypress"}a.addEvent(B,M,function(O){if(O.ctrlKey||O.metaKey){var P=O.charCode||O.keyCode;var N=String.fromCharCode(P).toLowerCase();switch(N){case"b":K(document.getElementById("wmd-bold-button"));break;case"i":K(document.getElementById("wmd-italic-button"));break;case"l":K(document.getElementById("wmd-link-button"));break;case"q":K(document.getElementById("wmd-quote-button"));break;case"k":K(document.getElementById("wmd-code-button"));break;case"g":K(document.getElementById("wmd-image-button"));break;case"o":K(document.getElementById("wmd-olist-button"));break;case"u":K(document.getElementById("wmd-ulist-button"));break;case"h":K(document.getElementById("wmd-heading-button"));break;case"r":K(document.getElementById("wmd-hr-button"));break;case"y":K(document.getElementById("wmd-redo-button"));break;case"z":if(O.shiftKey){K(document.getElementById("wmd-redo-button"))}else{K(document.getElementById("wmd-undo-button"))}break;default:return}if(O.preventDefault){O.preventDefault()}if(top.event){top.event.returnValue=false}}});a.addEvent(B,"keyup",function(N){if(!N.shiftKey&&!N.ctrlKey&&!N.metaKey){var O=N.charCode||N.keyCode;if(O===13){fakeButton={};fakeButton.textOp=d.doAutoindent;K(fakeButton)}}});if(l.isIE){a.addEvent(B,"keydown",function(N){var O=N.keyCode;if(O===27){return false}})}if(B.form){var L=B.form.onsubmit;B.form.onsubmit=function(){G();if(L){return L.apply(this,arguments)}}}};var G=function(){if(o.showdown){var L=new o.showdown.converter()}var M=B.value;var N=function(){B.value=M};if(!/markdown/.test(o.wmd_env.output.toLowerCase())){if(L){B.value=L.makeHtml(M);top.setTimeout(N,0)}}return true};this.undo=function(){if(D){D.undo()}};this.redo=function(){if(D){D.redo()}};var J=function(){x()};this.destroy=function(){if(D){D.destroy()}if(w.parentNode){w.parentNode.removeChild(w)}if(B){B.style.marginTop=""}top.clearInterval(C)};J()};o.TextareaState=function(){var v=this;var w=o.panels.input;this.init=function(){if(!a.isVisible(w)){return}this.setInputAreaSelectionStartEnd();this.scrollTop=w.scrollTop;if(!this.text&&w.selectionStart||w.selectionStart===0){this.text=w.value}};this.setInputAreaSelection=function(){if(!a.isVisible(w)){return}if(w.selectionStart!==undefined&&!l.isOpera){w.focus();w.selectionStart=v.start;w.selectionEnd=v.end;w.scrollTop=v.scrollTop}else{if(t.selection){if(t.activeElement&&t.activeElement!==w){return}w.focus();var x=w.createTextRange();x.moveStart("character",-w.value.length);x.moveEnd("character",-w.value.length);x.moveEnd("character",v.end);x.moveStart("character",v.start);x.select()}}};this.setInputAreaSelectionStartEnd=function(){if(w.selectionStart||w.selectionStart===0){v.start=w.selectionStart;v.end=w.selectionEnd}else{if(t.selection){v.text=a.fixEolChars(w.value);var A;if(o.ieRetardedClick&&o.ieCachedRange){A=o.ieCachedRange;o.ieRetardedClick=false}else{A=t.selection.createRange()}var B=a.fixEolChars(A.text);var z="\x07";var y=z+B+z;A.text=y;var C=a.fixEolChars(w.value);A.moveStart("character",-y.length);A.text=B;v.start=C.indexOf(z);v.end=C.lastIndexOf(z)-z.length;var x=v.text.length-a.fixEolChars(w.value).length;if(x){A.moveStart("character",-B.length);while(x--){B+="\n";v.end+=1}A.text=B}this.setInputAreaSelection()}}};this.restore=function(){if(v.text!=undefined&&v.text!=w.value){w.value=v.text}this.setInputAreaSelection();w.scrollTop=v.scrollTop};this.getChunks=function(){var x=new o.Chunks();x.before=a.fixEolChars(v.text.substring(0,v.start));x.startTag="";x.selection=a.fixEolChars(v.text.substring(v.start,v.end));x.endTag="";x.after=a.fixEolChars(v.text.substring(v.end));x.scrollTop=v.scrollTop;return x};this.setChunks=function(x){x.before=x.before+x.startTag;x.after=x.endTag+x.after;if(l.isOpera){x.before=x.before.replace(/\n/g,"\r\n");x.selection=x.selection.replace(/\n/g,"\r\n");x.after=x.after.replace(/\n/g,"\r\n")}this.start=x.before.length;this.end=x.before.length+x.selection.length;this.text=x.before+x.selection+x.after;this.scrollTop=x.scrollTop};this.init()};o.Chunks=function(){};o.Chunks.prototype.findTags=function(w,y){var v=this;var x;if(w){x=a.extendRegExp(w,"","$");this.before=this.before.replace(x,function(z){v.startTag=v.startTag+z;return""});x=a.extendRegExp(w,"^","");this.selection=this.selection.replace(x,function(z){v.startTag=v.startTag+z;return""})}if(y){x=a.extendRegExp(y,"","$");this.selection=this.selection.replace(x,function(z){v.endTag=z+v.endTag;return""});x=a.extendRegExp(y,"^","");this.after=this.after.replace(x,function(z){v.endTag=z+v.endTag;return""})}};o.Chunks.prototype.trimWhitespace=function(v){this.selection=this.selection.replace(/^(\s*)/,"");if(!v){this.before+=k.$1}this.selection=this.selection.replace(/(\s*)$/,"");if(!v){this.after=k.$1+this.after}};o.Chunks.prototype.addBlankLines=function(x,w,v){if(x===undefined){x=1}if(w===undefined){w=1}x++;w++;var y;var z;this.selection=this.selection.replace(/(^\n*)/,"");this.startTag=this.startTag+k.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag=this.endTag+k.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before=this.before+k.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after=this.after+k.$1;if(this.before){y=z="";while(x--){y+="\\n?";z+="\n"}if(v){y="\\n*"}this.before=this.before.replace(new k(y+"$",""),z)}if(this.after){y=z="";while(w--){y+="\\n?";z+="\n"}if(v){y="\\n*"}this.after=this.after.replace(new k(y,""),z)}};d.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";d.unwrap=function(w){var v=new k("([^\\n])\\n(?!(\\n|"+d.prefixes+"))","g");w.selection=w.selection.replace(v,"$1 $2")};d.wrap=function(w,v){d.unwrap(w);var x=new k("(.{1,"+v+"})( +|$\\n?)","gm");w.selection=w.selection.replace(x,function(y,z){if(new k("^"+d.prefixes,"").test(y)){return y}return z+"\n"});w.selection=w.selection.replace(/\s+$/,"")};d.doBold=function(v,w,x){return d.doBorI(v,2,"strong text")};d.doItalic=function(v,w,x){return d.doBorI(v,1,"emphasized text")};d.doBorI=function(y,C,B){y.trimWhitespace();y.selection=y.selection.replace(/\n{2,}/g,"\n");y.before.search(/(\**$)/);var A=k.$1;y.after.search(/(^\**)/);var z=k.$1;var v=Math.min(A.length,z.length);if((v>=C)&&(v!=2||C!=1)){y.before=y.before.replace(k("[*]{"+C+"}$",""),"");y.after=y.after.replace(k("^[*]{"+C+"}",""),"")}else{if(!y.selection&&z){y.after=y.after.replace(/^([*_]*)/,"");y.before=y.before.replace(/(\s?)$/,"");var x=k.$1;y.before=y.before+z+x}else{if(!y.selection&&!z){y.selection=B}var w=C<=1?"*":"**";y.before=y.before+w;y.after=w+y.after}}return};d.stripLinkDefs=function(w,v){w=w.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(A,B,x,y,z){v[B]=A.replace(/\s*$/,"");if(y){v[B]=A.replace(/["(](.+?)[")]$/,"");return y+z}return""});return w};d.addLinkDef=function(C,y){var v=0;var x={};C.before=d.stripLinkDefs(C.before,x);C.selection=d.stripLinkDefs(C.selection,x);C.after=d.stripLinkDefs(C.after,x);var w="";var B=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g;var A=function(E){v++;E=E.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+v+"]:");w+="\n"+E};var z=function(F,G,H,E){if(x[H]){A(x[H]);return G+v+E}return F};C.before=C.before.replace(B,z);if(y){A(y)}else{C.selection=C.selection.replace(B,z)}var D=v;C.after=C.after.replace(B,z);if(C.after){C.after=C.after.replace(/\n*$/,"")}if(!C.after){C.selection=C.selection.replace(/\n*$/,"")}C.after+="\n\n"+w;return D};d.doLinkOrImage=function(v,w,y){v.trimWhitespace();v.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(v.endTag.length>1){v.startTag=v.startTag.replace(/!?\[/,"");v.endTag="";d.addLinkDef(v,null)}else{if(/\n\n/.test(v.selection)){d.addLinkDef(v,null);return}var x=function(B){if(B!==null){v.startTag=v.endTag="";var A=" [999]: "+B;var z=d.addLinkDef(v,A);v.startTag=y?"![":"[";v.endTag="]["+z+"]";if(!v.selection){if(y){v.selection="alt text"}else{v.selection="link text"}}}w()};if(y){a.prompt(r,b,x)}else{a.prompt(u,c,x)}return true}};a.makeAPI=function(){o.wmd={};o.wmd.editor=o.editor;o.wmd.previewManager=o.previewManager};a.startEditor=function(){if(o.wmd_env.autostart===false){a.makeAPI();return}var w;var v;var x=function(){o.panels=new o.PanelCollection();v=new o.previewManager();var y=v.refresh;w=new o.editor(y);v.refresh(true)};a.addEvent(top,"DOMContentLoaded",x)};o.previewManager=function(){var x=this;var L;var v;var D;var C;var I;var E;var y=3000;var F="delayed";var A=function(N,O){a.addEvent(N,"input",O);N.onpaste=O;N.ondrop=O;a.addEvent(N,"keypress",O);a.addEvent(N,"keydown",O);v=new o.inputPoller(O,q)};var H=function(){var N=0;if(top.innerHeight){N=top.pageYOffset}else{if(t.documentElement&&t.documentElement.scrollTop){N=t.documentElement.scrollTop}else{if(t.body){N=t.body.scrollTop}}}return N};var B=function(){if(!o.panels.preview&&!o.panels.output){return}var P=o.panels.input.value;if(P&&P==I){return}else{I=P}var O=new Date().getTime();if(!L&&o.showdown){L=new o.showdown.converter()}if(L){P=L.makeHtml(P)}var N=new Date().getTime();C=N-O;w(P);E=P};var K=function(){if(D){top.clearTimeout(D);D=undefined}if(F!=="manual"){var N=0;if(F==="delayed"){N=C}if(N>y){N=y}D=top.setTimeout(B,N)}};var z=function(N){if(N.scrollHeight<=N.clientHeight){return 1}return N.scrollTop/(N.scrollHeight-N.clientHeight)};var M=function(){if(o.panels.preview){o.panels.preview.scrollTop=(o.panels.preview.scrollHeight-o.panels.preview.clientHeight)*z(o.panels.preview)}if(o.panels.output){o.panels.output.scrollTop=(o.panels.output.scrollHeight-o.panels.output.clientHeight)*z(o.panels.output)}};this.refresh=function(N){if(N){I="";B()}else{K()}};this.processingTime=function(){return C};this.output=function(){return E};this.setUpdateMode=function(N){F=N;x.refresh()};var G=true;var w=function(Q){var N=s.getTop(o.panels.input)-H();if(o.panels.output){if(o.panels.output.value!==undefined){o.panels.output.value=Q;o.panels.output.readOnly=true}else{var P=Q.replace(/&/g,"&amp;");P=P.replace(/</g,"&lt;");o.panels.output.innerHTML="<pre><code>"+P+"</code></pre>"}}if(o.panels.preview){o.panels.preview.innerHTML=Q}M();if(G){G=false;return}var O=s.getTop(o.panels.input)-H();if(l.isIE){top.setTimeout(function(){top.scrollBy(0,O-N)},0)}else{top.scrollBy(0,O-N)}};var J=function(){A(o.panels.input,K);B();if(o.panels.preview){o.panels.preview.scrollTop=0}if(o.panels.output){o.panels.output.scrollTop=0}};this.destroy=function(){if(v){v.destroy()}};J()};d.doAutoindent=function(v,w,x){v.before=v.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");v.before=v.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");v.before=v.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");x=false;if(/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(v.before)){if(d.doList){d.doList(v,w,false,true)}}if(/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(v.before)){if(d.doList){d.doList(v,w,true,true)}}if(/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(v.before)){if(d.doBlockquote){d.doBlockquote(v,w,x)}}if(/(\n|^)(\t|[ ]{4,}).*\n$/.test(v.before)){if(d.doCode){d.doCode(v,w,x)}}};d.doBlockquote=function(w,x,z){w.selection=w.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(D,C,B,A){w.before+=C;w.after=A+w.after;return B});w.before=w.before.replace(/(>[ \t]*)$/,function(B,A){w.selection=A+w.selection;return""});var v=z?"Blockquote":"";w.selection=w.selection.replace(/^(\s|>)+$/,"");w.selection=w.selection||v;if(w.before){w.before=w.before.replace(/\n?$/,"\n")}if(w.after){w.after=w.after.replace(/^\n?/,"\n")}w.before=w.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,function(A){w.startTag=A;return""});w.after=w.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(A){w.endTag=A;return""});var y=function(B){var A=B?"> ":"";if(w.startTag){w.startTag=w.startTag.replace(/\n((>|\s)*)\n$/,function(D,C){return"\n"+C.replace(/^[ ]{0,3}>?[ \t]*$/gm,A)+"\n"})}if(w.endTag){w.endTag=w.endTag.replace(/^\n((>|\s)*)\n/,function(D,C){return"\n"+C.replace(/^[ ]{0,3}>?[ \t]*$/gm,A)+"\n"})}};if(/^(?![ ]{0,3}>)/m.test(w.selection)){d.wrap(w,o.wmd_env.lineLength-2);w.selection=w.selection.replace(/^/gm,"> ");y(true);w.addBlankLines()}else{w.selection=w.selection.replace(/^[ ]{0,3}> ?/gm,"");d.unwrap(w);y(false);if(!/^(\n|^)[ ]{0,3}>/.test(w.selection)&&w.startTag){w.startTag=w.startTag.replace(/\n{0,2}$/,"\n\n")}if(!/(\n|^)[ ]{0,3}>.*$/.test(w.selection)&&w.endTag){w.endTag=w.endTag.replace(/^\n{0,2}/,"\n\n")}}if(!/\n/.test(w.selection)){w.selection=w.selection.replace(/^(> *)/,function(A,B){w.startTag+=B;return""})}};d.doCode=function(v,w,A){var z=/\S[ ]*$/.test(v.before);var B=/^[ ]*\S/.test(v.after);if((!B&&!z)||/\n/.test(v.selection)){v.before=v.before.replace(/[ ]{4}$/,function(C){v.selection=C+v.selection;return""});var y=1;var x=1;if(/\n(\t|[ ]{4,}).*\n$/.test(v.before)||v.after===""){y=0}if(/^\n(\t|[ ]{4,})/.test(v.after)){x=0}v.addBlankLines(y,x);if(!v.selection){v.startTag="    ";v.selection=A?"enter code here":""}else{if(/^[ ]{0,3}\S/m.test(v.selection)){v.selection=v.selection.replace(/^/gm,"    ")}else{v.selection=v.selection.replace(/^[ ]{4}/gm,"")}}}else{v.trimWhitespace();v.findTags(/`/,/`/);if(!v.startTag&&!v.endTag){v.startTag=v.endTag="`";if(!v.selection){v.selection=A?"enter code here":""}}else{if(v.endTag&&!v.startTag){v.before+=v.endTag;v.endTag=""}else{v.startTag=v.endTag=""}}}};d.doList=function(G,z,y,I){var J=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/;var H=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var v="-";var D=1;var B=function(){var K;if(y){K=" "+D+". ";D++}else{K=" "+v+" "}return K};var C=function(K){if(y===undefined){y=/^\s*\d/.test(K)}K=K.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(L){return B()});return K};G.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);if(G.before&&!/\n$/.test(G.before)&&!/^\n/.test(G.startTag)){G.before+=G.startTag;G.startTag=""}if(G.startTag){var x=/\d+[.]/.test(G.startTag);G.startTag="";G.selection=G.selection.replace(/\n[ ]{4}/g,"\n");d.unwrap(G);G.addBlankLines();if(x){G.after=G.after.replace(H,C)}if(y==x){return}}var A=1;G.before=G.before.replace(J,function(K){if(/^\s*([*+-])/.test(K)){v=k.$1}A=/[^\n]\n\n[^\n]/.test(K)?1:0;return C(K)});if(!G.selection){G.selection=I?"List item":" "}var E=B();var w=1;G.after=G.after.replace(H,function(K){w=/[^\n]\n\n[^\n]/.test(K)?1:0;return C(K)});G.trimWhitespace(true);G.addBlankLines(A,w,true);G.startTag=E;var F=E.replace(/./g," ");d.wrap(G,o.wmd_env.lineLength-F.length);G.selection=G.selection.replace(/\n/g,"\n"+F)};d.doHeading=function(x,y,B){x.selection=x.selection.replace(/\s+/g," ");x.selection=x.selection.replace(/(^\s+|\s+$)/g,"");if(!x.selection){x.startTag="## ";x.selection="Heading";x.endTag=" ##";return}var z=0;x.findTags(/#+[ ]*/,/[ ]*#+/);if(/#+/.test(x.startTag)){z=k.lastMatch.length}x.startTag=x.endTag="";x.findTags(null,/\s?(-+|=+)/);if(/=+/.test(x.endTag)){z=1}if(/-+/.test(x.endTag)){z=2}x.startTag=x.endTag="";x.addBlankLines(1,1);var A=z==0?2:z-1;if(A>0){var w=A>=2?"-":"=";var v=x.selection.length;if(v>o.wmd_env.lineLength){v=o.wmd_env.lineLength}x.endTag="\n";while(v--){x.endTag+=w}}};d.doHorizontalRule=function(v,w,x){v.startTag="----------\n";v.selection="";v.addBlankLines(2,1,true)}};Attacklab.wmd_env={};Attacklab.account_options={};Attacklab.wmd_defaults={version:1,output:"Markdown",lineLength:40,delayLoad:false};if(!Attacklab.wmd){Attacklab.wmd=function(){Attacklab.loadEnv=function(){var b=function(d){if(!d){return}for(var c in d){Attacklab.wmd_env[c]=d[c]}};b(Attacklab.wmd_defaults);b(Attacklab.account_options);b(top.wmd_options);Attacklab.full=true;var a="bold italic link blockquote code image ol ul heading hr";Attacklab.wmd_env.buttons=Attacklab.wmd_env.buttons||a};Attacklab.loadEnv()};Attacklab.wmd();Attacklab.wmdBase()}(function(b){b.extend(true,window,{Slick:{AutoTooltips:a}});function a(e){var d;var c=this;var k={maxToolTipLength:null};function j(l){e=b.extend(true,{},k,e);d=l;d.onMouseEnter.subscribe(h)}function f(){d.onMouseEnter.unsubscribe(h)}function h(o,m){var l=d.getCellFromEvent(o);if(l){var n=d.getCellNode(l.row,l.cell);if(b(n).innerWidth()<n.scrollWidth){var q=b.trim(b(n).text());if(e.maxToolTipLength&&q.length>e.maxToolTipLength){q=q.substr(0,e.maxToolTipLength-3)+"..."}b(n).attr("title",q)}else{b(n).attr("title","")}}}b.extend(this,{init:j,destroy:f})}})(jQuery);(function(b){b.extend(true,window,{Slick:{CellRangeDecorator:a}});function a(h,d){var f;var j={selectionCss:{zIndex:"9999",border:"2px dashed red"}};d=b.extend(true,{},j,d);function c(k){if(!f){f=b("<div></div>",{css:d.selectionCss}).css("position","absolute").appendTo(h.getCanvasNode())}var m=h.getCellNodeBox(k.fromRow,k.fromCell);var l=h.getCellNodeBox(k.toRow,k.toCell);f.css({top:m.top-1,left:m.left-1,height:l.bottom-m.top-2,width:l.right-m.left-2});return f}function e(){if(f){f.remove();f=null}}b.extend(this,{show:c,hide:e})}})(jQuery);(function(b){b.extend(true,window,{Slick:{CellRangeSelector:a}});function a(r){var k;var h;var q;var d;var j=this;var e={selectionCss:{border:"2px dashed blue"}};function o(s){r=b.extend(true,{},e,r);d=new Slick.CellRangeDecorator(s,r);k=s;h=k.getCanvasNode();k.onDragInit.subscribe(m);k.onDragStart.subscribe(f);k.onDrag.subscribe(c);k.onDragEnd.subscribe(l)}function n(){k.onDragInit.unsubscribe(m);k.onDragStart.unsubscribe(f);k.onDrag.unsubscribe(c);k.onDragEnd.unsubscribe(l)}function m(t,s){t.stopImmediatePropagation()}function f(u,t){var s=k.getCellFromEvent(u);if(j.onBeforeCellRangeSelected.notify(s)!==false){if(k.canCellBeSelected(s.row,s.cell)){q=true;u.stopImmediatePropagation()}}if(!q){return}var v=k.getCellFromPoint(t.startX-b(h).offset().left,t.startY-b(h).offset().top);t.range={start:v,end:{}};return d.show(new Slick.Range(v.row,v.cell))}function c(u,s){if(!q){return}u.stopImmediatePropagation();var t=k.getCellFromPoint(u.pageX-b(h).offset().left,u.pageY-b(h).offset().top);if(!k.canCellBeSelected(t.row,t.cell)){return}s.range.end=t;d.show(new Slick.Range(s.range.start.row,s.range.start.cell,t.row,t.cell))}function l(t,s){if(!q){return}q=false;t.stopImmediatePropagation();d.hide();j.onCellRangeSelected.notify({range:new Slick.Range(s.range.start.row,s.range.start.cell,s.range.end.row,s.range.end.cell)})}b.extend(this,{init:o,destroy:n,onBeforeCellRangeSelected:new Slick.Event(),onCellRangeSelected:new Slick.Event()})}})(jQuery);(function(b){b.extend(true,window,{Slick:{CellSelectionModel:a}});function a(u){var n;var k;var h=[];var m=this;var e=new Slick.CellRangeSelector({selectionCss:{border:"2px solid black"}});var q;var f={selectActiveCell:true};function r(v){q=b.extend(true,{},f,u);n=v;k=n.getCanvasNode();n.onActiveCellChanged.subscribe(j);v.registerPlugin(e);e.onCellRangeSelected.subscribe(s);e.onBeforeCellRangeSelected.subscribe(t)}function o(){n.onActiveCellChanged.unsubscribe(j);e.onCellRangeSelected.unsubscribe(s);e.onBeforeCellRangeSelected.unsubscribe(t);n.unregisterPlugin(e)}function d(w){var v=[];for(var x=0;x<w.length;x++){var y=w[x];if(n.canCellBeSelected(y.fromRow,y.fromCell)&&n.canCellBeSelected(y.toRow,y.toCell)){v.push(y)}}return v}function c(v){h=d(v);m.onSelectedRangesChanged.notify(h)}function l(){return h}function t(w,v){if(n.getEditorLock().isActive()){w.stopPropagation();return false}}function s(w,v){c([v.range])}function j(w,v){if(q.selectActiveCell){c([new Slick.Range(v.row,v.cell)])}}b.extend(this,{getSelectedRanges:l,setSelectedRanges:c,init:r,destroy:o,onSelectedRangesChanged:new Slick.Event()})}})(jQuery);(function(a){a.extend(true,window,{Slick:{CheckboxSelectColumn:b}});function b(r){var j;var h=this;var q={};var e={columnId:"_checkbox_selector",cssClass:null,toolTip:"Select/Deselect All",width:30};var n=a.extend(true,{},e,r);function o(s){j=s;j.onSelectedRowsChanged.subscribe(k);j.onClick.subscribe(f);j.onHeaderClick.subscribe(m)}function l(){j.onSelectedRowsChanged.unsubscribe(k);j.onClick.unsubscribe(f);j.onHeaderClick.unsubscribe(m)}function k(w,s){var v=j.getSelectedRows();var u={},x,t;for(t=0;t<v.length;t++){x=v[t];u[x]=true;if(u[x]!==q[x]){j.invalidateRow(x);delete q[x]}}for(t in q){j.invalidateRow(t)}q=u;j.render();if(v.length===j.getDataLength()&&v.length!==0){j.updateColumnHeader(n.columnId,"<input type='checkbox' checked='checked'>",n.toolTip)}else{j.updateColumnHeader(n.columnId,"<input type='checkbox'>",n.toolTip)}}function f(t,s){if(j.getColumns()[s.cell].id===n.columnId&&a(t.target).is(":checkbox")){if(j.getEditorLock().isActive()&&!j.getEditorLock().commitCurrentEdit()){t.preventDefault();t.stopImmediatePropagation();return}if(q[s.row]){j.setSelectedRows(a.grep(j.getSelectedRows(),function(u){return u!=s.row}))}else{j.setSelectedRows(j.getSelectedRows().concat(s.row))}t.stopPropagation();t.stopImmediatePropagation()}}function m(v,s){if(s.column.id==n.columnId&&a(v.target).is(":checkbox")){if(j.getEditorLock().isActive()&&!j.getEditorLock().commitCurrentEdit()){v.preventDefault();v.stopImmediatePropagation();return}if(a(v.target).is(":checked")){var u=[];for(var t=0;t<j.getDataLength();t++){u.push(t)}j.setSelectedRows(u)}else{j.setSelectedRows([])}v.stopPropagation();v.stopImmediatePropagation()}}function c(){return{id:n.columnId,name:"<input type='checkbox'>",toolTip:n.toolTip,field:"sel",width:n.width,resizable:false,sortable:false,cssClass:n.cssClass,formatter:d}}function d(w,t,v,u,s){if(s){if(!_.isUndefined(s.id)){return q[w]?"<input type='checkbox' checked='checked'>":"<input type='checkbox'>"}}return null}a.extend(this,{init:o,destroy:l,getColumnDefinition:c})}})(jQuery);(function(a){var b={SelectorCellFormatter:function(h,d,f,e,c){return(!c?"":h)},PercentCompleteCellFormatter:function(h,d,f,e,c){if(f==null||f===""){return"-"}else{if(f<50){return"<span style='color:red;font-weight:bold;'>"+f+"%</span>"}else{return"<span style='color:green'>"+f+"%</span>"}}},GraphicalPercentCompleteCellFormatter:function(j,d,h,f,c){if(h==null||h===""){return""}var e;if(h<30){e="red"}else{if(h<70){e="silver"}else{e="green"}}return"<span class='percent-complete-bar' style='background:"+e+";width:"+h+"%'></span>"},YesNoCellFormatter:function(h,d,f,e,c){return f?"Yes":"No"},BoolCellFormatter:function(h,d,f,e,c){return f?"<img src='../images/tick.png'>":""},TaskNameFormatter:function(j,d,h,e,c){var f="<span style='display:inline-block;height:1px;width:"+(2+15*c.indent)+"px'></span>";return f+" <img src='../images/expand.gif'>&nbsp;"+h},ResourcesFormatter:function(j,d,f,e,c){var h=c.resources;if(!h||h.length==0){return""}if(e.width<50){return(h.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+h.join(", ")+"'></center>"}else{return h.join(", ")}},StarFormatter:function(h,d,f,e,c){return(f)?"<img src='../images/bullet_star.png' align='absmiddle'>":""},TextCellEditor:function(d){var f;var c;var e=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />").appendTo(d.container).bind("keydown.nav",function(h){if(h.keyCode===a.ui.keyCode.LEFT||h.keyCode===a.ui.keyCode.RIGHT){h.stopImmediatePropagation()}}).focus().select()};this.destroy=function(){f.remove()};this.focus=function(){f.focus()};this.getValue=function(){return f.val()};this.setValue=function(h){f.val(h)};this.loadValue=function(h){c=h[d.column.field]||"";f.val(c);f[0].defaultValue=c;f.select()};this.serializeValue=function(){return f.val()};this.applyValue=function(h,j){h[d.column.field]=j};this.isValueChanged=function(){return(!(f.val()==""&&c==null))&&(f.val()!=c)};this.validate=function(){if(d.column.validator){var h=d.column.validator(f.val());if(!h.valid){return h}}return{valid:true,msg:null}};this.init()},IntegerCellEditor:function(d){var f;var c;var e=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />");f.bind("keydown.nav",function(h){if(h.keyCode===a.ui.keyCode.LEFT||h.keyCode===a.ui.keyCode.RIGHT){h.stopImmediatePropagation()}});f.appendTo(d.container);f.focus().select()};this.destroy=function(){f.remove()};this.focus=function(){f.focus()};this.loadValue=function(h){c=h[d.column.field];f.val(c);f[0].defaultValue=c;f.select()};this.serializeValue=function(){return parseInt(f.val(),10)||0};this.applyValue=function(h,j){h[d.column.field]=j};this.isValueChanged=function(){return(!(f.val()==""&&c==null))&&(f.val()!=c)};this.validate=function(){if(isNaN(f.val())){return{valid:false,msg:"Please enter a valid integer"}}return{valid:true,msg:null}};this.init()},DateCellEditor:function(d){var h;var c;var e=this;var f=false;this.init=function(){h=a("<INPUT type=text class='editor-text' />");h.appendTo(d.container);h.focus().select();h.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../images/calendar.gif",beforeShow:function(){f=true},onClose:function(){f=false}});h.width(h.width()-18)};this.destroy=function(){a.datepicker.dpDiv.stop(true,true);h.datepicker("hide");h.datepicker("destroy");h.remove()};this.show=function(){if(f){a.datepicker.dpDiv.stop(true,true).show()}};this.hide=function(){if(f){a.datepicker.dpDiv.stop(true,true).hide()}};this.position=function(j){if(!f){return}a.datepicker.dpDiv.css("top",j.top+30).css("left",j.left)};this.focus=function(){h.focus()};this.loadValue=function(j){c=j[d.column.field];h.val(c);h[0].defaultValue=c;h.select()};this.serializeValue=function(){return h.val()};this.applyValue=function(j,k){j[d.column.field]=k};this.isValueChanged=function(){return(!(h.val()==""&&c==null))&&(h.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoSelectCellEditor:function(e){var d;var c;var f=this;this.init=function(){d=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>");d.appendTo(e.container);d.focus()};this.destroy=function(){d.remove()};this.focus=function(){d.focus()};this.loadValue=function(h){d.val((c=h[e.column.field])?"yes":"no");d.select()};this.serializeValue=function(){return(d.val()=="yes")};this.applyValue=function(h,j){h[e.column.field]=j};this.isValueChanged=function(){return(d.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoCheckboxCellEditor:function(e){var d;var c;var f=this;this.init=function(){d=a("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>");d.appendTo(e.container);d.focus()};this.destroy=function(){d.remove()};this.focus=function(){d.focus()};this.loadValue=function(h){c=h[e.column.field];if(c){d.attr("checked","checked")}else{d.removeAttr("checked")}};this.serializeValue=function(){if(d.attr("checked")){return true}else{return false}};this.applyValue=function(h,j){h[e.column.field]=j};this.isValueChanged=function(){return(d.attr("checked")!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},PercentCompleteCellEditor:function(d){var h,f;var c;var e=this;this.init=function(){h=a("<INPUT type=text class='editor-percentcomplete' />");h.width(a(d.container).innerWidth()-25);h.appendTo(d.container);f=a("<div class='editor-percentcomplete-picker' />").appendTo(d.container);f.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>");f.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>");h.focus().select();f.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:c,slide:function(j,k){h.val(k.value)}});f.find(".editor-percentcomplete-buttons button").bind("click",function(j){h.val(a(this).attr("val"));f.find(".editor-percentcomplete-slider").slider("value",a(this).attr("val"))})};this.destroy=function(){h.remove();f.remove()};this.focus=function(){h.focus()};this.loadValue=function(j){h.val(c=j[d.column.field]);h.select()};this.serializeValue=function(){return parseInt(h.val(),10)||0};this.applyValue=function(j,k){j[d.column.field]=k};this.isValueChanged=function(){return(!(h.val()==""&&c==null))&&((parseInt(h.val(),10)||0)!=c)};this.validate=function(){if(isNaN(parseInt(h.val(),10))){return{valid:false,msg:"Please enter a valid positive number"}}return{valid:true,msg:null}};this.init()},StarCellEditor:function(e){var h;var d;var f=this;function c(j){if(j.type=="keydown"&&j.which!=32){return}if(h.css("opacity")=="1"){h.css("opacity",0.5)}else{h.css("opacity",1)}j.preventDefault();j.stopPropagation();return false}this.init=function(){h=a("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",c).appendTo(e.container).focus()};this.destroy=function(){h.unbind("click keydown",c);h.remove()};this.focus=function(){h.focus()};this.loadValue=function(j){d=j[e.column.field];h.css("opacity",d?1:0.2)};this.serializeValue=function(){return(h.css("opacity")=="1")};this.applyValue=function(j,k){j[e.column.field]=k};this.isValueChanged=function(){return d!=(h.css("opacity")=="1")};this.validate=function(){return{valid:true,msg:null}};this.init()},LongTextCellEditor:function(d){var h,f;var c;var e=this;this.init=function(){var j=a("body");f=a("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(j);h=a("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(f);a("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(f);f.find("button:first").bind("click",this.save);f.find("button:last").bind("click",this.cancel);h.bind("keydown",this.handleKeyDown);e.position(d.position);h.focus().select()};this.handleKeyDown=function(j){if(j.which==a.ui.keyCode.ENTER&&j.ctrlKey){e.save()}else{if(j.which==a.ui.keyCode.ESCAPE){j.preventDefault();e.cancel()}else{if(j.which==a.ui.keyCode.TAB&&j.shiftKey){j.preventDefault();grid.navigatePrev()}else{if(j.which==a.ui.keyCode.TAB){j.preventDefault();grid.navigateNext()}}}}};this.save=function(){d.commitChanges()};this.cancel=function(){h.val(c);d.cancelChanges()};this.hide=function(){f.hide()};this.show=function(){f.show()};this.position=function(j){f.css("top",j.top-5).css("left",j.left-5)};this.destroy=function(){f.remove()};this.focus=function(){h.focus()};this.loadValue=function(j){h.val(c=j[d.column.field]);h.select()};this.serializeValue=function(){return h.val()};this.applyValue=function(j,k){j[d.column.field]=k};this.isValueChanged=function(){return(!(h.val()==""&&c==null))&&(h.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()}};a.extend(window,b)})(jQuery);if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded"}if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded"}if(typeof Slick==="undefined"){throw"slick.core.js not loaded"}(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;function SlickGrid(container,data,columns,options,state){var defaults={headerHeight:25,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableCellRangeSelection:false,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null};var maxSupportedCssHeight;var th;var h;var ph;var n;var cj;var page=0;var offset=0;var scrollDir=1;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;var $headerScroller;var $headers;var $headerRow,$headerRowScroller;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var stylesheet;var viewportH,viewportW;var viewportHasHScroll;var headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff;var absoluteColumnMinWidth;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var prevScrollLeft=0;var avgRowRenderTime=10;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumnId;var sortAsc=true;var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;this.state=state;function init(){$container=$(container);if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.")}maxSupportedCssHeight=getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);columnDefaults.width=options.defaultColumnWidth;if(options.enableColumnReorder&&!$.fn.sortable){throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded')}editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit};$container.empty().attr("tabIndex",0).attr("hideFocus",true).css("overflow","scroll").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative")}$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide()}if(!options.showHeaderRow){$headerRowScroller.hide()}$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo($container);$canvas=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport);measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea")})}viewportW=parseFloat($.css($container[0],"width",true));createColumnHeaders();setupColumnSort();createCssRules();resizeAndRender();bindAncestorScrollEvents();$viewport.bind("scroll.slickgrid",handleScroll);$container.bind("resize.slickgrid",resizeAndRender);$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick);$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).bind("commit",handleCommit);$canvas.delegate(".slick-cell","mouseenter",handleMouseEnter);$canvas.delegate(".slick-cell","mouseleave",handleMouseLeave)}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self)}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy()}plugins.splice(i,1);break}}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy()}}selectionModel=model;selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim}function getRowWidth(){var rowWidth=0;var i=columns.length;while(i--){rowWidth+=(columns[i].width||columnDefaults.width)}return rowWidth}function setCanvasWidth(width){$canvas.width(width);$container.width(width);viewportHasHScroll=(width>viewportW-scrollbarDimensions.width)}function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}}function getMaxSupportedCssHeight(){var increment=1000000;var supportedHeight=increment;var testUpTo=($.browser.mozilla)?5000000:1000000000;var div=$("<div style='display:none' />").appendTo(document.body);while(supportedHeight<=testUpTo){div.css("height",supportedHeight+increment);if(div.height()!==supportedHeight+increment){break}else{supportedHeight+=increment}}div.remove();return supportedHeight}function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){$(elem).bind("scroll.slickgrid",handleActiveCellPositionChange)}}}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(columnId,title,toolTip){var idx=getColumnIndex(columnId);var $header=$headers.children().eq(idx);if($header){columns[idx].name=title;columns[idx].toolTip=toolTip;$header.attr("title",toolTip||title||"").children().eq(0).html(title)}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0]}function createColumnHeaders(){var i;function hoverBegin(){$(this).addClass("ui-state-hover")}function hoverEnd(){$(this).removeClass("ui-state-hover")}$headers.empty();$headerRow.empty();columnsById={};for(i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;var title=m.name;if(m.type){title+=" <span class='type'>"+m.type+"</span>"}var header=$("<div class='ui-state-default slick-header-column' id='"+uid+m.id+"' />").html("<span class='slick-column-name'>"+title+"</span>").width(m.width-headerColumnWidthDiff).attr("title",m.toolTip||m.name||"").data("fieldId",m.id).addClass(m.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||m.sortable){header.hover(hoverBegin,hoverEnd)}if(m.sortable){header.append("<span class='slick-sort-indicator' />")}if(options.showHeaderRow){$("<div class='ui-state-default slick-headerrow-column c"+i+"'></div>").appendTo($headerRow)}}setSortColumn(sortColumnId,sortAsc);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder()}}function setupColumnSort(){$headers.click(function(e){if($(e.target).hasClass("slick-resizable-handle")){return}var $col=$(e.target).closest(".slick-header-column");if(!$col.length){return}var column=columns[getColumnIndex($col.data("fieldId"))];if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return}if(column.id===sortColumnId){sortAsc=!sortAsc}else{sortColumnId=column.id;sortAsc=true}trigger(self.onSort,{sortCol:column,sortAsc:sortAsc})}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active")},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))])}setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i}lastResizable=i}});if(firstResizable===undefined){return}columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return}$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth()});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth}else{stretchLeewayOnRight=null}}shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth}else{stretchLeewayOnLeft=null}}shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000}if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000}if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000}maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);originalCanvasWidth=$canvas.width()}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x,ci;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths()}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows()}}applyColumnWidths();resizeCanvas();trigger(self.onColumnsResized,{})})})}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0});return delta}function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0});el.remove();var r=$("<div class='slick-row' />").appendTo($canvas);el=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { width:"+getRowWidth()+"px; }","."+uid+" .lr { float:none; position:absolute; }"];var rowWidth=getRowWidth();var x=0,w;for(var i=0;i<columns.length;i++){w=columns[i].width;rules.push("."+uid+" .l"+i+" { left: "+x+"px; }");rules.push("."+uid+" .r"+i+" { right: "+(rowWidth-x-w)+"px; }");rules.push("."+uid+" .c"+i+" { width:"+(w-cellWidthDiff)+"px; }");x+=columns[i].width}if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ")}else{$style[0].appendChild(document.createTextNode(rules.join(" ")))}var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break}}}function findCssRule(selector){var rules=(stylesheet.cssRules||stylesheet.rules);for(var i=0;i<rules.length;i++){if(rules[i].selectorText==selector){return rules[i]}}return null}function removeCssRules(){$style.remove()}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});for(var i=0;i<plugins.length;i++){unregisterPlugin(plugins[i])}if(options.enableColumnReorder&&$headers.sortable){$headers.sortable("destroy")}unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(evt,args,e){e=e||new Slick.EventData();args=args||{};args.grid=self;return evt.notify(args,e,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(id){return columnsById[id]}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,availWidth=(options.autoHeight?viewportW:viewportW-scrollbarDimensions.width),total=0,existingTotal=0;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);existingTotal+=c.width;shrinkLeeway+=c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)}total=existingTotal;invalidateAllRows();while(total>availWidth){if(!shrinkLeeway){return}var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];if(!c.resizable||c.minWidth===c.width||c.width===absoluteColumnMinWidth){continue}var shrinkSize=Math.floor(shrinkProportion*(c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)))||1;total-=shrinkSize;widths[i]-=shrinkSize}}var previousTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue}var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;total+=growSize;widths[i]+=growSize}if(previousTotal==total){break}previousTotal=total}for(i=0;i<columns.length;i++){columns[i].width=widths[i]}applyColumnHeaderWidths();applyColumnWidths();resizeCanvas()}function applyColumnHeaderWidths(){var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff)}}}function applyColumnWidths(){var rowWidth=getRowWidth();var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=findCssRule("."+uid+" .c"+i);rule.style.width=(w-cellWidthDiff)+"px";rule=findCssRule("."+uid+" .l"+i);rule.style.left=x+"px";rule=findCssRule("."+uid+" .r"+i);rule.style.right=(rowWidth-x-w)+"px";x+=columns[i].width}rule=findCssRule("."+uid+" .slick-row");rule.style.width=rowWidth+"px"}function setSortColumn(columnId,ascending){sortColumnId=columnId;sortAsc=ascending;var columnIndex=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted");$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");if(columnIndex!=null){$headers.children().eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j)}hash[j]={};for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass}}}}setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function setColumns(columnDefinitions){columns=columnDefinitions;invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeAndRender();handleScroll()}function getOptions(){return options}function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return}makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength())}options=$.extend(options,args);render()}function setData(newData,scrollToTop){invalidateAllRows();data=newData;if(scrollToTop){scrollTo(0)}}function getData(){return data}function getDataLength(){if(data.getLength){return data.getLength()}else{return data.length}}function getDataItem(i){if(data.getItem){return data.getItem(i)}else{return data[i]}}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=true;$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=false;$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=true;$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=false;$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(y){var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range.top,range.bottom);updateRowPositions()}if(prevScrollTop!=newScrollTop){scrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{})}}function defaultFormatter(row,cell,value,columnDef,dataContext){return(value===null||value===undefined)?"":value}function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);return(columnOverrides&&columnOverrides.formatter)||(rowMetadata&&rowMetadata.formatter)||column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||defaultFormatter}function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){return columnMetadata[column.id].editor}if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){return columnMetadata[cell].editor}return column.editor||(options.editorFactory&&options.editorFactory.getEditor(column))}function appendRowHtml(stringArray,row){var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var rowCss="slick-row "+(dataLoading?" loading":"")+(row%2==1?" odd":" even");var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses}stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"' style='top:"+(options.rowHeight*row-offset)+"px'>");var colspan;var rowHasColumnData=metadata&&metadata.columns;for(var i=0,cols=columns.length;i<cols;i++){var m=columns[i];colspan=getColspan(row,i);if(true||rowHasColumnData){cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)+(m.cssClass?" "+m.cssClass:"")}else{cellCss="slick-cell c"+i+(m.cssClass?" "+m.cssClass:"")}if(row===activeRow&&i===activeCell){cellCss+=(" active")}for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id])}}stringArray.push("<div class='"+cellCss+"'>");if(d){stringArray.push(getFormatter(row,m)(row,i,d[m.field],m,d,state))}stringArray.push("</div>");if(colspan){i+=(colspan-1)}}stringArray.push("</div>")}function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i)}}}function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal()}for(var row in rowsCache){removeRowFromCache(row)}}function removeRowFromCache(row){var node=rowsCache[row];if(!node){return}$canvas[0].removeChild(node);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++}function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return}scrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===i){makeActiveCellNormal()}if(rowsCache[rows[i]]){removeRowFromCache(rows[i])}}}function invalidateRow(row){invalidateRows([row])}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return}var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d)}else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,d[m.field],m,d,state):"";invalidatePostProcessingResults(row)}}function updateRow(row){if(!rowsCache[row]){return}$(rowsCache[row]).children().each(function(i){var m=columns[i];if(row===activeRow&&i===activeCell&&currentEditor){currentEditor.loadValue(getDataItem(activeRow))}else{if(getDataItem(row)){this.innerHTML=getFormatter(row,m)(row,i,getDataItem(row)[m.field],m,getDataItem(row),state)}else{this.innerHTML=""}}});invalidatePostProcessingResults(row)}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-options.headerHeight-getVBoxDelta($headers)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0))}else{viewportH=getViewportHeight()}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(!options.autoHeight){$viewport.height(viewportH)}var w=0,i=columns.length;while(i--){w+=columns[i].width}setCanvasWidth(w);updateRowCount();render()}function resizeAndRender(){if(options.forceFitColumns){autosizeColumns()}else{resizeCanvas()}}function updateRowCount(){var newRowCount=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldH=h;var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i)}}th=Math.max(options.rowHeight*newRowCount,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1)}if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop}var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0}else{if(oldScrollTopInRange){scrollTo(scrollTop+offset)}else{scrollTo(th-viewportH)}}if(h!=oldH&&options.autoHeight){resizeCanvas()}}function getVisibleRange(viewportTop){if(viewportTop==null){viewportTop=scrollTop}return{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(viewportTop){var range=getVisibleRange(viewportTop);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(scrollDir==-1){range.top-=buffer;range.bottom+=minBuffer}else{if(scrollDir==1){range.top-=minBuffer;range.bottom+=buffer}else{range.top-=minBuffer;range.bottom+=minBuffer}}range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);return range}function renderRows(range){var i,l,parentNode=$canvas[0],rowsBefore=renderedRows,stringArray=[],rows=[],startTimestamp=new Date(),needToReselectCell=false;for(i=range.top;i<=range.bottom;i++){if(rowsCache[i]){continue}renderedRows++;rows.push(i);appendRowHtml(stringArray,i);if(activeCellNode&&activeRow===i){needToReselectCell=true}counter_rows_rendered++}var x=document.createElement("div");x.innerHTML=stringArray.join("");for(i=0,l=x.childNodes.length;i<l;i++){rowsCache[rows[i]]=parentNode.appendChild(x.firstChild)}if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell)}if(renderedRows-rowsBefore>5){avgRowRenderTime=(new Date()-startTimestamp)/(renderedRows-rowsBefore)}}function startPostProcessing(){if(!options.enableAsyncPostRender){return}clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing()}function updateRowPositions(){for(var row in rowsCache){rowsCache[row].style.top=(row*options.rowHeight-offset)+"px"}}function render(){var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;var scrollLeft=$viewport[0].scrollLeft;var scrollDist=Math.abs(scrollTop-prevScrollTop);if(scrollLeft!==prevScrollLeft){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft}if(scrollDist){scrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(scrollDist<viewportH){scrollTo(scrollTop+offset)}else{var oldOffset=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows()}}if(h_render){clearTimeout(h_render)}if(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH){render()}else{h_render=setTimeout(render,50)}trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=(scrollDir>=0)?postProcessFromRow++:postProcessToRow--;var rowNode=rowsCache[row];if(!rowNode||postProcessedRows[row]||row>=getDataLength()){continue}var d=getDataItem(row),cellNodes=rowNode.childNodes;for(var i=0,j=0,l=columns.length;i<l;++i){var m=columns[i];if(m.asyncPostRender){m.asyncPostRender(cellNodes[j],postProcessFromRow,d,m)}++j}postProcessedRows[row]=true;h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists."}cellCssClasses[key]=hash;var node;for(var row in rowsCache){if(hash[row]){for(var columnId in hash[row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(hash[row][columnId])}}}}}function removeCellCssStyles(key){if(!cellCssClasses[key]){return}var node;for(var row in rowsCache){if(cellCssClasses[key][row]){for(var columnId in cellCssClasses[key][row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).removeClass(cellCssClasses[key][row][columnId])}}}}delete cellCssClasses[key]}function setCellCssStyles(key,hash){removeCellCssStyles(key);addCellCssStyles(key,hash)}function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times){return}setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1)})},speed)}toggleCellClass(4)}}function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDrag(e,dd){return trigger(self.onDrag,dd,e)}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e)}function handleKeyDown(e){trigger(self.onKeyDown,{},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return}cancelEditAndSetFocus()}else{if(e.which==37){navigateLeft()}else{if(e.which==39){navigateRight()}else{if(e.which==38){navigateUp()}else{if(e.which==40){navigateDown()}else{if(e.which==9){navigateNext()}else{if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable()}}}}else{return}}}}}}}}else{if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev()}else{return}}}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}function handleCommit(e){commitEditAndSetFocus()}function handleClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell),(cell.row===getDataLength())||options.autoEdit)}}}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return}if(activeCellNode===$cell[0]&&currentEditor!==null){return}trigger(self.onContextMenu,{},e)}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(options.editable){gotoCell(cell.row,cell.cell,true)}}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderContextMenu,{column:column},e)}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderClick,{column:column},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(row,cell){return !(row<0||row>=getDataLength()||cell<0||cell>=columns.length)}function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++}if(cell<0){cell=0}return{row:row,cell:cell-1}}function getCellFromNode(node){var cls=/l\d+/.exec(node.className)||/c\d+/.exec(node.className);if(!cls){throw"getCellFromNode: cannot get cell - "+node.className}return parseInt(cls[0].substr(1,cls[0].length-1),10)}function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length){return null}return{row:$cell.parent().attr("row")|0,cell:getCellFromNode($cell[0])}}function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null}var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width}var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){if($.browser.msie){$canvas[0].setActive()}else{$canvas[0].focus()}}function scrollActiveCellIntoView(){if(activeCellNode){var left=$(activeCellNode).position().left,right=left+$(activeCellNode).outerWidth(),scrollLeft=$viewport.scrollLeft(),scrollRight=scrollLeft+$viewport.width();if(left<scrollLeft){$viewport.scrollLeft(left)}else{if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth))}}}}function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active")}var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=parseInt($(activeCellNode).parent().attr("row"));activeCell=activePosX=getCellFromNode(activeCellNode);$(activeCellNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay)}else{makeActiveCellEditable()}}else{setFocus()}}else{activeRow=activeCell=null}if(activeCellChanged){scrollActiveCellIntoView();trigger(self.onActiveCellChanged,getActiveCell())}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges()}}}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false}if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false}if(!getEditor(row,cell)){return false}return true}function makeActiveCellNormal(){if(!currentEditor){return}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){$(activeCellNode).removeClass("editable invalid");if(getDataItem(activeRow)){var column=columns[activeCell];activeCellNode.innerHTML=getFormatter(activeRow,column)(activeRow,activeCell,getDataItem(activeRow)[column.field],column,getDataItem(activeRow),state);invalidatePostProcessingResults(activeRow)}}if($.browser.msie){clearTextSelection()}getEditorLock().deactivate(editController)}function makeActiveCellEditable(editor){if(!activeCellNode){return}if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false"}clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return}var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML=""}currentEditor=new (editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(item){currentEditor.loadValue(item)}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange()}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown()}}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus()}}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight}if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth}box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent}box.bottom=box.top+box.height;box.right=box.left+box.width}return box}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode){return}var cellBox;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){cellBox=cellBox||getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide()}else{currentEditor.show()}}if(currentEditor.position){currentEditor.position(cellBox)}}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode){return null}else{return{row:activeRow,cell:activeCell}}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render()}else{if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render()}}}function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1}var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=(columnData&&columnData.colspan);if(colspan==="*"){colspan=columns.length-cell}return(colspan||1)}function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell}cell+=getColspan(row,cell)}return null}function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell}cell+=getColspan(row,cell)}return lastFocusableCell}function gotoRight(row,cell,posX){if(cell>=columns.length){return null}do{cell+=getColspan(row,cell)}while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{row:row,cell:cell,posX:cell}}return null}function gotoLeft(row,cell,posX){if(cell<=0){return null}var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null}var prev={row:row,cell:firstFocusableCell,posX:firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null}if(pos.cell>=cell){return prev}prev=pos}}function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLength()+(options.enableAddRow?1:0)){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoNext(row,cell,posX){var pos=gotoRight(row,cell,posX);if(pos){return pos}var firstFocusableCell=null;while(++row<getDataLength()+(options.enableAddRow?1:0)){firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell!==null){return{row:row,cell:firstFocusableCell,posX:firstFocusableCell}}}return null}function gotoPrev(row,cell,posX){var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break}if(--row<0){return null}cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==null){pos={row:row,cell:lastSelectableCell,posX:lastSelectableCell}}}return pos}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(){navigate("down")}function navigateUp(){navigate("up")}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(dir){if(!activeCellNode||!options.enableCellNavigation){return}if(!getEditorLock().commitCurrentEdit()){return}var stepFunctions={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=(pos.row==getDataLength());scrollRowIntoView(pos.row,!isAddNewRow);setActiveCellInternal(getCellNode(pos.row,pos.cell),isAddNewRow||options.autoEdit);activePosX=pos.posX}}function getCellNode(row,cell){if(rowsCache[row]){var cells=$(rowsCache[row]).children();var nodeCell;for(var i=0;i<cells.length;i++){nodeCell=getCellFromNode(cells[i]);if(nodeCell===cell){return cells[i]}else{if(nodeCell>cell){return null}}}}return null}function setActiveCell(row,cell){if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return}if(!options.enableCellNavigation){return}scrollRowIntoView(row,false);setActiveCellInternal(getCellNode(row,cell),false)}function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLength()+(options.enableAddRow?1:0)||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable}var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable}if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable}if(typeof columns[cell].focusable==="boolean"){return columns[cell].focusable}return true}function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable}var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable}if(typeof columns[cell].selectable==="boolean"){return columns[cell].selectable}return true}function gotoCell(row,cell,forceEdit){if(!canCellBeActive(row,cell)){return}if(!getEditorLock().commitCurrentEdit()){return}scrollRowIntoView(row,false);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus()}}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row)}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand)}else{editCommand.execute();makeActiveCellNormal()}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item})}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column})}return !getEditorLock().isActive()}else{$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true).effect("highlight",{color:"red"},300);trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false}}makeActiveCellNormal()}return true}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell))}return ranges}function getSelectedRows(){if(!selectionModel){throw"Selection model is not set"}return selectedRows}function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set"}selectionModel.setSelectedRanges(rowsToRanges(rows))}this.debug=function(){var s="";s+=("\ncounter_rows_rendered:  "+counter_rows_rendered);s+=("\ncounter_rows_removed:  "+counter_rows_removed);s+=("\nrenderedRows:  "+renderedRows);s+=("\nnumVisibleRows:  "+numVisibleRows);s+=("\nmaxSupportedCssHeight:  "+maxSupportedCssHeight);s+=("\nn(umber of pages):  "+n);s+=("\n(current) page:  "+page);s+=("\npage height (ph):  "+ph);s+=("\nscrollDir:  "+scrollDir);alert(s)};this.eval=function(expr){return eval(expr)};$.extend(this,{slickGridVersion:"2.0a1",onScroll:new Slick.Event(),onSort:new Slick.Event(),onHeaderContextMenu:new Slick.Event(),onHeaderClick:new Slick.Event(),onMouseEnter:new Slick.Event(),onMouseLeave:new Slick.Event(),onClick:new Slick.Event(),onDblClick:new Slick.Event(),onContextMenu:new Slick.Event(),onKeyDown:new Slick.Event(),onAddNewRow:new Slick.Event(),onValidationError:new Slick.Event(),onViewportChanged:new Slick.Event(),onColumnsReordered:new Slick.Event(),onColumnsResized:new Slick.Event(),onCellChange:new Slick.Event(),onBeforeEditCell:new Slick.Event(),onBeforeCellEditorDestroy:new Slick.Event(),onBeforeDestroy:new Slick.Event(),onActiveCellChanged:new Slick.Event(),onActiveCellPositionChanged:new Slick.Event(),onDragInit:new Slick.Event(),onDragStart:new Slick.Event(),onDrag:new Slick.Event(),onDragEnd:new Slick.Event(),onSelectedRowsChanged:new Slick.Event(),registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,getCanvasNode:getCanvasNode,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController});init()}}(jQuery));(function(b){b.extend(true,window,{Slick:{RowSelectionModel:a}});function a(e){var r;var n=[];var j=this;var q;var s={selectActiveRow:true};function t(x){q=b.extend(true,{},s,e);r=x;r.onActiveCellChanged.subscribe(v);r.onKeyDown.subscribe(m);r.onClick.subscribe(l)}function w(){r.onActiveCellChanged.unsubscribe(v);r.onKeyDown.unsubscribe(m);r.onClick.unsubscribe(l)}function f(x){var A=[];for(var z=0;z<x.length;z++){for(var y=x[z].fromRow;y<=x[z].toRow;y++){A.push(y)}}return A}function h(A){var y=[];var x=r.getColumns().length-1;for(var z=0;z<A.length;z++){y.push(new Slick.Range(A[z],0,A[z],x))}return y}function u(A,z){var x,y=[];for(x=A;x<=z;x++){y.push(x)}for(x=z;x<A;x++){y.push(x)}return y}function d(){return f(n)}function k(x){c(h(x))}function c(x){n=x;j.onSelectedRangesChanged.notify(n)}function o(){return n}function v(y,x){if(q.selectActiveRow){c([new Slick.Range(x.row,0,x.row,r.getColumns().length-1)])}}function m(C){var y=r.getActiveCell();if(y&&C.shiftKey&&!C.ctrlKey&&!C.altKey&&!C.metaKey&&(C.which==38||C.which==40)){var B=d();B.sort(function(D,E){return D-E});if(!B.length){B=[y.row]}var A=B[0];var x=B[B.length-1];var z;if(C.which==40){z=y.row<x||A==x?++x:++A}else{z=y.row<x?--x:--A}if(z>=0&&z<r.getDataLength()){r.scrollRowIntoView(z);n=h(u(A,x));c(n)}C.preventDefault();C.stopPropagation()}}function l(C){var y=r.getCellFromEvent(C);if(!y||!r.canCellBeActive(y.row,y.cell)){return false}var A=f(n);var x=b.inArray(y.row,A);if(!C.ctrlKey&&!C.shiftKey&&!C.metaKey){return false}else{if(r.getOptions().multiSelect){if(x===-1&&(C.ctrlKey||C.metaKey)){A.push(y.row);r.setActiveCell(y.row,y.cell)}else{if(x!==-1&&(C.ctrlKey||C.metaKey)){A=b.grep(A,function(G,F){return(G!==y.row)});r.setActiveCell(y.row,y.cell)}else{if(A.length&&C.shiftKey){var B=A.pop();var E=Math.min(y.row,B);var D=Math.max(y.row,B);A=[];for(var z=E;z<=D;z++){if(z!==B){A.push(z)}}A.push(B);r.setActiveCell(y.row,y.cell)}}}}}n=h(A);c(n);C.stopImmediatePropagation();return true}b.extend(this,{getSelectedRows:d,setSelectedRows:k,getSelectedRanges:o,setSelectedRanges:c,init:t,destroy:w,onSelectedRangesChanged:new Slick.Event()})}})(jQuery);var XRegExp;if(XRegExp){throw Error("can't load XRegExp twice in the same frame")}(function(d){XRegExp=function(z,u){var t=[],x=XRegExp.OUTSIDE_CLASS,A=0,s,v,y,w,B;if(XRegExp.isRegExp(z)){if(u!==d){throw TypeError("can't supply flags when constructing one RegExp from another")}return l(z)}if(h){throw Error("can't call the XRegExp constructor within token definition functions")}u=u||"";s={hasNamedCapture:false,captureNames:[],hasFlag:function(C){return u.indexOf(C)>-1},setFlag:function(C){u+=C}};while(A<z.length){v=r(z,A,x,s);if(v){t.push(v.output);A+=(v.match[0].length||1)}else{if(y=n.exec.call(k[x],z.slice(A))){t.push(y[0]);A+=y[0].length}else{w=z.charAt(A);if(w==="["){x=XRegExp.INSIDE_CLASS}else{if(w==="]"){x=XRegExp.OUTSIDE_CLASS}}t.push(w);A++}}}B=RegExp(t.join(""),n.replace.call(u,j,""));B._xregexp={source:z,captureNames:s.hasNamedCapture?s.captureNames:null};return B};XRegExp.version="1.5.1";XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var c=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,j=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,q=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,h=false,m=[],n={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},a=n.exec.call(/()??/,"")[1]===d,f=function(){var s=/^/g;n.test.call(s,"");return !s.lastIndex}(),b=RegExp.prototype.sticky!==d,k={};k[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;k[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(v,u,t,s){m.push({pattern:l(v,"g"+(b?"y":"")),handler:u,scope:t||XRegExp.OUTSIDE_CLASS,trigger:s||null})};XRegExp.cache=function(u,s){var t=u+"/"+(s||"");return XRegExp.cache[t]||(XRegExp.cache[t]=XRegExp(u,s))};XRegExp.copyAsGlobal=function(s){return l(s,"g")};XRegExp.escape=function(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};XRegExp.execAt=function(w,v,x,u){var s=l(v,"g"+((u&&b)?"y":"")),t;s.lastIndex=x=x||0;t=s.exec(w);if(u&&t&&t.index!==x){t=null}if(v.global){v.lastIndex=t?s.lastIndex:0}return t};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}};XRegExp.isRegExp=function(s){return Object.prototype.toString.call(s)==="[object RegExp]"};XRegExp.iterate=function(x,w,y,v){var s=l(w,"g"),u=-1,t;while(t=s.exec(x)){if(w.global){w.lastIndex=s.lastIndex}y.call(v,t,++u,x,w);if(s.lastIndex===t.index){s.lastIndex++}}if(w.global){w.lastIndex=0}};XRegExp.matchChain=function(t,s){return function u(v,A){var y=s[A].regex?s[A]:{regex:s[A]},x=l(y.regex,"g"),z=[],w;for(w=0;w<v.length;w++){XRegExp.iterate(v[w],x,function(B){z.push(y.backref?(B[y.backref]||""):B[0])})}return((A===s.length-1)||!z.length)?z:u(z,A+1)}([t],0)};RegExp.prototype.apply=function(t,s){return this.exec(s[0])};RegExp.prototype.call=function(s,t){return this.exec(t)};RegExp.prototype.exec=function(x){var v,u,t,s;if(!this.global){s=this.lastIndex}v=n.exec.apply(this,arguments);if(v){if(!a&&v.length>1&&o(v,"")>-1){t=RegExp(this.source,n.replace.call(e(this),"g",""));n.replace.call((x+"").slice(v.index),t,function(){for(var y=1;y<arguments.length-2;y++){if(arguments[y]===d){v[y]=d}}})}if(this._xregexp&&this._xregexp.captureNames){for(var w=1;w<v.length;w++){u=this._xregexp.captureNames[w-1];if(u){v[u]=v[w]}}}if(!f&&this.global&&!v[0].length&&(this.lastIndex>v.index)){this.lastIndex--}}if(!this.global){this.lastIndex=s}return v};RegExp.prototype.test=function(u){var t,s;if(!this.global){s=this.lastIndex}t=n.exec.call(this,u);if(t&&!f&&this.global&&!t[0].length&&(this.lastIndex>t.index)){this.lastIndex--}if(!this.global){this.lastIndex=s}return !!t};String.prototype.match=function(t){if(!XRegExp.isRegExp(t)){t=RegExp(t)}if(t.global){var s=n.match.apply(this,arguments);t.lastIndex=0;return s}return t.exec(this)};String.prototype.replace=function(v,w){var x=XRegExp.isRegExp(v),u,t,y,s;if(x){if(v._xregexp){u=v._xregexp.captureNames}if(!v.global){s=v.lastIndex}}else{v=v+""}if(Object.prototype.toString.call(w)==="[object Function]"){t=n.replace.call(this+"",v,function(){if(u){arguments[0]=new String(arguments[0]);for(var z=0;z<u.length;z++){if(u[z]){arguments[0][u[z]]=arguments[z+1]}}}if(x&&v.global){v.lastIndex=arguments[arguments.length-2]+arguments[0].length}return w.apply(null,arguments)})}else{y=this+"";t=n.replace.call(y,v,function(){var z=arguments;return n.replace.call(w+"",c,function(B,A,E){if(A){switch(A){case"$":return"$";case"&":return z[0];case"`":return z[z.length-1].slice(0,z[z.length-2]);case"'":return z[z.length-1].slice(z[z.length-2]+z[0].length);default:var C="";A=+A;if(!A){return B}while(A>z.length-3){C=String.prototype.slice.call(A,-1)+C;A=Math.floor(A/10)}return(A?z[A]||"":"$")+C}}else{var D=+E;if(D<=z.length-3){return z[D]}D=u?o(u,E):-1;return D>-1?z[D+1]:B}})})}if(x){if(v.global){v.lastIndex=0}else{v.lastIndex=s}}return t};String.prototype.split=function(x,t){if(!XRegExp.isRegExp(x)){return n.split.apply(this,arguments)}var z=this+"",v=[],y=0,w,u;if(t===d||+t<0){t=Infinity}else{t=Math.floor(+t);if(!t){return[]}}x=XRegExp.copyAsGlobal(x);while(w=x.exec(z)){if(x.lastIndex>y){v.push(z.slice(y,w.index));if(w.length>1&&w.index<z.length){Array.prototype.push.apply(v,w.slice(1))}u=w[0].length;y=x.lastIndex;if(v.length>=t){break}}if(x.lastIndex===w.index){x.lastIndex++}}if(y===z.length){if(!n.test.call(x,"")||u){v.push("")}}else{v.push(z.slice(y))}return v.length>t?v.slice(0,t):v};function l(u,t){if(!XRegExp.isRegExp(u)){throw TypeError("type RegExp expected")}var s=u._xregexp;u=XRegExp(u.source,e(u)+(t||""));if(s){u._xregexp={source:s.source,captureNames:s.captureNames?s.captureNames.slice(0):null}}return u}function e(s){return(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.extended?"x":"")+(s.sticky?"y":"")}function r(y,x,z,s){var v=m.length,B,w,A;h=true;try{while(v--){A=m[v];if((z&A.scope)&&(!A.trigger||A.trigger.call(s))){A.pattern.lastIndex=x;w=A.pattern.exec(y);if(w&&w.index===x){B={output:A.handler.call(s,w,z),match:w};break}}}}catch(u){throw u}finally{h=false}return B}function o(v,t,u){if(Array.prototype.indexOf){return v.indexOf(t,u)}for(var s=u||0;s<v.length;s++){if(v[s]===t){return s}}return -1}XRegExp.addToken(/\(\?#[^)]*\)/,function(s){return n.test.call(q,s.input.slice(s.index+s[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,function(s){this.captureNames.push(s[1]);this.hasNamedCapture=true;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(t){var s=o(this.captureNames,t[1]);return s>-1?"\\"+(s+1)+(isNaN(t.input.charAt(t.index+t[0].length))?"":"(?:)"):t[0]});XRegExp.addToken(/\[\^?]/,function(s){return s[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(s){this.setFlag(s[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(s){return n.test.call(q,s.input.slice(s.index+s[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();if(typeof(SyntaxHighlighter)=="undefined"){var SyntaxHighlighter=function(){if(typeof(require)!="undefined"&&typeof(XRegExp)=="undefined"){XRegExp=require("XRegExp").XRegExp}var n={defaults:{"class-name":"","first-line":1,"pad-line-numbers":false,highlight:null,title:null,"smart-tabs":true,"tab-size":4,gutter:true,toolbar:true,"quick-code":true,collapse:false,"auto-links":true,light:false,unindent:true,"html-script":false},config:{space:"&nbsp;",useScriptTags:true,bloggerMode:false,stripBrs:false,tagName:"pre",strings:{expandSource:"expand source",help:"?",alert:"SyntaxHighlighter\n\n",noBrush:"Can't find brush for: ",brushNotHtmlScript:"Brush wasn't configured for html-script option: ",aboutDialog:"@ABOUT@"}},vars:{discoveredBrushes:null,highlighters:{}},brushes:{},regexLib:{multiLineCComments:/\/\*[\s\S]*?\*\//gm,singleLineCComments:/\/\/.*$/gm,singleLinePerlComments:/#.*$/gm,doubleQuotedString:/"([^\\"\n]|\\.)*"/g,singleQuotedString:/'([^\\'\n]|\\.)*'/g,multiLineDoubleQuotedString:new XRegExp('"([^\\\\"]|\\\\.)*"',"gs"),multiLineSingleQuotedString:new XRegExp("'([^\\\\']|\\\\.)*'","gs"),xmlComments:/(&lt;|<)!--[\s\S]*?--(&gt;|>)/gm,url:/\w+:\/\/[\w-.\/?%&=:@;#]*/g,phpScriptTags:{left:/(&lt;|<)\?(?:=|php)?/g,right:/\?(&gt;|>)/g,eof:true},aspScriptTags:{left:/(&lt;|<)%=?/g,right:/%(&gt;|>)/g},scriptScriptTags:{left:/(&lt;|<)\s*script.*?(&gt;|>)/gi,right:/(&lt;|<)\/\s*script\s*(&gt;|>)/gi}},toolbar:{getHtml:function(O){var Q='<div class="toolbar">',N=n.toolbar.items,S=N.list;function R(U,T){return n.toolbar.getButtonHtml(U,T,n.config.strings[T])}for(var P=0;P<S.length;P++){Q+=(N[S[P]].getHtml||R)(O,S[P])}Q+="</div>";return Q},getButtonHtml:function(O,P,N){return'<span><a href="#" class="toolbar_item command_'+P+" "+P+'">'+N+"</a></span>"},handler:function(S){var R=S.target,Q=R.className||"";function N(U){var V=new RegExp(U+"_(\\w+)"),T=V.exec(Q);return T?T[1]:null}var O=v(E(R,".syntaxhighlighter").id),P=N("command");if(O&&P){n.toolbar.items[P].execute(O)}S.preventDefault()},items:{list:["expandSource","help"],expandSource:{getHtml:function(N){if(N.getParam("collapse")!=true){return""}var O=N.getParam("title");return n.toolbar.getButtonHtml(N,"expandSource",O?O:n.config.strings.expandSource)},execute:function(N){var O=L(N.id);l(O,"collapsed")}},help:{execute:function(N){var O=z("","_blank",500,250,"scrollbars=0"),P=O.document;P.write(n.config.strings.aboutDialog);P.close();O.focus()}}}},findElements:function(R,Q){var T=Q?[Q]:u(document.getElementsByTagName(n.config.tagName)),O=n.config,N=[];if(O.useScriptTags){T=T.concat(M())}if(T.length===0){return N}for(var P=0;P<T.length;P++){var S={target:T[P],params:D(R,r(T[P].className))};if(S.params.brush==null){continue}N.push(S)}return N},highlight:function(S,Q){var N=this.findElements(S,Q),T="innerHTML",X=null,V=n.config;if(N.length===0){return}for(var R=0;R<N.length;R++){var Q=N[R],U=Q.target,P=Q.params,Y=P.brush,O;if(Y==null){continue}if(P["html-script"]=="true"||n.defaults["html-script"]==true){X=new n.HtmlScript(Y);Y="htmlscript"}else{var W=h(Y);if(W){X=new W()}else{continue}}O=U[T];if(V.useScriptTags){O=F(O)}if((U.title||"")!=""){P.title=U.title}P.brush=Y;X.init(P);Q=X.getDiv(O);if((U.id||"")!=""){Q.id=U.id}U.parentNode.replaceChild(Q,U)}$.event.trigger("syntaxComplete")},all:function(N){f(window,"load",function(){n.highlight(N)})}};function G(O,N){return O.className.indexOf(N)!=-1}function w(O,N){if(!G(O,N)){O.className+=" "+N}}function l(O,N){O.className=O.className.replace(N,"")}function u(P){var N=[];for(var O=0;O<P.length;O++){N.push(P[O])}return N}function y(N){return N.split(/\r?\n/)}function H(O){var N="highlighter_";return O.indexOf(N)==0?O:N+O}function v(N){return n.vars.highlighters[H(N)]}function L(N){return document.getElementById(H(N))}function q(N){n.vars.highlighters[H(N.id)]=N}function j(U,R,P){if(U==null){return null}var O=P!=true?U.childNodes:[U.parentNode],S={"#":"id",".":"className"}[R.substr(0,1)]||"nodeName",N,T;N=S!="nodeName"?R.substr(1):R.toUpperCase();if((U[S]||"").indexOf(N)!=-1){return U}for(var Q=0;O&&Q<O.length&&T==null;Q++){T=j(O[Q],R,P)}return T}function E(O,N){return j(O,N,true)}function m(Q,N,P){P=Math.max(P||0,0);for(var O=P;O<Q.length;O++){if(Q[O]==N){return O}}return -1}function s(N){return(N||"")+Math.round(Math.random()*1000000).toString()}function D(Q,P){var N={},O;for(O in Q){N[O]=Q[O]}for(O in P){N[O]=P[O]}return N}function d(O){var N={"true":true,"false":false}[O];return N==null?O:N}function z(R,Q,S,O,P){var N=(screen.width-S)/2,U=(screen.height-O)/2;P+=", left="+N+", top="+U+", width="+S+", height="+O;P=P.replace(/^,/,"");var T=window.open(R,Q,P);T.focus();return T}function f(R,P,Q,O){function N(S){S=S||window.event;if(!S.target){S.target=S.srcElement;S.preventDefault=function(){this.returnValue=false}}Q.call(O||window,S)}if(R.attachEvent){R.attachEvent("on"+P,N)}else{R.addEventListener(P,N,false)}}function B(N){window.alert(n.config.strings.alert+N)}function h(R,T){var S=n.vars.discoveredBrushes,N=null;if(S==null){S={};for(var P in n.brushes){var U=n.brushes[P],O=U.aliases;if(O==null){continue}U.brushName=P.toLowerCase();for(var Q=0;Q<O.length;Q++){S[O[Q]]=P}}n.vars.discoveredBrushes=S}N=n.brushes[S[R]];if(N==null&&T){B(n.config.strings.noBrush+R)}return N}function K(P,Q){var N=y(P);for(var O=0;O<N.length;O++){N[O]=Q(N[O],O)}return N.join("\r\n")}function J(N){return N.replace(/^[ ]*[\n]+|[\n]*[ ]*$/g,"")}function r(T){var P,O={},Q=new XRegExp("^\\[(?<values>(.*?))\\]$"),R=new XRegExp("(?<name>[\\w-]+)\\s*:\\s*(?<value>[\\w-%#]+|\\[.*?\\]|\".*?\"|'.*?')\\s*;?","g");while((P=R.exec(T))!=null){var S=P.value.replace(/^['"]|['"]$/g,"");if(S!=null&&Q.test(S)){var N=Q.exec(S);S=N.values.length>0?N.values.split(/\s*,\s*/):[]}O[P.name]=S}return O}function A(O,N){if(O==null||O.length==0||O=="\n"){return O}O=O.replace(/</g,"&lt;");O=O.replace(/ {2,}/g,function(P){var Q="";for(var R=0;R<P.length-1;R++){Q+=n.config.space}return Q+" "});if(N!=null){O=K(O,function(P){if(P.length==0){return""}var Q="";P=P.replace(/^(&nbsp;| )+/,function(R){Q=R;return""});if(P.length==0){return Q}return Q+'<code class="'+N+'">'+P+"</code>"})}return O}function c(P,O){var N=P.toString();while(N.length<O){N="0"+N}return N}function I(P,Q){var O="";for(var N=0;N<Q;N++){O+=" "}return P.replace(/\t/g,O)}function x(R,S){var N=y(R),Q="\t",O="";for(var P=0;P<50;P++){O+="                    "}function T(U,W,V){return U.substr(0,W)+O.substr(0,V)+U.substr(W+1,U.length)}R=K(R,function(U){if(U.indexOf(Q)==-1){return U}var W=0;while((W=U.indexOf(Q))!=-1){var V=S-W%S;U=T(U,W,V)}return U});return R}function k(O){var N=/<br\s*\/?>|&lt;br\s*\/?&gt;/gi;if(n.config.bloggerMode==true){O=O.replace(N,"\n")}if(n.config.stripBrs==true){O=O.replace(N,"")}return O}function a(N){return N.replace(/^\s+|\s+$/g,"")}function C(U){var O=y(k(U)),T=new Array(),R=/^\s*/,Q=1000;for(var P=0;P<O.length&&Q>0;P++){var N=O[P];if(a(N).length==0){continue}var S=R.exec(N);if(S==null){return U}Q=Math.min(S[0].length,Q)}if(Q>0){for(var P=0;P<O.length;P++){O[P]=O[P].substr(Q)}}return O.join("\n")}function o(O,N){if(O.index<N.index){return -1}else{if(O.index>N.index){return 1}else{if(O.length<N.length){return -1}else{if(O.length>N.length){return 1}}}}return 0}function t(R,T){function U(V,W){return V[0]}var P=0,O=null,S=[],Q=T.func?T.func:U;while((O=T.regex.exec(R))!=null){var N=Q(O,T);if(typeof(N)=="string"){N=[new n.Match(N,O.index,T.css)]}S=S.concat(N)}return S}function b(O){var N=/(.*)((&gt;|&lt;).*)/;return O.replace(n.regexLib.url,function(P){var R="",Q=null;if(Q=N.exec(P)){P=Q[1];R=Q[2]}return'<a href="'+P+'">'+P+"</a>"+R})}function M(){var O=document.getElementsByTagName("script"),N=[];for(var P=0;P<O.length;P++){if(O[P].type=="syntaxhighlighter"){N.push(O[P])}}return N}function F(Q){var S="<![CDATA[",P="]]>",U=a(Q),T=false,O=S.length,R=P.length;if(U.indexOf(S)==0){U=U.substring(O);T=true}var N=U.length;if(U.indexOf(P)==N-R){U=U.substring(0,N-R);T=true}return T?U:Q}function e(R){var S=R.target,Q=E(S,".syntaxhighlighter"),N=E(S,".container"),U=document.createElement("textarea"),T;if(!N||!Q||j(N,"textarea")){return}T=v(Q.id);w(Q,"source");var V=N.childNodes,O=[];for(var P=0;P<V.length;P++){O.push(V[P].innerText||V[P].textContent)}O=O.join("\r");O=O.replace(/\u00a0/g," ");U.appendChild(document.createTextNode(O));N.appendChild(U);U.focus();U.select();f(U,"blur",function(W){U.parentNode.removeChild(U);l(Q,"source")})}n.Match=function(P,N,O){this.value=P;this.index=N;this.length=P.length;this.css=O;this.brushName=null};n.Match.prototype.toString=function(){return this.value};n.HtmlScript=function(R){var V=h(R),U,N=new n.brushes.Xml(),T=null,P=this,Q="getDiv getHtml init".split(" ");if(V==null){return}U=new V();for(var S=0;S<Q.length;S++){(function(){var X=Q[S];P[X]=function(){return N[X].apply(N,arguments)}})()}if(U.htmlScript==null){B(n.config.strings.brushNotHtmlScript+R);return}N.regexList.push({regex:U.htmlScript.code,func:O});function W(Y,Z){for(var X=0;X<Y.length;X++){Y[X].index+=Z}}function O(ae,Y){var X=ae.code,ad=[],ac=U.regexList,aa=ae.index+ae.left.length,af=U.htmlScript,ag;for(var ab=0;ab<ac.length;ab++){ag=t(X,ac[ab]);W(ag,aa);ad=ad.concat(ag)}if(af.left!=null&&ae.left!=null){ag=t(ae.left,af.left);W(ag,ae.index);ad=ad.concat(ag)}if(af.right!=null&&ae.right!=null){ag=t(ae.right,af.right);W(ag,ae.index+ae[0].lastIndexOf(ae.right));ad=ad.concat(ag)}for(var Z=0;Z<ad.length;Z++){ad[Z].brushName=V.brushName}return ad}};n.Highlighter=function(){};n.Highlighter.prototype={getParam:function(P,O){var N=this.params[P];return d(N==null?O:N)},create:function(N){return document.createElement(N)},findMatches:function(Q,P){var N=[];if(Q!=null){for(var O=0;O<Q.length;O++){if(typeof(Q[O])=="object"){N=N.concat(t(P,Q[O]))}}}return this.removeNestedMatches(N.sort(o))},removeNestedMatches:function(R){for(var Q=0;Q<R.length;Q++){if(R[Q]===null){continue}var N=R[Q],P=N.index+N.length;for(var O=Q+1;O<R.length&&R[Q]!==null;O++){var S=R[O];if(S===null){continue}else{if(S.index>P){break}else{if(S.index==N.index&&S.length>N.length){R[Q]=null}else{if(S.index>=N.index&&S.index<P){R[O]=null}}}}}}return R},figureOutLineNumbers:function(P){var N=[],O=parseInt(this.getParam("first-line"));K(P,function(Q,R){N.push(R+O)});return N},isLineHighlighted:function(N){var O=this.getParam("highlight",[]);if(typeof(O)!="object"&&O.push==null){O=[O]}return m(O,N.toString())!=-1},getLineHtml:function(Q,N,P){var O=["line","number"+N,"index"+Q,"alt"+(N%2==0?1:2).toString()];if(this.isLineHighlighted(N)){O.push("highlighted")}if(N==0){O.push("break")}return'<div class="'+O.join(" ")+'">'+P+"</div>"},getLineNumbersHtml:function(T,O){var R="",S=y(T).length,P=parseInt(this.getParam("first-line")),U=this.getParam("pad-line-numbers");if(U==true){U=(P+S-1).toString().length}else{if(isNaN(U)==true){U=0}}for(var Q=0;Q<S;Q++){var N=O?O[Q]:P+Q,T=N==0?n.config.space:c(N,U);R+=this.getLineHtml(Q,N,T)}return R},getCodeLinesHtml:function(Q,U){Q=a(Q);var W=y(Q),R=this.getParam("pad-line-numbers"),T=parseInt(this.getParam("first-line")),Q="",V=this.getParam("brush");for(var P=0;P<W.length;P++){var X=W[P],N=/^(&nbsp;|\s)+/.exec(X),S=null,O=U?U[P]:T+P;if(N!=null){S=N[0].toString();X=X.substr(S.length);S=S.replace(" ",n.config.space)}X=a(X);if(X.length==0){X=n.config.space}Q+=this.getLineHtml(P,O,(S!=null?'<code class="'+V+' spaces">'+S+"</code>":"")+X)}return Q},getTitleHtml:function(N){return N?"<caption>"+N+"</caption>":""},getMatchesHtml:function(N,R){var T=0,V="",U=this.getParam("brush","");function P(X){var W=X?(X.brushName||U):U;return W?W+" ":""}for(var Q=0;Q<R.length;Q++){var S=R[Q],O;if(S===null||S.length===0){continue}O=P(S);V+=A(N.substr(T,S.index-T),O+"plain")+A(S.value,O+S.css);T=S.index+S.length+(S.offset||0)}V+=A(N.substr(T),P()+"plain");return V},getHtml:function(Q){var P="",O=["syntaxhighlighter"],S,R,N;if(this.getParam("light")==true){this.params.toolbar=this.params.gutter=false}className="syntaxhighlighter";if(this.getParam("collapse")==true){O.push("collapsed")}if((gutter=this.getParam("gutter"))==false){O.push("nogutter")}O.push(this.getParam("class-name"));O.push(this.getParam("brush"));Q=J(Q).replace(/\r/g," ");S=this.getParam("tab-size");Q=this.getParam("smart-tabs")==true?x(Q,S):I(Q,S);if(this.getParam("unindent")){Q=C(Q)}if(gutter){N=this.figureOutLineNumbers(Q)}R=this.findMatches(this.regexList,Q);P=this.getMatchesHtml(Q,R);P=this.getCodeLinesHtml(P,N);if(this.getParam("auto-links")){P=b(P)}if(typeof(navigator)!="undefined"&&navigator.userAgent&&navigator.userAgent.match(/MSIE/)){O.push("ie")}P='<div id="'+H(this.id)+'" class="'+O.join(" ")+'">'+(this.getParam("toolbar")?n.toolbar.getHtml(this):"")+'<table border="0" cellpadding="0" cellspacing="0">'+this.getTitleHtml(this.getParam("title"))+"<tbody><tr>"+(gutter?'<td class="gutter">'+this.getLineNumbersHtml(Q)+"</td>":"")+'<td class="code"><div class="container">'+P+"</div></td></tr></tbody></table></div>";return P},getDiv:function(N){if(N===null){N=""}this.code=N;var O=this.create("div");O.innerHTML=this.getHtml(N);if(this.getParam("toolbar")){f(j(O,".toolbar"),"click",n.toolbar.handler)}if(this.getParam("quick-code")){f(j(O,".code"),"dblclick",e)}return O},init:function(N){this.id=s();q(this);this.params=D(n.defaults,N||{});if(this.getParam("light")==true){this.params.toolbar=this.params.gutter=false}},getKeywords:function(N){N=N.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"|");return"\\b(?:"+N+")\\b"},forHtmlScript:function(N){var O={end:N.right.source};if(N.eof){O.end="(?:(?:"+O.end+")|$)"}this.htmlScript={left:{regex:N.left,css:"script"},right:{regex:N.right,css:"script"},code:new XRegExp("(?<left>"+N.left.source+")(?<code>.*?)(?<right>"+O.end+")","sgi")}}};return n}()}typeof(exports)!="undefined"?exports.SyntaxHighlighter=SyntaxHighlighter:null;eval(function(j,b,m,f,h,l){h=function(a){return(a<b?"":h(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(m--){l[h(m)]=f[m]||h(m)}f=[function(a){return l[a]}];h=function(){return"\\w+"};m=1}while(m--){if(f[m]){j=j.replace(new RegExp("\\b"+h(m)+"\\b","g"),f[m])}}return j}('(2(){1 h=5;h.I=2(){2 n(c,a){4(1 d=0;d<c.9;d++)i[c[d]]=a}2 o(c){1 a=r.H("J"),d=3;a.K=c;a.M="L/t";a.G="t";a.u=a.v=2(){6(!d&&(!8.7||8.7=="F"||8.7=="z")){d=q;e[c]=q;a:{4(1 p y e)6(e[p]==3)B a;j&&5.C(k)}a.u=a.v=x;a.D.O(a)}};r.N.R(a)}1 f=Q,l=h.P(),i={},e={},j=3,k=x,b;5.T=2(c){k=c;j=q};4(b=0;b<f.9;b++){1 m=f[b].w?f[b]:f[b].S(/\\s+/),g=m.w();n(m,g)}4(b=0;b<l.9;b++)6(g=i[l[b].E.A]){e[g]=3;o(g)}}})();',56,56,"|var|function|false|for|SyntaxHighlighter|if|readyState|this|length|||||||||||||||||true|document||javascript|onload|onreadystatechange|pop|null|in|complete|brush|break|highlight|parentNode|params|loaded|language|createElement|autoloader|script|src|text|type|body|removeChild|findElements|arguments|appendChild|split|all".split("|"),0,{}));(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var c="if fi then elif else for do done until while break continue case function return in eq ne ge le";var b="alias apropos awk basename bash bc bg builtin bzip2 cal cat cd cfdisk chgrp chmod chown chrootcksum clear cmp comm command cp cron crontab csplit cut date dc dd ddrescue declare df diff diff3 dig dir dircolors dirname dirs du echo egrep eject enable env ethtool eval exec exit expand export expr false fdformat fdisk fg fgrep file find fmt fold format free fsck ftp gawk getopts grep groups gzip hash head history hostname id ifconfig import install join kill less let ln local locate logname logout look lpc lpr lprint lprintd lprintq lprm ls lsof make man mkdir mkfifo mkisofs mknod more mount mtools mv netstat nice nl nohup nslookup open op passwd paste pathchk ping popd pr printcap printenv printf ps pushd pwd quota quotacheck quotactl ram rcp read readonly renice remsync rm rmdir rsync screen scp sdiff sed select seq set sftp shift shopt shutdown sleep sort source split ssh strace su sudo sum symlink sync tail tar tee test time times touch top traceroute trap tr true tsort tty type ulimit umask umount unalias uname unexpand uniq units unset unshar useradd usermod users uuencode uudecode v vdir vi watch wc whereis which who whoami Wget xargs yes";this.regexList=[{regex:/^#!.*$/gm,css:"preprocessor bold"},{regex:/\/[\w-\/]+/gm,css:"plain"},{regex:SyntaxHighlighter.regexLib.singleLinePerlComments,css:"comments"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"keyword"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"functions"}]}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["bash","shell"];SyntaxHighlighter.brushes.Bash=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var c="abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach get goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed set short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual void while var async await add alias ascending descending dynamic equals from global group into join let orderby on remove select value where";function b(d,f){var e=(d[0].indexOf("///")==0)?"color1":"comments";return[new SyntaxHighlighter.Match(d[0],d.index,e)]}this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLineCComments,func:b},{regex:SyntaxHighlighter.regexLib.multiLineCComments,css:"comments"},{regex:/@"(?:[^"]|"")*"/g,css:"string"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:/^\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"keyword"},{regex:/\bpartial(?=\s+(?:class|interface|struct)\b)/g,css:"keyword"},{regex:/\byield(?=\s+(?:return|break)\b)/g,css:"keyword"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["c#","c-sharp","csharp"];SyntaxHighlighter.brushes.CSharp=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var b="break case catch continue default delete do else false  for function if in instanceof new null return super switch this throw true try typeof var while with";var c=SyntaxHighlighter.regexLib;this.regexList=[{regex:c.multiLineDoubleQuotedString,css:"string"},{regex:c.multiLineSingleQuotedString,css:"string"},{regex:c.singleLineCComments,css:"comments"},{regex:c.multiLineCComments,css:"comments"},{regex:/\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword bold"}];this.forHtmlScript(c.scriptScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["js","jscript","javascript","json"];SyntaxHighlighter.brushes.JScript=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var b="abstract assert boolean break byte case catch char class const continue default do double else enum extends false final finally float for goto if implements import instanceof int interface long native new null package private protected public return short static strictfp super switch synchronized this throw throws true transient try void volatile while";this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLineCComments,css:"comments"},{regex:/\/\*([^\*][\s\S]*)?\*\//gm,css:"comments"},{regex:/\/\*(?!\*\/)\*[\s\S]*?\*\//gm,css:"preprocessor"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:/\b([\d]+(\.[\d]+)?|0x[a-f0-9]+)\b/gi,css:"value"},{regex:/(?!\@interface\b)\@[\$\w]+\b/g,css:"color1"},{regex:/\@interface\b/g,css:"color2"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword"}];this.forHtmlScript({left:/(&lt;|<)%[@!=]?/g,right:/%(&gt;|>)/g})}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["java"];SyntaxHighlighter.brushes.Java=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;var a=(function(){var d="break case catch class copy const __finally __exception __try const_cast continue private public protected __declspec default delete deprecated dllexport dllimport do dynamic_cast else enum explicit extern if for friend getter goto inline mutable naked namespace new nil NO noinline nonatomic noreturn nothrow NULL readonly readwrite register reinterpret_cast retain strong return SEL selectany self setter sizeof static static_cast struct super switch template thread throw true false try typedef typeid typename union using uuid virtual void volatile whcar_t while YES";var c="BOOL BOOLEAN BYTE CHAR INT INT_PTR INT32 INT64 LANGID LCID LCTYPE LONG LONGLONG LONG_PTR LONG32 LONG64 LPCSTR LPCTSTR LPCVOID LPCWSTR LPDWORD LPHANDLE LPINT LPLONG LPSTR LPTSTR LPVOID LPWORD LPWSTR LRESULT PBOOL PBOOLEAN PBYTE PCHAR PCSTR PCTSTR PCWSTR PDWORDLONG PDWORD_PTR PDWORD32 PDWORD64 PFLOAT PHALF_PTR PHANDLE PHKEY PINT PINT_PTR PINT32 PINT64 PLCID PLONG PLONG_PTR PLONG32 PLONG64 POINTER_32 POINTER_64 PSHORT PSIZE_T PSSIZE_T PSTR PTBYTE PTCHAR PTSTR PUCHAR PUHALF_PTR PUSHORT PVOID PWCHAR PWORD PWSTR SC_HANDLE SC_LOCK SERVICE_STATUS_HANDLE SHORT SIZE_T SSIZE_T TBYTE TCHAR UCHAR UHALF_PTR UINT UINT_PTR UINT32 UINT64 ULONG char bool short int __int32 __int64 __int8 __int16 long float double __wchar_t clock_t _complex _dev_t _diskfree_t div_t ldiv_t _exception _EXCEPTION_POINTERS FILE _finddata_t _finddatai64_t _wfinddata_t _wfinddatai64_t __finddata64_t __wfinddata64_t _FPIEEE_RECORD fpos_t _HEAPINFO _HFILE lconv intptr_t id jmp_buf mbstate_t _off_t _onexit_t _PNH ptrdiff_t _purecall_handler sig_atomic_t size_t _stat __stat64 _stati64 terminate_function time_t __time64_t _timeb __timeb64 tm uintptr_t _utimbuf va_list wchar_t wctrans_t wctype_t wint_t signed";var b=function(){var e=[[SyntaxHighlighter.regexLib.singleLineCComments,"comments"],[SyntaxHighlighter.regexLib.multiLineCComments,"comments"],['@"[^"]*"',"gm","string"],["@[[^]]*]","gm","color1"],["@[[^]]*]","gm","color1"],["@\\w+\\b","g","color1"],["[: ]nil","g","color1"],["\\.\\w+","g","constants"],[" \\w+(?=[:\\]])","g","variable"],["@[[^]]*]","gm","value"],["\\d","gm","value"],["^ *#.*","gm","preprocessor"],["\\w+(?= \\*)","g","keywords"],[this.getKeywords(c),"gm","color1"],[this.getKeywords(d),"gm","color1"],[this.getKeywords(d),"gm","color1"]];this.regexList=[];for(var f=0;f<e.length;f++){if(e[f].length==2){this.regexList.push({regex:e[f][0],css:e[f][1]})}else{this.regexList.push({regex:new RegExp(e[f][0],e[f][1]),css:e[f][2]})}}};return b})();a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["objective-c","objc","obj-c"];SyntaxHighlighter.brushes.ObjC=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var d="and assert break class continue def del elif else except exec finally for from global if import in is lambda not or pass print raise return try yield while";var b="__import__ abs all any apply basestring bin bool buffer callable chr classmethod cmp coerce compile complex delattr dict dir divmod enumerate eval execfile file filter float format frozenset getattr globals hasattr hash help hex id input int intern isinstance issubclass iter len list locals long map max min next object oct open ord pow print property range raw_input reduce reload repr reversed round set setattr slice sorted staticmethod str sum super tuple type type unichr unicode vars xrange zip";var c="None True False self cls class_";this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLinePerlComments,css:"comments"},{regex:/^\s*@\w+/gm,css:"decorator"},{regex:/(['\"]{3})([^\1])*?\1/gm,css:"comments"},{regex:/"(?!")(?:\.|\\\"|[^\""\n])*"/gm,css:"string"},{regex:/'(?!')(?:\.|(\\\')|[^\''\n])*'/gm,css:"string"},{regex:/\+|\-|\*|\/|\%|=|==/gm,css:"keyword"},{regex:/\b\d+\.?\w*/g,css:"value"},{regex:new RegExp(this.getKeywords(b),"gmi"),css:"functions"},{regex:new RegExp(this.getKeywords(d),"gm"),css:"keyword"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"color1"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["py","python"];SyntaxHighlighter.brushes.Python=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){SyntaxHighlighter=SyntaxHighlighter||(typeof require!=="undefined"?require("shCore").SyntaxHighlighter:null);function a(){function f(j,k){return"(?:"+j.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"|"+k+"\\b").replace(/^/,k+"\\b")+")\\b"}function h(l,n){var o=l[0],j=[],r=0,m=0,q=0;while(r<o.length-1){var k=o.substr(r,2);if(q==0){if(k=="/*"){m=r;q++;r+=2}else{r++}}else{if(k=="/*"){q++;r+=2}else{if(k=="*/"){q--;if(q==0){j.push(new SyntaxHighlighter.Match(o.substring(m,r+2),m+l.index,n.css))}r+=2}else{r++}}}}return j}function b(k,m){var n=k[0],j=[],q=0,l=0,o=0;while(q<n.length-1){if(o==0){if(n.substr(q,2)=="\\("){j.push(new SyntaxHighlighter.Match(n.substring(l,q+2),l+k.index,m.css));o++;q+=2}else{q++}}else{if(n[q]=="("){o++}if(n[q]==")"){o--;if(o==0){l=q}}q++}}if(o==0){j.push(new SyntaxHighlighter.Match(n.substring(l,n.length),l+k.index,m.css))}return j}var e="AbsoluteValuable Any AnyClass Array ArrayBound ArrayBuffer ArrayBufferType ArrayLiteralConvertible ArrayType AutoreleasingUnsafePointer BidirectionalIndex Bit BitwiseOperations Bool C CBool CChar CChar16 CChar32 CConstPointer CConstVoidPointer CDouble CFloat CInt CLong CLongLong CMutablePointer CMutableVoidPointer COpaquePointer CShort CSignedChar CString CUnsignedChar CUnsignedInt CUnsignedLong CUnsignedLongLong CUnsignedShort CVaListPointer CVarArg CWideChar Character CharacterLiteralConvertible Collection CollectionOfOne Comparable ContiguousArray ContiguousArrayBuffer DebugPrintable Dictionary DictionaryGenerator DictionaryIndex DictionaryLiteralConvertible Double EmptyCollection EmptyGenerator EnumerateGenerator Equatable ExtendedGraphemeClusterLiteralConvertible ExtendedGraphemeClusterType ExtensibleCollection FilterCollectionView FilterCollectionViewIndex FilterGenerator FilterSequenceView Float Float32 Float64 Float80 FloatLiteralConvertible FloatLiteralType FloatingPointClassification FloatingPointNumber ForwardIndex Generator GeneratorOf GeneratorOfOne GeneratorSequence Hashable HeapBuffer HeapBufferStorage HeapBufferStorageBase ImplicitlyUnwrappedOptional IndexingGenerator Int Int16 Int32 Int64 Int8 IntEncoder IntMax Integer IntegerArithmetic IntegerLiteralConvertible IntegerLiteralType Less LifetimeManager LogicValue MapCollectionView MapSequenceGenerator MapSequenceView MaxBuiltinFloatType MaxBuiltinIntegerType Mirror MirrorDisposition MutableCollection MutableSliceable ObjectIdentifier OnHeap Optional OutputStream PermutationGenerator Printable QuickLookObject RandomAccessIndex Range RangeGenerator RawByte RawOptionSet RawRepresentable Reflectable Repeat ReverseIndex ReverseRange ReverseRangeGenerator ReverseView Sequence SequenceOf SignedInteger SignedNumber Sink SinkOf Slice SliceBuffer Sliceable StaticString Streamable StridedRangeGenerator String StringElement StringInterpolationConvertible StringLiteralConvertible StringLiteralType UInt UInt16 UInt32 UInt64 UInt8 UIntMax UTF16 UTF32 UTF8 UWord UnicodeCodec UnicodeScalar Unmanaged UnsafeArray UnsafePointer UnsignedInteger Void Word Zip2 ZipGenerator2 abs advance alignof alignofValue assert bridgeFromObjectiveC bridgeFromObjectiveCUnconditional bridgeToObjectiveC bridgeToObjectiveCUnconditional c contains count countElements countLeadingZeros debugPrint debugPrintln distance dropFirst dropLast dump encodeBitsAsWords enumerate equal false filter find getBridgedObjectiveCType getVaList indices insertionSort isBridgedToObjectiveC isBridgedVerbatimToObjectiveC isUniquelyReferenced join lexicographicalCompare map max maxElement min minElement nil numericCast partition posix print println quickSort reduce reflect reinterpretCast reverse roundUpToAlignment sizeof sizeofValue sort split startsWith strideof strideofValue swap swift toString transcode true underestimateCount unsafeReflect withExtendedLifetime withObjectAtPlusZero withUnsafePointer withUnsafePointerToObject withUnsafePointers withVaList";var d="as break case class continue default deinit do dynamicType else enum extension fallthrough for func if import in init is let new protocol return self Self static struct subscript super switch Type typealias var where while __COLUMN__ __FILE__ __FUNCTION__ __LINE__ associativity didSet get infix inout left mutating none nonmutating operator override postfix precedence prefix right set unowned unowned(safe) unowned(unsafe) weak willSet";var c="assignment class_protocol exported final lazy noreturn NSCopying NSManaged objc optional required auto_closure noreturn IBAction IBDesignable IBInspectable IBOutlet infix prefix postfix";this.regexList=[{regex:new RegExp("&[a-z]+;","gi"),css:"plain"},{regex:SyntaxHighlighter.regexLib.singleLineCComments,css:"comments"},{regex:new RegExp("\\/\\*[\\s\\S]*\\*\\/","g"),css:"comments",func:h},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string",func:b},{regex:new RegExp("\\b([\\d_]+(\\.[\\de_]+)?|0x[a-f0-9_]+(\\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b","gi"),css:"value"},{regex:new RegExp(this.getKeywords(d),"gm"),css:"keyword"},{regex:new RegExp(f(c,"@"),"gm"),css:"color1"},{regex:new RegExp(this.getKeywords(e),"gm"),css:"color2"},{regex:new RegExp("\\b([a-zA-Z_][a-zA-Z0-9_]*)\\b","gi"),css:"variable"},]}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["swift"];SyntaxHighlighter.brushes.Swift=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var b="AddHandler AddressOf AndAlso Alias And Ansi As Assembly Auto Boolean ByRef Byte ByVal Call Case Catch CBool CByte CChar CDate CDec CDbl Char CInt Class CLng CObj Const CShort CSng CStr CType Date Decimal Declare Default Delegate Dim DirectCast Do Double Each Else ElseIf End Enum Erase Error Event Exit False Finally For Friend Function Get GetType GoSub GoTo Handles If Implements Imports In Inherits Integer Interface Is Let Lib Like Long Loop Me Mod Module MustInherit MustOverride MyBase MyClass Namespace New Next Not Nothing NotInheritable NotOverridable Object On Option Optional Or OrElse Overloads Overridable Overrides ParamArray Preserve Private Property Protected Public RaiseEvent ReadOnly ReDim REM RemoveHandler Resume Return Select Set Shadows Shared Short Single Static Step Stop String Structure Sub SyncLock Then Throw To True Try TypeOf Unicode Until Variant When While With WithEvents WriteOnly Xor Await Async From Where Order By Descending";this.regexList=[{regex:/'.*$/gm,css:"comments"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:/^\s*#.*$/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["vb","vbnet"];SyntaxHighlighter.brushes.Vb=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){function b(f,l){var h=SyntaxHighlighter.Match,k=f[0],d=new XRegExp("(&lt;|<)[\\s\\/\\?]*(?<name>[:\\w-\\.]+)","xg").exec(k),c=[];if(f.attributes!=null){var e,j=new XRegExp("(?<name> [\\w:\\-\\.]+)\\s*=\\s*(?<value> \".*?\"|'.*?'|\\w+)","xg");while((e=j.exec(k))!=null){c.push(new h(e.name,f.index+e.index,"color1"));c.push(new h(e.value,f.index+e.index+e[0].indexOf(e.value),"string"))}}if(d!=null){c.push(new h(d.name,f.index+d[0].indexOf(d.name),"keyword"))}return c}this.regexList=[{regex:new XRegExp("(\\&lt;|<)\\!\\[[\\w\\s]*?\\[(.|\\s)*?\\]\\](\\&gt;|>)","gm"),css:"color2"},{regex:SyntaxHighlighter.regexLib.xmlComments,css:"comments"},{regex:new XRegExp("(&lt;|<)[\\s\\/\\?]*(\\w+)(?<attributes>.*?)[\\s\\/\\?]*(&gt;|>)","sg"),func:b}]}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["xml","xhtml","xslt","html"];SyntaxHighlighter.brushes.Xml=a;typeof(exports)!="undefined"?exports.Brush=a:null})();"use strict";(function(){var a=this;var d=String.prototype.trim;var c=function(h){return h*1||0};function e(j,h){for(var k=[];h>0;k[--h]=j){}return k.join("")}function b(h){if(h){return f.escapeRegExp(h)}return"\\s"}var f={isBlank:function(h){return h==false},capitalize:function(h){return h.charAt(0).toUpperCase()+h.substring(1).toLowerCase()},chop:function(l,k){k=k||l.length;var h=[];for(var j=0;j<l.length;){h.push(l.slice(j,j+k));j=j+k}return h},clean:function(h){return f.strip(h.replace(/\s+/g," "))},count:function(m,l){var k=0,h;for(var j=0;j<m.length;){h=m.indexOf(l,j);h>=0&&k++;j=j+(h>=0?h:0)+l.length}return k},chars:function(h){return h.split("")},escapeHTML:function(h){return String(h||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},unescapeHTML:function(h){return String(h||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")},escapeRegExp:function(h){return String(h||"").replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(l,j,k){var h=l.split("");h.splice(j,0,k);return h.join("")},includes:function(j,h){return j.indexOf(h)!==-1},join:function(j){var h=Array.prototype.slice.call(arguments);return h.join(h.shift())},lines:function(h){return h.split("\n")},reverse:function(h){return Array.prototype.reverse.apply(h.split("")).join("")},splice:function(m,j,l,k){var h=m.split("");h.splice(j,l,k);return h.join("")},startsWith:function(j,h){return j.length>=h.length&&j.substring(0,h.length)===h},endsWith:function(j,h){return j.length>=h.length&&j.substring(j.length-h.length)===h},succ:function(j){var h=j.split("");h.splice(j.length-1,1,String.fromCharCode(j.charCodeAt(j.length-1)+1));return h.join("")},titleize:function(l){var h=l.split(" "),k;for(var j=0;j<h.length;j++){k=h[j].split("");if(typeof k[0]!=="undefined"){k[0]=k[0].toUpperCase()}j+1===h.length?h[j]=k.join(""):h[j]=k.join("")+" "}return h.join("")},camelize:function(h){return f.trim(h).replace(/(\-|_|\s)+(.)?/g,function(j,l,k){return k?k.toUpperCase():""})},underscored:function(h){return f.trim(h).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(h){return f.trim(h).replace(/([a-z\d])([A-Z]+)/g,"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},trim:function(j,h){if(!h&&d){return d.call(j)}h=b(h);return j.replace(new RegExp("^["+h+"]+|["+h+"]+$","g"),"")},ltrim:function(j,h){h=b(h);return j.replace(new RegExp("^["+h+"]+","g"),"")},rtrim:function(j,h){h=b(h);return j.replace(new RegExp("["+h+"]+$","g"),"")},truncate:function(k,j,h){h=h||"...";return k.length>j?k.slice(0,j)+h:k},words:function(j,h){h=h||" ";return j.split(h)},pad:function(n,k,h,j){var m="";var l=0;if(!h){h=" "}else{if(h.length>1){h=h[0]}}switch(j){case"right":l=(k-n.length);m=e(h,l);n=n+m;break;case"both":l=(k-n.length);m={left:e(h,Math.ceil(l/2)),right:e(h,Math.floor(l/2))};n=m.left+n+m.right;break;default:l=(k-n.length);m=e(h,l);n=m+n}return n},lpad:function(k,j,h){return f.pad(k,j,h)},rpad:function(k,j,h){return f.pad(k,j,h,"right")},lrpad:function(k,j,h){return f.pad(k,j,h,"both")},sprintf:function(){var l=0,r,n=arguments[l++],j=[],k,h,q,t,u="";while(n){if(k=/^[^\x25]+/.exec(n)){j.push(k[0])}else{if(k=/^\x25{2}/.exec(n)){j.push("%")}else{if(k=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)){if(((r=arguments[k[1]||l++])==null)||(r==undefined)){throw new Error("Too few arguments.")}if(/[^s]/.test(k[7])&&(typeof(r)!="number")){throw new TypeError("Expecting number but found "+typeof(r))}switch(k[7]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r);break;case"e":r=k[6]?r.toExponential(k[6]):r.toExponential();break;case"f":r=k[6]?parseFloat(r).toFixed(k[6]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=((r=String(r))&&k[6]?r.substring(0,k[6]):r);break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase();break}r=(/[def]/.test(k[7])&&k[2]&&r>=0?"+"+r:r);q=k[3]?k[3]=="0"?"0":k[3].charAt(1):" ";t=k[5]-String(r).length-u.length;h=k[5]?e(q,t):"";j.push(u+(k[4]?r+h:h+r))}else{throw new Error("Universe error: 17")}}}n=n.substring(k[0].length)}return j.join("")},toNumber:function(j,h){return c(c(j).toFixed(c(h)))},strRight:function(k,h){var j=(!h)?-1:k.indexOf(h);return(j!=-1)?k.slice(j+h.length,k.length):k},strRightBack:function(k,h){var j=(!h)?-1:k.lastIndexOf(h);return(j!=-1)?k.slice(j+h.length,k.length):k},strLeft:function(k,h){var j=(!h)?-1:k.indexOf(h);return(j!=-1)?k.slice(0,j):k},strLeftBack:function(k,h){var j=k.lastIndexOf(h);return(j!=-1)?k.slice(0,j):k}};f.strip=f.trim;f.lstrip=f.ltrim;f.rstrip=f.rtrim;f.center=f.lrpad;f.ljust=f.lpad;f.rjust=f.rpad;if(typeof window==="undefined"&&typeof module!=="undefined"){module.exports=f}else{if(typeof window._!=="undefined"){window._.mixin(f)}else{window._=f}}}());var md5=function(v){function O(b,a){return(b<<a)|(b>>>(32-a))}function N(k,b){var F,a,d,x,c;d=(k&2147483648);x=(b&2147483648);F=(k&1073741824);a=(b&1073741824);c=(k&1073741823)+(b&1073741823);if(F&a){return(c^2147483648^d^x)}if(F|a){if(c&1073741824){return(c^3221225472^d^x)}else{return(c^1073741824^d^x)}}else{return(c^d^x)}}function u(a,c,b){return(a&c)|((~a)&b)}function t(a,c,b){return(a&b)|(c&(~b))}function s(a,c,b){return(a^c^b)}function q(a,c,b){return(c^(a|(~b)))}function y(G,F,ad,ac,k,H,I){G=N(G,N(N(u(F,ad,ac),k),I));return N(O(G,H),F)}function f(G,F,ad,ac,k,H,I){G=N(G,N(N(t(F,ad,ac),k),I));return N(O(G,H),F)}function K(G,F,ad,ac,k,H,I){G=N(G,N(N(s(F,ad,ac),k),I));return N(O(G,H),F)}function w(G,F,ad,ac,k,H,I){G=N(G,N(N(q(F,ad,ac),k),I));return N(O(G,H),F)}function e(k){var G;var d=k.length;var c=d+8;var b=(c-(c%64))/64;var F=(b+1)*16;var H=Array(F-1);var a=0;var x=0;while(x<d){G=(x-(x%4))/4;a=(x%4)*8;H[G]=(H[G]|(k.charCodeAt(x)<<a));x++}G=(x-(x%4))/4;a=(x%4)*8;H[G]=H[G]|(128<<a);H[F-2]=d<<3;H[F-1]=d>>>29;return H}function E(c){var b="",d="",k,a;for(a=0;a<=3;a++){k=(c>>>(a*8))&255;d="0"+k.toString(16);b=b+d.substr(d.length-2,2)}return b}function M(b){b=b.replace(/\r\n/g,"\n");var a="";for(var k=0;k<b.length;k++){var d=b.charCodeAt(k);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a}var J=Array();var S,j,L,z,h,ab,aa,Z,Y;var V=7,T=12,Q=17,P=22;var D=5,C=9,B=14,A=20;var r=4,o=11,n=16,m=23;var X=6,W=10,U=15,R=21;v=M(v);J=e(v);ab=1732584193;aa=4023233417;Z=2562383102;Y=271733878;for(S=0;S<J.length;S+=16){j=ab;L=aa;z=Z;h=Y;ab=y(ab,aa,Z,Y,J[S+0],V,3614090360);Y=y(Y,ab,aa,Z,J[S+1],T,3905402710);Z=y(Z,Y,ab,aa,J[S+2],Q,606105819);aa=y(aa,Z,Y,ab,J[S+3],P,3250441966);ab=y(ab,aa,Z,Y,J[S+4],V,4118548399);Y=y(Y,ab,aa,Z,J[S+5],T,1200080426);Z=y(Z,Y,ab,aa,J[S+6],Q,2821735955);aa=y(aa,Z,Y,ab,J[S+7],P,4249261313);ab=y(ab,aa,Z,Y,J[S+8],V,1770035416);Y=y(Y,ab,aa,Z,J[S+9],T,2336552879);Z=y(Z,Y,ab,aa,J[S+10],Q,4294925233);aa=y(aa,Z,Y,ab,J[S+11],P,2304563134);ab=y(ab,aa,Z,Y,J[S+12],V,1804603682);Y=y(Y,ab,aa,Z,J[S+13],T,4254626195);Z=y(Z,Y,ab,aa,J[S+14],Q,2792965006);aa=y(aa,Z,Y,ab,J[S+15],P,1236535329);ab=f(ab,aa,Z,Y,J[S+1],D,4129170786);Y=f(Y,ab,aa,Z,J[S+6],C,3225465664);Z=f(Z,Y,ab,aa,J[S+11],B,643717713);aa=f(aa,Z,Y,ab,J[S+0],A,3921069994);ab=f(ab,aa,Z,Y,J[S+5],D,3593408605);Y=f(Y,ab,aa,Z,J[S+10],C,38016083);Z=f(Z,Y,ab,aa,J[S+15],B,3634488961);aa=f(aa,Z,Y,ab,J[S+4],A,3889429448);ab=f(ab,aa,Z,Y,J[S+9],D,568446438);Y=f(Y,ab,aa,Z,J[S+14],C,3275163606);Z=f(Z,Y,ab,aa,J[S+3],B,4107603335);aa=f(aa,Z,Y,ab,J[S+8],A,1163531501);ab=f(ab,aa,Z,Y,J[S+13],D,2850285829);Y=f(Y,ab,aa,Z,J[S+2],C,4243563512);Z=f(Z,Y,ab,aa,J[S+7],B,1735328473);aa=f(aa,Z,Y,ab,J[S+12],A,2368359562);ab=K(ab,aa,Z,Y,J[S+5],r,4294588738);Y=K(Y,ab,aa,Z,J[S+8],o,2272392833);Z=K(Z,Y,ab,aa,J[S+11],n,1839030562);aa=K(aa,Z,Y,ab,J[S+14],m,4259657740);ab=K(ab,aa,Z,Y,J[S+1],r,2763975236);Y=K(Y,ab,aa,Z,J[S+4],o,1272893353);Z=K(Z,Y,ab,aa,J[S+7],n,4139469664);aa=K(aa,Z,Y,ab,J[S+10],m,3200236656);ab=K(ab,aa,Z,Y,J[S+13],r,681279174);Y=K(Y,ab,aa,Z,J[S+0],o,3936430074);Z=K(Z,Y,ab,aa,J[S+3],n,3572445317);aa=K(aa,Z,Y,ab,J[S+6],m,76029189);ab=K(ab,aa,Z,Y,J[S+9],r,3654602809);Y=K(Y,ab,aa,Z,J[S+12],o,3873151461);Z=K(Z,Y,ab,aa,J[S+15],n,530742520);aa=K(aa,Z,Y,ab,J[S+2],m,3299628645);ab=w(ab,aa,Z,Y,J[S+0],X,4096336452);Y=w(Y,ab,aa,Z,J[S+7],W,1126891415);Z=w(Z,Y,ab,aa,J[S+14],U,2878612391);aa=w(aa,Z,Y,ab,J[S+5],R,4237533241);ab=w(ab,aa,Z,Y,J[S+12],X,1700485571);Y=w(Y,ab,aa,Z,J[S+3],W,2399980690);Z=w(Z,Y,ab,aa,J[S+10],U,4293915773);aa=w(aa,Z,Y,ab,J[S+1],R,2240044497);ab=w(ab,aa,Z,Y,J[S+8],X,1873313359);Y=w(Y,ab,aa,Z,J[S+15],W,4264355552);Z=w(Z,Y,ab,aa,J[S+6],U,2734768916);aa=w(aa,Z,Y,ab,J[S+13],R,1309151649);ab=w(ab,aa,Z,Y,J[S+4],X,4149444226);Y=w(Y,ab,aa,Z,J[S+11],W,3174756917);Z=w(Z,Y,ab,aa,J[S+2],U,718787259);aa=w(aa,Z,Y,ab,J[S+9],R,3951481745);ab=N(ab,j);aa=N(aa,L);Z=N(Z,z);Y=N(Y,h)}var l=E(ab)+E(aa)+E(Z)+E(Y);return l.toLowerCase()};
/*!
* ZeroClipboard
* The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
* Copyright (c) 2014 Jon Rohan, James M. Greene
* Licensed MIT
* http://zeroclipboard.org/
* v1.3.5
*/
(function(N){var B;var y={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null};var S={};var s=0;var H={};var I=0;var G={};var u=null;var f=null;var U=function(){var aa,Z,ab,ac,Y="ZeroClipboard.swf";if(document.currentScript&&(ac=document.currentScript.src)){}else{var X=document.getElementsByTagName("script");if("readyState" in X[0]){for(aa=X.length;aa--;){if(X[aa].readyState==="interactive"&&(ac=X[aa].src)){break}}}else{if(document.readyState==="loading"){ac=X[X.length-1].src}else{for(aa=X.length;aa--;){ab=X[aa].src;if(!ab){Z=null;break}ab=ab.split("#")[0].split("?")[0];ab=ab.slice(0,ab.lastIndexOf("/")+1);if(Z==null){Z=ab}else{if(Z!==ab){Z=null;break}}}if(Z!==null){ac=Z}}}}if(ac){ac=ac.split("#")[0].split("?")[0];Y=ac.slice(0,ac.lastIndexOf("/")+1)+Y}return Y}();var c=function(){var X=/\-([a-z])/g,Y=function(Z,aa){return aa.toUpperCase()};return function(Z){return Z.replace(X,Y)}}();var k=function(ac,ae){var ad,Y,ab,Z,aa,X;if(N.getComputedStyle){ad=N.getComputedStyle(ac,null).getPropertyValue(ae)}else{Y=c(ae);if(ac.currentStyle){ad=ac.currentStyle[Y]}else{ad=ac.style[Y]}}if(ae==="cursor"){if(!ad||ad==="auto"){ab=ac.tagName.toLowerCase();if(ab==="a"){return"pointer"}}}return ad};var L=function(X){if(!X){X=N.event}var Y;if(this!==N){Y=this}else{if(X.target){Y=X.target}else{if(X.srcElement){Y=X.srcElement}}}J.activate(Y)};var R=function(X,Z,Y){if(!X||X.nodeType!==1){return}if(X.addEventListener){X.addEventListener(Z,Y,false)}else{if(X.attachEvent){X.attachEvent("on"+Z,Y)}}};var a=function(X,Z,Y){if(!X||X.nodeType!==1){return}if(X.removeEventListener){X.removeEventListener(Z,Y,false)}else{if(X.detachEvent){X.detachEvent("on"+Z,Y)}}};var W=function(Y,aa){if(!Y||Y.nodeType!==1){return Y}if(Y.classList){if(!Y.classList.contains(aa)){Y.classList.add(aa)}return Y}if(aa&&typeof aa==="string"){var ac=(aa||"").split(/\s+/);if(Y.nodeType===1){if(!Y.className){Y.className=aa}else{var Z=" "+Y.className+" ",ab=Y.className;for(var ad=0,X=ac.length;ad<X;ad++){if(Z.indexOf(" "+ac[ad]+" ")<0){ab+=" "+ac[ad]}}Y.className=ab.replace(/^\s+|\s+$/g,"")}}}return Y};var z=function(Y,aa){if(!Y||Y.nodeType!==1){return Y}if(Y.classList){if(Y.classList.contains(aa)){Y.classList.remove(aa)}return Y}if(aa&&typeof aa==="string"||aa===undefined){var ab=(aa||"").split(/\s+/);if(Y.nodeType===1&&Y.className){if(aa){var Z=(" "+Y.className+" ").replace(/[\n\t]/g," ");for(var ac=0,X=ab.length;ac<X;ac++){Z=Z.replace(" "+ab[ac]+" "," ")}Y.className=Z.replace(/^\s+|\s+$/g,"")}else{Y.className=""}}}return Y};var T=function(){var Z,aa,X,Y=1;if(typeof document.body.getBoundingClientRect==="function"){Z=document.body.getBoundingClientRect();aa=Z.right-Z.left;X=document.body.offsetWidth;Y=Math.round(aa/X*100)/100}return Y};var m=function(ab,af){var Y={left:0,top:0,width:0,height:0,zIndex:j(af)-1};if(ab.getBoundingClientRect){var ad=ab.getBoundingClientRect();var aa,ae,X;if("pageXOffset" in N&&"pageYOffset" in N){aa=N.pageXOffset;ae=N.pageYOffset}else{X=T();aa=Math.round(document.documentElement.scrollLeft/X);ae=Math.round(document.documentElement.scrollTop/X)}var ac=document.documentElement.clientLeft||0;var Z=document.documentElement.clientTop||0;Y.left=ad.left+aa-ac;Y.top=ad.top+ae-Z;Y.width="width" in ad?ad.width:ad.right-ad.left;Y.height="height" in ad?ad.height:ad.bottom-ad.top}return Y};var D=function(Z,X){var Y=X==null||X&&X.cacheBust===true&&X.useNoCache===true;if(Y){return(Z.indexOf("?")===-1?"?":"&")+"noCache="+new Date().getTime()}else{return""}};var P=function(Z){var aa,Y,ab,ac=[],X=[],ad=[];if(Z.trustedOrigins){if(typeof Z.trustedOrigins==="string"){X.push(Z.trustedOrigins)}else{if(typeof Z.trustedOrigins==="object"&&"length" in Z.trustedOrigins){X=X.concat(Z.trustedOrigins)}}}if(Z.trustedDomains){if(typeof Z.trustedDomains==="string"){X.push(Z.trustedDomains)}else{if(typeof Z.trustedDomains==="object"&&"length" in Z.trustedDomains){X=X.concat(Z.trustedDomains)}}}if(X.length){for(aa=0,Y=X.length;aa<Y;aa++){if(X.hasOwnProperty(aa)&&X[aa]&&typeof X[aa]==="string"){ab=l(X[aa]);if(!ab){continue}if(ab==="*"){ad=[ab];break}ad.push.apply(ad,[ab,"//"+ab,N.location.protocol+"//"+ab])}}}if(ad.length){ac.push("trustedOrigins="+encodeURIComponent(ad.join(",")))}if(typeof Z.jsModuleId==="string"&&Z.jsModuleId){ac.push("jsModuleId="+encodeURIComponent(Z.jsModuleId))}return ac.join("&")};var o=function(aa,ab,Z){if(typeof ab.indexOf==="function"){return ab.indexOf(aa,Z)}var Y,X=ab.length;if(typeof Z==="undefined"){Z=0}else{if(Z<0){Z=X+Z}}for(Y=Z;Y<X;Y++){if(ab.hasOwnProperty(Y)&&ab[Y]===aa){return Y}}return -1};var C=function(X){if(typeof X==="string"){throw new TypeError("ZeroClipboard doesn't accept query strings.")}if(!X.length){return[X]}return X};var F=function(aa,Y,X,Z){if(Z){N.setTimeout(function(){aa.apply(Y,X)},0)}else{aa.apply(Y,X)}};var j=function(Y){var Z,X;if(Y){if(typeof Y==="number"&&Y>0){Z=Y}else{if(typeof Y==="string"&&(X=parseInt(Y,10))&&!isNaN(X)&&X>0){Z=X}}}if(!Z){if(typeof h.zIndex==="number"&&h.zIndex>0){Z=h.zIndex}else{if(typeof h.zIndex==="string"&&(X=parseInt(h.zIndex,10))&&!isNaN(X)&&X>0){Z=X}}}return Z||0};var r=function(X,Z){if(X&&Z!==false&&typeof console!=="undefined"&&console&&(console.warn||console.log)){var Y="`"+X+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";if(console.warn){console.warn(Y)}else{console.log(Y)}}};var x=function(){var Z,Y,X,ad,ab,ac,aa=arguments[0]||{};for(Z=1,Y=arguments.length;Z<Y;Z++){if((X=arguments[Z])!=null){for(ad in X){if(X.hasOwnProperty(ad)){ab=aa[ad];ac=X[ad];if(aa===ac){continue}if(ac!==undefined){aa[ad]=ac}}}}}return aa};var l=function(Y){if(Y==null||Y===""){return null}Y=Y.replace(/^\s+|\s+$/g,"");if(Y===""){return null}var Z=Y.indexOf("//");Y=Z===-1?Y:Y.slice(Z+2);var X=Y.indexOf("/");Y=X===-1?Y:Z===-1||X===0?null:Y.slice(0,X);if(Y&&Y.slice(-4).toLowerCase()===".swf"){return null}return Y||null};var b=function(){var X=function(ad,ac){var ab,Z,aa;if(ad!=null&&ac[0]!=="*"){if(typeof ad==="string"){ad=[ad]}if(typeof ad==="object"&&"length" in ad){for(ab=0,Z=ad.length;ab<Z;ab++){if(ad.hasOwnProperty(ab)){aa=l(ad[ab]);if(aa){if(aa==="*"){ac.length=0;ac.push("*");break}if(o(aa,ac)===-1){ac.push(aa)}}}}}}};var Y={always:"always",samedomain:"sameDomain",never:"never"};return function(ae,aa){var ad,af=aa.allowScriptAccess;if(typeof af==="string"&&(ad=af.toLowerCase())&&/^always|samedomain|never$/.test(ad)){return Y[ad]}var ac=l(aa.moviePath);if(ac===null){ac=ae}var ab=[];X(aa.trustedOrigins,ab);X(aa.trustedDomains,ab);var Z=ab.length;if(Z>0){if(Z===1&&ab[0]==="*"){return"always"}if(o(ae,ab)!==-1){if(Z===1&&ae===ac){return"sameDomain"}return"always"}}return"never"}}();var E=function(Y){if(Y==null){return[]}if(Object.keys){return Object.keys(Y)}var X=[];for(var Z in Y){if(Y.hasOwnProperty(Z)){X.push(Z)}}return X};var e=function(X){if(X){for(var Y in X){if(X.hasOwnProperty(Y)){delete X[Y]}}}return X};var n=function(){try{return document.activeElement}catch(X){}return null};var Q=function(){var X=false;if(typeof y.disabled==="boolean"){X=y.disabled===false}else{if(typeof ActiveXObject==="function"){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){X=true}}catch(Y){}}if(!X&&navigator.mimeTypes["application/x-shockwave-flash"]){X=true}}return X};function w(X){return X.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function K(X){return parseFloat(w(X))>=10}var J=function(Y,X){if(!(this instanceof J)){return new J(Y,X)}this.id=""+s++;H[this.id]={instance:this,elements:[],handlers:{}};if(Y){this.clip(Y)}if(typeof X!=="undefined"){r("new ZeroClipboard(elements, options)",h.debug);J.config(X)}this.options=J.config();if(typeof y.disabled!=="boolean"){y.disabled=!Q()}if(y.disabled===false&&y.outdated!==true){if(y.bridge===null){y.outdated=false;y.ready=false;v()}}};J.prototype.setText=function(X){if(X&&X!==""){S["text/plain"]=X;if(y.ready===true&&y.bridge&&typeof y.bridge.setText==="function"){y.bridge.setText(X)}else{y.ready=false}}return this};J.prototype.setSize=function(Y,X){if(y.ready===true&&y.bridge&&typeof y.bridge.setSize==="function"){y.bridge.setSize(Y,X)}else{y.ready=false}return this};var M=function(X){if(y.ready===true&&y.bridge&&typeof y.bridge.setHandCursor==="function"){y.bridge.setHandCursor(X)}else{y.ready=false}};J.prototype.destroy=function(){this.unclip();this.off();delete H[this.id]};var q=function(){var aa,X,Z,Y=[],ab=E(H);for(aa=0,X=ab.length;aa<X;aa++){Z=H[ab[aa]].instance;if(Z&&Z instanceof J){Y.push(Z)}}return Y};J.version="1.3.5";var h={swfPath:U,trustedDomains:N.location.host?[N.location.host]:[],cacheBust:true,forceHandCursor:false,zIndex:999999999,debug:true,title:null,autoActivate:true};J.config=function(X){if(typeof X==="object"&&X!==null){x(h,X)}if(typeof X==="string"&&X){if(h.hasOwnProperty(X)){return h[X]}return}var Z={};for(var Y in h){if(h.hasOwnProperty(Y)){if(typeof h[Y]==="object"&&h[Y]!==null){if("length" in h[Y]){Z[Y]=h[Y].slice(0)}else{Z[Y]=x({},h[Y])}}else{Z[Y]=h[Y]}}}return Z};J.destroy=function(){J.deactivate();for(var X in H){if(H.hasOwnProperty(X)&&H[X]){var Y=H[X].instance;if(Y&&typeof Y.destroy==="function"){Y.destroy()}}}var Z=t(y.bridge);if(Z&&Z.parentNode){Z.parentNode.removeChild(Z);y.ready=null;y.bridge=null}};J.activate=function(Z){if(B){z(B,h.hoverClass);z(B,h.activeClass)}B=Z;W(Z,h.hoverClass);V();var aa=h.title||Z.getAttribute("title");if(aa){var Y=t(y.bridge);if(Y){Y.setAttribute("title",aa)}}var X=h.forceHandCursor===true||k(Z,"cursor")==="pointer";M(X)};J.deactivate=function(){var X=t(y.bridge);if(X){X.style.left="0px";X.style.top="-9999px";X.removeAttribute("title")}if(B){z(B,h.hoverClass);z(B,h.activeClass);B=null}};var v=function(){var ab,X;var Z=document.getElementById("global-zeroclipboard-html-bridge");if(!Z){var ad=J.config();ad.jsModuleId=typeof u==="string"&&u||typeof f==="string"&&f||null;var ac=b(N.location.host,h);var Y=P(ad);var ae=h.moviePath+D(h.moviePath,h);var aa='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+ae+'"/>         <param name="allowScriptAccess" value="'+ac+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+Y+'"/>         <embed src="'+ae+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+ac+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+Y+'"           scale="exactfit">         </embed>       </object>';Z=document.createElement("div");Z.id="global-zeroclipboard-html-bridge";Z.setAttribute("class","global-zeroclipboard-container");Z.style.position="absolute";Z.style.left="0px";Z.style.top="-9999px";Z.style.width="15px";Z.style.height="15px";Z.style.zIndex=""+j(h.zIndex);document.body.appendChild(Z);Z.innerHTML=aa}ab=document["global-zeroclipboard-flash-bridge"];if(ab&&(X=ab.length)){ab=ab[X-1]}y.bridge=ab||Z.children[0].lastElementChild};var t=function(Z){var Y=/^OBJECT|EMBED$/;var X=Z&&Z.parentNode;while(X&&Y.test(X.nodeName)&&X.parentNode){X=X.parentNode}return X||null};var V=function(){if(B){var Y=m(B,h.zIndex);var X=t(y.bridge);if(X){X.style.top=Y.top+"px";X.style.left=Y.left+"px";X.style.width=Y.width+"px";X.style.height=Y.height+"px";X.style.zIndex=Y.zIndex+1}if(y.ready===true&&y.bridge&&typeof y.bridge.setSize==="function"){y.bridge.setSize(Y.width,Y.height)}else{y.ready=false}}return this};J.prototype.on=function(Z,ad){var ab,X,aa,ac={},Y=H[this.id]&&H[this.id].handlers;if(typeof Z==="string"&&Z){aa=Z.toLowerCase().split(/\s+/)}else{if(typeof Z==="object"&&Z&&typeof ad==="undefined"){for(ab in Z){if(Z.hasOwnProperty(ab)&&typeof ab==="string"&&ab&&typeof Z[ab]==="function"){this.on(ab,Z[ab])}}}}if(aa&&aa.length){for(ab=0,X=aa.length;ab<X;ab++){Z=aa[ab].replace(/^on/,"");ac[Z]=true;if(!Y[Z]){Y[Z]=[]}Y[Z].push(ad)}if(ac.noflash&&y.disabled){d.call(this,"noflash",{})}if(ac.wrongflash&&y.outdated){d.call(this,"wrongflash",{flashVersion:y.version})}if(ac.load&&y.ready){d.call(this,"load",{flashVersion:y.version})}}return this};J.prototype.off=function(aa,ad){var ac,X,ae,ab,Y,Z=H[this.id]&&H[this.id].handlers;if(arguments.length===0){ab=E(Z)}else{if(typeof aa==="string"&&aa){ab=aa.split(/\s+/)}else{if(typeof aa==="object"&&aa&&typeof ad==="undefined"){for(ac in aa){if(aa.hasOwnProperty(ac)&&typeof ac==="string"&&ac&&typeof aa[ac]==="function"){this.off(ac,aa[ac])}}}}}if(ab&&ab.length){for(ac=0,X=ab.length;ac<X;ac++){aa=ab[ac].toLowerCase().replace(/^on/,"");Y=Z[aa];if(Y&&Y.length){if(ad){ae=o(ad,Y);while(ae!==-1){Y.splice(ae,1);ae=o(ad,Y,ae)}}else{Z[aa].length=0}}}}return this};J.prototype.handlers=function(Y){var aa,Z=null,X=H[this.id]&&H[this.id].handlers;if(X){if(typeof Y==="string"&&Y){return X[Y]?X[Y].slice(0):null}Z={};for(aa in X){if(X.hasOwnProperty(aa)&&X[aa]){Z[aa]=X[aa].slice(0)}}}return Z};var A=function(ac,X,af,aa){var Z=H[this.id]&&H[this.id].handlers[ac];if(Z&&Z.length){var ab,ad,Y,ae=X||this;for(ab=0,ad=Z.length;ab<ad;ab++){Y=Z[ab];X=ae;if(typeof Y==="string"&&typeof N[Y]==="function"){Y=N[Y]}if(typeof Y==="object"&&Y&&typeof Y.handleEvent==="function"){X=Y;Y=Y.handleEvent}if(typeof Y==="function"){F(Y,X,af,aa)}}}return this};J.prototype.clip=function(Z){Z=C(Z);for(var Y=0;Y<Z.length;Y++){if(Z.hasOwnProperty(Y)&&Z[Y]&&Z[Y].nodeType===1){if(!Z[Y].zcClippingId){Z[Y].zcClippingId="zcClippingId_"+I++;G[Z[Y].zcClippingId]=[this.id];if(h.autoActivate===true){R(Z[Y],"mouseover",L)}}else{if(o(this.id,G[Z[Y].zcClippingId])===-1){G[Z[Y].zcClippingId].push(this.id)}}var X=H[this.id].elements;if(o(Z[Y],X)===-1){X.push(Z[Y])}}}return this};J.prototype.unclip=function(ab){var ac=H[this.id];if(ac){var Y=ac.elements;var X;if(typeof ab==="undefined"){ab=Y.slice(0)}else{ab=C(ab)}for(var Z=ab.length;Z--;){if(ab.hasOwnProperty(Z)&&ab[Z]&&ab[Z].nodeType===1){X=0;while((X=o(ab[Z],Y,X))!==-1){Y.splice(X,1)}var aa=G[ab[Z].zcClippingId];if(aa){X=0;while((X=o(this.id,aa,X))!==-1){aa.splice(X,1)}if(aa.length===0){if(h.autoActivate===true){a(ab[Z],"mouseover",L)}delete ab[Z].zcClippingId}}}}}return this};J.prototype.elements=function(){var X=H[this.id];return X&&X.elements?X.elements.slice(0):[]};var O=function(ac){var Y,ad,ab,X,aa,Z=[];if(ac&&ac.nodeType===1&&(Y=ac.zcClippingId)&&G.hasOwnProperty(Y)){ad=G[Y];if(ad&&ad.length){for(ab=0,X=ad.length;ab<X;ab++){aa=H[ad[ab]].instance;if(aa&&aa instanceof J){Z.push(aa)}}}}return Z};h.hoverClass="zeroclipboard-is-hover";h.activeClass="zeroclipboard-is-active";h.trustedOrigins=null;h.allowScriptAccess=null;h.useNoCache=true;h.moviePath="ZeroClipboard.swf";J.detectFlashSupport=function(){r("ZeroClipboard.detectFlashSupport",h.debug);return Q()};J.dispatch=function(aa,ab){if(typeof aa==="string"&&aa){var Z=aa.toLowerCase().replace(/^on/,"");if(Z){var Y=B&&h.autoActivate===true?O(B):q();for(var ac=0,X=Y.length;ac<X;ac++){d.call(Y[ac],Z,ab)}}}};J.prototype.setHandCursor=function(X){r("ZeroClipboard.prototype.setHandCursor",h.debug);X=typeof X==="boolean"?X:!!X;M(X);h.forceHandCursor=X;return this};J.prototype.reposition=function(){r("ZeroClipboard.prototype.reposition",h.debug);return V()};J.prototype.receiveEvent=function(Y,Z){r("ZeroClipboard.prototype.receiveEvent",h.debug);if(typeof Y==="string"&&Y){var X=Y.toLowerCase().replace(/^on/,"");if(X){d.call(this,X,Z)}}};J.prototype.setCurrent=function(X){r("ZeroClipboard.prototype.setCurrent",h.debug);J.activate(X);return this};J.prototype.resetBridge=function(){r("ZeroClipboard.prototype.resetBridge",h.debug);J.deactivate();return this};J.prototype.setTitle=function(Y){r("ZeroClipboard.prototype.setTitle",h.debug);Y=Y||h.title||B&&B.getAttribute("title");if(Y){var X=t(y.bridge);if(X){X.setAttribute("title",Y)}}return this};J.setDefaults=function(X){r("ZeroClipboard.setDefaults",h.debug);J.config(X)};J.prototype.addEventListener=function(X,Y){r("ZeroClipboard.prototype.addEventListener",h.debug);return this.on(X,Y)};J.prototype.removeEventListener=function(X,Y){r("ZeroClipboard.prototype.removeEventListener",h.debug);return this.off(X,Y)};J.prototype.ready=function(){r("ZeroClipboard.prototype.ready",h.debug);return y.ready===true};var d=function(ab,ad){ab=ab.toLowerCase().replace(/^on/,"");var Z=ad&&ad.flashVersion&&w(ad.flashVersion)||null;var aa=B;var af=true;switch(ab){case"load":if(Z){if(!K(Z)){d.call(this,"onWrongFlash",{flashVersion:Z});return}y.outdated=false;y.ready=true;y.version=Z}break;case"wrongflash":if(Z&&!K(Z)){y.outdated=true;y.ready=false;y.version=Z}break;case"mouseover":W(aa,h.hoverClass);break;case"mouseout":if(h.autoActivate===true){J.deactivate()}break;case"mousedown":W(aa,h.activeClass);break;case"mouseup":z(aa,h.activeClass);break;case"datarequested":if(aa){var ag=aa.getAttribute("data-clipboard-target"),ah=!ag?null:document.getElementById(ag);if(ah){var ac=ah.value||ah.textContent||ah.innerText;if(ac){this.setText(ac)}}else{var ae=aa.getAttribute("data-clipboard-text");if(ae){this.setText(ae)}}}af=false;break;case"complete":e(S);if(aa&&aa!==n()&&aa.focus){aa.focus()}break}var Y=aa;var X=[this,ad];return A.call(this,ab,Y,X,af)};if(typeof define==="function"&&define.amd){define(["require","exports","module"],function(Y,X,Z){u=Z&&Z.id||null;return J})}else{if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports&&typeof N.require==="function"){f=module.id||null;module.exports=J}else{N.ZeroClipboard=J}}})(function(){return this}());
/*!
 * Parse JavaScript SDK
 * Version: 1.2.14
 * Built: Mon Dec 16 2013 11:32:30
 * http://parse.com
 *
 * Copyright 2013 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
(function(a){a.Parse=a.Parse||{};a.Parse.VERSION="js1.2.14"}(this));(function(){var z=this;var m=z._;var G={};var F=Array.prototype,f=Object.prototype,u=Function.prototype;var J=F.push,r=F.slice,B=F.concat,d=f.toString,l=f.hasOwnProperty;var N=F.forEach,t=F.map,H=F.reduce,c=F.reduceRight,b=F.filter,E=F.every,s=F.some,q=F.indexOf,n=F.lastIndexOf,x=Array.isArray,e=Object.keys,I=u.bind;var O=function(P){if(P instanceof O){return P}if(!(this instanceof O)){return new O(P)}this._wrapped=P};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=O}exports._=O}else{z._=O}O.VERSION="1.4.4";var K=O.each=O.forEach=function(U,T,S){if(U==null){return}if(N&&U.forEach===N){U.forEach(T,S)}else{if(U.length===+U.length){for(var R=0,P=U.length;R<P;R++){if(T.call(S,U[R],R,U)===G){return}}}else{for(var Q in U){if(O.has(U,Q)){if(T.call(S,U[Q],Q,U)===G){return}}}}}};O.map=O.collect=function(S,R,Q){var P=[];if(S==null){return P}if(t&&S.map===t){return S.map(R,Q)}K(S,function(V,T,U){P[P.length]=R.call(Q,V,T,U)});return P};var h="Reduce of empty array with no initial value";O.reduce=O.foldl=O.inject=function(T,S,P,R){var Q=arguments.length>2;if(T==null){T=[]}if(H&&T.reduce===H){if(R){S=O.bind(S,R)}return Q?T.reduce(S,P):T.reduce(S)}K(T,function(W,U,V){if(!Q){P=W;Q=true}else{P=S.call(R,P,W,U,V)}});if(!Q){throw new TypeError(h)}return P};O.reduceRight=O.foldr=function(V,S,P,R){var Q=arguments.length>2;if(V==null){V=[]}if(c&&V.reduceRight===c){if(R){S=O.bind(S,R)}return Q?V.reduceRight(S,P):V.reduceRight(S)}var U=V.length;if(U!==+U){var T=O.keys(V);U=T.length}K(V,function(Y,W,X){W=T?T[--U]:--U;if(!Q){P=V[W];Q=true}else{P=S.call(R,P,V[W],W,X)}});if(!Q){throw new TypeError(h)}return P};O.find=O.detect=function(S,R,Q){var P;D(S,function(V,T,U){if(R.call(Q,V,T,U)){P=V;return true}});return P};O.filter=O.select=function(S,R,Q){var P=[];if(S==null){return P}if(b&&S.filter===b){return S.filter(R,Q)}K(S,function(V,T,U){if(R.call(Q,V,T,U)){P[P.length]=V}});return P};O.reject=function(R,Q,P){return O.filter(R,function(U,S,T){return !Q.call(P,U,S,T)},P)};O.every=O.all=function(S,R,Q){R||(R=O.identity);var P=true;if(S==null){return P}if(E&&S.every===E){return S.every(R,Q)}K(S,function(V,T,U){if(!(P=P&&R.call(Q,V,T,U))){return G}});return !!P};var D=O.some=O.any=function(S,R,Q){R||(R=O.identity);var P=false;if(S==null){return P}if(s&&S.some===s){return S.some(R,Q)}K(S,function(V,T,U){if(P||(P=R.call(Q,V,T,U))){return G}});return !!P};O.contains=O.include=function(Q,P){if(Q==null){return false}if(q&&Q.indexOf===q){return Q.indexOf(P)!=-1}return D(Q,function(R){return R===P})};O.invoke=function(R,S){var P=r.call(arguments,2);var Q=O.isFunction(S);return O.map(R,function(T){return(Q?S:T[S]).apply(T,P)})};O.pluck=function(Q,P){return O.map(Q,function(R){return R[P]})};O.where=function(Q,P,R){if(O.isEmpty(P)){return R?null:[]}return O[R?"find":"filter"](Q,function(T){for(var S in P){if(P[S]!==T[S]){return false}}return true})};O.findWhere=function(Q,P){return O.where(Q,P,true)};O.max=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.max.apply(Math,S)}if(!R&&O.isEmpty(S)){return -Infinity}var P={computed:-Infinity,value:-Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U>=P.computed&&(P={value:W,computed:U})});return P.value};O.min=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.min.apply(Math,S)}if(!R&&O.isEmpty(S)){return Infinity}var P={computed:Infinity,value:Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U<P.computed&&(P={value:W,computed:U})});return P.value};O.shuffle=function(S){var R;var Q=0;var P=[];K(S,function(T){R=O.random(Q++);P[Q-1]=P[R];P[R]=T});return P};var a=function(P){return O.isFunction(P)?P:function(Q){return Q[P]}};O.sortBy=function(S,R,P){var Q=a(R);return O.pluck(O.map(S,function(V,T,U){return{value:V,index:T,criteria:Q.call(P,V,T,U)}}).sort(function(W,V){var U=W.criteria;var T=V.criteria;if(U!==T){if(U>T||U===void 0){return 1}if(U<T||T===void 0){return -1}}return W.index<V.index?-1:1}),"value")};var w=function(U,T,Q,S){var P={};var R=a(T||O.identity);K(U,function(X,V){var W=R.call(Q,X,V,U);S(P,W,X)});return P};O.groupBy=function(R,Q,P){return w(R,Q,P,function(S,T,U){(O.has(S,T)?S[T]:(S[T]=[])).push(U)})};O.countBy=function(R,Q,P){return w(R,Q,P,function(S,T){if(!O.has(S,T)){S[T]=0}S[T]++})};O.sortedIndex=function(W,V,S,R){S=S==null?O.identity:a(S);var U=S.call(R,V);var P=0,T=W.length;while(P<T){var Q=(P+T)>>>1;S.call(R,W[Q])<U?P=Q+1:T=Q}return P};O.toArray=function(P){if(!P){return[]}if(O.isArray(P)){return r.call(P)}if(P.length===+P.length){return O.map(P,O.identity)}return O.values(P)};O.size=function(P){if(P==null){return 0}return(P.length===+P.length)?P.length:O.keys(P).length};O.first=O.head=O.take=function(R,Q,P){if(R==null){return void 0}return(Q!=null)&&!P?r.call(R,0,Q):R[0]};O.initial=function(R,Q,P){return r.call(R,0,R.length-((Q==null)||P?1:Q))};O.last=function(R,Q,P){if(R==null){return void 0}if((Q!=null)&&!P){return r.call(R,Math.max(R.length-Q,0))}else{return R[R.length-1]}};O.rest=O.tail=O.drop=function(R,Q,P){return r.call(R,(Q==null)||P?1:Q)};O.compact=function(P){return O.filter(P,O.identity)};var A=function(Q,R,P){K(Q,function(S){if(O.isArray(S)){R?J.apply(P,S):A(S,R,P)}else{P.push(S)}});return P};O.flatten=function(Q,P){return A(Q,P,[])};O.without=function(P){return O.difference(P,r.call(arguments,1))};O.uniq=O.unique=function(V,U,T,S){if(O.isFunction(U)){S=T;T=U;U=false}var Q=T?O.map(V,T,S):V;var R=[];var P=[];K(Q,function(X,W){if(U?(!W||P[P.length-1]!==X):!O.contains(P,X)){P.push(X);R.push(V[W])}});return R};O.union=function(){return O.uniq(B.apply(F,arguments))};O.intersection=function(Q){var P=r.call(arguments,1);return O.filter(O.uniq(Q),function(R){return O.every(P,function(S){return O.indexOf(S,R)>=0})})};O.difference=function(Q){var P=B.apply(F,r.call(arguments,1));return O.filter(Q,function(R){return !O.contains(P,R)})};O.zip=function(){var P=r.call(arguments);var S=O.max(O.pluck(P,"length"));var R=new Array(S);for(var Q=0;Q<S;Q++){R[Q]=O.pluck(P,""+Q)}return R};O.object=function(T,R){if(T==null){return{}}var P={};for(var S=0,Q=T.length;S<Q;S++){if(R){P[T[S]]=R[S]}else{P[T[S][0]]=T[S][1]}}return P};O.indexOf=function(T,R,S){if(T==null){return -1}var Q=0,P=T.length;if(S){if(typeof S=="number"){Q=(S<0?Math.max(0,P+S):S)}else{Q=O.sortedIndex(T,R);return T[Q]===R?Q:-1}}if(q&&T.indexOf===q){return T.indexOf(R,S)}for(;Q<P;Q++){if(T[Q]===R){return Q}}return -1};O.lastIndexOf=function(T,R,S){if(T==null){return -1}var P=S!=null;if(n&&T.lastIndexOf===n){return P?T.lastIndexOf(R,S):T.lastIndexOf(R)}var Q=(P?S:T.length);while(Q--){if(T[Q]===R){return Q}}return -1};O.range=function(U,S,T){if(arguments.length<=1){S=U||0;U=0}T=arguments[2]||1;var Q=Math.max(Math.ceil((S-U)/T),0);var P=0;var R=new Array(Q);while(P<Q){R[P++]=U;U+=T}return R};O.bind=function(R,Q){if(R.bind===I&&I){return I.apply(R,r.call(arguments,1))}var P=r.call(arguments,2);return function(){return R.apply(Q,P.concat(r.call(arguments)))}};O.partial=function(Q){var P=r.call(arguments,1);return function(){return Q.apply(this,P.concat(r.call(arguments)))}};O.bindAll=function(Q){var P=r.call(arguments,1);if(P.length===0){P=O.functions(Q)}K(P,function(R){Q[R]=O.bind(Q[R],Q)});return Q};O.memoize=function(R,Q){var P={};Q||(Q=O.identity);return function(){var S=Q.apply(this,arguments);return O.has(P,S)?P[S]:(P[S]=R.apply(this,arguments))}};O.delay=function(Q,R){var P=r.call(arguments,2);return setTimeout(function(){return Q.apply(null,P)},R)};O.defer=function(P){return O.delay.apply(O,[P,1].concat(r.call(arguments,1)))};O.throttle=function(U,W){var S,R,V,P;var T=0;var Q=function(){T=new Date;V=null;P=U.apply(S,R)};return function(){var X=new Date;var Y=W-(X-T);S=this;R=arguments;if(Y<=0){clearTimeout(V);V=null;T=X;P=U.apply(S,R)}else{if(!V){V=setTimeout(Q,Y)}}return P}};O.debounce=function(R,T,Q){var S,P;return function(){var X=this,W=arguments;var V=function(){S=null;if(!Q){P=R.apply(X,W)}};var U=Q&&!S;clearTimeout(S);S=setTimeout(V,T);if(U){P=R.apply(X,W)}return P}};O.once=function(R){var P=false,Q;return function(){if(P){return Q}P=true;Q=R.apply(this,arguments);R=null;return Q}};O.wrap=function(P,Q){return function(){var R=[P];J.apply(R,arguments);return Q.apply(this,R)}};O.compose=function(){var P=arguments;return function(){var Q=arguments;for(var R=P.length-1;R>=0;R--){Q=[P[R].apply(this,Q)]}return Q[0]}};O.after=function(Q,P){if(Q<=0){return P()}return function(){if(--Q<1){return P.apply(this,arguments)}}};O.keys=e||function(R){if(R!==Object(R)){throw new TypeError("Invalid object")}var Q=[];for(var P in R){if(O.has(R,P)){Q[Q.length]=P}}return Q};O.values=function(R){var P=[];for(var Q in R){if(O.has(R,Q)){P.push(R[Q])}}return P};O.pairs=function(R){var Q=[];for(var P in R){if(O.has(R,P)){Q.push([P,R[P]])}}return Q};O.invert=function(R){var P={};for(var Q in R){if(O.has(R,Q)){P[R[Q]]=Q}}return P};O.functions=O.methods=function(R){var Q=[];for(var P in R){if(O.isFunction(R[P])){Q.push(P)}}return Q.sort()};O.extend=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){P[R]=Q[R]}}});return P};O.pick=function(Q){var R={};var P=B.apply(F,r.call(arguments,1));K(P,function(S){if(S in Q){R[S]=Q[S]}});return R};O.omit=function(R){var S={};var Q=B.apply(F,r.call(arguments,1));for(var P in R){if(!O.contains(Q,P)){S[P]=R[P]}}return S};O.defaults=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){if(P[R]==null){P[R]=Q[R]}}}});return P};O.clone=function(P){if(!O.isObject(P)){return P}return O.isArray(P)?P.slice():O.extend({},P)};O.tap=function(Q,P){P(Q);return Q};var L=function(W,V,Q,R){if(W===V){return W!==0||1/W==1/V}if(W==null||V==null){return W===V}if(W instanceof O){W=W._wrapped}if(V instanceof O){V=V._wrapped}var T=d.call(W);if(T!=d.call(V)){return false}switch(T){case"[object String]":return W==String(V);case"[object Number]":return W!=+W?V!=+V:(W==0?1/W==1/V:W==+V);case"[object Date]":case"[object Boolean]":return +W==+V;case"[object RegExp]":return W.source==V.source&&W.global==V.global&&W.multiline==V.multiline&&W.ignoreCase==V.ignoreCase}if(typeof W!="object"||typeof V!="object"){return false}var P=Q.length;while(P--){if(Q[P]==W){return R[P]==V}}Q.push(W);R.push(V);var Y=0,Z=true;if(T=="[object Array]"){Y=W.length;Z=Y==V.length;if(Z){while(Y--){if(!(Z=L(W[Y],V[Y],Q,R))){break}}}}else{var U=W.constructor,S=V.constructor;if(U!==S&&!(O.isFunction(U)&&(U instanceof U)&&O.isFunction(S)&&(S instanceof S))){return false}for(var X in W){if(O.has(W,X)){Y++;if(!(Z=O.has(V,X)&&L(W[X],V[X],Q,R))){break}}}if(Z){for(X in V){if(O.has(V,X)&&!(Y--)){break}}Z=!Y}}Q.pop();R.pop();return Z};O.isEqual=function(Q,P){return L(Q,P,[],[])};O.isEmpty=function(Q){if(Q==null){return true}if(O.isArray(Q)||O.isString(Q)){return Q.length===0}for(var P in Q){if(O.has(Q,P)){return false}}return true};O.isElement=function(P){return !!(P&&P.nodeType===1)};O.isArray=x||function(P){return d.call(P)=="[object Array]"};O.isObject=function(P){return P===Object(P)};K(["Arguments","Function","String","Number","Date","RegExp"],function(P){O["is"+P]=function(Q){return d.call(Q)=="[object "+P+"]"}});if(!O.isArguments(arguments)){O.isArguments=function(P){return !!(P&&O.has(P,"callee"))}}if(typeof(/./)!=="function"){O.isFunction=function(P){return typeof P==="function"}}O.isFinite=function(P){return isFinite(P)&&!isNaN(parseFloat(P))};O.isNaN=function(P){return O.isNumber(P)&&P!=+P};O.isBoolean=function(P){return P===true||P===false||d.call(P)=="[object Boolean]"};O.isNull=function(P){return P===null};O.isUndefined=function(P){return P===void 0};O.has=function(Q,P){return l.call(Q,P)};O.noConflict=function(){z._=m;return this};O.identity=function(P){return P};O.times=function(T,S,R){var P=Array(T);for(var Q=0;Q<T;Q++){P[Q]=S.call(R,Q)}return P};O.random=function(Q,P){if(P==null){P=Q;Q=0}return Q+Math.floor(Math.random()*(P-Q+1))};var o={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};o.unescape=O.invert(o.escape);var M={escape:new RegExp("["+O.keys(o.escape).join("")+"]","g"),unescape:new RegExp("("+O.keys(o.unescape).join("|")+")","g")};O.each(["escape","unescape"],function(P){O[P]=function(Q){if(Q==null){return""}return(""+Q).replace(M[P],function(R){return o[P][R]})}});O.result=function(P,R){if(P==null){return null}var Q=P[R];return O.isFunction(Q)?Q.call(P):Q};O.mixin=function(P){K(O.functions(P),function(Q){var R=O[Q]=P[Q];O.prototype[Q]=function(){var S=[this._wrapped];J.apply(S,arguments);return v.call(this,R.apply(O,S))}})};var C=0;O.uniqueId=function(P){var Q=++C+"";return P?P+Q:Q};O.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/;var j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var k=/\\|'|\r|\n|\t|\u2028|\u2029/g;O.template=function(X,S,R){var Q;R=O.defaults({},R,O.templateSettings);var T=new RegExp([(R.escape||y).source,(R.interpolate||y).source,(R.evaluate||y).source].join("|")+"|$","g");var U=0;var P="__p+='";X.replace(T,function(Z,aa,Y,ac,ab){P+=X.slice(U,ab).replace(k,function(ad){return"\\"+j[ad]});if(aa){P+="'+\n((__t=("+aa+"))==null?'':_.escape(__t))+\n'"}if(Y){P+="'+\n((__t=("+Y+"))==null?'':__t)+\n'"}if(ac){P+="';\n"+ac+"\n__p+='"}U=ab+Z.length;return Z});P+="';\n";if(!R.variable){P="with(obj||{}){\n"+P+"}\n"}P="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+P+"return __p;\n";try{Q=new Function(R.variable||"obj","_",P)}catch(V){V.source=P;throw V}if(S){return Q(S,O)}var W=function(Y){return Q.call(this,Y,O)};W.source="function("+(R.variable||"obj")+"){\n"+P+"}";return W};O.chain=function(P){return O(P).chain()};var v=function(P){return this._chain?O(P).chain():P};O.mixin(O);K(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var Q=F[P];O.prototype[P]=function(){var R=this._wrapped;Q.apply(R,arguments);if((P=="shift"||P=="splice")&&R.length===0){delete R[0]}return v.call(this,R)}});K(["concat","join","slice"],function(P){var Q=F[P];O.prototype[P]=function(){return v.call(this,Q.apply(this._wrapped,arguments))}});O.extend(O.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(a){a.Parse=a.Parse||{};var c=a.Parse;if(typeof(exports)!=="undefined"&&exports._){c._=exports._.noConflict();c.localStorage=require("localStorage");c.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;exports.Parse=c}else{c._=_.noConflict();if(typeof(localStorage)!=="undefined"){c.localStorage=localStorage}if(typeof(XMLHttpRequest)!=="undefined"){c.XMLHttpRequest=XMLHttpRequest}}if(typeof($)!=="undefined"){c.$=$}var b=function(){};var d=function(f,e,h){var j;if(e&&e.hasOwnProperty("constructor")){j=e.constructor}else{j=function(){f.apply(this,arguments)}}c._.extend(j,f);b.prototype=f.prototype;j.prototype=new b();if(e){c._.extend(j.prototype,e)}if(h){c._.extend(j,h)}j.prototype.constructor=j;j.__super__=f.prototype;return j};c.serverURL="https://api.parse.com";if(typeof(process)!=="undefined"&&process.versions&&process.versions.node){c._isNode=true}c.initialize=function(h,f,e){if(e){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}c._initialize(h,f)};c._initialize=function(h,f,e){c.applicationId=h;c.javaScriptKey=f;c.masterKey=e;c._useMasterKey=false};if(c._isNode){c.initialize=c._initialize;c.Cloud=c.Cloud||{};c.Cloud.useMasterKey=function(){c._useMasterKey=true}}c._getParsePath=function(e){if(!c.applicationId){throw"You need to call Parse.initialize before using Parse."}if(!e){e=""}if(!c._.isString(e)){throw"Tried to get a localStorage path that wasn't a String."}if(e[0]==="/"){e=e.substring(1)}return"Parse/"+c.applicationId+"/"+e};c._installationId=null;c._getInstallationId=function(){if(c._installationId){return c._installationId}var f=c._getParsePath("installationId");c._installationId=c.localStorage.getItem(f);if(!c._installationId||c._installationId===""){var e=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};c._installationId=(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e());c.localStorage.setItem(f,c._installationId)}return c._installationId};c._parseDate=function(q){var m=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$");var k=m.exec(q);if(!k){return null}var n=k[1]||0;var l=(k[2]||1)-1;var o=k[3]||0;var h=k[4]||0;var f=k[5]||0;var e=k[6]||0;var j=k[8]||0;return new Date(Date.UTC(n,l,o,h,f,e,j))};c._ajaxIE8=function(k,f,h){var j=new c.Promise();var e=new XDomainRequest();e.onload=function(){var l;try{l=JSON.parse(e.responseText)}catch(m){j.reject(m)}if(l){j.resolve(l)}};e.onerror=e.ontimeout=function(){var l={responseText:JSON.stringify({code:c.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};j.reject(l)};e.onprogress=function(){};e.open(k,f);e.send(h);return j};c._ajax=function(e,f,h,l,k){var o={success:l,error:k};if(typeof(XDomainRequest)!=="undefined"){return c._ajaxIE8(e,f,h)._thenRunCallbacks(o)}var n=new c.Promise();var j=false;var m=new c.XMLHttpRequest();m.onreadystatechange=function(){if(m.readyState===4){if(j){return}j=true;if(m.status>=200&&m.status<300){var q;try{q=JSON.parse(m.responseText)}catch(r){n.reject(r)}if(q){n.resolve(q,m.status,m)}}else{n.reject(m)}}};m.open(e,f,true);m.setRequestHeader("Content-Type","text/plain");if(c._isNode){m.setRequestHeader("User-Agent","Parse/"+c.VERSION+" (NodeJS "+process.versions.node+")")}m.send(h);return n._thenRunCallbacks(o)};c._extend=function(e,f){var h=d(this,e,f);h.extend=this.extend;return h};c._request=function(r){var q=r.route;var n=r.className;var o=r.objectId;var e=r.method;var h=r.useMasterKey;var m=r.sessionToken;var k=r.data;if(!c.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!c.javaScriptKey&&!c.masterKey){throw"You must specify a key using Parse.initialize."}if(!m){var j=c.User.current();if(j&&j._sessionToken){m=j._sessionToken}}if(q!=="batch"&&q!=="classes"&&q!=="events"&&q!=="files"&&q!=="functions"&&q!=="login"&&q!=="push"&&q!=="requestPasswordReset"&&q!=="rest_verify_analytics"&&q!=="users"&&q!=="jobs"){throw"Bad route: '"+q+"'."}var f=c.serverURL;if(f.charAt(f.length-1)!=="/"){f+="/"}f+="1/"+q;if(n){f+="/"+n}if(o){f+="/"+o}k=c._.clone(k||{});if(e!=="POST"){k._method=e;e="POST"}if(c._.isUndefined(h)){h=c._useMasterKey}k._ApplicationId=c.applicationId;if(!h){k._JavaScriptKey=c.javaScriptKey}else{k._MasterKey=c.masterKey}k._ClientVersion=c.VERSION;k._InstallationId=c._getInstallationId();if(m){k._SessionToken=m}var l=JSON.stringify(k);return c._ajax(e,f,l).then(null,function(s){var u;if(s&&s.responseText){try{var t=JSON.parse(s.responseText);u=new c.Error(t.code,t.error)}catch(v){u=new c.Error(c.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+s.responseText)}}else{u=new c.Error(c.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(s))}return c.Promise.error(u)})};c._getValue=function(e,f){if(!(e&&e[f])){return null}return c._.isFunction(e[f])?e[f]():e[f]};c._encode=function(k,j,h){var f=c._;if(k instanceof c.Object){if(h){throw"Parse.Objects not allowed here"}if(!j||f.include(j,k)||!k._hasData){return k._toPointer()}if(!k.dirty()){j=j.concat(k);return c._encode(k._toFullJSON(j),j,h)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(k instanceof c.ACL){return k.toJSON()}if(f.isDate(k)){return{__type:"Date",iso:k.toJSON()}}if(k instanceof c.GeoPoint){return k.toJSON()}if(f.isArray(k)){return f.map(k,function(l){return c._encode(l,j,h)})}if(f.isRegExp(k)){return k.source}if(k instanceof c.Relation){return k.toJSON()}if(k instanceof c.Op){return k.toJSON()}if(k instanceof c.File){if(!k.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:k.name(),url:k.url()}}if(f.isObject(k)){var e={};c._objectEach(k,function(m,l){e[l]=c._encode(m,j,h)});return e}return k};c._decode=function(j,m){var f=c._;if(!f.isObject(m)){return m}if(f.isArray(m)){c._arrayEach(m,function(q,o){m[o]=c._decode(o,q)});return m}if(m instanceof c.Object){return m}if(m instanceof c.File){return m}if(m instanceof c.Op){return m}if(m.__op){return c.Op._decode(m)}if(m.__type==="Pointer"){var n=c.Object._create(m.className);n._finishFetch({objectId:m.objectId},false);return n}if(m.__type==="Object"){var k=m.className;delete m.__type;delete m.className;var e=c.Object._create(k);e._finishFetch(m,true);return e}if(m.__type==="Date"){return c._parseDate(m.iso)}if(m.__type==="GeoPoint"){return new c.GeoPoint({latitude:m.latitude,longitude:m.longitude})}if(j==="ACL"){if(m instanceof c.ACL){return m}return new c.ACL(m)}if(m.__type==="Relation"){var l=new c.Relation(null,j);l.targetClassName=m.className;return l}if(m.__type==="File"){var h=new c.File(m.name);h._url=m.url;return h}c._objectEach(m,function(q,o){m[o]=c._decode(o,q)});return m};c._arrayEach=c._.each;c._traverse=function(f,h,e){if(f instanceof c.Object){e=e||[];if(c._.indexOf(e,f)>=0){return}e.push(f);c._traverse(f.attributes,h,e);return h(f)}if(f instanceof c.Relation||f instanceof c.File){return h(f)}if(c._.isArray(f)){c._.each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}if(c._.isObject(f)){c._each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}return h(f)};c._objectEach=c._each=function(f,h){var e=c._;if(e.isObject(f)){e.each(e.keys(f),function(j){h(f[j],j)})}else{e.each(f,h)}};c._isNullOrUndefined=function(e){return c._.isNull(e)||c._.isUndefined(e)}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Analytics=c.Analytics||{};b.extend(c.Analytics,{track:function(d,e){d=d||"";d=d.replace(/^\s*/,"");d=d.replace(/\s*$/,"");if(d.length===0){throw"A name for the custom event must be provided"}b.each(e,function(h,f){if(!b.isString(f)||!b.isString(h)){throw'track() dimensions expects keys and values of type "string".'}});return c._request({route:"events",className:d,method:"POST",data:{dimensions:e}})}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Error=function(e,d){this.code=e;this.message=d};b.extend(c.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})}(this));(function(){var a=this;var c=(a.Parse||(a.Parse={}));var b=/\s+/;var d=Array.prototype.slice;c.Events={on:function(j,n,h){var f,l,k,e,m;if(!n){return this}j=j.split(b);f=this._callbacks||(this._callbacks={});l=j.shift();while(l){m=f[l];k=m?m.tail:{};k.next=e={};k.context=h;k.callback=n;f[l]={tail:e,next:m?m.next:k};l=j.shift()}return this},off:function(n,l,f){var e,o,h,k,j,m;if(!(o=this._callbacks)){return}if(!(n||l||f)){delete this._callbacks;return this}n=n?n.split(b):_.keys(o);e=n.shift();while(e){h=o[e];delete o[e];if(!h||!(l||f)){continue}k=h.tail;h=h.next;while(h!==k){j=h.callback;m=h.context;if((l&&j!==l)||(f&&m!==f)){this.on(e,j,m)}h=h.next}e=n.shift()}return this},trigger:function(j){var n,m,h,f,e,l,k;if(!(h=this._callbacks)){return this}l=h.all;j=j.split(b);k=d.call(arguments,1);n=j.shift();while(n){m=h[n];if(m){f=m.tail;while((m=m.next)!==f){m.callback.apply(m.context||this,k)}}m=l;if(m){f=m.tail;e=[n].concat(k);while((m=m.next)!==f){m.callback.apply(m.context||this,e)}}n=j.shift()}return this}};c.Events.bind=c.Events.on;c.Events.unbind=c.Events.off}.call(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.GeoPoint=function(f,e){if(b.isArray(f)){c.GeoPoint._validate(f[0],f[1]);this.latitude=f[0];this.longitude=f[1]}else{if(b.isObject(f)){c.GeoPoint._validate(f.latitude,f.longitude);this.latitude=f.latitude;this.longitude=f.longitude}else{if(b.isNumber(f)&&b.isNumber(e)){c.GeoPoint._validate(f,e);this.latitude=f;this.longitude=e}else{this.latitude=0;this.longitude=0}}}var d=this;if(this.__defineGetter__&&this.__defineSetter__){this._latitude=this.latitude;this._longitude=this.longitude;this.__defineGetter__("latitude",function(){return d._latitude});this.__defineGetter__("longitude",function(){return d._longitude});this.__defineSetter__("latitude",function(h){c.GeoPoint._validate(h,d.longitude);d._latitude=h});this.__defineSetter__("longitude",function(h){c.GeoPoint._validate(d.latitude,h);d._longitude=h})}};c.GeoPoint._validate=function(e,d){if(e<-90){throw"Parse.GeoPoint latitude "+e+" < -90.0."}if(e>90){throw"Parse.GeoPoint latitude "+e+" > 90.0."}if(d<-180){throw"Parse.GeoPoint longitude "+d+" < -180.0."}if(d>180){throw"Parse.GeoPoint longitude "+d+" > 180.0."}};c.GeoPoint.current=function(d){var e=new c.Promise();navigator.geolocation.getCurrentPosition(function(f){e.resolve(new c.GeoPoint({latitude:f.coords.latitude,longitude:f.coords.longitude}))},function(f){e.reject(f)});return e._thenRunCallbacks(d)};c.GeoPoint.prototype={toJSON:function(){c.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(q){var j=Math.PI/180;var d=this.latitude*j;var l=this.longitude*j;var o=q.latitude*j;var h=q.longitude*j;var f=d-o;var k=l-h;var e=Math.sin(f/2);var m=Math.sin(k/2);var n=((e*e)+(Math.cos(d)*Math.cos(o)*m*m));n=Math.min(1,n);return 2*Math.asin(Math.sqrt(n))},kilometersTo:function(d){return this.radiansTo(d)*6371},milesTo:function(d){return this.radiansTo(d)*3958.8}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";d.ACL=function(f){var e=this;e.permissionsById={};if(c.isObject(f)){if(f instanceof d.User){e.setReadAccess(f,true);e.setWriteAccess(f,true)}else{if(c.isFunction(f)){throw"Parse.ACL() called with a function.  Did you forget ()?"}d._objectEach(f,function(j,h){if(!c.isString(h)){throw"Tried to create an ACL with an invalid userId."}e.permissionsById[h]={};d._objectEach(j,function(l,k){if(k!=="read"&&k!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!c.isBoolean(l)){throw"Tried to create an ACL with an invalid permission value."}e.permissionsById[h][k]=l})})}}};d.ACL.prototype.toJSON=function(){return c.clone(this.permissionsById)};d.ACL.prototype._setAccess=function(e,f,j){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}if(!c.isString(f)){throw"userId must be a string."}if(!c.isBoolean(j)){throw"allowed must be either true or false."}var h=this.permissionsById[f];if(!h){if(!j){return}else{h={};this.permissionsById[f]=h}}if(j){this.permissionsById[f][e]=true}else{delete h[e];if(c.isEmpty(h)){delete h[f]}}};d.ACL.prototype._getAccess=function(e,f){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}var h=this.permissionsById[f];if(!h){return false}return h[e]?true:false};d.ACL.prototype.setReadAccess=function(e,f){this._setAccess("read",e,f)};d.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)};d.ACL.prototype.setWriteAccess=function(e,f){this._setAccess("write",e,f)};d.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)};d.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(b,e)};d.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(b)};d.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(b,e)};d.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(b)};d.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getReadAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getWriteAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleReadAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setReadAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleWriteAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setWriteAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Op=function(){this._initialize.apply(this,arguments)};c.Op.prototype={_initialize:function(){}};b.extend(c.Op,{_extend:c._extend,_opDecoderMap:{},_registerDecoder:function(d,e){c.Op._opDecoderMap[d]=e},_decode:function(d){var e=c.Op._opDecoderMap[d.__op];if(e){return e(d)}else{return undefined}}});c.Op._registerDecoder("Batch",function(d){var e=null;c._arrayEach(d.ops,function(f){f=c.Op._decode(f);e=f._mergeWithPrevious(e)});return e});c.Op.Set=c.Op._extend({_initialize:function(d){this._value=d},value:function(){return this._value},toJSON:function(){return c._encode(this.value())},_mergeWithPrevious:function(d){return this},_estimate:function(d){return this.value()}});c.Op._UNSET={};c.Op.Unset=c.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(d){return this},_estimate:function(d){return c.Op._UNSET}});c.Op._registerDecoder("Delete",function(d){return new c.Op.Unset()});c.Op.Increment=c.Op._extend({_initialize:function(d){this._amount=d},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.amount())}else{if(d instanceof c.Op.Set){return new c.Op.Set(d.value()+this.amount())}else{if(d instanceof c.Op.Increment){return new c.Op.Increment(this.amount()+d.amount())}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return this.amount()}return d+this.amount()}});c.Op._registerDecoder("Increment",function(d){return new c.Op.Increment(d.amount)});c.Op.Add=c.Op._extend({_initialize:function(d){this._objects=d},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Add){return new c.Op.Add(d.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{return d.concat(this.objects())}}});c.Op._registerDecoder("Add",function(d){return new c.Op.Add(c._decode(undefined,d.objects))});c.Op.AddUnique=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.AddUnique){return new c.Op.AddUnique(this._estimate(d.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{var e=b.clone(d);c._arrayEach(this.objects(),function(j){if(j instanceof c.Object&&j.id){var h=b.find(e,function(k){return(k instanceof c.Object)&&(k.id===j.id)});if(!h){e.push(j)}else{var f=b.indexOf(e,h);e[f]=j}}else{if(!b.contains(e,j)){e.push(j)}}});return e}}});c.Op._registerDecoder("AddUnique",function(d){return new c.Op.AddUnique(c._decode(undefined,d.objects))});c.Op.Remove=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return d}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Remove){return new c.Op.Remove(b.union(d.objects(),this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return[]}else{var e=b.difference(d,this.objects());c._arrayEach(this.objects(),function(f){if(f instanceof c.Object&&f.id){e=b.reject(e,function(h){return(h instanceof c.Object)&&(h.id===f.id)})}});return e}}});c.Op._registerDecoder("Remove",function(d){return new c.Op.Remove(c._decode(undefined,d.objects))});c.Op.Relation=c.Op._extend({_initialize:function(h,e){this._targetClassName=null;var d=this;var f=function(j){if(j instanceof c.Object){if(!j.id){throw"You can't add an unsaved Parse.Object to a relation."}if(!d._targetClassName){d._targetClassName=j.className}if(d._targetClassName!==j.className){throw"Tried to create a Parse.Relation with 2 different types: "+d._targetClassName+" and "+j.className+"."}return j.id}return j};this.relationsToAdd=b.uniq(b.map(h,f));this.relationsToRemove=b.uniq(b.map(e,f))},added:function(){var d=this;return b.map(this.relationsToAdd,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},removed:function(){var d=this;return b.map(this.relationsToRemove,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},toJSON:function(){var j=null;var f=null;var e=this;var h=function(k){return{__type:"Pointer",className:e._targetClassName,objectId:k}};var d=null;if(this.relationsToAdd.length>0){d=b.map(this.relationsToAdd,h);j={__op:"AddRelation",objects:d}}if(this.relationsToRemove.length>0){d=b.map(this.relationsToRemove,h);f={__op:"RemoveRelation",objects:d}}if(j&&f){return{__op:"Batch",ops:[j,f]}}return j||f||{}},_mergeWithPrevious:function(h){if(!h){return this}else{if(h instanceof c.Op.Unset){throw"You can't modify a relation after deleting it."}else{if(h instanceof c.Op.Relation){if(h._targetClassName&&h._targetClassName!==this._targetClassName){throw"Related object must be of class "+h._targetClassName+", but "+this._targetClassName+" was passed in."}var f=b.union(b.difference(h.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var e=b.union(b.difference(h.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var d=new c.Op.Relation(f,e);d._targetClassName=this._targetClassName;return d}else{throw"Op is invalid after previous op."}}}},_estimate:function(e,d,f){if(!e){var h=new c.Relation(d,f);h.targetClassName=this._targetClassName}else{if(e instanceof c.Relation){if(this._targetClassName){if(e.targetClassName){if(e.targetClassName!==this._targetClassName){throw"Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{e.targetClassName=this._targetClassName}}return e}else{throw"Op is invalid after previous op."}}}});c.Op._registerDecoder("AddRelation",function(d){return new c.Op.Relation(c._decode(undefined,d.objects),[])});c.Op._registerDecoder("RemoveRelation",function(d){return new c.Op.Relation([],c._decode(undefined,d.objects))})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Relation=function(e,d){this.parent=e;this.key=d;this.targetClassName=null};c.Relation.prototype={_ensureParentAndKey:function(e,d){this.parent=this.parent||e;this.key=this.key||d;if(this.parent!==e){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==d){throw"Internal Error. Relation retrieved from two different keys."}},add:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation(d,[]);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},remove:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation([],d);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var d;var e;if(!this.targetClassName){d=c.Object._getSubclass(this.parent.className);e=new c.Query(d);e._extraOptions.redirectClassNameForKey=this.key}else{d=c.Object._getSubclass(this.targetClassName);e=new c.Query(d)}e._addCondition("$relatedTo","object",this.parent._toPointer());e._addCondition("$relatedTo","key",this.key);return e}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};b.extend(c.Promise,{is:function(d){return d&&d.then&&b.isFunction(d.then)},as:function(){var d=new c.Promise();d.resolve.apply(d,arguments);return d},error:function(){var d=new c.Promise();d.reject.apply(d,arguments);return d},when:function(h){var k;if(h&&c._isNullOrUndefined(h.length)){k=arguments}else{k=h}var j=k.length;var e=false;var f=[];var m=[];f.length=k.length;m.length=k.length;if(j===0){return c.Promise.as.apply(this,f)}var l=new c.Promise();var d=function(){j=j-1;if(j===0){if(e){l.reject(m)}else{l.resolve.apply(l,f)}}};c._arrayEach(k,function(n,o){if(c.Promise.is(n)){n.then(function(q){f[o]=q;d()},function(q){m[o]=q;e=true;d()})}else{f[o]=n;d()}});return l},_continueWhile:function(d,e){if(d()){return e().then(function(){return c.Promise._continueWhile(d,e)})}return c.Promise.as()}});b.extend(c.Promise.prototype,{resolve:function(d){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var e=arguments;c._arrayEach(this._resolvedCallbacks,function(f){f.apply(this,e)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(d){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=d;c._arrayEach(this._rejectedCallbacks,function(e){e(d)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(d,f){var h=new c.Promise();var j=function(){var k=arguments;if(d){k=[d.apply(this,k)]}if(k.length===1&&c.Promise.is(k[0])){k[0].then(function(){h.resolve.apply(h,arguments)},function(l){h.reject(l)})}else{h.resolve.apply(h,k)}};var e=function(l){var k=[];if(f){k=[f(l)];if(k.length===1&&c.Promise.is(k[0])){k[0].then(function(){h.resolve.apply(h,arguments)},function(m){h.reject(m)})}else{h.reject(k[0])}}else{h.reject(l)}};if(this._resolved){j.apply(this,this._result)}else{if(this._rejected){e(this._error)}else{this._resolvedCallbacks.push(j);this._rejectedCallbacks.push(e)}}return h},always:function(d){return this.then(d,d)},done:function(d){return this.then(d)},fail:function(d){return this.then(null,d)},_thenRunCallbacks:function(f,e){var d;if(b.isFunction(f)){var h=f;d={success:function(j){h(j,null)},error:function(j){h(null,j)}}}else{d=b.clone(f)}d=d||{};return this.then(function(j){if(d.success){d.success.apply(this,arguments)}else{if(e){e.trigger("sync",e,j,d)}}return c.Promise.as.apply(c.Promise,arguments)},function(j){if(d.error){if(!b.isUndefined(e)){d.error(e,j)}else{d.error(j)}}else{if(e){e.trigger("error",e,j,d)}}return c.Promise.error(j)})},_continueWith:function(d){return this.then(function(){return d(arguments,null)},function(e){return d(null,e)})}})}(this));(function(b){b.Parse=b.Parse||{};var e=b.Parse;var d=e._;var c=function(j){if(j<26){return String.fromCharCode(65+j)}if(j<52){return String.fromCharCode(97+(j-26))}if(j<62){return String.fromCharCode(48+(j-52))}if(j===62){return"+"}if(j===63){return"/"}throw"Tried to encode large digit "+j+" in base64."};var a=function(k){var j=[];j.length=Math.ceil(k.length/3);d.times(j.length,function(o){var n=k[o*3];var m=k[o*3+1]||0;var l=k[o*3+2]||0;var r=(o*3+1)<k.length;var q=(o*3+2)<k.length;j[o]=[c((n>>2)&63),c(((n<<4)&48)|((m>>4)&15)),r?c(((m<<2)&60)|((l>>6)&3)):"=",q?c(l&63):"="].join("")});return j.join("")};var h={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var f=function(k,l){var m=new e.Promise();if(typeof(FileReader)==="undefined"){return e.Promise.error(new e.Error(e.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser."))}var j=new FileReader();j.onloadend=function(){if(j.readyState!==2){m.reject(new e.Error(e.Error.FILE_READ_ERROR,"Error reading file."));return}var o=j.result;var n=/^data:([^;]*);base64,(.*)$/.exec(o);if(!n){m.reject(new e.Error(e.ERROR.FILE_READ_ERROR,"Unable to interpret data URL: "+o));return}m.resolve(n[2],l||n[1])};j.readAsDataURL(k);return m};e.File=function(k,n,l){this._name=k;var q=/\.([^.]*)$/.exec(k);if(q){q=q[1].toLowerCase()}var o=l||h[q]||"text/plain";if(d.isArray(n)){this._source=e.Promise.as(a(n),o)}else{if(n&&n.base64){var j=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/;var m=j.exec(n.base64);if(m&&m.length>0){this._source=e.Promise.as((m.length===4?m[3]:m[2]),m[1])}else{this._source=e.Promise.as(n.base64,o)}}else{if(typeof(File)!=="undefined"&&n instanceof File){this._source=f(n,l)}else{if(d.isString(n)){throw"Creating a Parse.File from a String is not yet supported."}}}}};e.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(k){k=k||{};var j=this;if(!j._previousSave){j._previousSave=j._source.then(function(l,m){var n={base64:l,_ContentType:m};return e._request({route:"files",className:j._name,method:"POST",data:n,useMasterKey:k.useMasterKey})}).then(function(l){j._name=l.name;j._url=l.url;return j})}return j._previousSave._thenRunCallbacks(k)}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Object=function(d,e){if(b.isString(d)){return c.Object._create.apply(this,arguments)}d=d||{};if(e&&e.parse){d=this.parse(d)}var f=c._getValue(this,"defaults");if(f){d=b.extend({},f,d)}if(e&&e.collection){this.collection=e.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=b.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(d,{silent:true})){throw new Error("Can't create an invalid Parse.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=b.clone(this.attributes);this.initialize.apply(this,arguments)};c.Object.saveAll=function(e,d){d=d||{};return c.Object._deepSaveAsync(e,{useMasterKey:d.useMasterKey})._thenRunCallbacks(d)};c.Object.destroyAll=function(h,f){f=f||{};var k=function(m){m.trigger("destroy",m,m.collection,f)};var l=[];var d=function(m){var n=c.Promise.as();if(m.length>0){n=n.then(function(){return c._request({route:"batch",method:"POST",useMasterKey:f.useMasterKey,data:{requests:b.map(m,function(o){return{method:"DELETE",path:"/1/classes/"+o.className+"/"+o.id}})}})}).then(function(q,o,r){c._arrayEach(m,function(t,u){if(q[u].success&&f.wait){k(t)}else{if(q[u].error){var s=new c.Error(q[u].error.code,q[u].error.error);s.object=t;l.push(s)}}})})}return n};var j=c.Promise.as();var e=[];c._arrayEach(h,function(m,n){if(!m.id||!f.wait){k(m)}if(m.id){e.push(m)}if(e.length===20||n+1===h.length){var o=e;e=[];j=j.then(function(){return d(o)})}});return j.then(function(){if(l.length===0){return true}else{var m=new c.Error(c.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");m.errors=l;return c.Promise.error(m)}})._thenRunCallbacks(f)};b.extend(c.Object.prototype,c.Events,{_existed:false,initialize:function(){},toJSON:function(){var d=this._toFullJSON();c._arrayEach(["__type","className"],function(e){delete d[e]});return d},_toFullJSON:function(e){var d=b.clone(this.attributes);c._objectEach(d,function(h,f){d[f]=c._encode(h,e)});c._objectEach(this._operations,function(h,f){d[f]=h});if(b.has(this,"id")){d.objectId=this.id}if(b.has(this,"createdAt")){if(b.isDate(this.createdAt)){d.createdAt=this.createdAt.toJSON()}else{d.createdAt=this.createdAt}}if(b.has(this,"updatedAt")){if(b.isDate(this.updatedAt)){d.updatedAt=this.updatedAt.toJSON()}else{d.updatedAt=this.updatedAt}}d.__type="Object";d.className=this.className;return d},_refreshCache:function(){var d=this;if(d._refreshingCache){return}d._refreshingCache=true;c._objectEach(this.attributes,function(f,e){if(f instanceof c.Object){f._refreshCache()}else{if(b.isObject(f)){if(d._resetCacheForKey(e)){d.set(e,new c.Op.Set(f),{silent:true})}}}});delete d._refreshingCache},dirty:function(d){this._refreshCache();var e=b.last(this._opSetQueue);if(d){return(e[d]?true:false)}if(!this.id){return true}if(b.keys(e).length>0){return true}return false},dirtyKeys:function(){return b.keys(b.last(this._opSetQueue))},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(d){return this.attributes[d]},relation:function(d){var e=this.get(d);if(e){if(!(e instanceof c.Relation)){throw"Called relation() on non-relation field "+d}e._ensureParentAndKey(this,d);return e}else{return new c.Relation(this,d)}},escape:function(d){var e=this._escapedAttributes[d];if(e){return e}var h=this.attributes[d];var f;if(c._isNullOrUndefined(h)){f=""}else{f=b.escape(h.toString())}this._escapedAttributes[d]=f;return f},has:function(d){return !c._isNullOrUndefined(this.attributes[d])},_mergeMagicFields:function(e){var d=this;var f=["id","objectId","createdAt","updatedAt"];c._arrayEach(f,function(h){if(e[h]){if(h==="objectId"){d.id=e[h]}else{if((h==="createdAt"||h==="updatedAt")&&!b.isDate(e[h])){d[h]=c._parseDate(e[h])}else{d[h]=e[h]}}delete e[h]}})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=this;var d=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);var f=b.first(this._opSetQueue);c._objectEach(d,function(l,j){var k=d[j];var h=f[j];if(k&&h){f[j]=h._mergeWithPrevious(k)}else{if(k){f[j]=k}}});this._saving=this._saving-1},_finishSave:function(f){var d={};c._traverse(this.attributes,function(j){if(j instanceof c.Object&&j.id&&j._hasData){d[j.id]=j}});var h=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);this._applyOpSet(h,this._serverData);this._mergeMagicFields(f);var e=this;c._objectEach(f,function(k,j){e._serverData[j]=c._decode(j,k);var l=c._traverse(e._serverData[j],function(m){if(m instanceof c.Object&&d[m.id]){return d[m.id]}});if(l){e._serverData[j]=l}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(h,e){this._opSetQueue=[{}];this._mergeMagicFields(h);var d=this;var f={};c._objectEach(h,function(k,j){f[j]=c._decode(j,k)});d._serverData=f;this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._hasData=e},_applyOpSet:function(e,f){var d=this;c._objectEach(e,function(j,h){f[h]=j._estimate(f[h],d,h);if(f[h]===c.Op._UNSET){delete f[h]}})},_resetCacheForKey:function(e){var f=this.attributes[e];if(b.isObject(f)&&!(f instanceof c.Object)&&!(f instanceof c.File)){f=f.toJSON?f.toJSON():f;var d=JSON.stringify(f);if(this._hashedJSON[e]!==d){this._hashedJSON[e]=d;return true}}return false},_rebuildEstimatedDataForKey:function(e){var d=this;delete this.attributes[e];if(this._serverData[e]){this.attributes[e]=this._serverData[e]}c._arrayEach(this._opSetQueue,function(f){var h=f[e];if(h){d.attributes[e]=h._estimate(d.attributes[e],d,e);if(d.attributes[e]===c.Op._UNSET){delete d.attributes[e]}else{d._resetCacheForKey(e)}}})},_rebuildAllEstimatedData:function(){var d=this;var e=b.clone(this.attributes);this.attributes=b.clone(this._serverData);c._arrayEach(this._opSetQueue,function(f){d._applyOpSet(f,d.attributes);c._objectEach(f,function(j,h){d._resetCacheForKey(h)})});c._objectEach(e,function(f,h){if(d.attributes[h]!==f){d.trigger("change:"+h,d,d.attributes[h],{})}});c._objectEach(this.attributes,function(h,f){if(!b.has(e,f)){d.trigger("change:"+f,d,h,{})}})},set:function(k,j,n){var l,h;if(b.isObject(k)||c._isNullOrUndefined(k)){l=k;c._objectEach(l,function(q,o){l[o]=c._decode(o,q)});n=j}else{l={};l[k]=c._decode(k,j)}n=n||{};if(!l){return this}if(l instanceof c.Object){l=l.attributes}if(n.unset){c._objectEach(l,function(o,q){l[q]=new c.Op.Unset()})}var f=b.clone(l);var m=this;c._objectEach(f,function(q,o){if(q instanceof c.Op){f[o]=q._estimate(m.attributes[o],m,o);if(f[o]===c.Op._UNSET){delete f[o]}}});if(!this._validate(l,n)){return false}this._mergeMagicFields(l);n.changes={};var d=this._escapedAttributes;var e=this._previousAttributes||{};c._arrayEach(b.keys(l),function(q){var s=l[q];if(s instanceof c.Relation){s.parent=m}if(!(s instanceof c.Op)){s=new c.Op.Set(s)}var o=true;if(s instanceof c.Op.Set&&b.isEqual(m.attributes[q],s.value)){o=false}if(o){delete d[q];if(n.silent){m._silent[q]=true}else{n.changes[q]=true}}var r=b.last(m._opSetQueue);r[q]=s._mergeWithPrevious(r[q]);m._rebuildEstimatedDataForKey(q);if(o){m.changed[q]=m.attributes[q];if(!n.silent){m._pending[q]=true}}else{delete m.changed[q];delete m._pending[q]}});if(!n.silent){this.change(n)}return this},unset:function(d,e){e=e||{};e.unset=true;return this.set(d,null,e)},increment:function(d,e){if(b.isUndefined(e)||b.isNull(e)){e=1}return this.set(d,new c.Op.Increment(e))},add:function(d,e){return this.set(d,new c.Op.Add([e]))},addUnique:function(d,e){return this.set(d,new c.Op.AddUnique([e]))},remove:function(d,e){return this.set(d,new c.Op.Remove([e]))},op:function(d){return b.last(this._opSetQueue)[d]},clear:function(d){d=d||{};d.unset=true;var e=b.extend(this.attributes,this._operations);return this.set(e,d)},_getSaveJSON:function(){var d=b.clone(b.first(this._opSetQueue));c._objectEach(d,function(f,e){d[e]=f.toJSON()});return d},_canBeSerialized:function(){return c.Object._canBeSerializedAsValue(this.attributes)},fetch:function(e){var d=this;e=e||{};var f=c._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:e.useMasterKey});return f.then(function(j,h,k){d._finishFetch(d.parse(j,h,k),true);return d})._thenRunCallbacks(e,this)},save:function(l,k,h){var f,r,m,u,q;if(b.isObject(l)||c._isNullOrUndefined(l)){r=l;u=k}else{r={};r[l]=k;u=h}if(!u&&r){var s=b.reject(r,function(w,v){return b.include(["success","error","wait"],v)});if(s.length===0){var t=true;if(b.has(r,"success")&&!b.isFunction(r.success)){t=false}if(b.has(r,"error")&&!b.isFunction(r.error)){t=false}if(t){return this.save(null,r)}}}u=b.clone(u)||{};if(u.wait){m=b.clone(this.attributes)}var n=b.clone(u)||{};if(n.wait){n.silent=true}var e;n.error=function(w,v){e=v};if(r&&!this.set(r,n)){return c.Promise.error(e)._thenRunCallbacks(u,this)}var j=this;j._refreshCache();var o=[];var d=[];c.Object._findUnsavedChildren(j.attributes,o,d);if(o.length+d.length>0){return c.Object._deepSaveAsync(this.attributes,{useMasterKey:u.useMasterKey}).then(function(){return j.save(null,u)},function(v){return c.Promise.error(v)._thenRunCallbacks(u,j)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||c.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var z=j.id?"PUT":"POST";var w=j._getSaveJSON();var v="classes";var x=j.className;if(j.className==="_User"&&!j.id){v="users";x=null}var y=c._request({route:v,className:x,objectId:j.id,method:z,useMasterKey:u.useMasterKey,data:w});y=y.then(function(D,A,C){var B=j.parse(D,A,C);if(u.wait){B=b.extend(r||{},B)}j._finishSave(B);if(u.wait){j.set(m,n)}return j},function(A){j._cancelSave();return c.Promise.error(A)})._thenRunCallbacks(u,j);return y});return this._allPreviousSaves},destroy:function(e){e=e||{};var d=this;var h=function(){d.trigger("destroy",d,d.collection,e)};if(!this.id){return h()}if(!e.wait){h()}var f=c._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:e.useMasterKey});return f.then(function(){if(e.wait){h()}return d})._thenRunCallbacks(e,this)},parse:function(h,d,f){var e=b.clone(h);b(["createdAt","updatedAt"]).each(function(j){if(e[j]){e[j]=c._parseDate(e[j])}});if(!e.updatedAt){e.updatedAt=e.createdAt}if(d){this._existed=(d!==201)}return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(f){f=f||{};var j=this._changing;this._changing=true;var e=this;c._objectEach(this._silent,function(k){e._pending[k]=true});var h=b.extend({},f.changes,this._silent);this._silent={};c._objectEach(h,function(l,k){e.trigger("change:"+k,e,e.get(k),f)});if(j){return this}var d=function(l,k){if(!e._pending[k]&&!e._silent[k]){delete e.changed[k]}};while(!b.isEmpty(this._pending)){this._pending={};this.trigger("change",this,f);c._objectEach(this.changed,d);e._previousAttributes=b.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},hasChanged:function(d){if(!arguments.length){return !b.isEmpty(this.changed)}return this.changed&&b.has(this.changed,d)},changedAttributes:function(e){if(!e){return this.hasChanged()?b.clone(this.changed):false}var f={};var d=this._previousAttributes;c._objectEach(e,function(j,h){if(!b.isEqual(d[h],j)){f[h]=j}});return f},previous:function(d){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[d]},previousAttributes:function(){return b.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(f,e){if(b.has(f,"ACL")&&!(f.ACL instanceof c.ACL)){return new c.Error(c.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}var d=true;c._objectEach(f,function(h,j){if(!(/^[A-Za-z][0-9A-Za-z_]*$/).test(j)){d=false}});if(!d){return new c.Error(c.Error.INVALID_KEY_NAME)}return false},_validate:function(f,e){if(e.silent||!this.validate){return true}f=b.extend({},this.attributes,f);var d=this.validate(f,e);if(!d){return true}if(e&&e.error){e.error(this,d,e)}else{this.trigger("error",this,d,e)}return false},getACL:function(){return this.get("ACL")},setACL:function(e,d){return this.set("ACL",e,d)}});c.Object._getSubclass=function(e){if(!b.isString(e)){throw"Parse.Object._getSubclass requires a string argument."}var d=c.Object._classMap[e];if(!d){d=c.Object.extend(e);c.Object._classMap[e]=d}return d};c.Object._create=function(h,d,e){var f=c.Object._getSubclass(h);return new f(d,e)};c.Object._classMap={};c.Object._extend=c._extend;c.Object.extend=function(h,f,j){if(!b.isString(h)){if(h&&b.has(h,"className")){return c.Object.extend(h.className,h,f)}else{throw new Error("Parse.Object.extend's first argument should be the className.")}}if(h==="User"&&c.User._performUserRewrite){h="_User"}f=f||{};f.className=h;var d=null;if(b.has(c.Object._classMap,h)){var e=c.Object._classMap[h];d=e._extend(f,j)}else{d=this._extend(f,j)}d.extend=function(l){if(b.isString(l)||(l&&b.has(l,"className"))){return c.Object.extend.apply(d,arguments)}var k=[h].concat(c._.toArray(arguments));return c.Object.extend.apply(d,k)};c.Object._classMap[h]=d;return d};c.Object._findUnsavedChildren=function(d,e,f){c._traverse(d,function(h){if(h instanceof c.Object){h._refreshCache();if(h.dirty()){e.push(h)}return}if(h instanceof c.File){if(!h.url()){f.push(h)}return}})};c.Object._canBeSerializedAsValue=function(d){if(d instanceof c.Object){return !!d.id}if(d instanceof c.File){return true}var e=true;if(b.isArray(d)){c._arrayEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}else{if(b.isObject(d)){c._objectEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}}return e};c.Object._deepSaveAsync=function(f,e){var d=[];var k=[];c.Object._findUnsavedChildren(f,d,k);var l=c.Promise.as();b.each(k,function(m){l=l.then(function(){return m.save(e)})});var j=b.uniq(d);var h=b.uniq(j);return l.then(function(){return c.Promise._continueWhile(function(){return h.length>0},function(){var q=[];var m=[];c._arrayEach(h,function(r){if(q.length>20){m.push(r);return}if(r._canBeSerialized()){q.push(r)}else{m.push(r)}});h=m;if(q.length===0){return c.Promise.error(new c.Error(c.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var n=c.Promise.when(b.map(q,function(r){return r._allPreviousSaves||c.Promise.as()}));var o=new c.Promise();c._arrayEach(q,function(r){r._allPreviousSaves=o});return n._continueWith(function(){return c._request({route:"batch",method:"POST",useMasterKey:e.useMasterKey,data:{requests:b.map(q,function(r){var s=r._getSaveJSON();var u="POST";var t="/1/classes/"+r.className;if(r.id){t=t+"/"+r.id;u="PUT"}r._startSave();return{method:u,path:t,body:s}})}}).then(function(s,r,u){var t;c._arrayEach(q,function(v,w){if(s[w].success){v._finishSave(v.parse(s[w].success,r,u))}else{t=t||s[w].error;v._cancelSave()}});if(t){return c.Promise.error(new c.Error(t.code,t.error))}}).then(function(r){o.resolve(r);return r},function(r){o.reject(r);return c.Promise.error(r)})})})}).then(function(){return f})}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Role=c.Object.extend("_Role",{constructor:function(d,e){if(b.isString(d)&&(e instanceof c.ACL)){c.Object.prototype.constructor.call(this,null,null);this.setName(d);this.setACL(e)}else{c.Object.prototype.constructor.call(this,d,e)}},getName:function(){return this.get("name")},setName:function(e,d){return this.set("name",e,d)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(f,e){if("name" in f&&f.name!==this.getName()){var d=f.name;if(this.id&&this.id!==f.objectId){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!b.isString(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!(/^[0-9a-zA-Z\-_ ]+$/).test(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}if(c.Object.prototype.validate){return c.Object.prototype.validate.call(this,f,e)}return false}})}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.Collection=function(f,e){e=e||{};if(e.comparator){this.comparator=e.comparator}if(e.model){this.model=e.model}if(e.query){this.query=e.query}this._reset();this.initialize.apply(this,arguments);if(f){this.reset(f,{silent:true,parse:e.parse})}};c.extend(d.Collection.prototype,d.Events,{model:d.Object,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(f,q){var l,n,j,m,o,h,k={},e={};q=q||{};f=c.isArray(f)?f.slice():[f];for(l=0,j=f.length;l<j;l++){f[l]=this._prepareModel(f[l],q);m=f[l];if(!m){throw new Error("Can't add an invalid model to a collection")}o=m.cid;if(k[o]||this._byCid[o]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}h=m.id;if(!d._isNullOrUndefined(h)&&(e[h]||this._byId[h])){throw new Error("Duplicate id: can't add the same model to a collection twice")}e[h]=m;k[o]=m}for(l=0;l<j;l++){(m=f[l]).on("all",this._onModelEvent,this);this._byCid[m.cid]=m;if(m.id){this._byId[m.id]=m}}this.length+=j;n=d._isNullOrUndefined(q.at)?this.models.length:q.at;this.models.splice.apply(this.models,[n,0].concat(f));if(this.comparator){this.sort({silent:true})}if(q.silent){return this}for(l=0,j=this.models.length;l<j;l++){m=this.models[l];if(k[m.cid]){q.index=l;m.trigger("add",m,this,q)}}return this},remove:function(m,j){var k,e,h,f;j=j||{};m=c.isArray(m)?m.slice():[m];for(k=0,e=m.length;k<e;k++){f=this.getByCid(m[k])||this.get(m[k]);if(!f){continue}delete this._byId[f.id];delete this._byCid[f.cid];h=this.indexOf(f);this.models.splice(h,1);this.length--;if(!j.silent){j.index=h;f.trigger("remove",f,this,j)}this._removeReference(f)}return this},get:function(e){return e&&this._byId[e.id||e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(f){f=f||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var e=c.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!f.silent){this.trigger("reset",this,f)}return this},pluck:function(e){return c.map(this.models,function(f){return f.get(e)})},reset:function(h,f){var e=this;h=h||[];f=f||{};d._arrayEach(this.models,function(j){e._removeReference(j)});this._reset();this.add(h,{silent:true,parse:f.parse});if(!f.silent){this.trigger("reset",this,f)}return this},fetch:function(e){e=c.clone(e)||{};if(e.parse===undefined){e.parse=true}var h=this;var f=this.query||new d.Query(this.model);return f.find({useMasterKey:e.useMasterKey}).then(function(j){if(e.add){h.add(j,e)}else{h.reset(j,e)}return h})._thenRunCallbacks(e,this)},create:function(f,e){var h=this;e=e?c.clone(e):{};f=this._prepareModel(f,e);if(!f){return false}if(!e.wait){h.add(f,e)}var j=e.success;e.success=function(k,m,l){if(e.wait){h.add(k,e)}if(j){j(k,m)}else{k.trigger("sync",f,m,e)}};f.save(null,e);return f},parse:function(f,e){return f},chain:function(){return c(this.models).chain()},_reset:function(e){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(h,f){if(!(h instanceof d.Object)){var e=h;f.collection=this;h=new this.model(e,f);if(!h._validate(h.attributes,f)){h=false}}else{if(!h.collection){h.collection=this}}return h},_removeReference:function(e){if(this===e.collection){delete e.collection}e.off("all",this._onModelEvent,this)},_onModelEvent:function(h,f,j,e){if((h==="add"||h==="remove")&&j!==this){return}if(h==="destroy"){this.remove(f,e)}if(f&&h==="change:objectId"){delete this._byId[f.previous("objectId")];this._byId[f.id]=f}this.trigger.apply(this,arguments)}});var b=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];d._arrayEach(b,function(e){d.Collection.prototype[e]=function(){return c[e].apply(c,[this.models].concat(c.toArray(arguments)))}});d.Collection.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var e=a.Parse;var d=e._;e.View=function(f){this.cid=d.uniqueId("view");this._configure(f||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var c=/^(\S+)\s*(.*)$/;var b=["model","collection","el","id","attributes","className","tagName"];d.extend(e.View.prototype,e.Events,{tagName:"div",$:function(f){return this.$el.find(f)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(h,f,k){var j=document.createElement(h);if(f){e.$(j).attr(f)}if(k){e.$(j).html(k)}return j},setElement:function(f,h){this.$el=e.$(f);this.el=this.$el[0];if(h!==false){this.delegateEvents()}return this},delegateEvents:function(h){h=h||e._getValue(this,"events");if(!h){return}this.undelegateEvents();var f=this;e._objectEach(h,function(n,m){if(!d.isFunction(n)){n=f[h[m]]}if(!n){throw new Error('Event "'+h[m]+'" does not exist')}var l=m.match(c);var k=l[1],j=l[2];n=d.bind(n,f);k+=".delegateEvents"+f.cid;if(j===""){f.$el.bind(k,n)}else{f.$el.delegate(j,k,n)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(h){if(this.options){h=d.extend({},this.options,h)}var f=this;d.each(b,function(j){if(h[j]){f[j]=h[j]}});this.options=h},_ensureElement:function(){if(!this.el){var f=e._getValue(this,"attributes")||{};if(this.id){f.id=this.id}if(this.className){f["class"]=this.className}this.setElement(this.make(this.tagName,f),false)}else{this.setElement(this.el,false)}}});e.View.extend=e._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.User=c.Object.extend("_User",{_isCurrentUser:false,_mergeMagicFields:function(d){if(d.sessionToken){this._sessionToken=d.sessionToken;delete d.sessionToken}c.User.__super__._mergeMagicFields.call(this,d)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var d=this.get("authData");if(!d){return}c._objectEach(this.get("authData"),function(f,e){if(!d[e]){delete d[e]}})},_synchronizeAllAuthData:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._synchronizeAuthData(f)})},_synchronizeAuthData:function(h){if(!this.isCurrent()){return}var d;if(b.isString(h)){d=h;h=c.User._authProviders[d]}else{d=h.getAuthType()}var e=this.get("authData");if(!e||!h){return}var f=h.restoreAuthentication(e[d]);if(!f){this._unlinkFrom(h)}},_handleSaveResult:function(d){if(d){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(d||this.isCurrent()){c.User._saveCurrentUser(this)}},_linkWith:function(l,f){var e;if(b.isString(l)){e=l;l=c.User._authProviders[l]}else{e=l.getAuthType()}if(b.has(f,"authData")){var h=this.get("authData")||{};h[e]=f.authData;this.set("authData",h);var k=b.clone(f)||{};k.success=function(m){m._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save({authData:h},k)}else{var d=this;var j=new c.Promise();l.authenticate({success:function(n,m){d._linkWith(n,{authData:m,success:f.success,error:f.error}).then(function(){j.resolve(d)})},error:function(n,m){if(f.error){f.error(d,m)}j.reject(m)}});return j}},_unlinkFrom:function(j,f){var e;if(b.isString(j)){e=j;j=c.User._authProviders[j]}else{e=j.getAuthType()}var h=b.clone(f);var d=this;h.authData=null;h.success=function(k){d._synchronizeAuthData(j);if(f.success){f.success.apply(this,arguments)}};return this._linkWith(j,h)},_isLinked:function(f){var d;if(b.isString(f)){d=f}else{d=f.getAuthType()}var e=this.get("authData")||{};return !!e[d]},_logOutWithAll:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._logOutWith(f)})},_logOutWith:function(d){if(!this.isCurrent()){return}if(b.isString(d)){d=c.User._authProviders[d]}if(d&&d.deauthenticate){d.deauthenticate()}},signUp:function(h,f){var e;f=f||{};var k=(h&&h.username)||this.get("username");if(!k||(k==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var d=(h&&h.password)||this.get("password");if(!d||(d==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var j=b.clone(f);j.success=function(l){l._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save(h,j)},logIn:function(e){var d=this;e=e||{};var f=c._request({route:"login",method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(l,h,k){var j=d.parse(l,h,k);d._finishFetch(j);d._handleSaveResult(true);return d})._thenRunCallbacks(e,this)},save:function(j,h,f){var e,m,k,n,l;if(b.isObject(j)||b.isNull(j)||b.isUndefined(j)){m=j;n=h}else{m={};m[j]=h;n=f}n=n||{};var d=b.clone(n);d.success=function(o){o._handleSaveResult(false);if(n.success){n.success.apply(this,arguments)}};return c.Object.prototype.save.call(this,m,d)},fetch:function(d){var e=d?b.clone(d):{};e.success=function(f){f._handleSaveResult(false);if(d&&d.success){d.success.apply(this,arguments)}};return c.Object.prototype.fetch.call(this,e)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(e,d){return this.set("username",e,d)},setPassword:function(e,d){return this.set("password",e,d)},getEmail:function(){return this.get("email")},setEmail:function(e,d){return this.set("email",e,d)},authenticated:function(){return !!this._sessionToken&&(c.User.current()&&c.User.current().id===this.id)}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:true,signUp:function(j,h,f,e){f=f||{};f.username=j;f.password=h;var d=c.Object._create("_User");return d.signUp(f,e)},logIn:function(h,f,e){var d=c.Object._create("_User");d._finishFetch({username:h,password:f});return d.logIn(e)},become:function(d,f){f=f||{};var e=c.Object._create("_User");return c._request({route:"users",className:"me",method:"GET",useMasterKey:f.useMasterKey,sessionToken:d}).then(function(l,h,k){var j=e.parse(l,h,k);e._finishFetch(j);e._handleSaveResult(true);return e})._thenRunCallbacks(f,e)},logOut:function(){if(c.User._currentUser!==null){c.User._currentUser._logOutWithAll();c.User._currentUser._isCurrentUser=false}c.User._currentUserMatchesDisk=true;c.User._currentUser=null;c.localStorage.removeItem(c._getParsePath(c.User._CURRENT_USER_KEY))},requestPasswordReset:function(e,d){d=d||{};var f=c._request({route:"requestPasswordReset",method:"POST",useMasterKey:d.useMasterKey,data:{email:e}});return f._thenRunCallbacks(d)},current:function(){if(c.User._currentUser){return c.User._currentUser}if(c.User._currentUserMatchesDisk){return c.User._currentUser}c.User._currentUserMatchesDisk=true;var d=c.localStorage.getItem(c._getParsePath(c.User._CURRENT_USER_KEY));if(!d){return null}c.User._currentUser=c.Object._create("_User");c.User._currentUser._isCurrentUser=true;var e=JSON.parse(d);c.User._currentUser.id=e._id;delete e._id;c.User._currentUser._sessionToken=e._sessionToken;delete e._sessionToken;c.User._currentUser.set(e);c.User._currentUser._synchronizeAllAuthData();c.User._currentUser._refreshCache();c.User._currentUser._opSetQueue=[{}];return c.User._currentUser},allowCustomUserClass:function(d){this._performUserRewrite=!d},_saveCurrentUser:function(d){if(c.User._currentUser!==d){c.User.logOut()}d._isCurrentUser=true;c.User._currentUser=d;c.User._currentUserMatchesDisk=true;var e=d.toJSON();e._id=d.id;e._sessionToken=d._sessionToken;c.localStorage.setItem(c._getParsePath(c.User._CURRENT_USER_KEY),JSON.stringify(e))},_registerAuthenticationProvider:function(d){c.User._authProviders[d.getAuthType()]=d;if(c.User.current()){c.User.current()._synchronizeAuthData(d.getAuthType())}},_logInWith:function(f,e){var d=c.Object._create("_User");return d._linkWith(f,e)}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Query=function(d){if(b.isString(d)){d=c.Object._getSubclass(d)}this.objectClass=d;this.className=d.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};c.Query.or=function(){var d=b.toArray(arguments);var e=null;c._arrayEach(d,function(h){if(b.isNull(e)){e=h.className}if(e!==h.className){throw"All queries must be for the same class"}});var f=new c.Query(e);f._orQuery(d);return f};c.Query.prototype={get:function(d,f){var e=this;e.equalTo("objectId",d);return e.first().then(function(h){if(h){return h}var j=new c.Error(c.Error.OBJECT_NOT_FOUND,"Object not found.");return c.Promise.error(j)})._thenRunCallbacks(f,null)},toJSON:function(){var d={where:this._where};if(this._include.length>0){d.include=this._include.join(",")}if(this._select){d.keys=this._select.join(",")}if(this._limit>=0){d.limit=this._limit}if(this._skip>0){d.skip=this._skip}if(this._order!==undefined){d.order=this._order}c._objectEach(this._extraOptions,function(f,e){d[e]=f});return d},find:function(e){var d=this;e=e||{};var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(h){return b.map(h.results,function(j){var k;if(h.className){k=new c.Object(h.className)}else{k=new d.objectClass()}k._finishFetch(j,true);return k})})._thenRunCallbacks(e)},count:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=0;h.count=1;var f=c._request({route:"classes",className:d.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return j.count})._thenRunCallbacks(e)},first:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=1;var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return b.map(j.results,function(k){var l=new d.objectClass();l._finishFetch(k,true);return l})[0]})._thenRunCallbacks(e)},collection:function(d,e){e=e||{};return new c.Collection(d,b.extend(e,{model:this.objectClass,query:this}))},skip:function(d){this._skip=d;return this},limit:function(d){this._limit=d;return this},equalTo:function(d,e){if(b.isUndefined(e)){return this.doesNotExist(d)}this._where[d]=c._encode(e);return this},_addCondition:function(d,f,e){if(!this._where[d]){this._where[d]={}}this._where[d][f]=c._encode(e);return this},notEqualTo:function(d,e){this._addCondition(d,"$ne",e);return this},lessThan:function(d,e){this._addCondition(d,"$lt",e);return this},greaterThan:function(d,e){this._addCondition(d,"$gt",e);return this},lessThanOrEqualTo:function(d,e){this._addCondition(d,"$lte",e);return this},greaterThanOrEqualTo:function(d,e){this._addCondition(d,"$gte",e);return this},containedIn:function(e,d){this._addCondition(e,"$in",d);return this},notContainedIn:function(e,d){this._addCondition(e,"$nin",d);return this},containsAll:function(e,d){this._addCondition(e,"$all",d);return this},exists:function(d){this._addCondition(d,"$exists",true);return this},doesNotExist:function(d){this._addCondition(d,"$exists",false);return this},matches:function(e,f,d){this._addCondition(e,"$regex",f);if(!d){d=""}if(f.ignoreCase){d+="i"}if(f.multiline){d+="m"}if(d&&d.length){this._addCondition(e,"$options",d)}return this},matchesQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$inQuery",e);return this},doesNotMatchQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$notInQuery",e);return this},matchesKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$select",{key:d,query:f});return this},doesNotMatchKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$dontSelect",{key:d,query:f});return this},_orQuery:function(d){var e=b.map(d,function(f){return f.toJSON().where});this._where.$or=e;return this},_quote:function(d){return"\\Q"+d.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(d,e){this._addCondition(d,"$regex",this._quote(e));return this},startsWith:function(d,e){this._addCondition(d,"$regex","^"+this._quote(e));return this},endsWith:function(d,e){this._addCondition(d,"$regex",this._quote(e)+"$");return this},ascending:function(d){this._order=d;return this},descending:function(d){this._order="-"+d;return this},near:function(e,d){if(!(d instanceof c.GeoPoint)){d=new c.GeoPoint(d)}this._addCondition(e,"$nearSphere",d);return this},withinRadians:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistance",f);return this},withinMiles:function(e,d,f){return this.withinRadians(e,d,f/3958.8)},withinKilometers:function(e,d,f){return this.withinRadians(e,d,f/6371)},withinGeoBox:function(d,f,e){if(!(f instanceof c.GeoPoint)){f=new c.GeoPoint(f)}if(!(e instanceof c.GeoPoint)){e=new c.GeoPoint(e)}this._addCondition(d,"$within",{"$box":[f,e]});return this},include:function(){var d=this;c._arrayEach(arguments,function(e){if(b.isArray(e)){d._include=d._include.concat(e)}else{d._include.push(e)}});return this},select:function(){var d=this;this._select=this._select||[];c._arrayEach(arguments,function(e){if(b.isArray(e)){d._select=d._select.concat(e)}else{d._select.push(e)}});return this},each:function(k,e){e=e||{};if(this._order||this._skip||(this._limit>=0)){var d="Cannot iterate on a query with sort, skip, or limit.";return c.Promise.error(d)._thenRunCallbacks(e)}var h=new c.Promise();var f=new c.Query(this.objectClass);f._limit=e.batchSize||100;f._where=b.clone(this._where);f._include=b.clone(this._include);f.ascending("objectId");var j=false;return c.Promise._continueWhile(function(){return !j},function(){return f.find().then(function(l){var m=c.Promise.as();c._.each(l,function(n){m=m.then(function(){return k(n)})});return m.then(function(){if(l.length>=f._limit){f.greaterThan("objectId",l[l.length-1].id)}else{j=true}})})})._thenRunCallbacks(e)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";var h=false;var j;var e;var f={authenticate:function(l){var k=this;FB.login(function(m){if(m.authResponse){if(l.success){l.success(k,{id:m.authResponse.userID,access_token:m.authResponse.accessToken,expiration_date:new Date(m.authResponse.expiresIn*1000+(new Date()).getTime()).toJSON()})}}else{if(l.error){l.error(k,m)}}},{scope:j})},restoreAuthentication:function(m){if(m){var k={userID:m.id,accessToken:m.access_token,expiresIn:(d._parseDate(m.expiration_date).getTime()-(new Date()).getTime())/1000};var n=c.clone(e);n.authResponse=k;n.status=false;var l=FB.getAuthResponse();if(l&&l.userID!==k.userID){FB.logout()}FB.init(n)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};d.FacebookUtils={init:function(k){if(typeof(FB)==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}e=c.clone(k)||{};if(e.status&&typeof(console)!=="undefined"){var l=console.warn||console.log||function(){};l.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}e.status=false;FB.init(e);d.User._registerAuthenticationProvider(f);h=true},isLinked:function(k){return k._isLinked("facebook")},logIn:function(l,k){if(!l||c.isString(l)){if(!h){throw"You must initialize FacebookUtils before calling logIn."}j=l;return d.User._logInWith("facebook",k)}else{var m=c.clone(k)||{};m.authData=l;return d.User._logInWith("facebook",m)}},link:function(k,m,l){if(!m||c.isString(m)){if(!h){throw"You must initialize FacebookUtils before calling link."}j=m;return k._linkWith("facebook",l)}else{var n=c.clone(l)||{};n.authData=m;return k._linkWith("facebook",n)}},unlink:function(k,l){if(!h){throw"You must initialize FacebookUtils before calling unlink."}return k._unlinkFrom("facebook",l)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.History=function(){this.handlers=[];c.bindAll(this,"checkUrl")};var e=/^[#\/]/;var b=/msie [\w.]+/;d.History.started=false;c.extend(d.History.prototype,d.Events,{interval:50,getHash:function(j){var h=j?j.location:window.location;var f=h.href.match(/#(.*)$/);return f?f[1]:""},getFragment:function(h,f){if(d._isNullOrUndefined(h)){if(this._hasPushState||f){h=window.location.pathname;var j=window.location.search;if(j){h+=j}}else{h=this.getHash()}}if(!h.indexOf(this.options.root)){h=h.substr(this.options.root.length)}return h.replace(e,"")},start:function(j){if(d.History.started){throw new Error("Parse.history has already been started")}d.History.started=true;this.options=c.extend({},{root:"/"},this.options,j);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var h=this.getFragment();var f=document.documentMode;var l=(b.exec(navigator.userAgent.toLowerCase())&&(!f||f<=7));if(l){this.iframe=d.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(h)}if(this._hasPushState){d.$(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!l){d.$(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}}}this.fragment=h;var m=window.location;var k=m.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!k){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&k&&m.hash){this.fragment=this.getHash().replace(e,"");window.history.replaceState({},document.title,m.protocol+"//"+m.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){d.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);d.History.started=false},route:function(f,h){this.handlers.unshift({route:f,callback:h})},checkUrl:function(h){var f=this.getFragment();if(f===this.fragment&&this.iframe){f=this.getFragment(this.getHash(this.iframe))}if(f===this.fragment){return false}if(this.iframe){this.navigate(f)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(j){var h=this.fragment=this.getFragment(j);var f=c.any(this.handlers,function(k){if(k.route.test(h)){k.callback(h);return true}});return f},navigate:function(j,h){if(!d.History.started){return false}if(!h||h===true){h={trigger:h}}var k=(j||"").replace(e,"");if(this.fragment===k){return}if(this._hasPushState){if(k.indexOf(this.options.root)!==0){k=this.options.root+k}this.fragment=k;var f=h.replace?"replaceState":"pushState";window.history[f]({},document.title,k)}else{if(this._wantsHashChange){this.fragment=k;this._updateHash(window.location,k,h.replace);if(this.iframe&&(k!==this.getFragment(this.getHash(this.iframe)))){if(!h.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,k,h.replace)}}else{window.location.assign(this.options.root+j)}}if(h.trigger){this.loadUrl(j)}},_updateHash:function(f,h,j){if(j){var k=f.toString().replace(/(javascript:|#).*$/,"");f.replace(k+"#"+h)}else{f.hash=h}}})}(this));(function(b){b.Parse=b.Parse||{};var d=b.Parse;var c=d._;d.Router=function(h){h=h||{};if(h.routes){this.routes=h.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var e=/:\w+/g;var f=/\*\w+/g;var a=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;c.extend(d.Router.prototype,d.Events,{initialize:function(){},route:function(h,j,k){d.history=d.history||new d.History();if(!c.isRegExp(h)){h=this._routeToRegExp(h)}if(!k){k=this[j]}d.history.route(h,c.bind(function(m){var l=this._extractParameters(h,m);if(k){k.apply(this,l)}this.trigger.apply(this,["route:"+j].concat(l));d.history.trigger("route",this,j,l)},this));return this},navigate:function(j,h){d.history.navigate(j,h)},_bindRoutes:function(){if(!this.routes){return}var j=[];for(var k in this.routes){if(this.routes.hasOwnProperty(k)){j.unshift([k,this.routes[k]])}}for(var m=0,h=j.length;m<h;m++){this.route(j[m][0],j[m][1],this[j[m][1]])}},_routeToRegExp:function(h){h=h.replace(a,"\\$&").replace(e,"([^/]+)").replace(f,"(.*?)");return new RegExp("^"+h+"$")},_extractParameters:function(h,j){return h.exec(j).slice(1)}});d.Router.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Cloud=c.Cloud||{};b.extend(c.Cloud,{run:function(e,h,d){d=d||{};var f=c._request({route:"functions",className:e,method:"POST",useMasterKey:d.useMasterKey,data:c._encode(h,null,true)});return f.then(function(j){return c._decode(null,j).result})._thenRunCallbacks(d)}})}(this));(function(a){a.Parse=a.Parse||{};var b=a.Parse;b.Installation=b.Object.extend("_Installation");b.Push=b.Push||{};b.Push.send=function(e,c){c=c||{};if(e.where){e.where=e.where.toJSON().where}if(e.push_time){e.push_time=e.push_time.toJSON()}if(e.expiration_time){e.expiration_time=e.expiration_time.toJSON()}if(e.expiration_time&&e.expiration_time_interval){throw"Both expiration_time and expiration_time_interval can't be set"}var d=b._request({route:"push",method:"POST",data:e,useMasterKey:c.useMasterKey});return d._thenRunCallbacks(c)}}(this));var ParseCMS=Parse;Parse=null;ParseCMS.initialize("Q57GWY3hPKQ380QYFtKvH6PD8IQpr1Arz1Qliy9t","9Q58QDNGg1i856YyJF4JZ03dOzLJcYCCmj6xgJj1");
/*!
 * Parse JavaScript SDK
 * Version: 1.2.12
 * Built: Wed Sep 11 2013 11:52:54
 * http://parse.com
 *
 * Copyright 2013 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
(function(a){a.Parse=a.Parse||{};a.Parse.VERSION="js1.2.12"}(this));(function(){var z=this;var m=z._;var G={};var F=Array.prototype,f=Object.prototype,u=Function.prototype;var J=F.push,r=F.slice,B=F.concat,d=f.toString,l=f.hasOwnProperty;var N=F.forEach,t=F.map,H=F.reduce,c=F.reduceRight,b=F.filter,E=F.every,s=F.some,q=F.indexOf,n=F.lastIndexOf,x=Array.isArray,e=Object.keys,I=u.bind;var O=function(P){if(P instanceof O){return P}if(!(this instanceof O)){return new O(P)}this._wrapped=P};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=O}exports._=O}else{z._=O}O.VERSION="1.4.4";var K=O.each=O.forEach=function(U,T,S){if(U==null){return}if(N&&U.forEach===N){U.forEach(T,S)}else{if(U.length===+U.length){for(var R=0,P=U.length;R<P;R++){if(T.call(S,U[R],R,U)===G){return}}}else{for(var Q in U){if(O.has(U,Q)){if(T.call(S,U[Q],Q,U)===G){return}}}}}};O.map=O.collect=function(S,R,Q){var P=[];if(S==null){return P}if(t&&S.map===t){return S.map(R,Q)}K(S,function(V,T,U){P[P.length]=R.call(Q,V,T,U)});return P};var h="Reduce of empty array with no initial value";O.reduce=O.foldl=O.inject=function(T,S,P,R){var Q=arguments.length>2;if(T==null){T=[]}if(H&&T.reduce===H){if(R){S=O.bind(S,R)}return Q?T.reduce(S,P):T.reduce(S)}K(T,function(W,U,V){if(!Q){P=W;Q=true}else{P=S.call(R,P,W,U,V)}});if(!Q){throw new TypeError(h)}return P};O.reduceRight=O.foldr=function(V,S,P,R){var Q=arguments.length>2;if(V==null){V=[]}if(c&&V.reduceRight===c){if(R){S=O.bind(S,R)}return Q?V.reduceRight(S,P):V.reduceRight(S)}var U=V.length;if(U!==+U){var T=O.keys(V);U=T.length}K(V,function(Y,W,X){W=T?T[--U]:--U;if(!Q){P=V[W];Q=true}else{P=S.call(R,P,V[W],W,X)}});if(!Q){throw new TypeError(h)}return P};O.find=O.detect=function(S,R,Q){var P;D(S,function(V,T,U){if(R.call(Q,V,T,U)){P=V;return true}});return P};O.filter=O.select=function(S,R,Q){var P=[];if(S==null){return P}if(b&&S.filter===b){return S.filter(R,Q)}K(S,function(V,T,U){if(R.call(Q,V,T,U)){P[P.length]=V}});return P};O.reject=function(R,Q,P){return O.filter(R,function(U,S,T){return !Q.call(P,U,S,T)},P)};O.every=O.all=function(S,R,Q){R||(R=O.identity);var P=true;if(S==null){return P}if(E&&S.every===E){return S.every(R,Q)}K(S,function(V,T,U){if(!(P=P&&R.call(Q,V,T,U))){return G}});return !!P};var D=O.some=O.any=function(S,R,Q){R||(R=O.identity);var P=false;if(S==null){return P}if(s&&S.some===s){return S.some(R,Q)}K(S,function(V,T,U){if(P||(P=R.call(Q,V,T,U))){return G}});return !!P};O.contains=O.include=function(Q,P){if(Q==null){return false}if(q&&Q.indexOf===q){return Q.indexOf(P)!=-1}return D(Q,function(R){return R===P})};O.invoke=function(R,S){var P=r.call(arguments,2);var Q=O.isFunction(S);return O.map(R,function(T){return(Q?S:T[S]).apply(T,P)})};O.pluck=function(Q,P){return O.map(Q,function(R){return R[P]})};O.where=function(Q,P,R){if(O.isEmpty(P)){return R?null:[]}return O[R?"find":"filter"](Q,function(T){for(var S in P){if(P[S]!==T[S]){return false}}return true})};O.findWhere=function(Q,P){return O.where(Q,P,true)};O.max=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.max.apply(Math,S)}if(!R&&O.isEmpty(S)){return -Infinity}var P={computed:-Infinity,value:-Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U>=P.computed&&(P={value:W,computed:U})});return P.value};O.min=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.min.apply(Math,S)}if(!R&&O.isEmpty(S)){return Infinity}var P={computed:Infinity,value:Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U<P.computed&&(P={value:W,computed:U})});return P.value};O.shuffle=function(S){var R;var Q=0;var P=[];K(S,function(T){R=O.random(Q++);P[Q-1]=P[R];P[R]=T});return P};var a=function(P){return O.isFunction(P)?P:function(Q){return Q[P]}};O.sortBy=function(S,R,P){var Q=a(R);return O.pluck(O.map(S,function(V,T,U){return{value:V,index:T,criteria:Q.call(P,V,T,U)}}).sort(function(W,V){var U=W.criteria;var T=V.criteria;if(U!==T){if(U>T||U===void 0){return 1}if(U<T||T===void 0){return -1}}return W.index<V.index?-1:1}),"value")};var w=function(U,T,Q,S){var P={};var R=a(T||O.identity);K(U,function(X,V){var W=R.call(Q,X,V,U);S(P,W,X)});return P};O.groupBy=function(R,Q,P){return w(R,Q,P,function(S,T,U){(O.has(S,T)?S[T]:(S[T]=[])).push(U)})};O.countBy=function(R,Q,P){return w(R,Q,P,function(S,T){if(!O.has(S,T)){S[T]=0}S[T]++})};O.sortedIndex=function(W,V,S,R){S=S==null?O.identity:a(S);var U=S.call(R,V);var P=0,T=W.length;while(P<T){var Q=(P+T)>>>1;S.call(R,W[Q])<U?P=Q+1:T=Q}return P};O.toArray=function(P){if(!P){return[]}if(O.isArray(P)){return r.call(P)}if(P.length===+P.length){return O.map(P,O.identity)}return O.values(P)};O.size=function(P){if(P==null){return 0}return(P.length===+P.length)?P.length:O.keys(P).length};O.first=O.head=O.take=function(R,Q,P){if(R==null){return void 0}return(Q!=null)&&!P?r.call(R,0,Q):R[0]};O.initial=function(R,Q,P){return r.call(R,0,R.length-((Q==null)||P?1:Q))};O.last=function(R,Q,P){if(R==null){return void 0}if((Q!=null)&&!P){return r.call(R,Math.max(R.length-Q,0))}else{return R[R.length-1]}};O.rest=O.tail=O.drop=function(R,Q,P){return r.call(R,(Q==null)||P?1:Q)};O.compact=function(P){return O.filter(P,O.identity)};var A=function(Q,R,P){K(Q,function(S){if(O.isArray(S)){R?J.apply(P,S):A(S,R,P)}else{P.push(S)}});return P};O.flatten=function(Q,P){return A(Q,P,[])};O.without=function(P){return O.difference(P,r.call(arguments,1))};O.uniq=O.unique=function(V,U,T,S){if(O.isFunction(U)){S=T;T=U;U=false}var Q=T?O.map(V,T,S):V;var R=[];var P=[];K(Q,function(X,W){if(U?(!W||P[P.length-1]!==X):!O.contains(P,X)){P.push(X);R.push(V[W])}});return R};O.union=function(){return O.uniq(B.apply(F,arguments))};O.intersection=function(Q){var P=r.call(arguments,1);return O.filter(O.uniq(Q),function(R){return O.every(P,function(S){return O.indexOf(S,R)>=0})})};O.difference=function(Q){var P=B.apply(F,r.call(arguments,1));return O.filter(Q,function(R){return !O.contains(P,R)})};O.zip=function(){var P=r.call(arguments);var S=O.max(O.pluck(P,"length"));var R=new Array(S);for(var Q=0;Q<S;Q++){R[Q]=O.pluck(P,""+Q)}return R};O.object=function(T,R){if(T==null){return{}}var P={};for(var S=0,Q=T.length;S<Q;S++){if(R){P[T[S]]=R[S]}else{P[T[S][0]]=T[S][1]}}return P};O.indexOf=function(T,R,S){if(T==null){return -1}var Q=0,P=T.length;if(S){if(typeof S=="number"){Q=(S<0?Math.max(0,P+S):S)}else{Q=O.sortedIndex(T,R);return T[Q]===R?Q:-1}}if(q&&T.indexOf===q){return T.indexOf(R,S)}for(;Q<P;Q++){if(T[Q]===R){return Q}}return -1};O.lastIndexOf=function(T,R,S){if(T==null){return -1}var P=S!=null;if(n&&T.lastIndexOf===n){return P?T.lastIndexOf(R,S):T.lastIndexOf(R)}var Q=(P?S:T.length);while(Q--){if(T[Q]===R){return Q}}return -1};O.range=function(U,S,T){if(arguments.length<=1){S=U||0;U=0}T=arguments[2]||1;var Q=Math.max(Math.ceil((S-U)/T),0);var P=0;var R=new Array(Q);while(P<Q){R[P++]=U;U+=T}return R};O.bind=function(R,Q){if(R.bind===I&&I){return I.apply(R,r.call(arguments,1))}var P=r.call(arguments,2);return function(){return R.apply(Q,P.concat(r.call(arguments)))}};O.partial=function(Q){var P=r.call(arguments,1);return function(){return Q.apply(this,P.concat(r.call(arguments)))}};O.bindAll=function(Q){var P=r.call(arguments,1);if(P.length===0){P=O.functions(Q)}K(P,function(R){Q[R]=O.bind(Q[R],Q)});return Q};O.memoize=function(R,Q){var P={};Q||(Q=O.identity);return function(){var S=Q.apply(this,arguments);return O.has(P,S)?P[S]:(P[S]=R.apply(this,arguments))}};O.delay=function(Q,R){var P=r.call(arguments,2);return setTimeout(function(){return Q.apply(null,P)},R)};O.defer=function(P){return O.delay.apply(O,[P,1].concat(r.call(arguments,1)))};O.throttle=function(U,W){var S,R,V,P;var T=0;var Q=function(){T=new Date;V=null;P=U.apply(S,R)};return function(){var X=new Date;var Y=W-(X-T);S=this;R=arguments;if(Y<=0){clearTimeout(V);V=null;T=X;P=U.apply(S,R)}else{if(!V){V=setTimeout(Q,Y)}}return P}};O.debounce=function(R,T,Q){var S,P;return function(){var X=this,W=arguments;var V=function(){S=null;if(!Q){P=R.apply(X,W)}};var U=Q&&!S;clearTimeout(S);S=setTimeout(V,T);if(U){P=R.apply(X,W)}return P}};O.once=function(R){var P=false,Q;return function(){if(P){return Q}P=true;Q=R.apply(this,arguments);R=null;return Q}};O.wrap=function(P,Q){return function(){var R=[P];J.apply(R,arguments);return Q.apply(this,R)}};O.compose=function(){var P=arguments;return function(){var Q=arguments;for(var R=P.length-1;R>=0;R--){Q=[P[R].apply(this,Q)]}return Q[0]}};O.after=function(Q,P){if(Q<=0){return P()}return function(){if(--Q<1){return P.apply(this,arguments)}}};O.keys=e||function(R){if(R!==Object(R)){throw new TypeError("Invalid object")}var Q=[];for(var P in R){if(O.has(R,P)){Q[Q.length]=P}}return Q};O.values=function(R){var P=[];for(var Q in R){if(O.has(R,Q)){P.push(R[Q])}}return P};O.pairs=function(R){var Q=[];for(var P in R){if(O.has(R,P)){Q.push([P,R[P]])}}return Q};O.invert=function(R){var P={};for(var Q in R){if(O.has(R,Q)){P[R[Q]]=Q}}return P};O.functions=O.methods=function(R){var Q=[];for(var P in R){if(O.isFunction(R[P])){Q.push(P)}}return Q.sort()};O.extend=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){P[R]=Q[R]}}});return P};O.pick=function(Q){var R={};var P=B.apply(F,r.call(arguments,1));K(P,function(S){if(S in Q){R[S]=Q[S]}});return R};O.omit=function(R){var S={};var Q=B.apply(F,r.call(arguments,1));for(var P in R){if(!O.contains(Q,P)){S[P]=R[P]}}return S};O.defaults=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){if(P[R]==null){P[R]=Q[R]}}}});return P};O.clone=function(P){if(!O.isObject(P)){return P}return O.isArray(P)?P.slice():O.extend({},P)};O.tap=function(Q,P){P(Q);return Q};var L=function(W,V,Q,R){if(W===V){return W!==0||1/W==1/V}if(W==null||V==null){return W===V}if(W instanceof O){W=W._wrapped}if(V instanceof O){V=V._wrapped}var T=d.call(W);if(T!=d.call(V)){return false}switch(T){case"[object String]":return W==String(V);case"[object Number]":return W!=+W?V!=+V:(W==0?1/W==1/V:W==+V);case"[object Date]":case"[object Boolean]":return +W==+V;case"[object RegExp]":return W.source==V.source&&W.global==V.global&&W.multiline==V.multiline&&W.ignoreCase==V.ignoreCase}if(typeof W!="object"||typeof V!="object"){return false}var P=Q.length;while(P--){if(Q[P]==W){return R[P]==V}}Q.push(W);R.push(V);var Y=0,Z=true;if(T=="[object Array]"){Y=W.length;Z=Y==V.length;if(Z){while(Y--){if(!(Z=L(W[Y],V[Y],Q,R))){break}}}}else{var U=W.constructor,S=V.constructor;if(U!==S&&!(O.isFunction(U)&&(U instanceof U)&&O.isFunction(S)&&(S instanceof S))){return false}for(var X in W){if(O.has(W,X)){Y++;if(!(Z=O.has(V,X)&&L(W[X],V[X],Q,R))){break}}}if(Z){for(X in V){if(O.has(V,X)&&!(Y--)){break}}Z=!Y}}Q.pop();R.pop();return Z};O.isEqual=function(Q,P){return L(Q,P,[],[])};O.isEmpty=function(Q){if(Q==null){return true}if(O.isArray(Q)||O.isString(Q)){return Q.length===0}for(var P in Q){if(O.has(Q,P)){return false}}return true};O.isElement=function(P){return !!(P&&P.nodeType===1)};O.isArray=x||function(P){return d.call(P)=="[object Array]"};O.isObject=function(P){return P===Object(P)};K(["Arguments","Function","String","Number","Date","RegExp"],function(P){O["is"+P]=function(Q){return d.call(Q)=="[object "+P+"]"}});if(!O.isArguments(arguments)){O.isArguments=function(P){return !!(P&&O.has(P,"callee"))}}if(typeof(/./)!=="function"){O.isFunction=function(P){return typeof P==="function"}}O.isFinite=function(P){return isFinite(P)&&!isNaN(parseFloat(P))};O.isNaN=function(P){return O.isNumber(P)&&P!=+P};O.isBoolean=function(P){return P===true||P===false||d.call(P)=="[object Boolean]"};O.isNull=function(P){return P===null};O.isUndefined=function(P){return P===void 0};O.has=function(Q,P){return l.call(Q,P)};O.noConflict=function(){z._=m;return this};O.identity=function(P){return P};O.times=function(T,S,R){var P=Array(T);for(var Q=0;Q<T;Q++){P[Q]=S.call(R,Q)}return P};O.random=function(Q,P){if(P==null){P=Q;Q=0}return Q+Math.floor(Math.random()*(P-Q+1))};var o={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};o.unescape=O.invert(o.escape);var M={escape:new RegExp("["+O.keys(o.escape).join("")+"]","g"),unescape:new RegExp("("+O.keys(o.unescape).join("|")+")","g")};O.each(["escape","unescape"],function(P){O[P]=function(Q){if(Q==null){return""}return(""+Q).replace(M[P],function(R){return o[P][R]})}});O.result=function(P,R){if(P==null){return null}var Q=P[R];return O.isFunction(Q)?Q.call(P):Q};O.mixin=function(P){K(O.functions(P),function(Q){var R=O[Q]=P[Q];O.prototype[Q]=function(){var S=[this._wrapped];J.apply(S,arguments);return v.call(this,R.apply(O,S))}})};var C=0;O.uniqueId=function(P){var Q=++C+"";return P?P+Q:Q};O.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/;var j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var k=/\\|'|\r|\n|\t|\u2028|\u2029/g;O.template=function(X,S,R){var Q;R=O.defaults({},R,O.templateSettings);var T=new RegExp([(R.escape||y).source,(R.interpolate||y).source,(R.evaluate||y).source].join("|")+"|$","g");var U=0;var P="__p+='";X.replace(T,function(Z,aa,Y,ac,ab){P+=X.slice(U,ab).replace(k,function(ad){return"\\"+j[ad]});if(aa){P+="'+\n((__t=("+aa+"))==null?'':_.escape(__t))+\n'"}if(Y){P+="'+\n((__t=("+Y+"))==null?'':__t)+\n'"}if(ac){P+="';\n"+ac+"\n__p+='"}U=ab+Z.length;return Z});P+="';\n";if(!R.variable){P="with(obj||{}){\n"+P+"}\n"}P="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+P+"return __p;\n";try{Q=new Function(R.variable||"obj","_",P)}catch(V){V.source=P;throw V}if(S){return Q(S,O)}var W=function(Y){return Q.call(this,Y,O)};W.source="function("+(R.variable||"obj")+"){\n"+P+"}";return W};O.chain=function(P){return O(P).chain()};var v=function(P){return this._chain?O(P).chain():P};O.mixin(O);K(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var Q=F[P];O.prototype[P]=function(){var R=this._wrapped;Q.apply(R,arguments);if((P=="shift"||P=="splice")&&R.length===0){delete R[0]}return v.call(this,R)}});K(["concat","join","slice"],function(P){var Q=F[P];O.prototype[P]=function(){return v.call(this,Q.apply(this._wrapped,arguments))}});O.extend(O.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(a){a.Parse=a.Parse||{};var c=a.Parse;if(typeof(exports)!=="undefined"&&exports._){c._=exports._.noConflict();c.localStorage=require("localStorage");c.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;exports.Parse=c}else{c._=_.noConflict();if(typeof(localStorage)!=="undefined"){c.localStorage=localStorage}if(typeof(XMLHttpRequest)!=="undefined"){c.XMLHttpRequest=XMLHttpRequest}}if(typeof($)!=="undefined"){c.$=$}var b=function(){};var d=function(f,e,h){var j;if(e&&e.hasOwnProperty("constructor")){j=e.constructor}else{j=function(){f.apply(this,arguments)}}c._.extend(j,f);b.prototype=f.prototype;j.prototype=new b();if(e){c._.extend(j.prototype,e)}if(h){c._.extend(j,h)}j.prototype.constructor=j;j.__super__=f.prototype;return j};c.serverURL="https://api.parse.com";if(typeof(process)!=="undefined"&&process.versions&&process.versions.node){c._isNode=true}c.initialize=function(h,f,e){if(e){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}c._initialize(h,f)};c._initialize=function(h,f,e){c.applicationId=h;c.javaScriptKey=f;c.masterKey=e;c._useMasterKey=false};if(c._isNode){c.initialize=c._initialize;c.Cloud=c.Cloud||{};c.Cloud.useMasterKey=function(){c._useMasterKey=true}}c._getParsePath=function(e){if(!c.applicationId){throw"You need to call Parse.initialize before using Parse."}if(!e){e=""}if(!c._.isString(e)){throw"Tried to get a localStorage path that wasn't a String."}if(e[0]==="/"){e=e.substring(1)}return"Parse/"+c.applicationId+"/"+e};c._installationId=null;c._getInstallationId=function(){if(c._installationId){return c._installationId}var f=c._getParsePath("installationId");c._installationId=c.localStorage.getItem(f);if(!c._installationId||c._installationId===""){var e=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};c._installationId=(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e());c.localStorage.setItem(f,c._installationId)}return c._installationId};c._parseDate=function(q){var m=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$");var k=m.exec(q);if(!k){return null}var n=k[1]||0;var l=(k[2]||1)-1;var o=k[3]||0;var h=k[4]||0;var f=k[5]||0;var e=k[6]||0;var j=k[8]||0;return new Date(Date.UTC(n,l,o,h,f,e,j))};c._ajaxIE8=function(k,f,h){var j=new c.Promise();var e=new XDomainRequest();e.onload=function(){var l;try{l=JSON.parse(e.responseText)}catch(m){j.reject(m)}if(l){j.resolve(l)}};e.onerror=e.ontimeout=function(){j.reject(e)};e.onprogress=function(){};e.open(k,f);e.send(h);return j};c._ajax=function(e,f,h,l,k){var o={success:l,error:k};if(typeof(XDomainRequest)!=="undefined"){return c._ajaxIE8(e,f,h)._thenRunCallbacks(o)}var n=new c.Promise();var j=false;var m=new c.XMLHttpRequest();m.onreadystatechange=function(){if(m.readyState===4){if(j){return}j=true;if(m.status>=200&&m.status<300){var q;try{q=JSON.parse(m.responseText)}catch(r){n.reject(r)}if(q){n.resolve(q,m.status,m)}}else{n.reject(m)}}};m.open(e,f,true);m.setRequestHeader("Content-Type","text/plain");if(c._isNode){m.setRequestHeader("User-Agent","Parse/"+c.VERSION+" (NodeJS "+process.versions.node+")")}m.send(h);return n._thenRunCallbacks(o)};c._extend=function(e,f){var h=d(this,e,f);h.extend=this.extend;return h};c._request=function(q){var o=q.route;var m=q.className;var n=q.objectId;var e=q.method;var h=q.useMasterKey;var k=q.data;if(!c.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!c.javaScriptKey&&!c.masterKey){throw"You must specify a key using Parse.initialize."}if(o!=="batch"&&o!=="classes"&&o!=="events"&&o!=="files"&&o!=="functions"&&o!=="login"&&o!=="push"&&o!=="requestPasswordReset"&&o!=="users"&&o!=="jobs"){throw"Bad route: '"+o+"'."}var f=c.serverURL;if(f.charAt(f.length-1)!=="/"){f+="/"}f+="1/"+o;if(m){f+="/"+m}if(n){f+="/"+n}k=c._.clone(k||{});if(e!=="POST"){k._method=e;e="POST"}if(c._.isUndefined(h)){h=c._useMasterKey}k._ApplicationId=c.applicationId;if(!h){k._JavaScriptKey=c.javaScriptKey}else{k._MasterKey=c.masterKey}k._ClientVersion=c.VERSION;k._InstallationId=c._getInstallationId();var j=c.User.current();if(j&&j._sessionToken){k._SessionToken=j._sessionToken}var l=JSON.stringify(k);return c._ajax(e,f,l).then(null,function(r){var t;if(r&&r.responseText){try{var s=JSON.parse(r.responseText);if(s){t=new c.Error(s.code,s.error)}}catch(u){}}t=t||new c.Error(-1,r.responseText);return c.Promise.error(t)})};c._getValue=function(e,f){if(!(e&&e[f])){return null}return c._.isFunction(e[f])?e[f]():e[f]};c._encode=function(k,j,h){var f=c._;if(k instanceof c.Object){if(h){throw"Parse.Objects not allowed here"}if(!j||f.include(j,k)||!k._hasData){return k._toPointer()}if(!k.dirty()){j=j.concat(k);return c._encode(k._toFullJSON(j),j,h)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(k instanceof c.ACL){return k.toJSON()}if(f.isDate(k)){return{__type:"Date",iso:k.toJSON()}}if(k instanceof c.GeoPoint){return k.toJSON()}if(f.isArray(k)){return f.map(k,function(l){return c._encode(l,j,h)})}if(f.isRegExp(k)){return k.source}if(k instanceof c.Relation){return k.toJSON()}if(k instanceof c.Op){return k.toJSON()}if(k instanceof c.File){if(!k.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:k.name(),url:k.url()}}if(f.isObject(k)){var e={};c._objectEach(k,function(m,l){e[l]=c._encode(m,j,h)});return e}return k};c._decode=function(j,m){var f=c._;if(!f.isObject(m)){return m}if(f.isArray(m)){c._arrayEach(m,function(q,o){m[o]=c._decode(o,q)});return m}if(m instanceof c.Object){return m}if(m instanceof c.File){return m}if(m instanceof c.Op){return m}if(m.__op){return c.Op._decode(m)}if(m.__type==="Pointer"){var n=c.Object._create(m.className);n._finishFetch({objectId:m.objectId},false);return n}if(m.__type==="Object"){var k=m.className;delete m.__type;delete m.className;var e=c.Object._create(k);e._finishFetch(m,true);return e}if(m.__type==="Date"){return c._parseDate(m.iso)}if(m.__type==="GeoPoint"){return new c.GeoPoint({latitude:m.latitude,longitude:m.longitude})}if(j==="ACL"){if(m instanceof c.ACL){return m}return new c.ACL(m)}if(m.__type==="Relation"){var l=new c.Relation(null,j);l.targetClassName=m.className;return l}if(m.__type==="File"){var h=new c.File(m.name);h._url=m.url;return h}c._objectEach(m,function(q,o){m[o]=c._decode(o,q)});return m};c._arrayEach=c._.each;c._traverse=function(f,h,e){if(f instanceof c.Object){e=e||[];if(c._.indexOf(e,f)>=0){return}e.push(f);c._traverse(f.attributes,h,e);return h(f)}if(f instanceof c.Relation||f instanceof c.File){return h(f)}if(c._.isArray(f)){c._.each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}if(c._.isObject(f)){c._each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}return h(f)};c._objectEach=c._each=function(f,h){var e=c._;if(e.isObject(f)){e.each(e.keys(f),function(j){h(f[j],j)})}else{e.each(f,h)}};c._isNullOrUndefined=function(e){return c._.isNull(e)||c._.isUndefined(e)}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Analytics=c.Analytics||{};b.extend(c.Analytics,{track:function(d,e){if(!d||d.trim().length===0){throw"A name for the custom event must be provided"}b.each(e,function(h,f){if(!b.isString(f)||!b.isString(h)){throw'track() dimensions expects keys and values of type "string".'}});return c._request({route:"events",className:d,method:"POST",data:{dimensions:e}})}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Error=function(e,d){this.code=e;this.message=d};b.extend(c.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600})}(this));(function(){var a=this;var c=(a.Parse||(a.Parse={}));var b=/\s+/;var d=Array.prototype.slice;c.Events={on:function(j,n,h){var f,l,k,e,m;if(!n){return this}j=j.split(b);f=this._callbacks||(this._callbacks={});l=j.shift();while(l){m=f[l];k=m?m.tail:{};k.next=e={};k.context=h;k.callback=n;f[l]={tail:e,next:m?m.next:k};l=j.shift()}return this},off:function(n,l,f){var e,o,h,k,j,m;if(!(o=this._callbacks)){return}if(!(n||l||f)){delete this._callbacks;return this}n=n?n.split(b):_.keys(o);e=n.shift();while(e){h=o[e];delete o[e];if(!h||!(l||f)){continue}k=h.tail;h=h.next;while(h!==k){j=h.callback;m=h.context;if((l&&j!==l)||(f&&m!==f)){this.on(e,j,m)}h=h.next}e=n.shift()}return this},trigger:function(j){var n,m,h,f,e,l,k;if(!(h=this._callbacks)){return this}l=h.all;j=j.split(b);k=d.call(arguments,1);n=j.shift();while(n){m=h[n];if(m){f=m.tail;while((m=m.next)!==f){m.callback.apply(m.context||this,k)}}m=l;if(m){f=m.tail;e=[n].concat(k);while((m=m.next)!==f){m.callback.apply(m.context||this,e)}}n=j.shift()}return this}};c.Events.bind=c.Events.on;c.Events.unbind=c.Events.off}.call(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.GeoPoint=function(f,e){if(b.isArray(f)){c.GeoPoint._validate(f[0],f[1]);this.latitude=f[0];this.longitude=f[1]}else{if(b.isObject(f)){c.GeoPoint._validate(f.latitude,f.longitude);this.latitude=f.latitude;this.longitude=f.longitude}else{if(b.isNumber(f)&&b.isNumber(e)){c.GeoPoint._validate(f,e);this.latitude=f;this.longitude=e}else{this.latitude=0;this.longitude=0}}}var d=this;if(this.__defineGetter__&&this.__defineSetter__){this._latitude=this.latitude;this._longitude=this.longitude;this.__defineGetter__("latitude",function(){return d._latitude});this.__defineGetter__("longitude",function(){return d._longitude});this.__defineSetter__("latitude",function(h){c.GeoPoint._validate(h,d.longitude);d._latitude=h});this.__defineSetter__("longitude",function(h){c.GeoPoint._validate(d.latitude,h);d._longitude=h})}};c.GeoPoint._validate=function(e,d){if(e<-90){throw"Parse.GeoPoint latitude "+e+" < -90.0."}if(e>90){throw"Parse.GeoPoint latitude "+e+" > 90.0."}if(d<-180){throw"Parse.GeoPoint longitude "+d+" < -180.0."}if(d>180){throw"Parse.GeoPoint longitude "+d+" > 180.0."}};c.GeoPoint.current=function(d){var e=new c.Promise();navigator.geolocation.getCurrentPosition(function(f){e.resolve(new c.GeoPoint({latitude:f.coords.latitude,longitude:f.coords.longitude}))},function(f){e.reject(f)});return e._thenRunCallbacks(d)};c.GeoPoint.prototype={toJSON:function(){c.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(q){var j=Math.PI/180;var d=this.latitude*j;var l=this.longitude*j;var o=q.latitude*j;var h=q.longitude*j;var f=d-o;var k=l-h;var e=Math.sin(f/2);var m=Math.sin(k/2);var n=((e*e)+(Math.cos(d)*Math.cos(o)*m*m));n=Math.min(1,n);return 2*Math.asin(Math.sqrt(n))},kilometersTo:function(d){return this.radiansTo(d)*6371},milesTo:function(d){return this.radiansTo(d)*3958.8}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";d.ACL=function(f){var e=this;e.permissionsById={};if(c.isObject(f)){if(f instanceof d.User){e.setReadAccess(f,true);e.setWriteAccess(f,true)}else{if(c.isFunction(f)){throw"Parse.ACL() called with a function.  Did you forget ()?"}d._objectEach(f,function(j,h){if(!c.isString(h)){throw"Tried to create an ACL with an invalid userId."}e.permissionsById[h]={};d._objectEach(j,function(l,k){if(k!=="read"&&k!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!c.isBoolean(l)){throw"Tried to create an ACL with an invalid permission value."}e.permissionsById[h][k]=l})})}}};d.ACL.prototype.toJSON=function(){return c.clone(this.permissionsById)};d.ACL.prototype._setAccess=function(e,f,j){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}if(!c.isString(f)){throw"userId must be a string."}if(!c.isBoolean(j)){throw"allowed must be either true or false."}var h=this.permissionsById[f];if(!h){if(!j){return}else{h={};this.permissionsById[f]=h}}if(j){this.permissionsById[f][e]=true}else{delete h[e];if(c.isEmpty(h)){delete h[f]}}};d.ACL.prototype._getAccess=function(e,f){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}var h=this.permissionsById[f];if(!h){return false}return h[e]?true:false};d.ACL.prototype.setReadAccess=function(e,f){this._setAccess("read",e,f)};d.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)};d.ACL.prototype.setWriteAccess=function(e,f){this._setAccess("write",e,f)};d.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)};d.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(b,e)};d.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(b)};d.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(b,e)};d.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(b)};d.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getReadAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getWriteAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleReadAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setReadAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleWriteAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setWriteAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Op=function(){this._initialize.apply(this,arguments)};c.Op.prototype={_initialize:function(){}};b.extend(c.Op,{_extend:c._extend,_opDecoderMap:{},_registerDecoder:function(d,e){c.Op._opDecoderMap[d]=e},_decode:function(d){var e=c.Op._opDecoderMap[d.__op];if(e){return e(d)}else{return undefined}}});c.Op._registerDecoder("Batch",function(d){var e=null;c._arrayEach(d.ops,function(f){f=c.Op._decode(f);e=f._mergeWithPrevious(e)});return e});c.Op.Set=c.Op._extend({_initialize:function(d){this._value=d},value:function(){return this._value},toJSON:function(){return c._encode(this.value())},_mergeWithPrevious:function(d){return this},_estimate:function(d){return this.value()}});c.Op._UNSET={};c.Op.Unset=c.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(d){return this},_estimate:function(d){return c.Op._UNSET}});c.Op._registerDecoder("Delete",function(d){return new c.Op.Unset()});c.Op.Increment=c.Op._extend({_initialize:function(d){this._amount=d},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.amount())}else{if(d instanceof c.Op.Set){return new c.Op.Set(d.value()+this.amount())}else{if(d instanceof c.Op.Increment){return new c.Op.Increment(this.amount()+d.amount())}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return this.amount()}return d+this.amount()}});c.Op._registerDecoder("Increment",function(d){return new c.Op.Increment(d.amount)});c.Op.Add=c.Op._extend({_initialize:function(d){this._objects=d},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Add){return new c.Op.Add(d.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{return d.concat(this.objects())}}});c.Op._registerDecoder("Add",function(d){return new c.Op.Add(c._decode(undefined,d.objects))});c.Op.AddUnique=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.AddUnique){return new c.Op.AddUnique(this._estimate(d.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{var e=b.clone(d);c._arrayEach(this.objects(),function(j){if(j instanceof c.Object&&j.id){var h=b.find(e,function(k){return(k instanceof c.Object)&&(k.id===j.id)});if(!h){e.push(j)}else{var f=b.indexOf(e,h);e[f]=j}}else{if(!b.contains(e,j)){e.push(j)}}});return e}}});c.Op._registerDecoder("AddUnique",function(d){return new c.Op.AddUnique(c._decode(undefined,d.objects))});c.Op.Remove=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return d}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Remove){return new c.Op.Remove(b.union(d.objects(),this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return[]}else{var e=b.difference(d,this.objects());c._arrayEach(this.objects(),function(f){if(f instanceof c.Object&&f.id){e=b.reject(e,function(h){return(h instanceof c.Object)&&(h.id===f.id)})}});return e}}});c.Op._registerDecoder("Remove",function(d){return new c.Op.Remove(c._decode(undefined,d.objects))});c.Op.Relation=c.Op._extend({_initialize:function(h,e){this._targetClassName=null;var d=this;var f=function(j){if(j instanceof c.Object){if(!j.id){throw"You can't add an unsaved Parse.Object to a relation."}if(!d._targetClassName){d._targetClassName=j.className}if(d._targetClassName!==j.className){throw"Tried to create a Parse.Relation with 2 different types: "+d._targetClassName+" and "+j.className+"."}return j.id}return j};this.relationsToAdd=b.uniq(b.map(h,f));this.relationsToRemove=b.uniq(b.map(e,f))},added:function(){var d=this;return b.map(this.relationsToAdd,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},removed:function(){var d=this;return b.map(this.relationsToRemove,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},toJSON:function(){var j=null;var f=null;var e=this;var h=function(k){return{__type:"Pointer",className:e._targetClassName,objectId:k}};var d=null;if(this.relationsToAdd.length>0){d=b.map(this.relationsToAdd,h);j={__op:"AddRelation",objects:d}}if(this.relationsToRemove.length>0){d=b.map(this.relationsToRemove,h);f={__op:"RemoveRelation",objects:d}}if(j&&f){return{__op:"Batch",ops:[j,f]}}return j||f||{}},_mergeWithPrevious:function(h){if(!h){return this}else{if(h instanceof c.Op.Unset){throw"You can't modify a relation after deleting it."}else{if(h instanceof c.Op.Relation){if(h._targetClassName&&h._targetClassName!==this._targetClassName){throw"Related object must be of class "+h._targetClassName+", but "+this._targetClassName+" was passed in."}var f=b.union(b.difference(h.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var e=b.union(b.difference(h.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var d=new c.Op.Relation(f,e);d._targetClassName=this._targetClassName;return d}else{throw"Op is invalid after previous op."}}}},_estimate:function(e,d,f){if(!e){var h=new c.Relation(d,f);h.targetClassName=this._targetClassName}else{if(e instanceof c.Relation){if(this._targetClassName){if(e.targetClassName){if(e.targetClassName!==this._targetClassName){throw"Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{e.targetClassName=this._targetClassName}}return e}else{throw"Op is invalid after previous op."}}}});c.Op._registerDecoder("AddRelation",function(d){return new c.Op.Relation(c._decode(undefined,d.objects),[])});c.Op._registerDecoder("RemoveRelation",function(d){return new c.Op.Relation([],c._decode(undefined,d.objects))})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Relation=function(e,d){this.parent=e;this.key=d;this.targetClassName=null};c.Relation.prototype={_ensureParentAndKey:function(e,d){this.parent=this.parent||e;this.key=this.key||d;if(this.parent!==e){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==d){throw"Internal Error. Relation retrieved from two different keys."}},add:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation(d,[]);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},remove:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation([],d);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var d;var e;if(!this.targetClassName){d=c.Object._getSubclass(this.parent.className);e=new c.Query(d);e._extraOptions.redirectClassNameForKey=this.key}else{d=c.Object._getSubclass(this.targetClassName);e=new c.Query(d)}e._addCondition("$relatedTo","object",this.parent._toPointer());e._addCondition("$relatedTo","key",this.key);return e}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};b.extend(c.Promise,{is:function(d){return d&&d.then&&b.isFunction(d.then)},as:function(){var d=new c.Promise();d.resolve.apply(d,arguments);return d},error:function(){var d=new c.Promise();d.reject.apply(d,arguments);return d},when:function(h){var k;if(h&&c._isNullOrUndefined(h.length)){k=arguments}else{k=h}var j=k.length;var e=false;var f=[];var m=[];f.length=k.length;m.length=k.length;if(j===0){return c.Promise.as.apply(this,f)}var l=new c.Promise();var d=function(){j=j-1;if(j===0){if(e){l.reject(m)}else{l.resolve.apply(l,f)}}};c._arrayEach(k,function(n,o){if(c.Promise.is(n)){n.then(function(q){f[o]=q;d()},function(q){m[o]=q;e=true;d()})}else{f[o]=n;d()}});return l},_continueWhile:function(d,e){if(d()){return e().then(function(){return c.Promise._continueWhile(d,e)})}return c.Promise.as()}});b.extend(c.Promise.prototype,{resolve:function(d){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var e=arguments;c._arrayEach(this._resolvedCallbacks,function(f){f.apply(this,e)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(d){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=d;c._arrayEach(this._rejectedCallbacks,function(e){e(d)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(d,f){var h=new c.Promise();var j=function(){var k=arguments;if(d){k=[d.apply(this,k)]}if(k.length===1&&c.Promise.is(k[0])){k[0].then(function(){h.resolve.apply(h,arguments)},function(l){h.reject(l)})}else{h.resolve.apply(h,k)}};var e=function(l){var k=[];if(f){k=[f(l)];if(k.length===1&&c.Promise.is(k[0])){k[0].then(function(){h.resolve.apply(h,arguments)},function(m){h.reject(m)})}else{h.reject(k[0])}}else{h.reject(l)}};if(this._resolved){j.apply(this,this._result)}else{if(this._rejected){e(this._error)}else{this._resolvedCallbacks.push(j);this._rejectedCallbacks.push(e)}}return h},_thenRunCallbacks:function(f,e){var d;if(b.isFunction(f)){var h=f;d={success:function(j){h(j,null)},error:function(j){h(null,j)}}}else{d=b.clone(f)}d=d||{};return this.then(function(j){if(d.success){d.success.apply(this,arguments)}else{if(e){e.trigger("sync",e,j,d)}}return c.Promise.as.apply(c.Promise,arguments)},function(j){if(d.error){if(!b.isUndefined(e)){d.error(e,j)}else{d.error(j)}}else{if(e){e.trigger("error",e,j,d)}}return c.Promise.error(j)})},_continueWith:function(d){return this.then(function(){return d(arguments,null)},function(e){return d(null,e)})}})}(this));(function(b){b.Parse=b.Parse||{};var e=b.Parse;var d=e._;var c=function(j){if(j<26){return String.fromCharCode(65+j)}if(j<52){return String.fromCharCode(97+(j-26))}if(j<62){return String.fromCharCode(48+(j-52))}if(j===62){return"+"}if(j===63){return"/"}throw"Tried to encode large digit "+j+" in base64."};var a=function(k){var j=[];j.length=Math.ceil(k.length/3);d.times(j.length,function(o){var n=k[o*3];var m=k[o*3+1]||0;var l=k[o*3+2]||0;var r=(o*3+1)<k.length;var q=(o*3+2)<k.length;j[o]=[c((n>>2)&63),c(((n<<4)&48)|((m>>4)&15)),r?c(((m<<2)&60)|((l>>6)&3)):"=",q?c(l&63):"="].join("")});return j.join("")};var h={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var f=function(k,l){var m=new e.Promise();if(typeof(FileReader)==="undefined"){return e.Promise.error(new e.Error(-1,"Attempted to use a FileReader on an unsupported browser."))}var j=new FileReader();j.onloadend=function(){if(j.readyState!==2){m.reject(new e.Error(-1,"Error reading file."));return}var o=j.result;var n=/^data:([^;]*);base64,(.*)$/.exec(o);if(!n){m.reject(new e.Error(-1,"Unable to interpret data URL: "+o));return}m.resolve(n[2],l||n[1])};j.readAsDataURL(k);return m};e.File=function(j,l,k){this._name=j;var n=/\.([^.]*)$/.exec(j);if(n){n=n[1].toLowerCase()}var m=k||h[n]||"text/plain";if(d.isArray(l)){this._source=e.Promise.as(a(l),m)}else{if(l&&l.base64){this._source=e.Promise.as(l.base64,m)}else{if(typeof(File)!=="undefined"&&l instanceof File){this._source=f(l,k)}else{if(d.isString(l)){throw"Creating a Parse.File from a String is not yet supported."}}}}};e.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(k){k=k||{};var j=this;if(!j._previousSave){j._previousSave=j._source.then(function(l,m){var n={base64:l,_ContentType:m};return e._request({route:"files",className:j._name,method:"POST",data:n,useMasterKey:k.useMasterKey})}).then(function(l){j._name=l.name;j._url=l.url;return j})}return j._previousSave._thenRunCallbacks(k)}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Object=function(d,e){if(b.isString(d)){return c.Object._create.apply(this,arguments)}d=d||{};if(e&&e.parse){d=this.parse(d)}var f=c._getValue(this,"defaults");if(f){d=b.extend({},f,d)}if(e&&e.collection){this.collection=e.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=b.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(d,{silent:true})){throw new Error("Can't create an invalid Parse.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=b.clone(this.attributes);this.initialize.apply(this,arguments)};c.Object.saveAll=function(e,d){d=d||{};return c.Object._deepSaveAsync(e,{useMasterKey:d.useMasterKey})._thenRunCallbacks(d)};c.Object.destroyAll=function(h,f){f=f||{};var k=function(m){m.trigger("destroy",m,m.collection,f)};var l=[];var d=function(m){var n=c.Promise.as();if(m.length>0){n=n.then(function(){return c._request({route:"batch",method:"POST",useMasterKey:f.useMasterKey,data:{requests:b.map(m,function(o){return{method:"DELETE",path:"/1/classes/"+o.className+"/"+o.id}})}})}).then(function(q,o,r){c._arrayEach(m,function(t,u){if(q[u].success&&f.wait){k(t)}else{if(q[u].error){var s=new c.Error(q[u].error.code,q[u].error.error);s.object=t;l.push(s)}}})})}return n};var j=c.Promise.as();var e=[];c._arrayEach(h,function(m,n){if(!m.id||!f.wait){k(m)}if(m.id){e.push(m)}if(e.length===20||n+1===h.length){var o=e;e=[];j=j.then(function(){return d(o)})}});return j.then(function(){if(l.length===0){return true}else{var m=new c.Error(c.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");m.errors=l;return c.Promise.error(m)}})._thenRunCallbacks(f)};b.extend(c.Object.prototype,c.Events,{_existed:false,initialize:function(){},toJSON:function(){var d=this._toFullJSON();c._arrayEach(["__type","className"],function(e){delete d[e]});return d},_toFullJSON:function(e){var d=b.clone(this.attributes);c._objectEach(d,function(h,f){d[f]=c._encode(h,e)});c._objectEach(this._operations,function(h,f){d[f]=h});if(b.has(this,"id")){d.objectId=this.id}if(b.has(this,"createdAt")){if(b.isDate(this.createdAt)){d.createdAt=this.createdAt.toJSON()}else{d.createdAt=this.createdAt}}if(b.has(this,"updatedAt")){if(b.isDate(this.updatedAt)){d.updatedAt=this.updatedAt.toJSON()}else{d.updatedAt=this.updatedAt}}d.__type="Object";d.className=this.className;return d},_refreshCache:function(){var d=this;if(d._refreshingCache){return}d._refreshingCache=true;c._objectEach(this.attributes,function(f,e){if(f instanceof c.Object){f._refreshCache()}else{if(b.isObject(f)){if(d._resetCacheForKey(e)){d.set(e,new c.Op.Set(f),{silent:true})}}}});delete d._refreshingCache},dirty:function(d){this._refreshCache();var e=b.last(this._opSetQueue);if(d){return(e[d]?true:false)}if(!this.id){return true}if(b.keys(e).length>0){return true}return false},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(d){return this.attributes[d]},relation:function(d){var e=this.get(d);if(e){if(!(e instanceof c.Relation)){throw"Called relation() on non-relation field "+d}e._ensureParentAndKey(this,d);return e}else{return new c.Relation(this,d)}},escape:function(d){var e=this._escapedAttributes[d];if(e){return e}var h=this.attributes[d];var f;if(c._isNullOrUndefined(h)){f=""}else{f=b.escape(h.toString())}this._escapedAttributes[d]=f;return f},has:function(d){return !c._isNullOrUndefined(this.attributes[d])},_mergeMagicFields:function(e){var d=this;var f=["id","objectId","createdAt","updatedAt"];c._arrayEach(f,function(h){if(e[h]){if(h==="objectId"){d.id=e[h]}else{if((h==="createdAt"||h==="updatedAt")&&!b.isDate(e[h])){d[h]=c._parseDate(e[h])}else{d[h]=e[h]}}delete e[h]}})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=this;var d=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);var f=b.first(this._opSetQueue);c._objectEach(d,function(l,j){var k=d[j];var h=f[j];if(k&&h){f[j]=h._mergeWithPrevious(k)}else{if(k){f[j]=k}}});this._saving=this._saving-1},_finishSave:function(f){var d={};c._traverse(this.attributes,function(j){if(j instanceof c.Object&&j.id&&j._hasData){d[j.id]=j}});var h=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);this._applyOpSet(h,this._serverData);this._mergeMagicFields(f);var e=this;c._objectEach(f,function(k,j){e._serverData[j]=c._decode(j,k);var l=c._traverse(e._serverData[j],function(m){if(m instanceof c.Object&&d[m.id]){return d[m.id]}});if(l){e._serverData[j]=l}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(f,e){this._opSetQueue=[{}];this._mergeMagicFields(f);var d=this;c._objectEach(f,function(j,h){d._serverData[h]=c._decode(h,j)});this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._hasData=e},_applyOpSet:function(e,f){var d=this;c._objectEach(e,function(j,h){f[h]=j._estimate(f[h],d,h);if(f[h]===c.Op._UNSET){delete f[h]}})},_resetCacheForKey:function(e){var f=this.attributes[e];if(b.isObject(f)&&!(f instanceof c.Object)&&!(f instanceof c.File)){f=f.toJSON?f.toJSON():f;var d=JSON.stringify(f);if(this._hashedJSON[e]!==d){this._hashedJSON[e]=d;return true}}return false},_rebuildEstimatedDataForKey:function(e){var d=this;delete this.attributes[e];if(this._serverData[e]){this.attributes[e]=this._serverData[e]}c._arrayEach(this._opSetQueue,function(f){var h=f[e];if(h){d.attributes[e]=h._estimate(d.attributes[e],d,e);if(d.attributes[e]===c.Op._UNSET){delete d.attributes[e]}else{d._resetCacheForKey(e)}}})},_rebuildAllEstimatedData:function(){var d=this;var e=b.clone(this.attributes);this.attributes=b.clone(this._serverData);c._arrayEach(this._opSetQueue,function(f){d._applyOpSet(f,d.attributes);c._objectEach(f,function(j,h){d._resetCacheForKey(h)})});c._objectEach(e,function(f,h){if(d.attributes[h]!==f){d.trigger("change:"+h,d,d.attributes[h],{})}});c._objectEach(this.attributes,function(h,f){if(!b.has(e,f)){d.trigger("change:"+f,d,h,{})}})},set:function(k,j,n){var l,h;if(b.isObject(k)||c._isNullOrUndefined(k)){l=k;c._objectEach(l,function(q,o){l[o]=c._decode(o,q)});n=j}else{l={};l[k]=c._decode(k,j)}n=n||{};if(!l){return this}if(l instanceof c.Object){l=l.attributes}if(n.unset){c._objectEach(l,function(o,q){l[q]=new c.Op.Unset()})}var f=b.clone(l);var m=this;c._objectEach(f,function(q,o){if(q instanceof c.Op){f[o]=q._estimate(m.attributes[o],m,o);if(f[o]===c.Op._UNSET){delete f[o]}}});if(!this._validate(l,n)){return false}this._mergeMagicFields(l);n.changes={};var d=this._escapedAttributes;var e=this._previousAttributes||{};c._arrayEach(b.keys(l),function(q){var s=l[q];if(s instanceof c.Relation){s.parent=m}if(!(s instanceof c.Op)){s=new c.Op.Set(s)}var o=true;if(s instanceof c.Op.Set&&b.isEqual(m.attributes[q],s.value)){o=false}if(o){delete d[q];if(n.silent){m._silent[q]=true}else{n.changes[q]=true}}var r=b.last(m._opSetQueue);r[q]=s._mergeWithPrevious(r[q]);m._rebuildEstimatedDataForKey(q);if(o){m.changed[q]=m.attributes[q];if(!n.silent){m._pending[q]=true}}else{delete m.changed[q];delete m._pending[q]}});if(!n.silent){this.change(n)}return this},unset:function(d,e){e=e||{};e.unset=true;return this.set(d,null,e)},increment:function(d,e){if(b.isUndefined(e)||b.isNull(e)){e=1}return this.set(d,new c.Op.Increment(e))},add:function(d,e){return this.set(d,new c.Op.Add([e]))},addUnique:function(d,e){return this.set(d,new c.Op.AddUnique([e]))},remove:function(d,e){return this.set(d,new c.Op.Remove([e]))},op:function(d){return b.last(this._opSetQueue)[d]},clear:function(d){d=d||{};d.unset=true;var e=b.extend(this.attributes,this._operations);return this.set(e,d)},_getSaveJSON:function(){var d=b.clone(b.first(this._opSetQueue));c._objectEach(d,function(f,e){d[e]=f.toJSON()});return d},_canBeSerialized:function(){return c.Object._canBeSerializedAsValue(this.attributes)},fetch:function(e){var d=this;e=e||{};var f=c._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:e.useMasterKey});return f.then(function(j,h,k){d._finishFetch(d.parse(j,h,k),true);return d})._thenRunCallbacks(e,this)},save:function(l,k,h){var f,r,m,u,q;if(b.isObject(l)||c._isNullOrUndefined(l)){r=l;u=k}else{r={};r[l]=k;u=h}if(!u&&r){var s=b.reject(r,function(w,v){return b.include(["success","error","wait"],v)});if(s.length===0){var t=true;if(b.has(r,"success")&&!b.isFunction(r.success)){t=false}if(b.has(r,"error")&&!b.isFunction(r.error)){t=false}if(t){return this.save(null,r)}}}u=b.clone(u)||{};if(u.wait){m=b.clone(this.attributes)}var n=b.clone(u)||{};if(n.wait){n.silent=true}var e;n.error=function(w,v){e=v};if(r&&!this.set(r,n)){return c.Promise.error(e)._thenRunCallbacks(u,this)}var j=this;j._refreshCache();var o=[];var d=[];c.Object._findUnsavedChildren(j.attributes,o,d);if(o.length+d.length>0){return c.Object._deepSaveAsync(this.attributes,{useMasterKey:u.useMasterKey}).then(function(){return j.save(null,u)},function(v){return c.Promise.error(v)._thenRunCallbacks(u,j)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||c.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var z=j.id?"PUT":"POST";var w=j._getSaveJSON();var v="classes";var x=j.className;if(j.className==="_User"&&!j.id){v="users";x=null}var y=c._request({route:v,className:x,objectId:j.id,method:z,useMasterKey:u.useMasterKey,data:w});y=y.then(function(D,A,C){var B=j.parse(D,A,C);if(u.wait){B=b.extend(r||{},B)}j._finishSave(B);if(u.wait){j.set(m,n)}return j},function(A){j._cancelSave();return c.Promise.error(A)})._thenRunCallbacks(u,j);return y});return this._allPreviousSaves},destroy:function(e){e=e||{};var d=this;var h=function(){d.trigger("destroy",d,d.collection,e)};if(!this.id){return h()}if(!e.wait){h()}var f=c._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:e.useMasterKey});return f.then(function(){if(e.wait){h()}return d})._thenRunCallbacks(e,this)},parse:function(h,d,f){var e=b.clone(h);b(["createdAt","updatedAt"]).each(function(j){if(e[j]){e[j]=c._parseDate(e[j])}});if(!e.updatedAt){e.updatedAt=e.createdAt}if(d){this._existed=(d!==201)}return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(f){f=f||{};var j=this._changing;this._changing=true;var e=this;c._objectEach(this._silent,function(k){e._pending[k]=true});var h=b.extend({},f.changes,this._silent);this._silent={};c._objectEach(h,function(l,k){e.trigger("change:"+k,e,e.get(k),f)});if(j){return this}var d=function(l,k){if(!e._pending[k]&&!e._silent[k]){delete e.changed[k]}};while(!b.isEmpty(this._pending)){this._pending={};this.trigger("change",this,f);c._objectEach(this.changed,d);e._previousAttributes=b.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},hasChanged:function(d){if(!arguments.length){return !b.isEmpty(this.changed)}return this.changed&&b.has(this.changed,d)},changedAttributes:function(e){if(!e){return this.hasChanged()?b.clone(this.changed):false}var f={};var d=this._previousAttributes;c._objectEach(e,function(j,h){if(!b.isEqual(d[h],j)){f[h]=j}});return f},previous:function(d){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[d]},previousAttributes:function(){return b.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(e,d){if(b.has(e,"ACL")&&!(e.ACL instanceof c.ACL)){return new c.Error(c.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}return false},_validate:function(f,e){if(e.silent||!this.validate){return true}f=b.extend({},this.attributes,f);var d=this.validate(f,e);if(!d){return true}if(e&&e.error){e.error(this,d,e)}else{this.trigger("error",this,d,e)}return false},getACL:function(){return this.get("ACL")},setACL:function(e,d){return this.set("ACL",e,d)}});c.Object._getSubclass=function(e){if(!b.isString(e)){throw"Parse.Object._getSubclass requires a string argument."}var d=c.Object._classMap[e];if(!d){d=c.Object.extend(e);c.Object._classMap[e]=d}return d};c.Object._create=function(h,d,e){var f=c.Object._getSubclass(h);return new f(d,e)};c.Object._classMap={};c.Object._extend=c._extend;c.Object.extend=function(h,f,j){if(!b.isString(h)){if(h&&b.has(h,"className")){return c.Object.extend(h.className,h,f)}else{throw new Error("Parse.Object.extend's first argument should be the className.")}}if(h==="User"){h="_User"}var d=null;if(b.has(c.Object._classMap,h)){var e=c.Object._classMap[h];d=e._extend(f,j)}else{f=f||{};f.className=h;d=this._extend(f,j)}d.extend=function(l){if(b.isString(l)||(l&&b.has(l,"className"))){return c.Object.extend.apply(d,arguments)}var k=[h].concat(c._.toArray(arguments));return c.Object.extend.apply(d,k)};c.Object._classMap[h]=d;return d};c.Object._findUnsavedChildren=function(d,e,f){c._traverse(d,function(h){if(h instanceof c.Object){h._refreshCache();if(h.dirty()){e.push(h)}return}if(h instanceof c.File){if(!h.url()){f.push(h)}return}})};c.Object._canBeSerializedAsValue=function(d){if(d instanceof c.Object){return !!d.id}if(d instanceof c.File){return true}var e=true;if(b.isArray(d)){c._arrayEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}else{if(b.isObject(d)){c._objectEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}}return e};c.Object._deepSaveAsync=function(f,e){var d=[];var k=[];c.Object._findUnsavedChildren(f,d,k);var l=c.Promise.as();b.each(k,function(m){l=l.then(function(){return m.save(e)})});var j=b.uniq(d);var h=b.uniq(j);return l.then(function(){return c.Promise._continueWhile(function(){return h.length>0},function(){var q=[];var m=[];c._arrayEach(h,function(r){if(q.length>20){m.push(r);return}if(r._canBeSerialized()){q.push(r)}else{m.push(r)}});h=m;if(q.length===0){return c.Promise.error(new c.Error(c.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var n=c.Promise.when(b.map(q,function(r){return r._allPreviousSaves||c.Promise.as()}));var o=new c.Promise();c._arrayEach(q,function(r){r._allPreviousSaves=o});return n._continueWith(function(){return c._request({route:"batch",method:"POST",useMasterKey:e.useMasterKey,data:{requests:b.map(q,function(r){var s=r._getSaveJSON();var u="POST";var t="/1/classes/"+r.className;if(r.id){t=t+"/"+r.id;u="PUT"}r._startSave();return{method:u,path:t,body:s}})}}).then(function(s,r,u){var t;c._arrayEach(q,function(v,w){if(s[w].success){v._finishSave(v.parse(s[w].success,r,u))}else{t=t||s[w].error;v._cancelSave()}});if(t){return c.Promise.error(new c.Error(t.code,t.error))}}).then(function(r){o.resolve(r);return r},function(r){o.reject(r);return c.Promise.error(r)})})})}).then(function(){return f})}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Role=c.Object.extend("_Role",{constructor:function(d,e){if(b.isString(d)&&(e instanceof c.ACL)){c.Object.prototype.constructor.call(this,null,null);this.setName(d);this.setACL(e)}else{c.Object.prototype.constructor.call(this,d,e)}},getName:function(){return this.get("name")},setName:function(e,d){return this.set("name",e,d)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(f,e){if("name" in f&&f.name!==this.getName()){var d=f.name;if(this.id&&this.id!==f.objectId){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!b.isString(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!(/^[0-9a-zA-Z\-_ ]+$/).test(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}if(c.Object.prototype.validate){return c.Object.prototype.validate.call(this,f,e)}return false}})}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.Collection=function(f,e){e=e||{};if(e.comparator){this.comparator=e.comparator}if(e.model){this.model=e.model}if(e.query){this.query=e.query}this._reset();this.initialize.apply(this,arguments);if(f){this.reset(f,{silent:true,parse:e.parse})}};c.extend(d.Collection.prototype,d.Events,{model:d.Object,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(f,q){var l,n,j,m,o,h,k={},e={};q=q||{};f=c.isArray(f)?f.slice():[f];for(l=0,j=f.length;l<j;l++){f[l]=this._prepareModel(f[l],q);m=f[l];if(!m){throw new Error("Can't add an invalid model to a collection")}o=m.cid;if(k[o]||this._byCid[o]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}h=m.id;if(!d._isNullOrUndefined(h)&&(e[h]||this._byId[h])){throw new Error("Duplicate id: can't add the same model to a collection twice")}e[h]=m;k[o]=m}for(l=0;l<j;l++){(m=f[l]).on("all",this._onModelEvent,this);this._byCid[m.cid]=m;if(m.id){this._byId[m.id]=m}}this.length+=j;n=d._isNullOrUndefined(q.at)?this.models.length:q.at;this.models.splice.apply(this.models,[n,0].concat(f));if(this.comparator){this.sort({silent:true})}if(q.silent){return this}for(l=0,j=this.models.length;l<j;l++){m=this.models[l];if(k[m.cid]){q.index=l;m.trigger("add",m,this,q)}}return this},remove:function(m,j){var k,e,h,f;j=j||{};m=c.isArray(m)?m.slice():[m];for(k=0,e=m.length;k<e;k++){f=this.getByCid(m[k])||this.get(m[k]);if(!f){continue}delete this._byId[f.id];delete this._byCid[f.cid];h=this.indexOf(f);this.models.splice(h,1);this.length--;if(!j.silent){j.index=h;f.trigger("remove",f,this,j)}this._removeReference(f)}return this},get:function(e){return e&&this._byId[e.id||e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(f){f=f||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var e=c.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!f.silent){this.trigger("reset",this,f)}return this},pluck:function(e){return c.map(this.models,function(f){return f.get(e)})},reset:function(h,f){var e=this;h=h||[];f=f||{};d._arrayEach(this.models,function(j){e._removeReference(j)});this._reset();this.add(h,{silent:true,parse:f.parse});if(!f.silent){this.trigger("reset",this,f)}return this},fetch:function(e){e=c.clone(e)||{};if(e.parse===undefined){e.parse=true}var h=this;var f=this.query||new d.Query(this.model);return f.find({useMasterKey:e.useMasterKey}).then(function(j){if(e.add){h.add(j,e)}else{h.reset(j,e)}return h})._thenRunCallbacks(e,this)},create:function(f,e){var h=this;e=e?c.clone(e):{};f=this._prepareModel(f,e);if(!f){return false}if(!e.wait){h.add(f,e)}var j=e.success;e.success=function(k,m,l){if(e.wait){h.add(k,e)}if(j){j(k,m)}else{k.trigger("sync",f,m,e)}};f.save(null,e);return f},parse:function(f,e){return f},chain:function(){return c(this.models).chain()},_reset:function(e){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(h,f){if(!(h instanceof d.Object)){var e=h;f.collection=this;h=new this.model(e,f);if(!h._validate(h.attributes,f)){h=false}}else{if(!h.collection){h.collection=this}}return h},_removeReference:function(e){if(this===e.collection){delete e.collection}e.off("all",this._onModelEvent,this)},_onModelEvent:function(h,f,j,e){if((h==="add"||h==="remove")&&j!==this){return}if(h==="destroy"){this.remove(f,e)}if(f&&h==="change:objectId"){delete this._byId[f.previous("objectId")];this._byId[f.id]=f}this.trigger.apply(this,arguments)}});var b=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];d._arrayEach(b,function(e){d.Collection.prototype[e]=function(){return c[e].apply(c,[this.models].concat(c.toArray(arguments)))}});d.Collection.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var e=a.Parse;var d=e._;e.View=function(f){this.cid=d.uniqueId("view");this._configure(f||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var c=/^(\S+)\s*(.*)$/;var b=["model","collection","el","id","attributes","className","tagName"];d.extend(e.View.prototype,e.Events,{tagName:"div",$:function(f){return this.$el.find(f)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(h,f,k){var j=document.createElement(h);if(f){e.$(j).attr(f)}if(k){e.$(j).html(k)}return j},setElement:function(f,h){this.$el=e.$(f);this.el=this.$el[0];if(h!==false){this.delegateEvents()}return this},delegateEvents:function(h){h=h||e._getValue(this,"events");if(!h){return}this.undelegateEvents();var f=this;e._objectEach(h,function(n,m){if(!d.isFunction(n)){n=f[h[m]]}if(!n){throw new Error('Event "'+h[m]+'" does not exist')}var l=m.match(c);var k=l[1],j=l[2];n=d.bind(n,f);k+=".delegateEvents"+f.cid;if(j===""){f.$el.bind(k,n)}else{f.$el.delegate(j,k,n)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(h){if(this.options){h=d.extend({},this.options,h)}var f=this;d.each(b,function(j){if(h[j]){f[j]=h[j]}});this.options=h},_ensureElement:function(){if(!this.el){var f=e._getValue(this,"attributes")||{};if(this.id){f.id=this.id}if(this.className){f["class"]=this.className}this.setElement(this.make(this.tagName,f),false)}else{this.setElement(this.el,false)}}});e.View.extend=e._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.User=c.Object.extend("_User",{_isCurrentUser:false,_mergeMagicFields:function(d){if(d.sessionToken){this._sessionToken=d.sessionToken;delete d.sessionToken}c.User.__super__._mergeMagicFields.call(this,d)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var d=this.get("authData");if(!d){return}c._objectEach(this.get("authData"),function(f,e){if(!d[e]){delete d[e]}})},_synchronizeAllAuthData:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._synchronizeAuthData(f)})},_synchronizeAuthData:function(h){if(!this.isCurrent()){return}var d;if(b.isString(h)){d=h;h=c.User._authProviders[d]}else{d=h.getAuthType()}var e=this.get("authData");if(!e||!h){return}var f=h.restoreAuthentication(e[d]);if(!f){this._unlinkFrom(h)}},_handleSaveResult:function(d){if(d){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(d||this.isCurrent()){c.User._saveCurrentUser(this)}},_linkWith:function(l,f){var e;if(b.isString(l)){e=l;l=c.User._authProviders[l]}else{e=l.getAuthType()}if(b.has(f,"authData")){var h=this.get("authData")||{};h[e]=f.authData;this.set("authData",h);var k=b.clone(f)||{};k.success=function(m){m._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save({authData:h},k)}else{var d=this;var j=new c.Promise();l.authenticate({success:function(n,m){d._linkWith(n,{authData:m,success:f.success,error:f.error}).then(function(){j.resolve(d)})},error:function(n,m){if(f.error){f.error(d,m)}j.reject(m)}});return j}},_unlinkFrom:function(j,f){var e;if(b.isString(j)){e=j;j=c.User._authProviders[j]}else{e=j.getAuthType()}var h=b.clone(f);var d=this;h.authData=null;h.success=function(k){d._synchronizeAuthData(j);if(f.success){f.success.apply(this,arguments)}};return this._linkWith(j,h)},_isLinked:function(f){var d;if(b.isString(f)){d=f}else{d=f.getAuthType()}var e=this.get("authData")||{};return !!e[d]},_logOutWithAll:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._logOutWith(f)})},_logOutWith:function(d){if(!this.isCurrent()){return}if(b.isString(d)){d=c.User._authProviders[d]}if(d&&d.deauthenticate){d.deauthenticate()}},signUp:function(h,f){var e;f=f||{};var k=(h&&h.username)||this.get("username");if(!k||(k==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var d=(h&&h.password)||this.get("password");if(!d||(d==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var j=b.clone(f);j.success=function(l){l._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save(h,j)},logIn:function(e){var d=this;e=e||{};var f=c._request({route:"login",method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(l,h,k){var j=d.parse(l,h,k);d._finishFetch(j);d._handleSaveResult(true);return d})._thenRunCallbacks(e,this)},save:function(j,h,f){var e,m,k,n,l;if(b.isObject(j)||b.isNull(j)||b.isUndefined(j)){m=j;n=h}else{m={};m[j]=h;n=f}n=n||{};var d=b.clone(n);d.success=function(o){o._handleSaveResult(false);if(n.success){n.success.apply(this,arguments)}};return c.Object.prototype.save.call(this,m,d)},fetch:function(d){var e=d?b.clone(d):{};e.success=function(f){f._handleSaveResult(false);if(d&&d.success){d.success.apply(this,arguments)}};return c.Object.prototype.fetch.call(this,e)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(e,d){return this.set("username",e,d)},setPassword:function(e,d){return this.set("password",e,d)},getEmail:function(){return this.get("email")},setEmail:function(e,d){return this.set("email",e,d)},authenticated:function(){return !!this._sessionToken&&(c.User.current()&&c.User.current().id===this.id)}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(j,h,f,e){f=f||{};f.username=j;f.password=h;var d=c.Object._create("_User");return d.signUp(f,e)},logIn:function(h,f,e){var d=c.Object._create("_User");d._finishFetch({username:h,password:f});return d.logIn(e)},logOut:function(){if(c.User._currentUser!==null){c.User._currentUser._logOutWithAll();c.User._currentUser._isCurrentUser=false}c.User._currentUserMatchesDisk=true;c.User._currentUser=null;c.localStorage.removeItem(c._getParsePath(c.User._CURRENT_USER_KEY))},requestPasswordReset:function(e,d){d=d||{};var f=c._request({route:"requestPasswordReset",method:"POST",useMasterKey:d.useMasterKey,data:{email:e}});return f._thenRunCallbacks(d)},current:function(){if(c.User._currentUser){return c.User._currentUser}if(c.User._currentUserMatchesDisk){return c.User._currentUser}c.User._currentUserMatchesDisk=true;var d=c.localStorage.getItem(c._getParsePath(c.User._CURRENT_USER_KEY));if(!d){return null}c.User._currentUser=c.Object._create("_User");c.User._currentUser._isCurrentUser=true;var e=JSON.parse(d);c.User._currentUser.id=e._id;delete e._id;c.User._currentUser._sessionToken=e._sessionToken;delete e._sessionToken;c.User._currentUser.set(e);c.User._currentUser._synchronizeAllAuthData();c.User._currentUser._refreshCache();c.User._currentUser._opSetQueue=[{}];return c.User._currentUser},_saveCurrentUser:function(d){if(c.User._currentUser!==d){c.User.logOut()}d._isCurrentUser=true;c.User._currentUser=d;c.User._currentUserMatchesDisk=true;var e=d.toJSON();e._id=d.id;e._sessionToken=d._sessionToken;c.localStorage.setItem(c._getParsePath(c.User._CURRENT_USER_KEY),JSON.stringify(e))},_registerAuthenticationProvider:function(d){c.User._authProviders[d.getAuthType()]=d;if(c.User.current()){c.User.current()._synchronizeAuthData(d.getAuthType())}},_logInWith:function(f,e){var d=c.Object._create("_User");return d._linkWith(f,e)}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Query=function(d){if(b.isString(d)){d=c.Object._getSubclass(d)}this.objectClass=d;this.className=d.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};c.Query.or=function(){var d=b.toArray(arguments);var e=null;c._arrayEach(d,function(h){if(b.isNull(e)){e=h.className}if(e!==h.className){throw"All queries must be for the same class"}});var f=new c.Query(e);f._orQuery(d);return f};c.Query.prototype={get:function(d,f){var e=this;e.equalTo("objectId",d);return e.first().then(function(h){if(h){return h}var j=new c.Error(c.Error.OBJECT_NOT_FOUND,"Object not found.");return c.Promise.error(j)})._thenRunCallbacks(f,null)},toJSON:function(){var d={where:this._where};if(this._include.length>0){d.include=this._include.join(",")}if(this._select){d.keys=this._select.join(",")}if(this._limit>=0){d.limit=this._limit}if(this._skip>0){d.skip=this._skip}if(this._order!==undefined){d.order=this._order}c._objectEach(this._extraOptions,function(f,e){d[e]=f});return d},find:function(e){var d=this;e=e||{};var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(h){return b.map(h.results,function(j){var k;if(h.className){k=new c.Object(h.className)}else{k=new d.objectClass()}k._finishFetch(j,true);return k})})._thenRunCallbacks(e)},count:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=0;h.count=1;var f=c._request({route:"classes",className:d.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return j.count})._thenRunCallbacks(e)},first:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=1;var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return b.map(j.results,function(k){var l=new d.objectClass();l._finishFetch(k,true);return l})[0]})._thenRunCallbacks(e)},collection:function(d,e){e=e||{};return new c.Collection(d,b.extend(e,{model:this.objectClass,query:this}))},skip:function(d){this._skip=d;return this},limit:function(d){this._limit=d;return this},equalTo:function(d,e){if(b.isUndefined(e)){return this.doesNotExist(d)}this._where[d]=c._encode(e);return this},_addCondition:function(d,f,e){if(!this._where[d]){this._where[d]={}}this._where[d][f]=c._encode(e);return this},notEqualTo:function(d,e){this._addCondition(d,"$ne",e);return this},lessThan:function(d,e){this._addCondition(d,"$lt",e);return this},greaterThan:function(d,e){this._addCondition(d,"$gt",e);return this},lessThanOrEqualTo:function(d,e){this._addCondition(d,"$lte",e);return this},greaterThanOrEqualTo:function(d,e){this._addCondition(d,"$gte",e);return this},containedIn:function(e,d){this._addCondition(e,"$in",d);return this},notContainedIn:function(e,d){this._addCondition(e,"$nin",d);return this},containsAll:function(e,d){this._addCondition(e,"$all",d);return this},exists:function(d){this._addCondition(d,"$exists",true);return this},doesNotExist:function(d){this._addCondition(d,"$exists",false);return this},matches:function(e,f,d){this._addCondition(e,"$regex",f);if(!d){d=""}if(f.ignoreCase){d+="i"}if(f.multiline){d+="m"}if(d&&d.length){this._addCondition(e,"$options",d)}return this},matchesQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$inQuery",e);return this},doesNotMatchQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$notInQuery",e);return this},matchesKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$select",{key:d,query:f});return this},doesNotMatchKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$dontSelect",{key:d,query:f});return this},_orQuery:function(d){var e=b.map(d,function(f){return f.toJSON().where});this._where.$or=e;return this},_quote:function(d){return"\\Q"+d.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(d,e){this._addCondition(d,"$regex",this._quote(e));return this},startsWith:function(d,e){this._addCondition(d,"$regex","^"+this._quote(e));return this},endsWith:function(d,e){this._addCondition(d,"$regex",this._quote(e)+"$");return this},ascending:function(d){this._order=d;return this},descending:function(d){this._order="-"+d;return this},near:function(e,d){if(!(d instanceof c.GeoPoint)){d=new c.GeoPoint(d)}this._addCondition(e,"$nearSphere",d);return this},withinRadians:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistance",f);return this},withinMiles:function(e,d,f){return this.withinRadians(e,d,f/3958.8)},withinKilometers:function(e,d,f){return this.withinRadians(e,d,f/6371)},withinGeoBox:function(d,f,e){if(!(f instanceof c.GeoPoint)){f=new c.GeoPoint(f)}if(!(e instanceof c.GeoPoint)){e=new c.GeoPoint(e)}this._addCondition(d,"$within",{"$box":[f,e]});return this},include:function(){var d=this;c._arrayEach(arguments,function(e){if(b.isArray(e)){d._include=d._include.concat(e)}else{d._include.push(e)}});return this},select:function(){var d=this;this._select=this._select||[];c._arrayEach(arguments,function(e){if(b.isArray(e)){d._select=d._select.concat(e)}else{d._select.push(e)}});return this},each:function(k,e){e=e||{};if(this._order||this._skip||(this._limit>=0)){var d="Cannot iterate on a query with sort, skip, or limit.";return c.Promise.error(d)._thenRunCallbacks(e)}var h=new c.Promise();var f=new c.Query(this.objectClass);f._limit=e.batchSize||100;f._where=b.clone(this._where);f._include=b.clone(this._include);f.ascending("objectId");var j=false;return c.Promise._continueWhile(function(){return !j},function(){return f.find().then(function(l){var m=c.Promise.as();c._.each(l,function(n){m=m.then(function(){return k(n)})});return m.then(function(){if(l.length>=f._limit){f.greaterThan("objectId",l[l.length-1].id)}else{j=true}})})})._thenRunCallbacks(e)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";var h=false;var j;var e;var f={authenticate:function(l){var k=this;FB.login(function(m){if(m.authResponse){if(l.success){l.success(k,{id:m.authResponse.userID,access_token:m.authResponse.accessToken,expiration_date:new Date(m.authResponse.expiresIn*1000+(new Date()).getTime()).toJSON()})}}else{if(l.error){l.error(k,m)}}},{scope:j})},restoreAuthentication:function(m){if(m){var k={userID:m.id,accessToken:m.access_token,expiresIn:(d._parseDate(m.expiration_date).getTime()-(new Date()).getTime())/1000};var n=c.clone(e);n.authResponse=k;n.status=false;var l=FB.getAuthResponse();if(l&&l.userID!==k.userID){FB.logout()}FB.init(n)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};d.FacebookUtils={init:function(k){if(typeof(FB)==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}e=c.clone(k)||{};if(e.status&&typeof(console)!=="undefined"){var l=console.warn||console.log||function(){};l.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}e.status=false;FB.init(e);d.User._registerAuthenticationProvider(f);h=true},isLinked:function(k){return k._isLinked("facebook")},logIn:function(l,k){if(!l||c.isString(l)){if(!h){throw"You must initialize FacebookUtils before calling logIn."}j=l;return d.User._logInWith("facebook",k)}else{var m=c.clone(k)||{};m.authData=l;return d.User._logInWith("facebook",m)}},link:function(k,m,l){if(!m||c.isString(m)){if(!h){throw"You must initialize FacebookUtils before calling link."}j=m;return k._linkWith("facebook",l)}else{var n=c.clone(l)||{};n.authData=m;return k._linkWith("facebook",n)}},unlink:function(k,l){if(!h){throw"You must initialize FacebookUtils before calling unlink."}return k._unlinkFrom("facebook",l)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.History=function(){this.handlers=[];c.bindAll(this,"checkUrl")};var e=/^[#\/]/;var b=/msie [\w.]+/;d.History.started=false;c.extend(d.History.prototype,d.Events,{interval:50,getHash:function(j){var h=j?j.location:window.location;var f=h.href.match(/#(.*)$/);return f?f[1]:""},getFragment:function(h,f){if(d._isNullOrUndefined(h)){if(this._hasPushState||f){h=window.location.pathname;var j=window.location.search;if(j){h+=j}}else{h=this.getHash()}}if(!h.indexOf(this.options.root)){h=h.substr(this.options.root.length)}return h.replace(e,"")},start:function(j){if(d.History.started){throw new Error("Parse.history has already been started")}d.History.started=true;this.options=c.extend({},{root:"/"},this.options,j);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var h=this.getFragment();var f=document.documentMode;var l=(b.exec(navigator.userAgent.toLowerCase())&&(!f||f<=7));if(l){this.iframe=d.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(h)}if(this._hasPushState){d.$(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!l){d.$(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}}}this.fragment=h;var m=window.location;var k=m.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!k){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&k&&m.hash){this.fragment=this.getHash().replace(e,"");window.history.replaceState({},document.title,m.protocol+"//"+m.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){d.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);d.History.started=false},route:function(f,h){this.handlers.unshift({route:f,callback:h})},checkUrl:function(h){var f=this.getFragment();if(f===this.fragment&&this.iframe){f=this.getFragment(this.getHash(this.iframe))}if(f===this.fragment){return false}if(this.iframe){this.navigate(f)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(j){var h=this.fragment=this.getFragment(j);var f=c.any(this.handlers,function(k){if(k.route.test(h)){k.callback(h);return true}});return f},navigate:function(j,h){if(!d.History.started){return false}if(!h||h===true){h={trigger:h}}var k=(j||"").replace(e,"");if(this.fragment===k){return}if(this._hasPushState){if(k.indexOf(this.options.root)!==0){k=this.options.root+k}this.fragment=k;var f=h.replace?"replaceState":"pushState";window.history[f]({},document.title,k)}else{if(this._wantsHashChange){this.fragment=k;this._updateHash(window.location,k,h.replace);if(this.iframe&&(k!==this.getFragment(this.getHash(this.iframe)))){if(!h.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,k,h.replace)}}else{window.location.assign(this.options.root+j)}}if(h.trigger){this.loadUrl(j)}},_updateHash:function(f,h,j){if(j){var k=f.toString().replace(/(javascript:|#).*$/,"");f.replace(k+"#"+h)}else{f.hash=h}}})}(this));(function(b){b.Parse=b.Parse||{};var d=b.Parse;var c=d._;d.Router=function(h){h=h||{};if(h.routes){this.routes=h.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var e=/:\w+/g;var f=/\*\w+/g;var a=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;c.extend(d.Router.prototype,d.Events,{initialize:function(){},route:function(h,j,k){d.history=d.history||new d.History();if(!c.isRegExp(h)){h=this._routeToRegExp(h)}if(!k){k=this[j]}d.history.route(h,c.bind(function(m){var l=this._extractParameters(h,m);if(k){k.apply(this,l)}this.trigger.apply(this,["route:"+j].concat(l));d.history.trigger("route",this,j,l)},this));return this},navigate:function(j,h){d.history.navigate(j,h)},_bindRoutes:function(){if(!this.routes){return}var j=[];for(var k in this.routes){if(this.routes.hasOwnProperty(k)){j.unshift([k,this.routes[k]])}}for(var m=0,h=j.length;m<h;m++){this.route(j[m][0],j[m][1],this[j[m][1]])}},_routeToRegExp:function(h){h=h.replace(a,"\\$&").replace(e,"([^/]+)").replace(f,"(.*?)");return new RegExp("^"+h+"$")},_extractParameters:function(h,j){return h.exec(j).slice(1)}});d.Router.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Cloud=c.Cloud||{};b.extend(c.Cloud,{run:function(e,h,d){d=d||{};var f=c._request({route:"functions",className:e,method:"POST",useMasterKey:d.useMasterKey,data:c._encode(h,null,true)});return f.then(function(j){return c._decode(null,j).result})._thenRunCallbacks(d)}})}(this));(function(a){a.Parse=a.Parse||{};var b=a.Parse;b.Installation=b.Object.extend("_Installation");b.Push=b.Push||{};b.Push.send=function(e,c){c=c||{};if(e.where){e.where=e.where.toJSON().where}if(e.push_time){e.push_time=e.push_time.toJSON()}if(e.expiration_time){e.expiration_time=e.expiration_time.toJSON()}if(e.expiration_time&&e.expiration_time_interval){throw"Both expiration_time and expiration_time_interval can't be set"}var d=b._request({route:"push",method:"POST",data:e,useMasterKey:c.useMasterKey});return d._thenRunCallbacks(c)}}(this));var App={};App.Routers={};App.Models={};App.Models.Docs={};App.Models.Apps={};App.Models.Admin={};App.Collections={};App.Views={};var ParseDotCom=Parse;Parse=null;ParseDotCom.initialize("Q57GWY3hPKQ380QYFtKvH6PD8IQpr1Arz1Qliy9t","9Q58QDNGg1i856YyJF4JZ03dOzLJcYCCmj6xgJj1");ParseDotCom.Analytics.track_links=function(a,c,b){$(a).click(function(e){var d=ParseDotCom.Analytics._extractProperties(this,b);if(d){ParseDotCom.Analytics.track(c,d)}return true})};ParseDotCom.Analytics.track_forms=function(a,c,b){$(a).submit(function(e){var d=ParseDotCom.Analytics._extractProperties(this,b);if(d){ParseDotCom.Analytics.track(c,d)}return true})};ParseDotCom.Analytics._extractProperties=function(b,c){var d;if($.isFunction(c)){d=c(b)}else{d=c}var a=d;_.each(d,function(f,e){if(!_.isString(e)||!_.isString(f)){delete a[e]}});return a};
/*!
 * Parse JavaScript SDK
 * Version: 1.3.2
 * Built: Fri Nov 21 2014 16:31:10
 * http://parse.com
 *
 * Copyright 2014 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
(function(a){a.Parse=a.Parse||{};a.Parse.VERSION="js1.3.2"}(this));(function(){var z=this;var m=z._;var G={};var F=Array.prototype,f=Object.prototype,u=Function.prototype;var J=F.push,r=F.slice,B=F.concat,d=f.toString,l=f.hasOwnProperty;var N=F.forEach,t=F.map,H=F.reduce,c=F.reduceRight,b=F.filter,E=F.every,s=F.some,q=F.indexOf,n=F.lastIndexOf,x=Array.isArray,e=Object.keys,I=u.bind;var O=function(P){if(P instanceof O){return P}if(!(this instanceof O)){return new O(P)}this._wrapped=P};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=O}exports._=O}else{z._=O}O.VERSION="1.4.4";var K=O.each=O.forEach=function(U,T,S){if(U==null){return}if(N&&U.forEach===N){U.forEach(T,S)}else{if(U.length===+U.length){for(var R=0,P=U.length;R<P;R++){if(T.call(S,U[R],R,U)===G){return}}}else{for(var Q in U){if(O.has(U,Q)){if(T.call(S,U[Q],Q,U)===G){return}}}}}};O.map=O.collect=function(S,R,Q){var P=[];if(S==null){return P}if(t&&S.map===t){return S.map(R,Q)}K(S,function(V,T,U){P[P.length]=R.call(Q,V,T,U)});return P};var h="Reduce of empty array with no initial value";O.reduce=O.foldl=O.inject=function(T,S,P,R){var Q=arguments.length>2;if(T==null){T=[]}if(H&&T.reduce===H){if(R){S=O.bind(S,R)}return Q?T.reduce(S,P):T.reduce(S)}K(T,function(W,U,V){if(!Q){P=W;Q=true}else{P=S.call(R,P,W,U,V)}});if(!Q){throw new TypeError(h)}return P};O.reduceRight=O.foldr=function(V,S,P,R){var Q=arguments.length>2;if(V==null){V=[]}if(c&&V.reduceRight===c){if(R){S=O.bind(S,R)}return Q?V.reduceRight(S,P):V.reduceRight(S)}var U=V.length;if(U!==+U){var T=O.keys(V);U=T.length}K(V,function(Y,W,X){W=T?T[--U]:--U;if(!Q){P=V[W];Q=true}else{P=S.call(R,P,V[W],W,X)}});if(!Q){throw new TypeError(h)}return P};O.find=O.detect=function(S,R,Q){var P;D(S,function(V,T,U){if(R.call(Q,V,T,U)){P=V;return true}});return P};O.filter=O.select=function(S,R,Q){var P=[];if(S==null){return P}if(b&&S.filter===b){return S.filter(R,Q)}K(S,function(V,T,U){if(R.call(Q,V,T,U)){P[P.length]=V}});return P};O.reject=function(R,Q,P){return O.filter(R,function(U,S,T){return !Q.call(P,U,S,T)},P)};O.every=O.all=function(S,R,Q){R||(R=O.identity);var P=true;if(S==null){return P}if(E&&S.every===E){return S.every(R,Q)}K(S,function(V,T,U){if(!(P=P&&R.call(Q,V,T,U))){return G}});return !!P};var D=O.some=O.any=function(S,R,Q){R||(R=O.identity);var P=false;if(S==null){return P}if(s&&S.some===s){return S.some(R,Q)}K(S,function(V,T,U){if(P||(P=R.call(Q,V,T,U))){return G}});return !!P};O.contains=O.include=function(Q,P){if(Q==null){return false}if(q&&Q.indexOf===q){return Q.indexOf(P)!=-1}return D(Q,function(R){return R===P})};O.invoke=function(R,S){var P=r.call(arguments,2);var Q=O.isFunction(S);return O.map(R,function(T){return(Q?S:T[S]).apply(T,P)})};O.pluck=function(Q,P){return O.map(Q,function(R){return R[P]})};O.where=function(Q,P,R){if(O.isEmpty(P)){return R?null:[]}return O[R?"find":"filter"](Q,function(T){for(var S in P){if(P[S]!==T[S]){return false}}return true})};O.findWhere=function(Q,P){return O.where(Q,P,true)};O.max=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.max.apply(Math,S)}if(!R&&O.isEmpty(S)){return -Infinity}var P={computed:-Infinity,value:-Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U>=P.computed&&(P={value:W,computed:U})});return P.value};O.min=function(S,R,Q){if(!R&&O.isArray(S)&&S[0]===+S[0]&&S.length<65535){return Math.min.apply(Math,S)}if(!R&&O.isEmpty(S)){return Infinity}var P={computed:Infinity,value:Infinity};K(S,function(W,T,V){var U=R?R.call(Q,W,T,V):W;U<P.computed&&(P={value:W,computed:U})});return P.value};O.shuffle=function(S){var R;var Q=0;var P=[];K(S,function(T){R=O.random(Q++);P[Q-1]=P[R];P[R]=T});return P};var a=function(P){return O.isFunction(P)?P:function(Q){return Q[P]}};O.sortBy=function(S,R,P){var Q=a(R);return O.pluck(O.map(S,function(V,T,U){return{value:V,index:T,criteria:Q.call(P,V,T,U)}}).sort(function(W,V){var U=W.criteria;var T=V.criteria;if(U!==T){if(U>T||U===void 0){return 1}if(U<T||T===void 0){return -1}}return W.index<V.index?-1:1}),"value")};var w=function(U,T,Q,S){var P={};var R=a(T||O.identity);K(U,function(X,V){var W=R.call(Q,X,V,U);S(P,W,X)});return P};O.groupBy=function(R,Q,P){return w(R,Q,P,function(S,T,U){(O.has(S,T)?S[T]:(S[T]=[])).push(U)})};O.countBy=function(R,Q,P){return w(R,Q,P,function(S,T){if(!O.has(S,T)){S[T]=0}S[T]++})};O.sortedIndex=function(W,V,S,R){S=S==null?O.identity:a(S);var U=S.call(R,V);var P=0,T=W.length;while(P<T){var Q=(P+T)>>>1;S.call(R,W[Q])<U?P=Q+1:T=Q}return P};O.toArray=function(P){if(!P){return[]}if(O.isArray(P)){return r.call(P)}if(P.length===+P.length){return O.map(P,O.identity)}return O.values(P)};O.size=function(P){if(P==null){return 0}return(P.length===+P.length)?P.length:O.keys(P).length};O.first=O.head=O.take=function(R,Q,P){if(R==null){return void 0}return(Q!=null)&&!P?r.call(R,0,Q):R[0]};O.initial=function(R,Q,P){return r.call(R,0,R.length-((Q==null)||P?1:Q))};O.last=function(R,Q,P){if(R==null){return void 0}if((Q!=null)&&!P){return r.call(R,Math.max(R.length-Q,0))}else{return R[R.length-1]}};O.rest=O.tail=O.drop=function(R,Q,P){return r.call(R,(Q==null)||P?1:Q)};O.compact=function(P){return O.filter(P,O.identity)};var A=function(Q,R,P){K(Q,function(S){if(O.isArray(S)){R?J.apply(P,S):A(S,R,P)}else{P.push(S)}});return P};O.flatten=function(Q,P){return A(Q,P,[])};O.without=function(P){return O.difference(P,r.call(arguments,1))};O.uniq=O.unique=function(V,U,T,S){if(O.isFunction(U)){S=T;T=U;U=false}var Q=T?O.map(V,T,S):V;var R=[];var P=[];K(Q,function(X,W){if(U?(!W||P[P.length-1]!==X):!O.contains(P,X)){P.push(X);R.push(V[W])}});return R};O.union=function(){return O.uniq(B.apply(F,arguments))};O.intersection=function(Q){var P=r.call(arguments,1);return O.filter(O.uniq(Q),function(R){return O.every(P,function(S){return O.indexOf(S,R)>=0})})};O.difference=function(Q){var P=B.apply(F,r.call(arguments,1));return O.filter(Q,function(R){return !O.contains(P,R)})};O.zip=function(){var P=r.call(arguments);var S=O.max(O.pluck(P,"length"));var R=new Array(S);for(var Q=0;Q<S;Q++){R[Q]=O.pluck(P,""+Q)}return R};O.object=function(T,R){if(T==null){return{}}var P={};for(var S=0,Q=T.length;S<Q;S++){if(R){P[T[S]]=R[S]}else{P[T[S][0]]=T[S][1]}}return P};O.indexOf=function(T,R,S){if(T==null){return -1}var Q=0,P=T.length;if(S){if(typeof S=="number"){Q=(S<0?Math.max(0,P+S):S)}else{Q=O.sortedIndex(T,R);return T[Q]===R?Q:-1}}if(q&&T.indexOf===q){return T.indexOf(R,S)}for(;Q<P;Q++){if(T[Q]===R){return Q}}return -1};O.lastIndexOf=function(T,R,S){if(T==null){return -1}var P=S!=null;if(n&&T.lastIndexOf===n){return P?T.lastIndexOf(R,S):T.lastIndexOf(R)}var Q=(P?S:T.length);while(Q--){if(T[Q]===R){return Q}}return -1};O.range=function(U,S,T){if(arguments.length<=1){S=U||0;U=0}T=arguments[2]||1;var Q=Math.max(Math.ceil((S-U)/T),0);var P=0;var R=new Array(Q);while(P<Q){R[P++]=U;U+=T}return R};O.bind=function(R,Q){if(R.bind===I&&I){return I.apply(R,r.call(arguments,1))}var P=r.call(arguments,2);return function(){return R.apply(Q,P.concat(r.call(arguments)))}};O.partial=function(Q){var P=r.call(arguments,1);return function(){return Q.apply(this,P.concat(r.call(arguments)))}};O.bindAll=function(Q){var P=r.call(arguments,1);if(P.length===0){P=O.functions(Q)}K(P,function(R){Q[R]=O.bind(Q[R],Q)});return Q};O.memoize=function(R,Q){var P={};Q||(Q=O.identity);return function(){var S=Q.apply(this,arguments);return O.has(P,S)?P[S]:(P[S]=R.apply(this,arguments))}};O.delay=function(Q,R){var P=r.call(arguments,2);return setTimeout(function(){return Q.apply(null,P)},R)};O.defer=function(P){return O.delay.apply(O,[P,1].concat(r.call(arguments,1)))};O.throttle=function(U,W){var S,R,V,P;var T=0;var Q=function(){T=new Date;V=null;P=U.apply(S,R)};return function(){var X=new Date;var Y=W-(X-T);S=this;R=arguments;if(Y<=0){clearTimeout(V);V=null;T=X;P=U.apply(S,R)}else{if(!V){V=setTimeout(Q,Y)}}return P}};O.debounce=function(R,T,Q){var S,P;return function(){var X=this,W=arguments;var V=function(){S=null;if(!Q){P=R.apply(X,W)}};var U=Q&&!S;clearTimeout(S);S=setTimeout(V,T);if(U){P=R.apply(X,W)}return P}};O.once=function(R){var P=false,Q;return function(){if(P){return Q}P=true;Q=R.apply(this,arguments);R=null;return Q}};O.wrap=function(P,Q){return function(){var R=[P];J.apply(R,arguments);return Q.apply(this,R)}};O.compose=function(){var P=arguments;return function(){var Q=arguments;for(var R=P.length-1;R>=0;R--){Q=[P[R].apply(this,Q)]}return Q[0]}};O.after=function(Q,P){if(Q<=0){return P()}return function(){if(--Q<1){return P.apply(this,arguments)}}};O.keys=e||function(R){if(R!==Object(R)){throw new TypeError("Invalid object")}var Q=[];for(var P in R){if(O.has(R,P)){Q[Q.length]=P}}return Q};O.values=function(R){var P=[];for(var Q in R){if(O.has(R,Q)){P.push(R[Q])}}return P};O.pairs=function(R){var Q=[];for(var P in R){if(O.has(R,P)){Q.push([P,R[P]])}}return Q};O.invert=function(R){var P={};for(var Q in R){if(O.has(R,Q)){P[R[Q]]=Q}}return P};O.functions=O.methods=function(R){var Q=[];for(var P in R){if(O.isFunction(R[P])){Q.push(P)}}return Q.sort()};O.extend=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){P[R]=Q[R]}}});return P};O.pick=function(Q){var R={};var P=B.apply(F,r.call(arguments,1));K(P,function(S){if(S in Q){R[S]=Q[S]}});return R};O.omit=function(R){var S={};var Q=B.apply(F,r.call(arguments,1));for(var P in R){if(!O.contains(Q,P)){S[P]=R[P]}}return S};O.defaults=function(P){K(r.call(arguments,1),function(Q){if(Q){for(var R in Q){if(P[R]==null){P[R]=Q[R]}}}});return P};O.clone=function(P){if(!O.isObject(P)){return P}return O.isArray(P)?P.slice():O.extend({},P)};O.tap=function(Q,P){P(Q);return Q};var L=function(W,V,Q,R){if(W===V){return W!==0||1/W==1/V}if(W==null||V==null){return W===V}if(W instanceof O){W=W._wrapped}if(V instanceof O){V=V._wrapped}var T=d.call(W);if(T!=d.call(V)){return false}switch(T){case"[object String]":return W==String(V);case"[object Number]":return W!=+W?V!=+V:(W==0?1/W==1/V:W==+V);case"[object Date]":case"[object Boolean]":return +W==+V;case"[object RegExp]":return W.source==V.source&&W.global==V.global&&W.multiline==V.multiline&&W.ignoreCase==V.ignoreCase}if(typeof W!="object"||typeof V!="object"){return false}var P=Q.length;while(P--){if(Q[P]==W){return R[P]==V}}Q.push(W);R.push(V);var Y=0,Z=true;if(T=="[object Array]"){Y=W.length;Z=Y==V.length;if(Z){while(Y--){if(!(Z=L(W[Y],V[Y],Q,R))){break}}}}else{var U=W.constructor,S=V.constructor;if(U!==S&&!(O.isFunction(U)&&(U instanceof U)&&O.isFunction(S)&&(S instanceof S))){return false}for(var X in W){if(O.has(W,X)){Y++;if(!(Z=O.has(V,X)&&L(W[X],V[X],Q,R))){break}}}if(Z){for(X in V){if(O.has(V,X)&&!(Y--)){break}}Z=!Y}}Q.pop();R.pop();return Z};O.isEqual=function(Q,P){return L(Q,P,[],[])};O.isEmpty=function(Q){if(Q==null){return true}if(O.isArray(Q)||O.isString(Q)){return Q.length===0}for(var P in Q){if(O.has(Q,P)){return false}}return true};O.isElement=function(P){return !!(P&&P.nodeType===1)};O.isArray=x||function(P){return d.call(P)=="[object Array]"};O.isObject=function(P){return P===Object(P)};K(["Arguments","Function","String","Number","Date","RegExp"],function(P){O["is"+P]=function(Q){return d.call(Q)=="[object "+P+"]"}});if(!O.isArguments(arguments)){O.isArguments=function(P){return !!(P&&O.has(P,"callee"))}}if(typeof(/./)!=="function"){O.isFunction=function(P){return typeof P==="function"}}O.isFinite=function(P){return isFinite(P)&&!isNaN(parseFloat(P))};O.isNaN=function(P){return O.isNumber(P)&&P!=+P};O.isBoolean=function(P){return P===true||P===false||d.call(P)=="[object Boolean]"};O.isNull=function(P){return P===null};O.isUndefined=function(P){return P===void 0};O.has=function(Q,P){return l.call(Q,P)};O.noConflict=function(){z._=m;return this};O.identity=function(P){return P};O.times=function(T,S,R){var P=Array(T);for(var Q=0;Q<T;Q++){P[Q]=S.call(R,Q)}return P};O.random=function(Q,P){if(P==null){P=Q;Q=0}return Q+Math.floor(Math.random()*(P-Q+1))};var o={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};o.unescape=O.invert(o.escape);var M={escape:new RegExp("["+O.keys(o.escape).join("")+"]","g"),unescape:new RegExp("("+O.keys(o.unescape).join("|")+")","g")};O.each(["escape","unescape"],function(P){O[P]=function(Q){if(Q==null){return""}return(""+Q).replace(M[P],function(R){return o[P][R]})}});O.result=function(P,R){if(P==null){return null}var Q=P[R];return O.isFunction(Q)?Q.call(P):Q};O.mixin=function(P){K(O.functions(P),function(Q){var R=O[Q]=P[Q];O.prototype[Q]=function(){var S=[this._wrapped];J.apply(S,arguments);return v.call(this,R.apply(O,S))}})};var C=0;O.uniqueId=function(P){var Q=++C+"";return P?P+Q:Q};O.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/;var j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var k=/\\|'|\r|\n|\t|\u2028|\u2029/g;O.template=function(X,S,R){var Q;R=O.defaults({},R,O.templateSettings);var T=new RegExp([(R.escape||y).source,(R.interpolate||y).source,(R.evaluate||y).source].join("|")+"|$","g");var U=0;var P="__p+='";X.replace(T,function(Z,aa,Y,ac,ab){P+=X.slice(U,ab).replace(k,function(ad){return"\\"+j[ad]});if(aa){P+="'+\n((__t=("+aa+"))==null?'':_.escape(__t))+\n'"}if(Y){P+="'+\n((__t=("+Y+"))==null?'':__t)+\n'"}if(ac){P+="';\n"+ac+"\n__p+='"}U=ab+Z.length;return Z});P+="';\n";if(!R.variable){P="with(obj||{}){\n"+P+"}\n"}P="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+P+"return __p;\n";try{Q=new Function(R.variable||"obj","_",P)}catch(V){V.source=P;throw V}if(S){return Q(S,O)}var W=function(Y){return Q.call(this,Y,O)};W.source="function("+(R.variable||"obj")+"){\n"+P+"}";return W};O.chain=function(P){return O(P).chain()};var v=function(P){return this._chain?O(P).chain():P};O.mixin(O);K(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var Q=F[P];O.prototype[P]=function(){var R=this._wrapped;Q.apply(R,arguments);if((P=="shift"||P=="splice")&&R.length===0){delete R[0]}return v.call(this,R)}});K(["concat","join","slice"],function(P){var Q=F[P];O.prototype[P]=function(){return v.call(this,Q.apply(this._wrapped,arguments))}});O.extend(O.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(a){a.Parse=a.Parse||{};var c=a.Parse;if(typeof(exports)!=="undefined"&&exports._){c._=exports._.noConflict();c.localStorage=require("localStorage");c.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;exports.Parse=c}else{c._=_.noConflict();if(typeof(localStorage)!=="undefined"){c.localStorage=localStorage}if(typeof(XMLHttpRequest)!=="undefined"){c.XMLHttpRequest=XMLHttpRequest}}if(typeof($)!=="undefined"){c.$=$}var b=function(){};var d=function(f,e,h){var j;if(e&&e.hasOwnProperty("constructor")){j=e.constructor}else{j=function(){f.apply(this,arguments)}}c._.extend(j,f);b.prototype=f.prototype;j.prototype=new b();if(e){c._.extend(j.prototype,e)}if(h){c._.extend(j,h)}j.prototype.constructor=j;j.__super__=f.prototype;return j};c.serverURL="https://api.parse.com";if(typeof(process)!=="undefined"&&process.versions&&process.versions.node){c._isNode=true}c.initialize=function(h,f,e){if(e){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}c._initialize(h,f)};c._initialize=function(h,f,e){c.applicationId=h;c.javaScriptKey=f;c.masterKey=e;c._useMasterKey=false};if(c._isNode){c.initialize=c._initialize;c.Cloud=c.Cloud||{};c.Cloud.useMasterKey=function(){c._useMasterKey=true}}c._getParsePath=function(e){if(!c.applicationId){throw"You need to call Parse.initialize before using Parse."}if(!e){e=""}if(!c._.isString(e)){throw"Tried to get a localStorage path that wasn't a String."}if(e[0]==="/"){e=e.substring(1)}return"Parse/"+c.applicationId+"/"+e};c._installationId=null;c._getInstallationId=function(){if(c._installationId){return c._installationId}var f=c._getParsePath("installationId");c._installationId=c.localStorage.getItem(f);if(!c._installationId||c._installationId===""){var e=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};c._installationId=(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e());c.localStorage.setItem(f,c._installationId)}return c._installationId};c._parseDate=function(q){var m=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$");var k=m.exec(q);if(!k){return null}var n=k[1]||0;var l=(k[2]||1)-1;var o=k[3]||0;var h=k[4]||0;var f=k[5]||0;var e=k[6]||0;var j=k[8]||0;return new Date(Date.UTC(n,l,o,h,f,e,j))};c._ajaxIE8=function(k,f,h){var j=new c.Promise();var e=new XDomainRequest();e.onload=function(){var l;try{l=JSON.parse(e.responseText)}catch(m){j.reject(m)}if(l){j.resolve(l)}};e.onerror=e.ontimeout=function(){var l={responseText:JSON.stringify({code:c.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};j.reject(l)};e.onprogress=function(){};e.open(k,f);e.send(h);return j};c._useXDomainRequest=function(){if(typeof(XDomainRequest)!=="undefined"){if("withCredentials" in new XMLHttpRequest()){return false}return true}return false};c._ajax=function(e,f,h,l,k){var o={success:l,error:k};if(c._useXDomainRequest()){return c._ajaxIE8(e,f,h)._thenRunCallbacks(o)}var n=new c.Promise();var j=false;var m=new c.XMLHttpRequest();m.onreadystatechange=function(){if(m.readyState===4){if(j){return}j=true;if(m.status>=200&&m.status<300){var q;try{q=JSON.parse(m.responseText)}catch(r){n.reject(r)}if(q){n.resolve(q,m.status,m)}}else{n.reject(m)}}};m.open(e,f,true);m.setRequestHeader("Content-Type","text/plain");if(c._isNode){m.setRequestHeader("User-Agent","Parse/"+c.VERSION+" (NodeJS "+process.versions.node+")")}m.send(h);return n._thenRunCallbacks(o)};c._extend=function(e,f){var h=d(this,e,f);h.extend=this.extend;return h};c._request=function(r){var q=r.route;var n=r.className;var o=r.objectId;var e=r.method;var h=r.useMasterKey;var m=r.sessionToken;var k=r.data;if(!c.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!c.javaScriptKey&&!c.masterKey){throw"You must specify a key using Parse.initialize."}if(!m){var j=c.User.current();if(j&&j._sessionToken){m=j._sessionToken}}if(q!=="batch"&&q!=="classes"&&q!=="events"&&q!=="files"&&q!=="functions"&&q!=="login"&&q!=="push"&&q!=="requestPasswordReset"&&q!=="rest_verify_analytics"&&q!=="users"&&q!=="jobs"&&q!=="config"){throw"Bad route: '"+q+"'."}var f=c.serverURL;if(f.charAt(f.length-1)!=="/"){f+="/"}f+="1/"+q;if(n){f+="/"+n}if(o){f+="/"+o}k=c._.clone(k||{});if(e!=="POST"){k._method=e;e="POST"}if(c._.isUndefined(h)){h=c._useMasterKey}k._ApplicationId=c.applicationId;if(!h){k._JavaScriptKey=c.javaScriptKey}else{k._MasterKey=c.masterKey}k._ClientVersion=c.VERSION;k._InstallationId=c._getInstallationId();if(m){k._SessionToken=m}var l=JSON.stringify(k);return c._ajax(e,f,l).then(null,function(s){var u;if(s&&s.responseText){try{var t=JSON.parse(s.responseText);u=new c.Error(t.code,t.error)}catch(v){u=new c.Error(c.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+s.responseText)}}else{u=new c.Error(c.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(s))}return c.Promise.error(u)})};c._getValue=function(e,f){if(!(e&&e[f])){return null}return c._.isFunction(e[f])?e[f]():e[f]};c._encode=function(k,j,h){var f=c._;if(k instanceof c.Object){if(h){throw"Parse.Objects not allowed here"}if(!j||f.include(j,k)||!k._hasData){return k._toPointer()}if(!k.dirty()){j=j.concat(k);return c._encode(k._toFullJSON(j),j,h)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(k instanceof c.ACL){return k.toJSON()}if(f.isDate(k)){return{__type:"Date",iso:k.toJSON()}}if(k instanceof c.GeoPoint){return k.toJSON()}if(f.isArray(k)){return f.map(k,function(l){return c._encode(l,j,h)})}if(f.isRegExp(k)){return k.source}if(k instanceof c.Relation){return k.toJSON()}if(k instanceof c.Op){return k.toJSON()}if(k instanceof c.File){if(!k.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:k.name(),url:k.url()}}if(f.isObject(k)){var e={};c._objectEach(k,function(m,l){e[l]=c._encode(m,j,h)});return e}return k};c._decode=function(j,m){var f=c._;if(!f.isObject(m)){return m}if(f.isArray(m)){c._arrayEach(m,function(q,o){m[o]=c._decode(o,q)});return m}if(m instanceof c.Object){return m}if(m instanceof c.File){return m}if(m instanceof c.Op){return m}if(m.__op){return c.Op._decode(m)}if(m.__type==="Pointer"&&m.className){var n=c.Object._create(m.className);n._finishFetch({objectId:m.objectId},false);return n}if(m.__type==="Object"&&m.className){var k=m.className;delete m.__type;delete m.className;var e=c.Object._create(k);e._finishFetch(m,true);return e}if(m.__type==="Date"){return c._parseDate(m.iso)}if(m.__type==="GeoPoint"){return new c.GeoPoint({latitude:m.latitude,longitude:m.longitude})}if(j==="ACL"){if(m instanceof c.ACL){return m}return new c.ACL(m)}if(m.__type==="Relation"){var l=new c.Relation(null,j);l.targetClassName=m.className;return l}if(m.__type==="File"){var h=new c.File(m.name);h._url=m.url;return h}c._objectEach(m,function(q,o){m[o]=c._decode(o,q)});return m};c._arrayEach=c._.each;c._traverse=function(f,h,e){if(f instanceof c.Object){e=e||[];if(c._.indexOf(e,f)>=0){return}e.push(f);c._traverse(f.attributes,h,e);return h(f)}if(f instanceof c.Relation||f instanceof c.File){return h(f)}if(c._.isArray(f)){c._.each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}if(c._.isObject(f)){c._each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}return h(f)};c._objectEach=c._each=function(f,h){var e=c._;if(e.isObject(f)){e.each(e.keys(f),function(j){h(f[j],j)})}else{e.each(f,h)}};c._isNullOrUndefined=function(e){return c._.isNull(e)||c._.isUndefined(e)}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Analytics=c.Analytics||{};b.extend(c.Analytics,{track:function(e,f,d){e=e||"";e=e.replace(/^\s*/,"");e=e.replace(/\s*$/,"");if(e.length===0){throw"A name for the custom event must be provided"}b.each(f,function(j,h){if(!b.isString(h)||!b.isString(j)){throw'track() dimensions expects keys and values of type "string".'}});d=d||{};return c._request({route:"events",className:e,method:"POST",data:{dimensions:f}})._thenRunCallbacks(d)}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Config=function(){this.attributes={};this._escapedAttributes={}};c.Config.current=function(){if(c.Config._currentConfig){return c.Config._currentConfig}var d=c.localStorage.getItem(c._getParsePath(c.Config._CURRENT_CONFIG_KEY));var e=new c.Config();if(d){e._finishFetch(JSON.parse(d));c.Config._currentConfig=e}return e};c.Config.get=function(d){d=d||{};var e=c._request({route:"config",method:"GET",});return e.then(function(f){if(!f||!f.params){var j=new c.Error(c.Error.INVALID_JSON,"Config JSON response invalid.");return c.Promise.error(j)}var h=new c.Config();h._finishFetch(f);c.Config._currentConfig=h;return h})._thenRunCallbacks(d)};c.Config.prototype={escape:function(d){var e=this._escapedAttributes[d];if(e){return e}var h=this.attributes[d];var f;if(c._isNullOrUndefined(h)){f=""}else{f=b.escape(h.toString())}this._escapedAttributes[d]=f;return f},get:function(d){return this.attributes[d]},_finishFetch:function(d){this.attributes=c._decode(null,b.clone(d.params));c.localStorage.setItem(c._getParsePath(c.Config._CURRENT_CONFIG_KEY),JSON.stringify(d))}};c.Config._currentConfig=null;c.Config._CURRENT_CONFIG_KEY="currentConfig"}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Error=function(e,d){this.code=e;this.message=d};b.extend(c.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,INVALID_EVENT_NAME:160,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})}(this));(function(){var a=this;var c=(a.Parse||(a.Parse={}));var b=/\s+/;var d=Array.prototype.slice;c.Events={on:function(j,n,h){var f,l,k,e,m;if(!n){return this}j=j.split(b);f=this._callbacks||(this._callbacks={});l=j.shift();while(l){m=f[l];k=m?m.tail:{};k.next=e={};k.context=h;k.callback=n;f[l]={tail:e,next:m?m.next:k};l=j.shift()}return this},off:function(n,l,f){var e,o,h,k,j,m;if(!(o=this._callbacks)){return}if(!(n||l||f)){delete this._callbacks;return this}n=n?n.split(b):_.keys(o);e=n.shift();while(e){h=o[e];delete o[e];if(!h||!(l||f)){e=n.shift();continue}k=h.tail;h=h.next;while(h!==k){j=h.callback;m=h.context;if((l&&j!==l)||(f&&m!==f)){this.on(e,j,m)}h=h.next}e=n.shift()}return this},trigger:function(j){var n,m,h,f,e,l,k;if(!(h=this._callbacks)){return this}l=h.all;j=j.split(b);k=d.call(arguments,1);n=j.shift();while(n){m=h[n];if(m){f=m.tail;while((m=m.next)!==f){m.callback.apply(m.context||this,k)}}m=l;if(m){f=m.tail;e=[n].concat(k);while((m=m.next)!==f){m.callback.apply(m.context||this,e)}}n=j.shift()}return this}};c.Events.bind=c.Events.on;c.Events.unbind=c.Events.off}.call(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.GeoPoint=function(f,e){if(b.isArray(f)){c.GeoPoint._validate(f[0],f[1]);this.latitude=f[0];this.longitude=f[1]}else{if(b.isObject(f)){c.GeoPoint._validate(f.latitude,f.longitude);this.latitude=f.latitude;this.longitude=f.longitude}else{if(b.isNumber(f)&&b.isNumber(e)){c.GeoPoint._validate(f,e);this.latitude=f;this.longitude=e}else{this.latitude=0;this.longitude=0}}}var d=this;if(this.__defineGetter__&&this.__defineSetter__){this._latitude=this.latitude;this._longitude=this.longitude;this.__defineGetter__("latitude",function(){return d._latitude});this.__defineGetter__("longitude",function(){return d._longitude});this.__defineSetter__("latitude",function(h){c.GeoPoint._validate(h,d.longitude);d._latitude=h});this.__defineSetter__("longitude",function(h){c.GeoPoint._validate(d.latitude,h);d._longitude=h})}};c.GeoPoint._validate=function(e,d){if(e<-90){throw"Parse.GeoPoint latitude "+e+" < -90.0."}if(e>90){throw"Parse.GeoPoint latitude "+e+" > 90.0."}if(d<-180){throw"Parse.GeoPoint longitude "+d+" < -180.0."}if(d>180){throw"Parse.GeoPoint longitude "+d+" > 180.0."}};c.GeoPoint.current=function(d){var e=new c.Promise();navigator.geolocation.getCurrentPosition(function(f){e.resolve(new c.GeoPoint({latitude:f.coords.latitude,longitude:f.coords.longitude}))},function(f){e.reject(f)});return e._thenRunCallbacks(d)};c.GeoPoint.prototype={toJSON:function(){c.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(q){var j=Math.PI/180;var d=this.latitude*j;var l=this.longitude*j;var o=q.latitude*j;var h=q.longitude*j;var f=d-o;var k=l-h;var e=Math.sin(f/2);var m=Math.sin(k/2);var n=((e*e)+(Math.cos(d)*Math.cos(o)*m*m));n=Math.min(1,n);return 2*Math.asin(Math.sqrt(n))},kilometersTo:function(d){return this.radiansTo(d)*6371},milesTo:function(d){return this.radiansTo(d)*3958.8}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";d.ACL=function(f){var e=this;e.permissionsById={};if(c.isObject(f)){if(f instanceof d.User){e.setReadAccess(f,true);e.setWriteAccess(f,true)}else{if(c.isFunction(f)){throw"Parse.ACL() called with a function.  Did you forget ()?"}d._objectEach(f,function(j,h){if(!c.isString(h)){throw"Tried to create an ACL with an invalid userId."}e.permissionsById[h]={};d._objectEach(j,function(l,k){if(k!=="read"&&k!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!c.isBoolean(l)){throw"Tried to create an ACL with an invalid permission value."}e.permissionsById[h][k]=l})})}}};d.ACL.prototype.toJSON=function(){return c.clone(this.permissionsById)};d.ACL.prototype._setAccess=function(e,f,j){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}if(!c.isString(f)){throw"userId must be a string."}if(!c.isBoolean(j)){throw"allowed must be either true or false."}var h=this.permissionsById[f];if(!h){if(!j){return}else{h={};this.permissionsById[f]=h}}if(j){this.permissionsById[f][e]=true}else{delete h[e];if(c.isEmpty(h)){delete h[f]}}};d.ACL.prototype._getAccess=function(e,f){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}var h=this.permissionsById[f];if(!h){return false}return h[e]?true:false};d.ACL.prototype.setReadAccess=function(e,f){this._setAccess("read",e,f)};d.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)};d.ACL.prototype.setWriteAccess=function(e,f){this._setAccess("write",e,f)};d.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)};d.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(b,e)};d.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(b)};d.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(b,e)};d.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(b)};d.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getReadAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getWriteAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleReadAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setReadAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleWriteAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setWriteAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Op=function(){this._initialize.apply(this,arguments)};c.Op.prototype={_initialize:function(){}};b.extend(c.Op,{_extend:c._extend,_opDecoderMap:{},_registerDecoder:function(d,e){c.Op._opDecoderMap[d]=e},_decode:function(d){var e=c.Op._opDecoderMap[d.__op];if(e){return e(d)}else{return undefined}}});c.Op._registerDecoder("Batch",function(d){var e=null;c._arrayEach(d.ops,function(f){f=c.Op._decode(f);e=f._mergeWithPrevious(e)});return e});c.Op.Set=c.Op._extend({_initialize:function(d){this._value=d},value:function(){return this._value},toJSON:function(){return c._encode(this.value())},_mergeWithPrevious:function(d){return this},_estimate:function(d){return this.value()}});c.Op._UNSET={};c.Op.Unset=c.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(d){return this},_estimate:function(d){return c.Op._UNSET}});c.Op._registerDecoder("Delete",function(d){return new c.Op.Unset()});c.Op.Increment=c.Op._extend({_initialize:function(d){this._amount=d},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.amount())}else{if(d instanceof c.Op.Set){return new c.Op.Set(d.value()+this.amount())}else{if(d instanceof c.Op.Increment){return new c.Op.Increment(this.amount()+d.amount())}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return this.amount()}return d+this.amount()}});c.Op._registerDecoder("Increment",function(d){return new c.Op.Increment(d.amount)});c.Op.Add=c.Op._extend({_initialize:function(d){this._objects=d},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Add){return new c.Op.Add(d.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{return d.concat(this.objects())}}});c.Op._registerDecoder("Add",function(d){return new c.Op.Add(c._decode(undefined,d.objects))});c.Op.AddUnique=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.AddUnique){return new c.Op.AddUnique(this._estimate(d.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{var e=b.clone(d);c._arrayEach(this.objects(),function(j){if(j instanceof c.Object&&j.id){var h=b.find(e,function(k){return(k instanceof c.Object)&&(k.id===j.id)});if(!h){e.push(j)}else{var f=b.indexOf(e,h);e[f]=j}}else{if(!b.contains(e,j)){e.push(j)}}});return e}}});c.Op._registerDecoder("AddUnique",function(d){return new c.Op.AddUnique(c._decode(undefined,d.objects))});c.Op.Remove=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return d}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Remove){return new c.Op.Remove(b.union(d.objects(),this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return[]}else{var e=b.difference(d,this.objects());c._arrayEach(this.objects(),function(f){if(f instanceof c.Object&&f.id){e=b.reject(e,function(h){return(h instanceof c.Object)&&(h.id===f.id)})}});return e}}});c.Op._registerDecoder("Remove",function(d){return new c.Op.Remove(c._decode(undefined,d.objects))});c.Op.Relation=c.Op._extend({_initialize:function(h,e){this._targetClassName=null;var d=this;var f=function(j){if(j instanceof c.Object){if(!j.id){throw"You can't add an unsaved Parse.Object to a relation."}if(!d._targetClassName){d._targetClassName=j.className}if(d._targetClassName!==j.className){throw"Tried to create a Parse.Relation with 2 different types: "+d._targetClassName+" and "+j.className+"."}return j.id}return j};this.relationsToAdd=b.uniq(b.map(h,f));this.relationsToRemove=b.uniq(b.map(e,f))},added:function(){var d=this;return b.map(this.relationsToAdd,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},removed:function(){var d=this;return b.map(this.relationsToRemove,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},toJSON:function(){var j=null;var f=null;var e=this;var h=function(k){return{__type:"Pointer",className:e._targetClassName,objectId:k}};var d=null;if(this.relationsToAdd.length>0){d=b.map(this.relationsToAdd,h);j={__op:"AddRelation",objects:d}}if(this.relationsToRemove.length>0){d=b.map(this.relationsToRemove,h);f={__op:"RemoveRelation",objects:d}}if(j&&f){return{__op:"Batch",ops:[j,f]}}return j||f||{}},_mergeWithPrevious:function(h){if(!h){return this}else{if(h instanceof c.Op.Unset){throw"You can't modify a relation after deleting it."}else{if(h instanceof c.Op.Relation){if(h._targetClassName&&h._targetClassName!==this._targetClassName){throw"Related object must be of class "+h._targetClassName+", but "+this._targetClassName+" was passed in."}var f=b.union(b.difference(h.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var e=b.union(b.difference(h.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var d=new c.Op.Relation(f,e);d._targetClassName=this._targetClassName;return d}else{throw"Op is invalid after previous op."}}}},_estimate:function(e,d,f){if(!e){var h=new c.Relation(d,f);h.targetClassName=this._targetClassName}else{if(e instanceof c.Relation){if(this._targetClassName){if(e.targetClassName){if(e.targetClassName!==this._targetClassName){throw"Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{e.targetClassName=this._targetClassName}}return e}else{throw"Op is invalid after previous op."}}}});c.Op._registerDecoder("AddRelation",function(d){return new c.Op.Relation(c._decode(undefined,d.objects),[])});c.Op._registerDecoder("RemoveRelation",function(d){return new c.Op.Relation([],c._decode(undefined,d.objects))})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Relation=function(e,d){this.parent=e;this.key=d;this.targetClassName=null};c.Relation.prototype={_ensureParentAndKey:function(e,d){this.parent=this.parent||e;this.key=this.key||d;if(this.parent!==e){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==d){throw"Internal Error. Relation retrieved from two different keys."}},add:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation(d,[]);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},remove:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation([],d);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var d;var e;if(!this.targetClassName){d=c.Object._getSubclass(this.parent.className);e=new c.Query(d);e._extraOptions.redirectClassNameForKey=this.key}else{d=c.Object._getSubclass(this.targetClassName);e=new c.Query(d)}e._addCondition("$relatedTo","object",this.parent._toPointer());e._addCondition("$relatedTo","key",this.key);return e}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};b.extend(c.Promise,{_isPromisesAPlusCompliant:false,is:function(d){return d&&d.then&&b.isFunction(d.then)},as:function(){var d=new c.Promise();d.resolve.apply(d,arguments);return d},error:function(){var d=new c.Promise();d.reject.apply(d,arguments);return d},when:function(h){var k;if(h&&c._isNullOrUndefined(h.length)){k=arguments}else{k=h}var j=k.length;var e=false;var f=[];var m=[];f.length=k.length;m.length=k.length;if(j===0){return c.Promise.as.apply(this,f)}var l=new c.Promise();var d=function(){j=j-1;if(j===0){if(e){l.reject(m)}else{l.resolve.apply(l,f)}}};c._arrayEach(k,function(n,o){if(c.Promise.is(n)){n.then(function(q){f[o]=q;d()},function(q){m[o]=q;e=true;d()})}else{f[o]=n;d()}});return l},_continueWhile:function(d,e){if(d()){return e().then(function(){return c.Promise._continueWhile(d,e)})}return c.Promise.as()}});b.extend(c.Promise.prototype,{resolve:function(d){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var e=arguments;c._arrayEach(this._resolvedCallbacks,function(f){f.apply(this,e)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(d){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=d;c._arrayEach(this._rejectedCallbacks,function(e){e(d)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(e,j){var k=new c.Promise();var l=function(){var m=arguments;if(e){if(c.Promise._isPromisesAPlusCompliant){try{m=[e.apply(this,m)]}catch(n){m=[c.Promise.error(n)]}}else{m=[e.apply(this,m)]}}if(m.length===1&&c.Promise.is(m[0])){m[0].then(function(){k.resolve.apply(k,arguments)},function(o){k.reject(o)})}else{k.resolve.apply(k,m)}};var h=function(n){var m=[];if(j){if(c.Promise._isPromisesAPlusCompliant){try{m=[j(n)]}catch(o){m=[c.Promise.error(o)]}}else{m=[j(n)]}if(m.length===1&&c.Promise.is(m[0])){m[0].then(function(){k.resolve.apply(k,arguments)},function(q){k.reject(q)})}else{if(c.Promise._isPromisesAPlusCompliant){k.resolve.apply(k,m)}else{k.reject(m[0])}}}else{k.reject(n)}};var d=function(m){m.call()};if(c.Promise._isPromisesAPlusCompliant){if(typeof(window)!=="undefined"&&window.setTimeout){d=function(m){window.setTimeout(m,0)}}else{if(typeof(process)!=="undefined"&&process.nextTick){d=function(m){process.nextTick(m)}}}}var f=this;if(this._resolved){d(function(){l.apply(f,f._result)})}else{if(this._rejected){d(function(){h(f._error)})}else{this._resolvedCallbacks.push(l);this._rejectedCallbacks.push(h)}}return k},always:function(d){return this.then(d,d)},done:function(d){return this.then(d)},fail:function(d){return this.then(null,d)},_thenRunCallbacks:function(f,e){var d;if(b.isFunction(f)){var h=f;d={success:function(j){h(j,null)},error:function(j){h(null,j)}}}else{d=b.clone(f)}d=d||{};return this.then(function(j){if(d.success){d.success.apply(this,arguments)}else{if(e){e.trigger("sync",e,j,d)}}return c.Promise.as.apply(c.Promise,arguments)},function(j){if(d.error){if(!b.isUndefined(e)){d.error(e,j)}else{d.error(j)}}else{if(e){e.trigger("error",e,j,d)}}return c.Promise.error(j)})},_continueWith:function(d){return this.then(function(){return d(arguments,null)},function(e){return d(null,e)})}})}(this));(function(b){b.Parse=b.Parse||{};var e=b.Parse;var d=e._;var c=function(j){if(j<26){return String.fromCharCode(65+j)}if(j<52){return String.fromCharCode(97+(j-26))}if(j<62){return String.fromCharCode(48+(j-52))}if(j===62){return"+"}if(j===63){return"/"}throw"Tried to encode large digit "+j+" in base64."};var a=function(k){var j=[];j.length=Math.ceil(k.length/3);d.times(j.length,function(o){var n=k[o*3];var m=k[o*3+1]||0;var l=k[o*3+2]||0;var r=(o*3+1)<k.length;var q=(o*3+2)<k.length;j[o]=[c((n>>2)&63),c(((n<<4)&48)|((m>>4)&15)),r?c(((m<<2)&60)|((l>>6)&3)):"=",q?c(l&63):"="].join("")});return j.join("")};var h={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var f=function(k,l){var m=new e.Promise();if(typeof(FileReader)==="undefined"){return e.Promise.error(new e.Error(e.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser."))}var j=new FileReader();j.onloadend=function(){if(j.readyState!==2){m.reject(new e.Error(e.Error.FILE_READ_ERROR,"Error reading file."));return}var o=j.result;var n=/^data:([^;]*);base64,(.*)$/.exec(o);if(!n){m.reject(new e.Error(e.Error.FILE_READ_ERROR,"Unable to interpret data URL: "+o));return}m.resolve(n[2],l||n[1])};j.readAsDataURL(k);return m};e.File=function(k,n,l){this._name=k;var q=/\.([^.]*)$/.exec(k);if(q){q=q[1].toLowerCase()}var o=l||h[q]||"text/plain";if(d.isArray(n)){this._source=e.Promise.as(a(n),o)}else{if(n&&n.base64){var j=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/;var m=j.exec(n.base64);if(m&&m.length>0){this._source=e.Promise.as((m.length===4?m[3]:m[2]),m[1])}else{this._source=e.Promise.as(n.base64,o)}}else{if(typeof(File)!=="undefined"&&n instanceof File){this._source=f(n,l)}else{if(d.isString(n)){throw"Creating a Parse.File from a String is not yet supported."}}}}};e.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(k){k=k||{};var j=this;if(!j._previousSave){j._previousSave=j._source.then(function(l,m){var n={base64:l,_ContentType:m};return e._request({route:"files",className:j._name,method:"POST",data:n,useMasterKey:k.useMasterKey})}).then(function(l){j._name=l.name;j._url=l.url;return j})}return j._previousSave._thenRunCallbacks(k)}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Object=function(d,e){if(b.isString(d)){return c.Object._create.apply(this,arguments)}d=d||{};if(e&&e.parse){d=this.parse(d)}var f=c._getValue(this,"defaults");if(f){d=b.extend({},f,d)}if(e&&e.collection){this.collection=e.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=b.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(d,{silent:true})){throw new Error("Can't create an invalid Parse.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=b.clone(this.attributes);this.initialize.apply(this,arguments)};c.Object.saveAll=function(e,d){d=d||{};return c.Object._deepSaveAsync(e,{useMasterKey:d.useMasterKey})._thenRunCallbacks(d)};c.Object.destroyAll=function(h,f){f=f||{};var k=function(m){m.trigger("destroy",m,m.collection,f)};var l=[];var d=function(m){var n=c.Promise.as();if(m.length>0){n=n.then(function(){return c._request({route:"batch",method:"POST",useMasterKey:f.useMasterKey,data:{requests:b.map(m,function(o){return{method:"DELETE",path:"/1/classes/"+o.className+"/"+o.id}})}})}).then(function(q,o,r){c._arrayEach(m,function(t,u){if(q[u].success&&f.wait){k(t)}else{if(q[u].error){var s=new c.Error(q[u].error.code,q[u].error.error);s.object=t;l.push(s)}}})})}return n};var j=c.Promise.as();var e=[];c._arrayEach(h,function(m,n){if(!m.id||!f.wait){k(m)}if(m.id){e.push(m)}if(e.length===20||n+1===h.length){var o=e;e=[];j=j.then(function(){return d(o)})}});return j.then(function(){if(l.length===0){return true}else{var m=new c.Error(c.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");m.errors=l;return c.Promise.error(m)}})._thenRunCallbacks(f)};c.Object.fetchAll=function(e,d){return c.Object._fetchAll(e,true)._thenRunCallbacks(d)};c.Object.fetchAllIfNeeded=function(e,d){return c.Object._fetchAll(e,false)._thenRunCallbacks(d)};b.extend(c.Object.prototype,c.Events,{_existed:false,initialize:function(){},toJSON:function(){var d=this._toFullJSON();c._arrayEach(["__type","className"],function(e){delete d[e]});return d},_toFullJSON:function(e){var d=b.clone(this.attributes);c._objectEach(d,function(h,f){d[f]=c._encode(h,e)});c._objectEach(this._operations,function(h,f){d[f]=h});if(b.has(this,"id")){d.objectId=this.id}if(b.has(this,"createdAt")){if(b.isDate(this.createdAt)){d.createdAt=this.createdAt.toJSON()}else{d.createdAt=this.createdAt}}if(b.has(this,"updatedAt")){if(b.isDate(this.updatedAt)){d.updatedAt=this.updatedAt.toJSON()}else{d.updatedAt=this.updatedAt}}d.__type="Object";d.className=this.className;return d},_refreshCache:function(){var d=this;if(d._refreshingCache){return}d._refreshingCache=true;c._objectEach(this.attributes,function(f,e){if(f instanceof c.Object){f._refreshCache()}else{if(b.isObject(f)){if(d._resetCacheForKey(e)){d.set(e,new c.Op.Set(f),{silent:true})}}}});delete d._refreshingCache},dirty:function(d){this._refreshCache();var e=b.last(this._opSetQueue);if(d){return(e[d]?true:false)}if(!this.id){return true}if(b.keys(e).length>0){return true}return false},dirtyKeys:function(){return b.keys(b.last(this._opSetQueue))},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(d){return this.attributes[d]},relation:function(d){var e=this.get(d);if(e){if(!(e instanceof c.Relation)){throw"Called relation() on non-relation field "+d}e._ensureParentAndKey(this,d);return e}else{return new c.Relation(this,d)}},escape:function(d){var e=this._escapedAttributes[d];if(e){return e}var h=this.attributes[d];var f;if(c._isNullOrUndefined(h)){f=""}else{f=b.escape(h.toString())}this._escapedAttributes[d]=f;return f},has:function(d){return !c._isNullOrUndefined(this.attributes[d])},_mergeMagicFields:function(e){var d=this;var f=["id","objectId","createdAt","updatedAt"];c._arrayEach(f,function(h){if(e[h]){if(h==="objectId"){d.id=e[h]}else{if((h==="createdAt"||h==="updatedAt")&&!b.isDate(e[h])){d[h]=c._parseDate(e[h])}else{d[h]=e[h]}}delete e[h]}})},_copyServerData:function(e){var d={};c._objectEach(e,function(h,f){d[f]=c._decode(f,h)});this._serverData=d;this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._rebuildAllEstimatedData()},_mergeFromObject:function(d){if(!d){return}this.id=d.id;this.createdAt=d.createdAt;this.updatedAt=d.updatedAt;this._copyServerData(d._serverData);this._hasData=true},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=this;var d=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);var f=b.first(this._opSetQueue);c._objectEach(d,function(l,j){var k=d[j];var h=f[j];if(k&&h){f[j]=h._mergeWithPrevious(k)}else{if(k){f[j]=k}}});this._saving=this._saving-1},_finishSave:function(f){var d={};c._traverse(this.attributes,function(j){if(j instanceof c.Object&&j.id&&j._hasData){d[j.id]=j}});var h=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);this._applyOpSet(h,this._serverData);this._mergeMagicFields(f);var e=this;c._objectEach(f,function(k,j){e._serverData[j]=c._decode(j,k);var l=c._traverse(e._serverData[j],function(m){if(m instanceof c.Object&&d[m.id]){return d[m.id]}});if(l){e._serverData[j]=l}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(e,d){this._opSetQueue=[{}];this._mergeMagicFields(e);this._copyServerData(e);this._hasData=d},_applyOpSet:function(e,f){var d=this;c._objectEach(e,function(j,h){f[h]=j._estimate(f[h],d,h);if(f[h]===c.Op._UNSET){delete f[h]}})},_resetCacheForKey:function(e){var h=this.attributes[e];if(b.isObject(h)&&!(h instanceof c.Object)&&!(h instanceof c.File)){h=h.toJSON?h.toJSON():h;var d=JSON.stringify(h);if(this._hashedJSON[e]!==d){var f=!!this._hashedJSON[e];this._hashedJSON[e]=d;return f}}return false},_rebuildEstimatedDataForKey:function(e){var d=this;delete this.attributes[e];if(this._serverData[e]){this.attributes[e]=this._serverData[e]}c._arrayEach(this._opSetQueue,function(f){var h=f[e];if(h){d.attributes[e]=h._estimate(d.attributes[e],d,e);if(d.attributes[e]===c.Op._UNSET){delete d.attributes[e]}else{d._resetCacheForKey(e)}}})},_rebuildAllEstimatedData:function(){var d=this;var e=b.clone(this.attributes);this.attributes=b.clone(this._serverData);c._arrayEach(this._opSetQueue,function(f){d._applyOpSet(f,d.attributes);c._objectEach(f,function(j,h){d._resetCacheForKey(h)})});c._objectEach(e,function(f,h){if(d.attributes[h]!==f){d.trigger("change:"+h,d,d.attributes[h],{})}});c._objectEach(this.attributes,function(h,f){if(!b.has(e,f)){d.trigger("change:"+f,d,h,{})}})},set:function(k,j,n){var l,h;if(b.isObject(k)||c._isNullOrUndefined(k)){l=k;c._objectEach(l,function(q,o){l[o]=c._decode(o,q)});n=j}else{l={};l[k]=c._decode(k,j)}n=n||{};if(!l){return this}if(l instanceof c.Object){l=l.attributes}if(n.unset){c._objectEach(l,function(o,q){l[q]=new c.Op.Unset()})}var f=b.clone(l);var m=this;c._objectEach(f,function(q,o){if(q instanceof c.Op){f[o]=q._estimate(m.attributes[o],m,o);if(f[o]===c.Op._UNSET){delete f[o]}}});if(!this._validate(l,n)){return false}this._mergeMagicFields(l);n.changes={};var d=this._escapedAttributes;var e=this._previousAttributes||{};c._arrayEach(b.keys(l),function(q){var s=l[q];if(s instanceof c.Relation){s.parent=m}if(!(s instanceof c.Op)){s=new c.Op.Set(s)}var o=true;if(s instanceof c.Op.Set&&b.isEqual(m.attributes[q],s.value)){o=false}if(o){delete d[q];if(n.silent){m._silent[q]=true}else{n.changes[q]=true}}var r=b.last(m._opSetQueue);r[q]=s._mergeWithPrevious(r[q]);m._rebuildEstimatedDataForKey(q);if(o){m.changed[q]=m.attributes[q];if(!n.silent){m._pending[q]=true}}else{delete m.changed[q];delete m._pending[q]}});if(!n.silent){this.change(n)}return this},unset:function(d,e){e=e||{};e.unset=true;return this.set(d,null,e)},increment:function(d,e){if(b.isUndefined(e)||b.isNull(e)){e=1}return this.set(d,new c.Op.Increment(e))},add:function(d,e){return this.set(d,new c.Op.Add([e]))},addUnique:function(d,e){return this.set(d,new c.Op.AddUnique([e]))},remove:function(d,e){return this.set(d,new c.Op.Remove([e]))},op:function(d){return b.last(this._opSetQueue)[d]},clear:function(d){d=d||{};d.unset=true;var e=b.extend(this.attributes,this._operations);return this.set(e,d)},_getSaveJSON:function(){var d=b.clone(b.first(this._opSetQueue));c._objectEach(d,function(f,e){d[e]=f.toJSON()});return d},_canBeSerialized:function(){return c.Object._canBeSerializedAsValue(this.attributes)},fetch:function(e){var d=this;e=e||{};var f=c._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:e.useMasterKey});return f.then(function(j,h,k){d._finishFetch(d.parse(j,h,k),true);return d})._thenRunCallbacks(e,this)},save:function(l,k,h){var f,r,m,u,q;if(b.isObject(l)||c._isNullOrUndefined(l)){r=l;u=k}else{r={};r[l]=k;u=h}if(!u&&r){var s=b.reject(r,function(w,v){return b.include(["success","error","wait"],v)});if(s.length===0){var t=true;if(b.has(r,"success")&&!b.isFunction(r.success)){t=false}if(b.has(r,"error")&&!b.isFunction(r.error)){t=false}if(t){return this.save(null,r)}}}u=b.clone(u)||{};if(u.wait){m=b.clone(this.attributes)}var n=b.clone(u)||{};if(n.wait){n.silent=true}var e;n.error=function(w,v){e=v};if(r&&!this.set(r,n)){return c.Promise.error(e)._thenRunCallbacks(u,this)}var j=this;j._refreshCache();var o=[];var d=[];c.Object._findUnsavedChildren(j.attributes,o,d);if(o.length+d.length>0){return c.Object._deepSaveAsync(this.attributes,{useMasterKey:u.useMasterKey}).then(function(){return j.save(null,u)},function(v){return c.Promise.error(v)._thenRunCallbacks(u,j)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||c.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var z=j.id?"PUT":"POST";var w=j._getSaveJSON();var v="classes";var x=j.className;if(j.className==="_User"&&!j.id){v="users";x=null}var y=c._request({route:v,className:x,objectId:j.id,method:z,useMasterKey:u.useMasterKey,data:w});y=y.then(function(D,A,C){var B=j.parse(D,A,C);if(u.wait){B=b.extend(r||{},B)}j._finishSave(B);if(u.wait){j.set(m,n)}return j},function(A){j._cancelSave();return c.Promise.error(A)})._thenRunCallbacks(u,j);return y});return this._allPreviousSaves},destroy:function(e){e=e||{};var d=this;var h=function(){d.trigger("destroy",d,d.collection,e)};if(!this.id){return h()}if(!e.wait){h()}var f=c._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:e.useMasterKey});return f.then(function(){if(e.wait){h()}return d})._thenRunCallbacks(e,this)},parse:function(h,d,f){var e=b.clone(h);b(["createdAt","updatedAt"]).each(function(j){if(e[j]){e[j]=c._parseDate(e[j])}});if(!e.updatedAt){e.updatedAt=e.createdAt}if(d){this._existed=(d!==201)}return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(f){f=f||{};var j=this._changing;this._changing=true;var e=this;c._objectEach(this._silent,function(k){e._pending[k]=true});var h=b.extend({},f.changes,this._silent);this._silent={};c._objectEach(h,function(l,k){e.trigger("change:"+k,e,e.get(k),f)});if(j){return this}var d=function(l,k){if(!e._pending[k]&&!e._silent[k]){delete e.changed[k]}};while(!b.isEmpty(this._pending)){this._pending={};this.trigger("change",this,f);c._objectEach(this.changed,d);e._previousAttributes=b.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},hasChanged:function(d){if(!arguments.length){return !b.isEmpty(this.changed)}return this.changed&&b.has(this.changed,d)},changedAttributes:function(e){if(!e){return this.hasChanged()?b.clone(this.changed):false}var f={};var d=this._previousAttributes;c._objectEach(e,function(j,h){if(!b.isEqual(d[h],j)){f[h]=j}});return f},previous:function(d){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[d]},previousAttributes:function(){return b.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(f,e){if(b.has(f,"ACL")&&!(f.ACL instanceof c.ACL)){return new c.Error(c.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}var d=true;c._objectEach(f,function(h,j){if(!(/^[A-Za-z][0-9A-Za-z_]*$/).test(j)){d=false}});if(!d){return new c.Error(c.Error.INVALID_KEY_NAME)}return false},_validate:function(f,e){if(e.silent||!this.validate){return true}f=b.extend({},this.attributes,f);var d=this.validate(f,e);if(!d){return true}if(e&&e.error){e.error(this,d,e)}else{this.trigger("error",this,d,e)}return false},getACL:function(){return this.get("ACL")},setACL:function(e,d){return this.set("ACL",e,d)}});c.Object._getSubclass=function(e){if(!b.isString(e)){throw"Parse.Object._getSubclass requires a string argument."}var d=c.Object._classMap[e];if(!d){d=c.Object.extend(e);c.Object._classMap[e]=d}return d};c.Object._create=function(h,d,e){var f=c.Object._getSubclass(h);return new f(d,e)};c.Object._toObjectIdArray=function(l,h){if(l.length===0){return c.Promise.as(l)}var e;var k=l[0].className;var j=[];for(var f=0;f<l.length;f++){var d=l[f];if(k!==d.className){e=new c.Error(c.Error.INVALID_CLASS_NAME,"All objects should be of the same class");return c.Promise.error(e)}else{if(!d.id){e=new c.Error(c.Error.MISSING_OBJECT_ID,"All objects must have an ID");return c.Promise.error(e)}else{if(h&&d._hasData){continue}}}j.push(d.id)}return c.Promise.as(j)};c.Object._updateWithFetchedResults=function(k,l,d){var m={};c._arrayEach(l,function(n,o){m[n.id]=n});for(var h=0;h<k.length;h++){var f=k[h];var j=m[f.id];if(!j&&d){var e=new c.Error(c.Error.OBJECT_NOT_FOUND,"All objects must exist on the server");return c.Promise.error(e)}f._mergeFromObject(j)}return c.Promise.as(k)};c.Object._fetchAll=function(f,d){if(f.length===0){return c.Promise.as(f)}var e=!d;return c.Object._toObjectIdArray(f,e).then(function(j){var h=f[0].className;var k=new c.Query(h);k.containedIn("objectId",j);k.limit=j.length;return k.find()}).then(function(h){return c.Object._updateWithFetchedResults(f,h,d)})};c.Object._classMap={};c.Object._extend=c._extend;c.Object.extend=function(h,f,j){if(!b.isString(h)){if(h&&b.has(h,"className")){return c.Object.extend(h.className,h,f)}else{throw new Error("Parse.Object.extend's first argument should be the className.")}}if(h==="User"&&c.User._performUserRewrite){h="_User"}f=f||{};f.className=h;var d=null;if(b.has(c.Object._classMap,h)){var e=c.Object._classMap[h];d=e._extend(f,j)}else{d=this._extend(f,j)}d.extend=function(l){if(b.isString(l)||(l&&b.has(l,"className"))){return c.Object.extend.apply(d,arguments)}var k=[h].concat(c._.toArray(arguments));return c.Object.extend.apply(d,k)};c.Object._classMap[h]=d;return d};c.Object._findUnsavedChildren=function(d,e,f){c._traverse(d,function(h){if(h instanceof c.Object){h._refreshCache();if(h.dirty()){e.push(h)}return}if(h instanceof c.File){if(!h.url()){f.push(h)}return}})};c.Object._canBeSerializedAsValue=function(d){if(d instanceof c.Object){return !!d.id}if(d instanceof c.File){return true}var e=true;if(b.isArray(d)){c._arrayEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}else{if(b.isObject(d)){c._objectEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}}return e};c.Object._deepSaveAsync=function(f,e){var d=[];var k=[];c.Object._findUnsavedChildren(f,d,k);var l=c.Promise.as();b.each(k,function(m){l=l.then(function(){return m.save(e)})});var j=b.uniq(d);var h=b.uniq(j);return l.then(function(){return c.Promise._continueWhile(function(){return h.length>0},function(){var q=[];var m=[];c._arrayEach(h,function(r){if(q.length>20){m.push(r);return}if(r._canBeSerialized()){q.push(r)}else{m.push(r)}});h=m;if(q.length===0){return c.Promise.error(new c.Error(c.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var n=c.Promise.when(b.map(q,function(r){return r._allPreviousSaves||c.Promise.as()}));var o=new c.Promise();c._arrayEach(q,function(r){r._allPreviousSaves=o});return n._continueWith(function(){return c._request({route:"batch",method:"POST",useMasterKey:e.useMasterKey,data:{requests:b.map(q,function(r){var s=r._getSaveJSON();var u="POST";var t="/1/classes/"+r.className;if(r.id){t=t+"/"+r.id;u="PUT"}r._startSave();return{method:u,path:t,body:s}})}}).then(function(s,r,u){var t;c._arrayEach(q,function(v,w){if(s[w].success){v._finishSave(v.parse(s[w].success,r,u))}else{t=t||s[w].error;v._cancelSave()}});if(t){return c.Promise.error(new c.Error(t.code,t.error))}}).then(function(r){o.resolve(r);return r},function(r){o.reject(r);return c.Promise.error(r)})})})}).then(function(){return f})}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Role=c.Object.extend("_Role",{constructor:function(d,e){if(b.isString(d)&&(e instanceof c.ACL)){c.Object.prototype.constructor.call(this,null,null);this.setName(d);this.setACL(e)}else{c.Object.prototype.constructor.call(this,d,e)}},getName:function(){return this.get("name")},setName:function(e,d){return this.set("name",e,d)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(f,e){if("name" in f&&f.name!==this.getName()){var d=f.name;if(this.id&&this.id!==f.objectId){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!b.isString(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!(/^[0-9a-zA-Z\-_ ]+$/).test(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}if(c.Object.prototype.validate){return c.Object.prototype.validate.call(this,f,e)}return false}})}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.Collection=function(f,e){e=e||{};if(e.comparator){this.comparator=e.comparator}if(e.model){this.model=e.model}if(e.query){this.query=e.query}this._reset();this.initialize.apply(this,arguments);if(f){this.reset(f,{silent:true,parse:e.parse})}};c.extend(d.Collection.prototype,d.Events,{model:d.Object,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(f,q){var l,n,j,m,o,h,k={},e={};q=q||{};f=c.isArray(f)?f.slice():[f];for(l=0,j=f.length;l<j;l++){f[l]=this._prepareModel(f[l],q);m=f[l];if(!m){throw new Error("Can't add an invalid model to a collection")}o=m.cid;if(k[o]||this._byCid[o]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}h=m.id;if(!d._isNullOrUndefined(h)&&(e[h]||this._byId[h])){throw new Error("Duplicate id: can't add the same model to a collection twice")}e[h]=m;k[o]=m}for(l=0;l<j;l++){(m=f[l]).on("all",this._onModelEvent,this);this._byCid[m.cid]=m;if(m.id){this._byId[m.id]=m}}this.length+=j;n=d._isNullOrUndefined(q.at)?this.models.length:q.at;this.models.splice.apply(this.models,[n,0].concat(f));if(this.comparator){this.sort({silent:true})}if(q.silent){return this}for(l=0,j=this.models.length;l<j;l++){m=this.models[l];if(k[m.cid]){q.index=l;m.trigger("add",m,this,q)}}return this},remove:function(m,j){var k,e,h,f;j=j||{};m=c.isArray(m)?m.slice():[m];for(k=0,e=m.length;k<e;k++){f=this.getByCid(m[k])||this.get(m[k]);if(!f){continue}delete this._byId[f.id];delete this._byCid[f.cid];h=this.indexOf(f);this.models.splice(h,1);this.length--;if(!j.silent){j.index=h;f.trigger("remove",f,this,j)}this._removeReference(f)}return this},get:function(e){return e&&this._byId[e.id||e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(f){f=f||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var e=c.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!f.silent){this.trigger("reset",this,f)}return this},pluck:function(e){return c.map(this.models,function(f){return f.get(e)})},reset:function(h,f){var e=this;h=h||[];f=f||{};d._arrayEach(this.models,function(j){e._removeReference(j)});this._reset();this.add(h,{silent:true,parse:f.parse});if(!f.silent){this.trigger("reset",this,f)}return this},fetch:function(e){e=c.clone(e)||{};if(e.parse===undefined){e.parse=true}var h=this;var f=this.query||new d.Query(this.model);return f.find({useMasterKey:e.useMasterKey}).then(function(j){if(e.add){h.add(j,e)}else{h.reset(j,e)}return h})._thenRunCallbacks(e,this)},create:function(f,e){var h=this;e=e?c.clone(e):{};f=this._prepareModel(f,e);if(!f){return false}if(!e.wait){h.add(f,e)}var j=e.success;e.success=function(k,m,l){if(e.wait){h.add(k,e)}if(j){j(k,m)}else{k.trigger("sync",f,m,e)}};f.save(null,e);return f},parse:function(f,e){return f},chain:function(){return c(this.models).chain()},_reset:function(e){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(h,f){if(!(h instanceof d.Object)){var e=h;f.collection=this;h=new this.model(e,f);if(!h._validate(h.attributes,f)){h=false}}else{if(!h.collection){h.collection=this}}return h},_removeReference:function(e){if(this===e.collection){delete e.collection}e.off("all",this._onModelEvent,this)},_onModelEvent:function(h,f,j,e){if((h==="add"||h==="remove")&&j!==this){return}if(h==="destroy"){this.remove(f,e)}if(f&&h==="change:objectId"){delete this._byId[f.previous("objectId")];this._byId[f.id]=f}this.trigger.apply(this,arguments)}});var b=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];d._arrayEach(b,function(e){d.Collection.prototype[e]=function(){return c[e].apply(c,[this.models].concat(c.toArray(arguments)))}});d.Collection.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var e=a.Parse;var d=e._;e.View=function(f){this.cid=d.uniqueId("view");this._configure(f||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var c=/^(\S+)\s*(.*)$/;var b=["model","collection","el","id","attributes","className","tagName"];d.extend(e.View.prototype,e.Events,{tagName:"div",$:function(f){return this.$el.find(f)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(h,f,k){var j=document.createElement(h);if(f){e.$(j).attr(f)}if(k){e.$(j).html(k)}return j},setElement:function(f,h){this.$el=e.$(f);this.el=this.$el[0];if(h!==false){this.delegateEvents()}return this},delegateEvents:function(h){h=h||e._getValue(this,"events");if(!h){return}this.undelegateEvents();var f=this;e._objectEach(h,function(n,m){if(!d.isFunction(n)){n=f[h[m]]}if(!n){throw new Error('Event "'+h[m]+'" does not exist')}var l=m.match(c);var k=l[1],j=l[2];n=d.bind(n,f);k+=".delegateEvents"+f.cid;if(j===""){f.$el.bind(k,n)}else{f.$el.delegate(j,k,n)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(h){if(this.options){h=d.extend({},this.options,h)}var f=this;d.each(b,function(j){if(h[j]){f[j]=h[j]}});this.options=h},_ensureElement:function(){if(!this.el){var f=e._getValue(this,"attributes")||{};if(this.id){f.id=this.id}if(this.className){f["class"]=this.className}this.setElement(this.make(this.tagName,f),false)}else{this.setElement(this.el,false)}}});e.View.extend=e._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.User=c.Object.extend("_User",{_isCurrentUser:false,_mergeFromObject:function(d){if(d.getSessionToken()){this._sessionToken=d.getSessionToken()}c.User.__super__._mergeFromObject.call(this,d)},_mergeMagicFields:function(d){if(d.sessionToken){this._sessionToken=d.sessionToken;delete d.sessionToken}c.User.__super__._mergeMagicFields.call(this,d)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var d=this.get("authData");if(!d){return}c._objectEach(this.get("authData"),function(f,e){if(!d[e]){delete d[e]}})},_synchronizeAllAuthData:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._synchronizeAuthData(f)})},_synchronizeAuthData:function(h){if(!this.isCurrent()){return}var d;if(b.isString(h)){d=h;h=c.User._authProviders[d]}else{d=h.getAuthType()}var e=this.get("authData");if(!e||!h){return}var f=h.restoreAuthentication(e[d]);if(!f){this._unlinkFrom(h)}},_handleSaveResult:function(d){if(d){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(d||this.isCurrent()){c.User._saveCurrentUser(this)}},_linkWith:function(l,f){var e;if(b.isString(l)){e=l;l=c.User._authProviders[l]}else{e=l.getAuthType()}if(b.has(f,"authData")){var h=this.get("authData")||{};h[e]=f.authData;this.set("authData",h);var k=b.clone(f)||{};k.success=function(m){m._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save({authData:h},k)}else{var d=this;var j=new c.Promise();l.authenticate({success:function(n,m){d._linkWith(n,{authData:m,success:f.success,error:f.error}).then(function(){j.resolve(d)})},error:function(n,m){if(f.error){f.error(d,m)}j.reject(m)}});return j}},_unlinkFrom:function(j,f){var e;if(b.isString(j)){e=j;j=c.User._authProviders[j]}else{e=j.getAuthType()}var h=b.clone(f);var d=this;h.authData=null;h.success=function(k){d._synchronizeAuthData(j);if(f.success){f.success.apply(this,arguments)}};return this._linkWith(j,h)},_isLinked:function(f){var d;if(b.isString(f)){d=f}else{d=f.getAuthType()}var e=this.get("authData")||{};return !!e[d]},_logOutWithAll:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._logOutWith(f)})},_logOutWith:function(d){if(!this.isCurrent()){return}if(b.isString(d)){d=c.User._authProviders[d]}if(d&&d.deauthenticate){d.deauthenticate()}},signUp:function(h,f){var e;f=f||{};var k=(h&&h.username)||this.get("username");if(!k||(k==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var d=(h&&h.password)||this.get("password");if(!d||(d==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var j=b.clone(f);j.success=function(l){l._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save(h,j)},logIn:function(e){var d=this;e=e||{};var f=c._request({route:"login",method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(l,h,k){var j=d.parse(l,h,k);d._finishFetch(j);d._handleSaveResult(true);return d})._thenRunCallbacks(e,this)},save:function(j,h,f){var e,m,k,n,l;if(b.isObject(j)||b.isNull(j)||b.isUndefined(j)){m=j;n=h}else{m={};m[j]=h;n=f}n=n||{};var d=b.clone(n);d.success=function(o){o._handleSaveResult(false);if(n.success){n.success.apply(this,arguments)}};return c.Object.prototype.save.call(this,m,d)},fetch:function(d){var e=d?b.clone(d):{};e.success=function(f){f._handleSaveResult(false);if(d&&d.success){d.success.apply(this,arguments)}};return c.Object.prototype.fetch.call(this,e)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(e,d){return this.set("username",e,d)},setPassword:function(e,d){return this.set("password",e,d)},getEmail:function(){return this.get("email")},setEmail:function(e,d){return this.set("email",e,d)},authenticated:function(){return !!this._sessionToken&&(c.User.current()&&c.User.current().id===this.id)},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:true,signUp:function(j,h,f,e){f=f||{};f.username=j;f.password=h;var d=c.Object._create("_User");return d.signUp(f,e)},logIn:function(h,f,e){var d=c.Object._create("_User");d._finishFetch({username:h,password:f});return d.logIn(e)},become:function(d,f){f=f||{};var e=c.Object._create("_User");return c._request({route:"users",className:"me",method:"GET",useMasterKey:f.useMasterKey,sessionToken:d}).then(function(l,h,k){var j=e.parse(l,h,k);e._finishFetch(j);e._handleSaveResult(true);return e})._thenRunCallbacks(f,e)},logOut:function(){if(c.User._currentUser!==null){c.User._currentUser._logOutWithAll();c.User._currentUser._isCurrentUser=false}c.User._currentUserMatchesDisk=true;c.User._currentUser=null;c.localStorage.removeItem(c._getParsePath(c.User._CURRENT_USER_KEY))},requestPasswordReset:function(e,d){d=d||{};var f=c._request({route:"requestPasswordReset",method:"POST",useMasterKey:d.useMasterKey,data:{email:e}});return f._thenRunCallbacks(d)},current:function(){if(c.User._currentUser){return c.User._currentUser}if(c.User._currentUserMatchesDisk){return c.User._currentUser}c.User._currentUserMatchesDisk=true;var d=c.localStorage.getItem(c._getParsePath(c.User._CURRENT_USER_KEY));if(!d){return null}c.User._currentUser=c.Object._create("_User");c.User._currentUser._isCurrentUser=true;var e=JSON.parse(d);c.User._currentUser.id=e._id;delete e._id;c.User._currentUser._sessionToken=e._sessionToken;delete e._sessionToken;c.User._currentUser._finishFetch(e);c.User._currentUser._synchronizeAllAuthData();c.User._currentUser._refreshCache();c.User._currentUser._opSetQueue=[{}];return c.User._currentUser},allowCustomUserClass:function(d){this._performUserRewrite=!d},_saveCurrentUser:function(d){if(c.User._currentUser!==d){c.User.logOut()}d._isCurrentUser=true;c.User._currentUser=d;c.User._currentUserMatchesDisk=true;var e=d.toJSON();e._id=d.id;e._sessionToken=d._sessionToken;c.localStorage.setItem(c._getParsePath(c.User._CURRENT_USER_KEY),JSON.stringify(e))},_registerAuthenticationProvider:function(d){c.User._authProviders[d.getAuthType()]=d;if(c.User.current()){c.User.current()._synchronizeAuthData(d.getAuthType())}},_logInWith:function(f,e){var d=c.Object._create("_User");return d._linkWith(f,e)}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Query=function(d){if(b.isString(d)){d=c.Object._getSubclass(d)}this.objectClass=d;this.className=d.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};c.Query.or=function(){var d=b.toArray(arguments);var e=null;c._arrayEach(d,function(h){if(b.isNull(e)){e=h.className}if(e!==h.className){throw"All queries must be for the same class"}});var f=new c.Query(e);f._orQuery(d);return f};c.Query.prototype={get:function(d,f){var e=this;e.equalTo("objectId",d);var h={};if(f&&b.has(f,"useMasterKey")){h={useMasterKey:f.useMasterKey}}return e.first(h).then(function(j){if(j){return j}var k=new c.Error(c.Error.OBJECT_NOT_FOUND,"Object not found.");return c.Promise.error(k)})._thenRunCallbacks(f,null)},toJSON:function(){var d={where:this._where};if(this._include.length>0){d.include=this._include.join(",")}if(this._select){d.keys=this._select.join(",")}if(this._limit>=0){d.limit=this._limit}if(this._skip>0){d.skip=this._skip}if(this._order!==undefined){d.order=this._order.join(",")}c._objectEach(this._extraOptions,function(f,e){d[e]=f});return d},find:function(e){var d=this;e=e||{};var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(h){return b.map(h.results,function(j){var k;if(h.className){k=new c.Object(h.className)}else{k=new d.objectClass()}k._finishFetch(j,true);return k})})._thenRunCallbacks(e)},count:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=0;h.count=1;var f=c._request({route:"classes",className:d.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return j.count})._thenRunCallbacks(e)},first:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=1;var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return b.map(j.results,function(k){var l;if(j.className){l=new c.Object(j.className)}else{l=new d.objectClass()}l._finishFetch(k,true);return l})[0]})._thenRunCallbacks(e)},collection:function(d,e){e=e||{};return new c.Collection(d,b.extend(e,{model:this.objectClass,query:this}))},skip:function(d){this._skip=d;return this},limit:function(d){this._limit=d;return this},equalTo:function(d,e){if(b.isUndefined(e)){return this.doesNotExist(d)}this._where[d]=c._encode(e);return this},_addCondition:function(d,f,e){if(!this._where[d]){this._where[d]={}}this._where[d][f]=c._encode(e);return this},notEqualTo:function(d,e){this._addCondition(d,"$ne",e);return this},lessThan:function(d,e){this._addCondition(d,"$lt",e);return this},greaterThan:function(d,e){this._addCondition(d,"$gt",e);return this},lessThanOrEqualTo:function(d,e){this._addCondition(d,"$lte",e);return this},greaterThanOrEqualTo:function(d,e){this._addCondition(d,"$gte",e);return this},containedIn:function(e,d){this._addCondition(e,"$in",d);return this},notContainedIn:function(e,d){this._addCondition(e,"$nin",d);return this},containsAll:function(e,d){this._addCondition(e,"$all",d);return this},exists:function(d){this._addCondition(d,"$exists",true);return this},doesNotExist:function(d){this._addCondition(d,"$exists",false);return this},matches:function(e,f,d){this._addCondition(e,"$regex",f);if(!d){d=""}if(f.ignoreCase){d+="i"}if(f.multiline){d+="m"}if(d&&d.length){this._addCondition(e,"$options",d)}return this},matchesQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$inQuery",e);return this},doesNotMatchQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$notInQuery",e);return this},matchesKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$select",{key:d,query:f});return this},doesNotMatchKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$dontSelect",{key:d,query:f});return this},_orQuery:function(d){var e=b.map(d,function(f){return f.toJSON().where});this._where.$or=e;return this},_quote:function(d){return"\\Q"+d.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(d,e){this._addCondition(d,"$regex",this._quote(e));return this},startsWith:function(d,e){this._addCondition(d,"$regex","^"+this._quote(e));return this},endsWith:function(d,e){this._addCondition(d,"$regex",this._quote(e)+"$");return this},ascending:function(){this._order=[];return this.addAscending.apply(this,arguments)},addAscending:function(e){var d=this;if(!this._order){this._order=[]}c._arrayEach(arguments,function(f){if(Array.isArray(f)){f=f.join()}d._order=d._order.concat(f.replace(/\s/g,"").split(","))});return this},descending:function(d){this._order=[];return this.addDescending.apply(this,arguments)},addDescending:function(e){var d=this;if(!this._order){this._order=[]}c._arrayEach(arguments,function(f){if(Array.isArray(f)){f=f.join()}d._order=d._order.concat(b.map(f.replace(/\s/g,"").split(","),function(h){return"-"+h}))});return this},near:function(e,d){if(!(d instanceof c.GeoPoint)){d=new c.GeoPoint(d)}this._addCondition(e,"$nearSphere",d);return this},withinRadians:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistance",f);return this},withinMiles:function(e,d,f){return this.withinRadians(e,d,f/3958.8)},withinKilometers:function(e,d,f){return this.withinRadians(e,d,f/6371)},withinGeoBox:function(d,f,e){if(!(f instanceof c.GeoPoint)){f=new c.GeoPoint(f)}if(!(e instanceof c.GeoPoint)){e=new c.GeoPoint(e)}this._addCondition(d,"$within",{"$box":[f,e]});return this},include:function(){var d=this;c._arrayEach(arguments,function(e){if(b.isArray(e)){d._include=d._include.concat(e)}else{d._include.push(e)}});return this},select:function(){var d=this;this._select=this._select||[];c._arrayEach(arguments,function(e){if(b.isArray(e)){d._select=d._select.concat(e)}else{d._select.push(e)}});return this},each:function(l,e){e=e||{};if(this._order||this._skip||(this._limit>=0)){var d="Cannot iterate on a query with sort, skip, or limit.";return c.Promise.error(d)._thenRunCallbacks(e)}var j=new c.Promise();var h=new c.Query(this.objectClass);h._limit=e.batchSize||100;h._where=b.clone(this._where);h._include=b.clone(this._include);h.ascending("objectId");var f={};if(b.has(e,"useMasterKey")){f.useMasterKey=e.useMasterKey}var k=false;return c.Promise._continueWhile(function(){return !k},function(){return h.find(f).then(function(m){var n=c.Promise.as();c._.each(m,function(o){n=n.then(function(){return l(o)})});return n.then(function(){if(m.length>=h._limit){h.greaterThan("objectId",m[m.length-1].id)}else{k=true}})})})._thenRunCallbacks(e)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";var h=false;var j;var e;var f={authenticate:function(l){var k=this;FB.login(function(m){if(m.authResponse){if(l.success){l.success(k,{id:m.authResponse.userID,access_token:m.authResponse.accessToken,expiration_date:new Date(m.authResponse.expiresIn*1000+(new Date()).getTime()).toJSON()})}}else{if(l.error){l.error(k,m)}}},{scope:j})},restoreAuthentication:function(m){if(m){var k={userID:m.id,accessToken:m.access_token,expiresIn:(d._parseDate(m.expiration_date).getTime()-(new Date()).getTime())/1000};var n=c.clone(e);n.authResponse=k;n.status=false;var l=FB.getAuthResponse();if(l&&l.userID!==k.userID){FB.logout()}FB.init(n)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};d.FacebookUtils={init:function(k){if(typeof(FB)==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}e=c.clone(k)||{};if(e.status&&typeof(console)!=="undefined"){var l=console.warn||console.log||function(){};l.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}e.status=false;FB.init(e);d.User._registerAuthenticationProvider(f);h=true},isLinked:function(k){return k._isLinked("facebook")},logIn:function(l,k){if(!l||c.isString(l)){if(!h){throw"You must initialize FacebookUtils before calling logIn."}j=l;return d.User._logInWith("facebook",k)}else{var m=c.clone(k)||{};m.authData=l;return d.User._logInWith("facebook",m)}},link:function(k,m,l){if(!m||c.isString(m)){if(!h){throw"You must initialize FacebookUtils before calling link."}j=m;return k._linkWith("facebook",l)}else{var n=c.clone(l)||{};n.authData=m;return k._linkWith("facebook",n)}},unlink:function(k,l){if(!h){throw"You must initialize FacebookUtils before calling unlink."}return k._unlinkFrom("facebook",l)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.History=function(){this.handlers=[];c.bindAll(this,"checkUrl")};var e=/^[#\/]/;var b=/msie [\w.]+/;d.History.started=false;c.extend(d.History.prototype,d.Events,{interval:50,getHash:function(j){var h=j?j.location:window.location;var f=h.href.match(/#(.*)$/);return f?f[1]:""},getFragment:function(h,f){if(d._isNullOrUndefined(h)){if(this._hasPushState||f){h=window.location.pathname;var j=window.location.search;if(j){h+=j}}else{h=this.getHash()}}if(!h.indexOf(this.options.root)){h=h.substr(this.options.root.length)}return h.replace(e,"")},start:function(j){if(d.History.started){throw new Error("Parse.history has already been started")}d.History.started=true;this.options=c.extend({},{root:"/"},this.options,j);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var h=this.getFragment();var f=document.documentMode;var l=(b.exec(navigator.userAgent.toLowerCase())&&(!f||f<=7));if(l){this.iframe=d.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(h)}if(this._hasPushState){d.$(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!l){d.$(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}}}this.fragment=h;var m=window.location;var k=m.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!k){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&k&&m.hash){this.fragment=this.getHash().replace(e,"");window.history.replaceState({},document.title,m.protocol+"//"+m.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){d.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);d.History.started=false},route:function(f,h){this.handlers.unshift({route:f,callback:h})},checkUrl:function(h){var f=this.getFragment();if(f===this.fragment&&this.iframe){f=this.getFragment(this.getHash(this.iframe))}if(f===this.fragment){return false}if(this.iframe){this.navigate(f)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(j){var h=this.fragment=this.getFragment(j);var f=c.any(this.handlers,function(k){if(k.route.test(h)){k.callback(h);return true}});return f},navigate:function(j,h){if(!d.History.started){return false}if(!h||h===true){h={trigger:h}}var k=(j||"").replace(e,"");if(this.fragment===k){return}if(this._hasPushState){if(k.indexOf(this.options.root)!==0){k=this.options.root+k}this.fragment=k;var f=h.replace?"replaceState":"pushState";window.history[f]({},document.title,k)}else{if(this._wantsHashChange){this.fragment=k;this._updateHash(window.location,k,h.replace);if(this.iframe&&(k!==this.getFragment(this.getHash(this.iframe)))){if(!h.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,k,h.replace)}}else{window.location.assign(this.options.root+j)}}if(h.trigger){this.loadUrl(j)}},_updateHash:function(f,h,j){if(j){var k=f.toString().replace(/(javascript:|#).*$/,"");f.replace(k+"#"+h)}else{f.hash=h}}})}(this));(function(b){b.Parse=b.Parse||{};var d=b.Parse;var c=d._;d.Router=function(h){h=h||{};if(h.routes){this.routes=h.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var e=/:\w+/g;var f=/\*\w+/g;var a=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;c.extend(d.Router.prototype,d.Events,{initialize:function(){},route:function(h,j,k){d.history=d.history||new d.History();if(!c.isRegExp(h)){h=this._routeToRegExp(h)}if(!k){k=this[j]}d.history.route(h,c.bind(function(m){var l=this._extractParameters(h,m);if(k){k.apply(this,l)}this.trigger.apply(this,["route:"+j].concat(l));d.history.trigger("route",this,j,l)},this));return this},navigate:function(j,h){d.history.navigate(j,h)},_bindRoutes:function(){if(!this.routes){return}var j=[];for(var k in this.routes){if(this.routes.hasOwnProperty(k)){j.unshift([k,this.routes[k]])}}for(var m=0,h=j.length;m<h;m++){this.route(j[m][0],j[m][1],this[j[m][1]])}},_routeToRegExp:function(h){h=h.replace(a,"\\$&").replace(e,"([^/]+)").replace(f,"(.*?)");return new RegExp("^"+h+"$")},_extractParameters:function(h,j){return h.exec(j).slice(1)}});d.Router.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Cloud=c.Cloud||{};b.extend(c.Cloud,{run:function(e,h,d){d=d||{};var f=c._request({route:"functions",className:e,method:"POST",useMasterKey:d.useMasterKey,data:c._encode(h,null,true)});return f.then(function(j){return c._decode(null,j).result})._thenRunCallbacks(d)}})}(this));(function(a){a.Parse=a.Parse||{};var b=a.Parse;b.Installation=b.Object.extend("_Installation");b.Push=b.Push||{};b.Push.send=function(e,c){c=c||{};if(e.where){e.where=e.where.toJSON().where}if(e.push_time){e.push_time=e.push_time.toJSON()}if(e.expiration_time){e.expiration_time=e.expiration_time.toJSON()}if(e.expiration_time&&e.expiration_interval){throw"Both expiration_time and expiration_interval can't be set"}var d=b._request({route:"push",method:"POST",data:e,useMasterKey:c.useMasterKey});return d._thenRunCallbacks(c)}}(this));App.Views.Accounts={};App.Views.Collections={};App.Views.Home={};App.Views.Home.Windows={};App.Views.Apps={};App.Views.PushNotifications={};App.Views.Users={};App.Views.Tutorials={};App.Views.Dashboard={};App.Views.Votes={};App.Views.Questions={};App.Views.Products={};App.Views.Platforms={};App.Views.CreditCards={};App.Views.Admin={};App.Views.Customers={};App.Views.Customers.Gallery={};App.Views.Docs={};App.Views.Editors={};App.Views.PricingPlans={};App.Views.Videos={};App.Views.Support={};App.Views.Nagging={};App.Views.Migration={};App.Views.Mobile={};App.Views.Mobile.Home={};App.Views.Mobile.Products={};var track_download=function(a){a.click(function(c){var b=$(c.target).attr("href");ParseDotCom.Analytics.track("Download SDK",{type:b},function(){window.location=b});return false})};var getInternetExplorerVersion=function(){var c=-1;if(navigator.appName==="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");if(b.exec(a)!==null){c=parseFloat(RegExp.$1)}}return c};function is_ios(){var a=navigator.userAgent.toLowerCase();return a.match(/(iphone|ipod|ipad)/)}ZeroClipboard.config({moviePath:"/swf/ZeroClipboard.swf"});$.fn.sparkline.defaults.common.lineColor="#0067AB";(function(a){a.fn.qtipDefault=function(c,b){a(this).qtip(_({style:{name:"cream",tip:"topMiddle",border:{radius:3},padding:10},show:{delay:0},tip:"topMiddle",position:{corner:{tooltip:"topMiddle",target:"bottomMiddle"}}}).extend(c),b)};a.extend(a.ui.dialog.prototype.options,{open:function(){a(".ui-widget-overlay").bind("click",function(){$dialog=a(this).prev().children(".ui-dialog-content");$dialog.dialog("close");$dialog.dialog("destroy");return false})}})})(jQuery);$.waypoints.settings.scrollThrottle=20;var isPlainObjectOld=jQuery.isPlainObject;var isPlainObjectNew=function(a){if(isPlainObjectOld(a)){if(window.File&&(a instanceof File)){return false}return true}return false};jQuery.isPlainObject=isPlainObjectNew;App.Views.Editors.String=Backbone.View.extend({tagName:"textarea",className:"text_editor",events:{keydown:"handleKeyDown",blur:"handleBlur"},defaults:{shouldCommitWhenBlur:true},initialize:function(){_.bindAll(this);this.options=_.extend({},this.defaults,this.options);this.setupEditor();this.render();this.appendToContainer()},setupEditor:function(){},render:function(){return this},appendToContainer:function(){if(this.options.container){this.$el.appendTo(this.options.container)}},loadValue:function(a){this.loadDefaultValue(a[this.options.column.field]);this.focus()},loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=a}}if(!this.options.defaultEmpty||!Parse._isNullOrUndefined(a)){this.$el.val(this.defaultValue)}else{this.$el.val("")}},focusOrCommit:function(a){this.focus()},focus:function(){this.$el.select().focus()},commit:function(){this.$el.trigger("commit")},isValueChanged:function(){return this.$el.val()!==this.defaultValue},validate:function(){var a;var b=this._validate(this.$el.val());if(!b){a={valid:true}}else{a={valid:false,msg:b}}return a},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return a}}},applyValue:function(b,a){b[this.options.column.field]=a},destroy:function(){this.$el.remove()},handleKeyDown:function(a){if(a.keyCode!==$.ui.keyCode.ESCAPE&&a.keyCode!==$.ui.keyCode.TAB&&a.keyCode!==$.ui.keyCode.ENTER){a.stopImmediatePropagation()}},handleBlur:function(a){if(this.options.shouldCommitWhenBlur){this.$el.trigger("commit");return false}},_validate:function(a){}},{UNDEFINED:"(undefined)",NULL:"(null)"});App.Views.Editors.JSON=App.Views.Editors.String.extend({tagName:"input",loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=JSON.stringify(a)}}this.$el.val(this.defaultValue)},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return JSON.parse(a)}}}});App.Views.Editors.ACL=App.Views.Editors.String.extend({setupEditor:function(){var b=this;var c=this.options.grid.state.getSchema().id;var e=this.options.grid.getActiveCell().row;var a=this.options.grid.getData()[e].objectId;var d;if(c&&a&&c.length<12){d='Edit Access Control List (ACL) for "'+c+'" object '+a}this.options.shouldCommitWhenBlur=false;this.aclEditor=new UI.ACLEditor({title:d,onSubmit:this.submit,onCancel:function(){b.submit(b.defaultValue)}})},loadDefaultValue:function(e){var b=this.options.grid.state.getSchema().id;var d=this.options.grid.getActiveCell().row;var a=this.options.grid.getData()[d].objectId;if(b==="_User"&&(_.isUndefined(e)||_.isNull(e))){var c={};c["*"]={read:true};c[a]={write:true};e=c;this.defaultValue=JSON.stringify(c)}else{if(_.isUndefined(e)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(e)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=JSON.stringify(e)}}}this.$el.val(this.defaultValue);this.aclEditor.setInitialValue(JSON.stringify(e))},serializeValue:function(){var a=this.$el.val();this.$el.blur();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return JSON.parse(a)}}},submit:function(a){this.$el.val(a);this.$el.trigger("commit")},_validate:function(){var d=this.$el.val();if(d!==App.Views.Editors.String.UNDEFINED&&d!==App.Views.Editors.String.NULL){var a;try{a=JSON.parse(d)}catch(c){return"Please enter a valid object in JavaScript notation."}if(_.isArray(a)||!_.isObject(a)){return"Please enter a valid object in JavaScript notation."}for(var b in a){singleAcl=a[b];for(var f in singleAcl){if(!(f==="read"||f==="write")){return"ACL key must be 'read' or 'write'."}if(singleAcl[f]!==true){return"ACL value must be 'true'"}}}}}});App.Views.Editors.Array=App.Views.Editors.JSON.extend({_validate:function(){var c=this.$el.val();if(c!==App.Views.Editors.String.UNDEFINED&&c!==App.Views.Editors.String.NULL){var a;try{a=JSON.parse(c)}catch(b){return"Please enter a valid array in JavaScript notation."}if(!_.isArray(a)){return"Please enter a valid array in JavaScript notation."}}}});App.Views.Editors.Boolean=App.Views.Editors.String.extend({tagName:"div",className:"boolean_editor",events:{"change select":"commit"},setupEditor:function(){this.$el.html(JST["data_browser/_boolean_editor"]())},loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{if(a===true){this.defaultValue="true"}else{this.defaultValue="false"}}}this.$("select").val(this.defaultValue)},focusOrCommit:function(){this.commit()},isValueChanged:function(){return this.$("select").val()!==this.defaultValue},serializeValue:function(){return this.$("select").val()==="true"},commit:function(){this.$el.trigger("commit")}});App.Views.Editors.ChosenArray=App.Views.Editors.Array.extend({tagName:"select",className:"chosen_editor",events:{change:"commit"},setupEditor:function(){this.$el.attr("multiple","multiple")},initializeChosen:function(){this.$el.chosen({disable_search_threshold:-1})},addOptions:function(b){var a=this;_(b).each(function(c){a.$el.append($('<option value="'+c.value+'">'+c.option+"</option>"))});this.$el.trigger("liszt:updated")},focusOrCommit:function(){this.commit()},serializeValue:function(){var a=this.$el.val();return Parse._isNullOrUndefined(a)?[]:a},_validate:function(){}});App.Views.Editors.Date=App.Views.Editors.String.extend({tagName:"div",className:"date_editor",events:{"keydown input.date":"handleKeyDown","select .hour":"selectHour","click .time":"showTimePicker","change .hour":"updateTime","change .minute":"updateTime","click .time_picker_overlay":"handleOutsideClick"},setupEditor:function(){var a=this;this.disableDate=_.isUndefined(this.options.disableDate)?false:this.options.disableDate;this.$el.html(JST["data_browser/_date_editor"]({disableDate:this.disableDate}));if(!this.disableDate){var c="date_editor";if(document.getElementsByName(c).length>0){var d=1;while(document.getElementsByName(c+d).length>0){d++}c=c+d}var b={hideOnChange:true,name:c,unstyled:true,parent:this.$(".date")[0],preventPast:!!this.options.preventPast,onChange:function(){a.$(".hour").focus();a.$el.trigger("commit")}};if(this.options.dateFormat){b.stringFormat=this.options.dateFormat}if(this.options.defaultDate){b.value=this.options.defaultDate}this.datepicker=new UI.Datepicker(b);this.$(".date > input").keydown(this.handleKeyDown)}},isValueChanged:function(){if(Parse._isNullOrUndefined(this.defaultValue)){return true}var a=moment.utc(this.datepicker.value);a.hours(this.$(".hour").val());a.minutes(this.$(".minute").val());var b=this.defaultValue;return a.year()!==b.year()||a.month()!==b.month()||a.day()!==b.day()||a.hours()!==b.hours()||a.minutes()!==b.minutes()},serializeValue:function(){var a=moment.utc(this.datepicker.value);var d=this.$(".hour").val();var c=this.$(".minute").val();a.hours(parseInt(d,10));a.minutes(parseInt(c,10));var b=a.format("YYYY-MM-DDTHH:mm:ss")+"Z";return{__type:"Date",iso:b}},destroy:function(){this.datepicker.remove();this.$el.remove()},selectHour:function(){this.$(".minute").focus()},loadDefaultValue:function(d){var e;if(Parse._isNullOrUndefined(d)){e=moment.utc();this.defaultValue=d}else{e=moment.utc(d.iso,"YYYY-MM-DDTHH:mm:ss Z");this.defaultValue=e}var b=this.datepicker.onChange;this.datepicker.onChange=null;this.datepicker.value=new Date(e.year(),e.month(),e.date());this.datepicker.onChange=b;var c=App.Views.Editors.Date.doubleDigits(e.hours());this.$(".hour").val(c);var a=App.Views.Editors.Date.doubleDigits(e.minutes());this.$(".minute").val(a);this.$(".time").html(c+":"+a)},focusOrCommit:function(){this.commit()},showTimePicker:function(){this.$(".time_picker").show();this.$(".time_picker_overlay").show()},hideTimePicker:function(){this.$(".time_picker").hide();this.$(".time_picker_overlay").hide()},updateTime:function(){var a=App.Views.Editors.Date.doubleDigits(this.$(".hour").val());var b=App.Views.Editors.Date.doubleDigits(this.$(".minute").val());this.$(".time").html(a+":"+b);this.$el.trigger("commit")},handleOutsideClick:function(d){var b=d.pageX;var h=d.pageY;var f=this.$el.offset();var c=this.$el.width();var a=this.$el.height();if(b<f.left||b>(f.left+c)||h<f.top||h>(f.top+a)){this.hideTimePicker()}return false}},{doubleDigits:function(a){return("0"+a).slice(-2)}});App.Views.Editors.File=App.Views.Editors.String.extend({isJSONContent:function(a){return a.indexOf("application/json")>=0||a.indexOf("text/json")>=0},validate_file:function(b){var c=this.grid.state;if(b.size>=10*1024*1024){c.setErrorMessage("File cannot be greater than 10 MB in size.");return false}if(Parse._isNullOrUndefined(b)||Parse._isNullOrUndefined(b.name)){c.setErrorMessage("Invalid file name.");return false}var a=b.name.match(/^[a-zA-Z0-9][\-_ a-zA-Z0-9.]{1,127}$/);if(a===null){c.setErrorMessage("Invalid file name.");return false}return true},upload:function(b){var a=this;if(!this.validate_file(b)){return}var c=this.grid.state.get("app");var d={"X-Parse-Application-Id":app.escape("key"),"X-Parse-REST-API-Key":app.escape("rest_api_key")};if(this.field==="download"&&c.get("className")==="_Product"){d["X-Parse-File-AWS-Permission"]="private"}$.ajax({url:"/1/files/"+b.name,type:"POST",contentType:b.type,headers:d,dataType:"json",data:b,processData:false,error:function(h,k,f){var e="Error uploading file";var j=h.getResponseHeader("Content-Type");if(j&&a.isJSONContent(j)){response=JSON.parse(h.responseText);e+=": "+response.code+", "+response.error}c.setErrorMessage(e)},success:function(f,h,e){a.item[a.field]={__type:"File",name:f.name,url:f.url};a.changed=true;a.commitChanges()}})},initialize:function(c){var a=this;this.changed=false;this.item=c.item;this.field=c.column.field;this.grid=c.grid;this.commitChanges=c.commitChanges;this.container=c.container;this.column=c.column;var d=this.item[this.field];if(Parse._isNullOrUndefined(d)){$(this.container).append(JST["data_browser/_file_input"]);var e=$(this.container).find("input[type='file']");if(!e[0].files){$(this.container).empty();$(this.container).text("Use Chrome to Edit.")}e.bind("change",function(f){if(this.files.length>0){a.upload(this.files[0])}})}else{$(this.container).append(JST["data_browser/_delete_file"]);$(this.container).append(this.column.formatter(null,null,d));var b=$(this.container).find("img");b.click(function(f){a.item[a.field]=null;a.changed=true;a.commitChanges()})}},destroy:function(){$(this.container).empty()},focus:function(){$(this.container).focus()},loadValue:function(a){},serializeValue:function(){return""},setValue:function(a){},applyValue:function(a,b){},isValueChanged:function(){return this.changed},validate:function(){return{valid:true}}});App.Views.Editors.GeoPoint=App.Views.Editors.String.extend({tagName:"div",className:"editor-geopoint",events:{"keydown.nav .latitude":"handleKeyDown","keydown.nav .longitude":"handleKeyDown"},setupEditor:function(){this.$el.html(JST["data_browser/_geopoint_editor"]())},loadDefaultValue:function(a){this.defaultValue=a;if(!Parse._isNullOrUndefined(a)){this.$(".latitude").val(a.latitude);this.$(".longitude").val(a.longitude)}},focus:function(){this.$(".latitude").select().focus()},isValueChanged:function(){var b=this.$(".latitude").val();var a=this.$(".longitude").val();if(Parse._isNullOrUndefined(this.defaultValue)){return b||a}else{return(b!==this.defaultValue.latitude.toString()||a!==this.defaultValue.longitude.toString())}},serializeValue:function(){return{__type:"GeoPoint",latitude:parseFloat(this.$(".latitude").val()),longitude:parseFloat(this.$(".longitude").val())}},_validate:function(){var b=_.trim(this.$(".latitude").val());var a=_.trim(this.$(".longitude").val());if(b===""||isNaN(b)){return"Please enter a valid number for latitude."}if(a===""||isNaN(a)){return"Please enter a valid number for longitude."}b=parseFloat(b);a=parseFloat(a);if(b<-90){return"GeoPoint latitude "+b+" < -90.0."}if(b>90){return"GeoPoint latitude "+b+" > 90.0."}if(a<-180){return"GeoPoint longitude "+a+" < -180.0."}if(a>180){return"GeoPoint longitude "+a+" > 180.0."}}});App.Views.Editors.Number=App.Views.Editors.String.extend({tagName:"input",isValueChanged:function(){return this.$el.val()!==""+this.defaultValue},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return parseFloat(this.$el.val(),10)}}},_validate:function(){var a=this.$el.val();if(a!==App.Views.Editors.String.NULL&&a!==App.Views.Editors.String.UNDEFINED&&isNaN(parseFloat(a,10))){return"The number is not valid."}}});App.Views.Editors.Object=App.Views.Editors.JSON.extend({_validate:function(){var c=this.$el.val();if(c!==App.Views.Editors.String.UNDEFINED&&c!==App.Views.Editors.String.NULL){var a;try{a=JSON.parse(c)}catch(b){return"Please enter a valid object in JavaScript notation."}if(_.isArray(a)||!_.isObject(a)){return"Please enter a valid object in JavaScript notation."}}}});App.Views.Editors.Password=App.Views.Editors.String.extend({render:function(){App.Views.Editors.String.prototype.setupEditor.call(this);this.$el.attr("type","password")}});App.Views.Editors.Pointer=App.Views.Editors.String.extend({tagName:"input",loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=a.objectId}}if(!this.options.defaultEmpty||!Parse._isNullOrUndefined(a)){this.$el.val(this.defaultValue)}else{this.$el.val("")}},serializeValue:function(){var a;if(this.options.className){a=this.options.className}else{var b=this.options.grid.state.getSchema();var c=this.options.column.field;a=b.key(c).type.className}return this._serializeValue(a)},_serializeValue:function(a){var b=this.$el.val();if(b===App.Views.Editors.String.UNDEFINED){return}else{if(b===App.Views.Editors.String.NULL){return null}else{return{__type:"Pointer",className:a,objectId:b}}}},_validate:function(){var a=this.$el.val();if(a==="(undefined)"||a==="(null)"){return}if(!a.match(/^[a-zA-Z0-9]+$/)){return"Please enter a valid pointer."}}});App.Views.Editors.ReadonlyString=App.Views.Editors.String.extend({tagName:"input",render:function(){App.Views.Editors.String.prototype.render.call(this);this.$el.attr("readonly","readonly")}});App.Views.Editors.SingleLineString=App.Views.Editors.String.extend({tagName:"input"});App.Views.Constraint=Backbone.View.extend({tagName:"tr",events:{"change .field":"selectField","change .op":"selectOp","click .constraint_remove":"removeConstraint",keydown:"editorKeydownHandler"},initialize:function(){_.bindAll(this);this.schema=this.options.schema;this.constraints=this.options.constraints;this.constraint=this.options.constraint;this.excludedFields=this.options.excludedFields;this.defaultField=this.options.defaultField;this.setup();this.constraints.on("set",this.setModel);this.schema.on("sync change",this.render)},setup:function(){this.$el.html($(JST["data_browser/_constraint"]({})))},selectField:function(){this.renderOp();return false},selectOp:function(){this.renderEditor();return false},render:function(){var a=this._allowedFields();if(!_.isEmpty(a)){var b;if(this.defaultField&&_(a).contains(this.defaultField)){b=this.defaultField}else{b=a[0]}this.$(".constraint_column").html($(JST["data_browser/_constraint_field"]({fields:a})));this.$(".field").val(b);this.renderOp()}return this},renderOp:function(){var c=this.$(".field").val();var d=this.schema.typeForQuery(c);var b=this._opsForField(d);var a=_(b).keys()[0];this.$(".constraint_comparator").html($(JST["data_browser/_constraint_op"]({ops:b})));this.$(".op").val(a);this.renderEditor();return this},renderEditor:function(){var b=this.$(".field").val();var c=this.schema.typeForQuery(b);var a=this.$(".op").val();this._updateEditor(b,c,a);return this},removeConstraint:function(){this.constraints.remove(this.constraint);return false},setModel:function(){this.constraint.set({field:this.$(".field").val(),op:this.$(".op").val()},{silent:true});if(this.editor){var a=this.editor.validate();if(!a.valid){var b="'"+this.constraint.get("field")+"': "+a.msg;this.constraint.unset("value",{silent:true});this.constraint.set({error:b})}else{this.constraint.set({value:this.editor.serializeValue()});this.constraint.unset("error")}}else{this.constraint.unset("error");this.constraint.unset("value")}},unsetModel:function(){this.constraint.unset("field",{silent:true});this.constraint.unset("op",{silent:true});this.constraint.unset("value",{silent:true});this.constraint.unset("error",{silent:true})},editorKeydownHandler:function(a){if(a.keyCode===$.ui.keyCode.ENTER){if(this.editor){this.editor.$el.blur()}}},_updateEditor:function(d,b,e){var c=App.Collections.Constraints.Ops[b][e].editor;this.editorConstructor=c;if(c){var a=this.schema.key(d).type.className;this.editor=new c({className:a,defaultEmpty:true});this.$(".constraint_value").empty().append(this.editor.$el);this.editor.loadDefaultValue()}else{this.$(".constraint_value").empty();this.editor=null}},_allowedFields:function(){var a=this;var b=[];_(this.schema.get("keys")).each(function(f,c){if(a.excludedFields&&_(a.excludedFields).contains(c)){return}var e=f.type.name;var d=App.Collections.Constraints.Ops[e];if(!_.isEmpty(d)){b.push(c)}});return _.sortBy(b,function(c){return c})},_opsForField:function(b){var a=_.clone(App.Collections.Constraints.Ops[b]);Parse._each(a,function(d,c){if(d.editor===App.Views.Editors.ChosenArray){delete a[c]}});return a}});var CloudCode={Models:{},Collections:{},Routers:{},Views:{},initialize:function(a){var d;if(a.admin){d=new App.Models.Admin.App(a.appJson)}else{d=new App.Models.App(a.appJson)}var c=new CloudCode.Collections.ScriptSources([],{app:d});var e=new CloudCode.Models.LogContent({},{app:d});var b=new CloudCode.Models.State({app:d,releaseInfo:null,scriptSources:c,jobScheduleCollection:new CloudCode.Collections.JobScheduleCollection(a.jobScheduleJson),jobStatusCollection:new CloudCode.Collections.JobStatusCollection(a.jobStatusJson),logContent:e,schedulePagination:new Backbone.Model(a.schedulePagination),statusPagination:new Backbone.Model(a.statusPagination),isAdmin:a.admin});new CloudCode.Views.NavView({model:b});new CloudCode.Views.ScriptsView({model:b});new CloudCode.Views.LogsView({model:b});new CloudCode.Views.JobSchedulesView({model:b});new CloudCode.Views.JobStatusView({model:b});new CloudCode.Views.ReleaseInfo({model:b});if(a.admin){new CloudCode.Routers.AdminRouter({state:b});b.set("tabBarIndex",0);b.set("contentSelection","script")}else{new CloudCode.Routers.Router({state:b})}$.get(d.dataRequestUrl()+"cloud_code/release_info",function(f){$(function(){if(f){b.set("releaseInfo",new Backbone.Model(f))}})});$(function(){$(".content_spinner").spin("large","#717171")})}};var DataBrowser={Models:{},Collections:{},Views:{},Routers:{},Utils:{},initialize:function(b){if(b.serverURL){Parse.serverURL=b.serverURL}Parse._initialize(b.appId,b.javascriptKey,b.masterKey);Parse._useMasterKey=true;Parse.VERSION="browser";var d=new DataBrowser.Models.GlobalState({app:b.app,schemas:b.schemas,collections:b.collections,pendingImports:b.pendingImports,exportProgress:b.exportProgress});var c=new DataBrowser.Views.DataBrowser({state:d,configBlob:b.configBlob,isAdmin:b.isAdmin,s3PublicKey:b.s3PublicKey,s3BucketName:b.s3BucketName});var a=new DataBrowser.Routers.Router({state:d,grid:c})}};DataBrowser.Views.Modal=Backbone.View.extend({events:{"click .cancel":"close","submit form":"submit"},close:function(a){this.$el.dialog("destroy");this.remove();return false},submit:function(a){},open:function(b){var a=this;var c=_.extend({},b,{close:function(d){return a.close.call(a,d)}});this.$el.dialog(c)}});var PushConsole={Models:{},Collections:{},Views:{},Routers:{},initialize:function(a){if(a.serverURL){Parse.serverURL=a.serverURL}Parse._initialize(a.appId,a.javascriptKey,a.masterKey);Parse._useMasterKey=true;var b=new Parse.Schema({id:"_Installation"});var c=new PushConsole.Models.PushState({app:a.app,availableDevices:a.availableDevices,targetedDevices:a.availableDevices,schema:b,beta:a.beta});new PushConsole.Views.QueryBuilder({el:".target_advanced",state:c}).render();if(a.beta){new PushConsole.Views.PushPreview({el:".left_phone",enablePreviewUpdate:true,state:c}).render();new PushConsole.Views.PushPreview({el:".right_phone",enablePreviewUpdate:true,state:c,expRightPhone:true}).render();new PushConsole.Views.PushConsoleBeta({el:"#push_form",state:c}).render();new PushConsole.Views.NewUserExperience({el:".p_push_notifications_new",displayNUX:a.displayNUX}).render()}else{new PushConsole.Views.PushPreview({el:".section_preview",enablePreviewUpdate:true,state:c}).render()}new PushConsole.Views.PushConsole({el:"#push_form",state:c}).render();new PushConsole.Routers.Router({state:c});Parse.history.start()}};var PushABConsole={Models:{},Collections:{},Views:{},Routers:{},initialize:function(a){if(a.serverURL){Parse.serverURL=a.serverURL}Parse._initialize(a.appId,a.javascriptKey,a.masterKey);Parse._useMasterKey=true;var b=new Parse.Schema({id:"_Installation"});var c=new PushABConsole.Models.PushState({app:a.app,targetedDevices:a.availableDevices,availableDevices:a.availableDevices,schema:b});new PushConsole.Views.QueryBuilder({el:".target_advanced",state:c}).render();new PushABConsole.Views.PushConsole({el:"#push_form",state:c}).render()}};Parse.Schema=Backbone.Model.extend({initialize:function(b,a){if(!a||!a.parse){this.changedKeys=b&&b.keys?b.keys:{}}},defaults:{keys:{}},addKey:function(c,b){var a=Parse.Schema.validateNewKeyName(c);if(a){return a}var d=this.get("keys");if(_.has(d,c)){return"The key '"+c+"' already exists."}if(_.has(this.changedKeys,c)){return"The key '"+c+"' has already been changed. Please call save before changing the key again."}this.changedKeys[c]={type:b};d[c]={type:b};this.trigger("change")},deleteKey:function(b){var a=Parse.Schema.validateKeyName(b);if(a){return a}var c=this.get("keys");if(!_.has(c,b)){return"The key '"+b+"' does not exist."}if(_.has(this.changedKeys,b)){return"The key '"+b+"' has already been changed. Please call save before changing the key again."}this.changedKeys[b]=Parse.Schema._UNSET;delete c[b];this.trigger("change")},deletableKeys:function(){var b=this;var c=this.get("keys");var a=[];Parse._each(c,function(e,d){if(b.canDeleteKey(d)){a.push(d)}});return a},canAddKey:function(a){return !_(this.get("keys")).chain().keys().include(a).value()},canDeleteKey:function(a){var b=this.key(a);return !b.required},key:function(a){return this.get("keys")[a]},typeForQuery:function(a){if(a==="createdAt"||a==="updatedAt"){return"Date"}else{return this.key(a).type.name}},urlRoot:function(){return Parse.Schema.urlRoot()},validate:function(f,k){var c=f.className;if(!c){return"A schema must have a className: '"+f+"'."}if(this.has("className")&&this.get("className")!==c){return"Schema's className "+c+" cannot be changed."}var d=Parse.Schema.validateClassName(c);if(d){return d}var j=f.keys;if(j){var a=_.keys(j);for(var b=0;b<a.length;b++){var h=a[b];d=Parse.Schema.validateKeyName(h);if(d){return d}var e=j[h];if(!_.isObject(e)||!_.has(e,"type")){return"The key '"+h+"' does not have a type."}}}},toJSON:function(){var a={};Parse._each(this.attributes,function(c,b){if(b==="keys"){a[b]=Parse.Schema._keysToJSON(c)}else{a[b]=c}});return a},parse:function(b){this.changedKeys={};var a={};Parse._each(b,function(d,c){if(c==="className"){a.className=d;a.id=d}else{if(c==="keys"){a.keys=Parse.Schema._parseKeys(d)}}});return a},sync:function(h,c,b){if(!Parse.applicationId){throw"You must specify your applicationId using Parse.initialize"}if(!Parse.masterKey){throw"You must specify a master key using Parse.initialize"}var d={_ApplicationId:Parse.applicationId,_MasterKey:Parse.masterKey,_ClientVersion:"browser"};var f={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};h=f[h];if(h==="POST"||h==="PUT"){_.extend(d,c._toSaveJSON())}if(h!=="POST"){d._method=h;h="POST"}var e=JSON.stringify(d);var a=_.result(c,"url");if(!a){throw new Error('A "url" property or function must be specified.')}Parse._ajax(h,a,e,b.success,b.error)},_toSaveJSON:function(){return{className:this.get("className"),keys:Parse.Schema._keysToJSON(this.changedKeys)}}},{Type:{String:{name:"String"},Number:{name:"Number"},Boolean:{name:"Boolean"},Date:{name:"Date"},File:{name:"File"},GeoPoint:{name:"GeoPoint"},Array:{name:"Array"},Object:{name:"Object"},Bytes:{name:"Bytes"},Pointer:function(a){var b=Parse.Schema.Type.Pointer;if(!b[a]){b[a]={name:"Pointer",className:a}}return b[a]},Relation:function(a){var b=Parse.Schema.Type.Relation;if(!b[a]){b[a]={name:"Relation",className:a}}return b[a]}},urlRoot:function(){var a=Parse.serverURL;if(a[a.length-1]!=="/"){a+="/1/schemas"}else{a+="1/schemas"}return a},specialClasses:["_User","_Installation","_Role","_Product"],prettifyClassName:function(a){if(_.contains(Parse.Schema.specialClasses,a)){return a.replace("_","")}else{return a}},isSpecialClass:function(a){return _.contains(Parse.Schema.specialClasses,a)},validateClassName:function(b){if(_.contains(Parse.Schema.specialClasses,b)){return}var a=Parse.Schema._validateName(b);if(a){return a}if(b.length>128){return"Class name cannot be longer than 128 characters: '"+b+"'."}},reservedKeys:["objectId","createdAt","updatedAt","className","sessionToken","authData","accessControl","acl","ACL","emailVerified","roleNames"],validateNewKeyName:function(a){if(_.contains(Parse.Schema.reservedKeys,a)){return"The "+a+" key is a reserved word"}return Parse.Schema.validateKeyName(a)},validateKeyName:function(a){return Parse.Schema._validateName(a)},_validateName:function(a){if(!a.match(/^[a-zA-Z]/)){return"Name must start with a letter."}if(!a.match(/^[a-zA-Z0-9_]+$/)){return"Bad characters in name: '"+a+"'. Name must only contain alphanumeric or underscore characters, and must begin with a letter."}},_keysToJSON:function(b){var a={};Parse._each(b,function(c,d){if(c===Parse.Schema._UNSET){a[d]=c}else{a[d]={};Parse._each(c,function(f,e){if(e==="type"){a[d].type=f.name;if(f.name==="Pointer"||f.name==="Relation"){a[d].className=f.className}}else{a[d][e]=f}})}});return a},_parseKeys:function(b){var a={};Parse._each(b,function(c,e){if(!_.isObject(c)||!c.type){throw new Error("The key '"+c+"' is not valid.")}a[e]={};var h=Parse.Schema.Type[c.type];if(c.type==="Relation"||c.type==="Pointer"){var d=c.className;if(!d){var f="The key '"+e+"' must have a className.";throw new Error(f)}a[e].type=Parse.Schema.Type[c.type](d)}else{a[e].type=Parse.Schema.Type[c.type]}delete c.type;delete c.className;Parse._each(c,function(l,j){a[e][j]=l})});return a},_UNSET:{__op:"Delete"}});var Analytics={initialize:function(b){var a=new Analytics.GraphState({app:b.app,baseUrl:b.baseUrl,customGraphs:b.customGraphs,customEvents:b.customEvents,appSchema:b.appSchema,admin:b.admin,pumaPerformance:b.pumaPerformance});var c=b.app.get("friendly_id");$("#graph_wrapper_"+c).html(JST["apps/analytics/_graph"]({appId:c}));new Analytics.GraphNavigationSidebar({model:a,el:".dashboard_nav:first"});if(!b.disableRouter){new Analytics.Router({state:a});Parse.history.start()}else{a.set("selectedNavigation","events");a.addFirstAvailableSeries()}new Analytics.GraphToolbar({model:a,el:"#graph_wrapper_"+c+" .graph_toolbar"}).render();new Analytics.GraphBreakdownSidebar({model:a,el:"#graph_wrapper_"+c+" .graph_breakdown_sidebar"}).render();new Analytics.ContentAudience({model:a,el:"#graph_wrapper_"+c+" .content_audience"}).render();new Analytics.ContentEvents({model:a,el:"#graph_wrapper_"+c+" .content_events"}).render();new Analytics.ContentRetention({model:a,el:"#graph_wrapper_"+c+" .content_retention"}).render();new Analytics.ContentPerformance({model:a,el:"#graph_wrapper_"+c+" .content_performance"}).render();new Analytics.Graph({model:a,el:"#graph_wrapper_"+c}).render();new Analytics.NoData({model:a,el:"#graph_wrapper_"+c+" .empty_wrapper"});a.updateAllDataUrl()},ViewHelpers:{humanize:function(c,a){if(c<1000){return c}var b=c/1000;if(b<1000){return b.toPrecision(a)+"K"}b=b/1000;if(b<1000){return b.toPrecision(a)+"M"}return b.toPrecision(a)},humanizeTotal:function(a){if(a<Math.pow(10,6)){var b=a.toString();return b.replace(/\B(?=(\d{3})+(?!\d))/g,",")}return Analytics.ViewHelpers.humanize(a,4)}}};var Util={timezone_acronym:function(){var a=new Date().toString();if(a.indexOf("(")!=-1){return a.replace(/^.*\(/,"").replace(")","")}else{return a.match(/[A-Z]{3}/)[0]}},in_utc:function(){return moment().zone()===0},getErrorMessage:function(c){var a;if(c.response===""){if(c.status===0){a="The request timed out. Please try it again later."}else{a="The request failed due to unknown error.Please try it again later."}}else{try{a=JSON.parse(c.response).error}catch(b){a=c.response.toString()}}return a},is_chrome:navigator.userAgent.indexOf("Chrome")>-1,is_explorer:navigator.userAgent.indexOf("MSIE")>-1,is_firefox:navigator.userAgent.indexOf("Firefox")>-1,is_safaribrowser:navigator.userAgent.indexOf("Safari")>-1,is_Opera:navigator.userAgent.indexOf("Presto")>-1,is_safari:function(){return((this.is_chrome)&&(this.is_safaribrowser))?false:true},isStringBlank:function(a){return(!a||/^\s*$/.test(a))},createCookie:function(c,d,e){var a="";if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/"},readCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)===" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}},eraseCookie:function(a){createCookie(a,"",-1)}};_.extend(Parse.Schema,{availableNewTypes:function(){return _(Parse.Schema.Type).chain().keys().reject(function(a){return a==="Bytes"}).value()},beautifyClassName:function(a){if(Parse.Schema.isSpecialClass(a)){return a.substring(1)}else{return a}},lowercaseSpecialClassName:function(a){return a[0]==="_"?a.substring(1).toLowerCase():a.toLowerCase()},underscoreSpecialClassName:function(a){return"_"+_(a).capitalize()},beautifyTypeName:function(a){if(a.name==="Pointer"){return _.escape("Pointer<"+a.className+">")}if(a.name==="Relation"){return _.escape("Relation<"+a.className+">")}return a.name}});_.mixin({equalIgnoreCase:function(b,a){return b.toLowerCase()===a.toLowerCase()}});$.fn.extend({isVisible:function(){return this.css("display")!=="none"}});$.fn.extend({href:function(a){if(a.indexOf("http")===0||a.indexOf("/")===0||a.indexOf("#")===0){return this.attr("href",a)}}});_.extend(Parse.Object.prototype,{toDataBrowserJSON:function(){var a=_.clone(this.attributes);Parse._each(a,function(d,b){try{a[b]=Parse._encode(d)}catch(c){if(c.message!=="Can't serialize an unsaved Parse.Object"){throw c}}});a.objectId=this.id;if(_.isDate(this.createdAt)){a.createdAt=this.createdAt.toJSON()}else{a.createdAt=this.createdAt}if(_.isDate(this.updatedAt)){a.updatedAt=this.updatedAt.toJSON()}else{a.updatedAt=this.updatedAt}if(this.className==="_Product"){if(_.isNull(a.download)&&!a.downloadName){delete a.downloadName}else{if(a.download&&!a.downloadName){a.downloadName=a.download.name}else{if(a.downloadName&&!a.download){a.download={__type:"file",name:a.downloadName}}}}}a.id=this.id;return a}});_.extend(Parse.Collection.prototype,{toDataBrowserJSON:function(){return _(this.models).map(function(a){return a.toDataBrowserJSON()})}});_.jammit_template=function(a){var b={interpolate:/<%-([\s\S]+?)%>/g,escape:/<%=([\s\S]+?)%>/g};return _.template(a,null,b)};CloudCode.Routers.Router=Parse.Router.extend({initialize:function(a){this.state=a.state},routes:{script:"selectScript","script/:scriptSourceName":"selectScript",log:"selectLog","log/:logLevel":"selectLog",jobs:"selectJobs","jobs/page/:page":"selectJobs",job_status:"selectJobStatus","job_status/page/:page":"selectJobStatus","*string":"index"},selectScript:function(b){var a=decodeURIComponent(b);if(b){this.state.set({currentScriptSource:a})}this.state.set({contentSelection:"script"})},selectLog:function(a){if(a){this.state.get("logContent").set({logLevel:a.toUpperCase()})}else{this.state.get("logContent").set({logLevel:"INFO"})}this.state.set({contentSelection:"log"})},selectJobs:function(a){this.state.set({contentSelection:"jobs"});if(a){this.state.get("schedulePagination").set("current_page",parseInt(a,10))}},selectJobStatus:function(a){this.state.set({contentSelection:"job_status"});if(a){this.state.get("statusPagination").set("current_page",parseInt(a,10))}},index:function(){this.selectScript()}});Parse.SchemaCollection=Backbone.Collection.extend({url:Parse.Schema.urlRoot,model:Parse.Schema,sync:Parse.Schema.prototype.sync});DataBrowser.Formatters=(function(){var e=function(f){if(_.isUndefined(f)){return b("(undefined)","light")}if(_.isNull(f)){return b("(null)","light")}return};var b=function(h,f){f=f?"content_wrapper "+f:"content_wrapper";return"<div class='"+f+"'>"+h+"</div>"};var a=function(f){var h=e(f);if(h){return h}datetime=moment.utc(f,"YYYY-MM-DDTHH:mm:ss Z");return b(datetime.format("MMM DD, YYYY, HH:mm"))};var c=function(h){extraPrefix="tfss-";var f=37;if(_.startsWith(h,extraPrefix)){f+=extraPrefix.length}return h.substring(f)};var d=function(s,j,n,v){var q="Public Read and Write";var o="Master Key Only";if(n==="_User"){userID=v.id;if(userID){q="Public Read, "+userID}}if(_.isUndefined(s)||_.isNull(s)){return b(q)}if(_.isEmpty(s)){return b(o)}var r={};var h=[];var l=[];_.each(s,function(y,x){var w;if(x==="*"){w="public"}else{if(x.indexOf("role:")===0){w="role";l.push(x.slice(5))}else{w="user";h.push(x)}}r[w]=++r[w]||1});var m=s["*"]&&s["*"].read;var u=s["*"]&&s["*"].write;var t;var f;if(m&&u){t="Public Read and Write"}else{var k=[];if(m){k.push("Public Read")}else{if(u){k.push("Public Write")}}f=k.concat(l).concat(h).join(", ");if(j>f.length*7){t=f}else{if(r.role>1){k.push(r.role+" Roles")}else{if(r.role===1){k.push("1 Role")}}if(r.user>1){k.push(r.user+" Users")}else{if(r.user===1){k.push("1 User")}}t=k.join(", ")}}return b(t)};return{stringFormatter:function(l,h,k,j,f){return e(k)||b(_.escape(k))},numberFormatter:function(l,h,k,j,f){return e(k)||b(k)},booleanFormatter:function(l,h,k,j,f){return e(k)||b(k)},simpleDateFormatter:function(l,h,k,j,f){return e(k)||a(k)},dateFormatter:function(l,h,k,j,f){return e(k)||a(k.iso)},fileFormatter:function(l,h,k,j,f){return e(k)||b(JST["data_browser/_link_to_file"]({url:k.url,name:c(k.name)}))},linklessFileFormatter:function(l,h,k,j,f){return e(k)||b(c(k.name))},pointerFormatter:function(n,h,m,j,f){if(!m){return e(m)}var l="#class/"+m.className+"/objectId/"+m.objectId;var k="<a href='"+l+"'>"+m.objectId+"</a>";return b(k)},geopointFormatter:function(l,h,k,j,f){return e(k)||b(k.latitude+", "+k.longitude)},arrayFormatter:function(l,h,k,j,f){return e(k)||b(_.escape(JSON.stringify(k)))},objectFormatter:function(l,h,k,j,f){return e(k)||b(_.escape(JSON.stringify(k)))},bytesFormatter:function(l,h,k,j,f){return e(k)||b(k.base64,"metadata")},passwordFormatter:function(l,h,k,j,f){return b("(hidden)","light")},aclFormatter:function(n,h,m,j,f,l){var k=l.classUrl().slice(6);return d(m,j.width,k,f)},relationFormatter:function(s,q,o,l,j,h){var n=j.id;if(!n){return e(o)}else{var m=h.get("className");var r=l.id;var f="#relation/"+m+"/"+n+"/"+r;var k="<a href='"+f+"'>View Relations</a>";return b(k)}},authDataFormatter:function(m,h,l,k,f){if(!l){return e(l)}var j=[];if(l.facebook){j.push("Facebook: "+l.facebook.id)}if(l.twitter){j.push("Twitter:"+l.twitter.screen_name)}if(l.anonymous){j.push("Anonymous")}return b(j.join(", "))}}}());DataBrowser.Models.GlobalState=Backbone.Model.extend({defaults:{activeFilters:null,app:null,className:null,collections:null,contextColumn:null,contextRow:null,counts:null,exportProgress:null,fetchedRows:null,filters:null,filterState:0,fullScreen:false,message:null,numReqs:0,objectsPerPage:20,objectId:null,page:0,pendingImports:null,relationObjectId:null,relationKey:null,rows:null,schemas:null,selectedRows:null,showOverlay:false,sortCol:"createdAt",sortAsc:false,success:false},initialize:function(){_.bindAll(this);if(!this.get("schemas")){this.set("schemas",new Parse.SchemaCollection())}this.get("schemas").comparator=function(a){return a.id.toLowerCase()};if(!this.get("collections")){this.set("collections",new Backbone.Collection())}this.get("collections").comparator=function(a){return a.id.toLowerCase()};if(!this.get("pendingImports")){this.set("pendingImports",new Backbone.Collection())}else{this.setPollImportStatusInterval()}if(!this.get("exportProgress")){this.set("exportProgress",new Backbone.Model())}if(!this.get("fetchedRows")){this.set("fetchedRows",new Parse.Collection())}if(!this.get("rows")){this.set("rows",new Parse.Collection())}if(!this.get("counts")){this.set("counts",new Backbone.Model());this.initializeCounts()}if(!this.get("filters")){this.set("filters",new App.Collections.Constraints())}if(!this.get("activeFilters")){this.set("activeFilters",new App.Collections.Constraints())}this.on("change:className change:objectId",this.updateClassRelatedAttributes);this.on("change:objectsPerPage",this.updateRowsWhilePaging);this.on("change:className change:page change:objectId",this.updateRows);this.on("change:relationKey change:relationObjectId",this.updateRows);this.on("change:sortCol change:sortAsc",this.updateRows);this.on("refresh:rows",this.updateRows);this.get("activeFilters").on("add remove reset",this.updateRowsWhilePaging);this.get("filters").on("remove reset",this.closeFilter);this.get("filters").on("remove",this.updateActiveFilters);this.get("pendingImports").on("add remove reset",this.setPollImportStatusInterval);this.get("pendingImports").on("change:state",this.handleImportStateChange);Parse.User.allowCustomUserClass(true)},getSchema:function(){var b;var a=this.get("schemas");if(!this.isRelation()){b=a.get(this.get("className"))}else{b=a.get(this.getRelationClassName())}return b},getCollection:function(){return this.get("collections").get(this.get("className"))},getRelationClassName:function(){return this.get("schemas").get(this.get("className")).key(this.get("relationKey")).type.className},isRelation:function(){return this.get("relationKey")},getCount:function(){var a=this.getCountKey();return this.get("counts").get(a)},getCountKey:function(){var b;if(!this.isRelation()){b=this.get("className")}else{var c=this.get("relationKey");var a=this.get("relationObjectId");b=a+"/"+c}return b},setSuccessMessage:function(a){if(a.message){a=a.message}this.set({message:a,success:true});this.trigger("set:message")},setErrorMessage:function(a){if(a.message){a=a.message}this.set({message:a,success:false});this.trigger("set:message")},updateRows:function(){if(!this.get("className")||!this.selectedClassIsReady()){this.get("rows").reset([])}else{if(!this.isRelation()){this.updateNonRelationRows()}else{this.updateRelationRows()}this.updateObjectCount()}},updateRowsWhilePaging:function(){this.set({page:0},{silent:true});this.updateUrl();this.updateRows()},updateActiveFilters:function(b,c,a){var d=this.get("activeFilters");if(a.index<d.length){d.remove(d.at(a.index))}},closeFilter:function(){if(this.get("filters").isEmpty()){this.set("filterState",DataBrowser.Models.GlobalState.Filter.CLOSED)}},updateClassRelatedAttributes:function(){if(!this.get("filters").isEmpty()){this.get("filters").reset([])}if(!this.get("activeFilters").isEmpty()){this.get("activeFilters").reset([])}this.set({sortAsc:false,sortCol:"createdAt",filterState:DataBrowser.Models.GlobalState.Filter.CLOSED})},toggleFilterState:function(){var c=this.get("filterState");var a=this.get("filters");if(c===DataBrowser.Models.GlobalState.Filter.CLOSED&&a.isEmpty()){a.add({})}if(c!==DataBrowser.Models.GlobalState.Filter.OPEN){this.set("filterState",DataBrowser.Models.GlobalState.Filter.OPEN)}else{var b=this.get("activeFilters");if(a.length>1&&b.length){this.set("filterState",DataBrowser.Models.GlobalState.Filter.MULTI)}else{if(a.length===1){this.set("filterState",DataBrowser.Models.GlobalState.Filter.SINGLE)}else{this.set("filterState",DataBrowser.Models.GlobalState.Filter.CLOSED)}}}return false},updateUrl:function(){if(Parse.history&&this.get("className")){var a="class/"+this.get("className");if(this.get("objectId")){a+="/objectId/"+this.get("objectId")}else{a+="/p"+this.get("page")}Parse.history.navigate(a)}},incReqs:function(a){if(!a){a=false}this.set("showOverlay",a);this.set("numReqs",this.get("numReqs")+1)},decReqs:function(){this.set("numReqs",this.get("numReqs")-1)},classUrl:function(){var a;if(!this.isRelation()){a="class/"+this.get("className")}else{a="relation/"+this.get("className")+"/"+this.get("relationObjectId")+"/"+this.get("relationKey")}return a},nextPageUrl:function(){return this.classUrl()+"/p"+(this.get("page")+1)},previousPageUrl:function(){return this.classUrl()+"/p"+(this.get("page")-1)},initializeCounts:function(){var b=this.get("collections");var a=this.get("counts");b.each(function(c){a.set(c.id,c.get("count"),{silent:true})})},addFilters:function(b){var a=this.get("activeFilters");App.Collections.Constraints.addConstraintsToQuery(a,b,this.getSchema())},addPagination:function(a){if(this.get("sortAsc")){a.ascending(this.get("sortCol"))}else{a.descending(this.get("sortCol"))}a.skip(this.get("objectsPerPage")*this.get("page")).limit(this.get("objectsPerPage")+1)},addObjectIdConstraint:function(a){if(this.get("objectId")){a.equalTo("objectId",this.get("objectId"))}},updateNonRelationRows:function(){var a=this.get("className");this.constructRowsAndFetch(new Parse.Query(a),a)},updateRelationRows:function(){var b=this;var c=new Parse.Query(this.get("className"));var a=this.get("relationObjectId");this.incReqs(true);c.get(a,{success:function(d){b.decReqs();var h=b.get("relationKey");var f=d.relation(h);var e=b.getRelationClassName();b.constructRowsAndFetch(f.query(),e)},error:function(e,d){b.decReqs();b.setErrorMessage(d)}})},updateObjectCount:function(){var a=this;var b="/apps/"+encodeURIComponent(this.get("app").id)+"/collections/count";$.get(b,function(c){var e=a.get("counts");var f=c.collection;for(var d=0;d<f.length;++d){e.set(f[d].id,f[d].count)}}).error(function(){a.setErrorMessage("Could not retrieve object count")})},constructRowsAndFetch:function(e,d){var a=this;var b=d;var c=this.get("fetchedRows");c.model=Parse.Object.extend(d);c.query=e;this.addFilters(c.query);this.addPagination(c.query);this.addObjectIdConstraint(c.query);this.incReqs(true);c.fetch({success:function(f){a.decReqs();var h=a.get("rows");h.model=f.model;if(a.isRelation()||a.get("className")===b){if(f.length===a.get("objectsPerPage")+1){h.reset(f.models.slice(0,a.get("objectsPerPage")))}else{h.reset(f.models)}}},error:function(h,f){a.decReqs();if(a.get("activeFilters").length){f="Request timed out. Try removing some filters."}else{if(a.get("sortCol")!=="createdAt"&&a.get("sortCol")!=="updatedAt"){f="Request timed out. Sort by 'createdAt' and try again."}}a.setErrorMessage(f)}})},setPollImportStatusInterval:function(){var a=this;if(this.get("pendingImports").where({state:"processing"}).length<=0&&this.pollId){clearInterval(this.pollId);this.pollId=null}else{if(this.get("pendingImports").where({state:"processing"}).length>0&&!this.pollId){var b=App.currentApp.dataRequestUrl()+"seed_files_import_states";this.pollId=setInterval(function(){var c=_.map(a.get("pendingImports").where({state:"processing"}),function(d){return d.get("id")});$.get(b,{seed_file_ids:c},function(d){_.each(d.seed_files,function(e){var f=a.get("pendingImports").get(e.id);if(f){f.set(e)}})})},2000)}}},handleImportStateChange:function(c){var a=this;if(c.get("state")==="processing"){this.setPollImportStatusInterval();if(this.get("className")===c.get("class_name")){this.updateRows()}}else{if(c.get("state")==="success"){var b=App.currentApp.dataRequestUrl()+"collections/"+encodeURIComponent(c.get("class_name"))+"/fetch";$.get(b,function(d){if(!d.error){a.get("collections").add(d.collection);a.get("schemas").add(d.schema,{parse:true});a.get("pendingImports").remove(c);if(a.get("className")===d.schema.className){a.updateRows()}}})}}},selectedClassIsReady:function(){return !_.isUndefined(this.getCollection())},selectedClassIsProcessing:function(){return this.get("pendingImports").where({class_name:this.get("className"),state:"processing"}).length>0},selectedClassIsWaiting:function(){return this.get("pendingImports").where({class_name:this.get("className"),state:"waiting_on_schema"}).length>0},selectedClassModel:function(){var a=this.get("pendingImports").where({class_name:this.get("className")})[0];if(a){return a}else{return this.getCollection()}},selectedClassIsImporting:function(){return !_.isUndefined(this.get("pendingImports").where({class_name:this.get("className")})[0])}},{Filter:{CLOSED:0,OPEN:1,SINGLE:2,MULTI:3}});DataBrowser.Routers.Router=Parse.Router.extend({initialize:function(a){this.state=a.state},routes:{"class/:className":"selectClass","class/:className/p:page":"selectClass","class/:className/objectId/:objectId":"selectObject","relation/:className/:objectId/:key":"selectRelation","relation/:className/:objectId/:key/p:page":"selectRelation",home:"index","":"index"},selectClass:function(a,b){this.state.set({className:a,page:parseInt(b,10)||0,relationObjectId:null,relationKey:null,objectId:null})},selectObject:function(b,a){this.state.set({className:b,page:0,relationObjectId:null,relationKey:null,objectId:a})},index:function(){var a=this.state.get("schemas");if(!a.isEmpty()){this.selectClass(a.at(0).get("className"),0)}else{this.selectClass(null,0)}},selectRelation:function(c,a,b,d){this.state.set({className:c,page:parseInt(d,10)||0,relationKey:b,relationObjectId:a,objectId:null})}});DataBrowser.Views.Classes=Backbone.View.extend({el:".dashboard_nav .class_list",events:{"click .add_class:not(.disabled)":"addClass","click .import:not(.disabled)":"importData"},initialize:function(){_.bindAll(this);var a=this;this.state=this.options.state;this.schemas=this.state.get("schemas");this.s3PublicKey=this.options.s3PublicKey;this.s3BucketName=this.options.s3BucketName;this.progressBars={};this.state.get("exportProgress").each(function(b){a.createProgressView(b)});this.schemas.on("add remove reset",this.render);this.state.get("pendingImports").on("add remove",this.render);this.state.get("pendingImports").on("change:state",this.render);this.state.on("change:className",this.render);this.state.get("counts").on("change",this.render);this.state.on("change:relationKey",this.render);this.state.get("exportProgress").on("add",this.createProgressView);this.state.get("exportProgress").on("remove",this.removeProgressView);this.state.get("exportProgress").on("add remove change:status",this.render);this.state.get("exportProgress").on("remove",this.renderExportSuccessNotification);this.state.get("exportProgress").on("change:status",this.renderExportFailedNotification);return this},render:function(){var b=this;var c=this.state.get("pendingImports").map(function(h){var j={};j.className=h.get("class_name");if(h.get("state")=="processing"){j.processing=true}else{if(h.get("state")=="waiting_on_schema"){j.waiting=true}else{if(h.get("state")=="failed"){j.failed=true}}}return j});this.schemas.each(function(l){var j=l.get("className");var n=b.state.get("pendingImports").where({class_name:j})[0];if(_.isUndefined(n)){var k=b.state.get("counts").get(j)||0;var o=k;if(o>=1000){o=o/1000;if(o<1000){o=o.toPrecision(3)+"K"}else{o=o/1000;o=o.toPrecision(3)+"M"}}var m=b.state.get("exportProgress").get(j);var h=!_.isUndefined(m)&&(m.isActive());c.push({className:j,count:k,displayedCount:o,exporting:h})}});c=_.sortBy(c,function(h){return h.className.toLowerCase()});var f=this.state.get("relationKey");var a=this.state.get("relationObjectId");var d;if(this.state.isRelation()){d="#relation/"+this.state.get("className")+"/"+a+"/"+f}this.$el.html(JST["data_browser/_classes"]({classes:c,selectedClassName:this.state.get("className"),relationKey:f,relationLink:d,exportColl:this.state.get("exportProgress").get("exportColl"),}));var e="Data Browser";if(this.state.get("className")){e=this.state.get("className")}document.title=e+" | Parse";this.$(".processing .right_side").spin("xsmall","#555");_(this.progressBars).each(function(h){b.$("[data-name='"+h.model.id+"']").append(h.$el);h.render()});return this},createProgressView:function(a){if(a.id!==""&&a.isActive()){this.progressBars[a.id]=new App.Views.ProgressBar({model:a,markers:10})}},removeProgressView:function(a){this.progressBars[a.id].remove();delete this.progressBars[a.id]},renderExportSuccessNotification:function(a){var b=a.id;this.state.setSuccessMessage(b+" export complete. Check your email for a download link")},renderExportFailedNotification:function(a){if(a.get("status")==="failed"){var b=a.id;this.state.setErrorMessage(b+" export failed! If this error persists, please let us know.")}},addClass:function(a){new DataBrowser.Views.AddClass({state:this.state}).render();return false},importData:function(){new DataBrowser.Views.ImportData({state:this.state,s3PublicKey:this.s3PublicKey,s3BucketName:this.s3BucketName}).render();return false}});DataBrowser.Views.DataBrowser=Backbone.View.extend({el:"#browser",events:{"click .slick-cell a.new_tab":"openInNewTab","click .context_menu .delete":"unsetField","click .add:not(.disabled)":"addRow","click .add_class:not(.disabled)":"addClass","click .bulk_delete:not(.disabled)":"bulkDelete"},classURL:function(){return"/apps/"+encodeURIComponent(this.state.get("app").id)+"/collections/"+this.state.get("className")},initialize:function(){_.bindAll(this);this.s3PublicKey=this.options.s3PublicKey;this.s3BucketName=this.options.s3BucketName;this.state=this.options.state;this.config=this.options.configBlob;if(this.options.isAdmin){this.config={}}this.setup()},addClass:function(a){new DataBrowser.Views.AddClass({state:this.state}).render();return false},addRow:function(a){this.state.trigger("addRow");return false},openInNewTab:function(a){window.open($(a.target).attr("href"));return false},commitCurrentEdit:function(){this.grid.getEditController().commitCurrentEdit();var a=this.grid.getCellEditor();if(a&&a.args&&a.args.commitChanges){a.args.commitChanges()}},bulkDelete:function(){var d=this;var h=this.grid.getSelectedRows();var f=this.state.get("rows");if(h.length>1&&!confirm("Are you sure you want to delete these "+h.length+" rows? There is no undo.")){return false}if(!this.state.isRelation()){var e=_.map(h,function(j){return f.at(j)});if(!_.isEmpty(e)){var a=this.state.getCountKey();this.state.incReqs();this.grid.setSelectedRows([]);Parse.Object.destroyAll(e,{success:function(){d.state.decReqs();d.state.trigger("refresh:rows");var j=d.state.get("counts");j.set(a,j.get(a)-e.length);var k="Successfully deleted "+e.length+(e.length===1?" object.":" objects.");d.state.setSuccessMessage(k)},error:function(j){d.state.decReqs();d.state.setErrorMessage("The deletion failed.")}})}}else{var c=Parse.Object.extend(this.state.get("className"));var b=new Parse.Query(c);this.state.incReqs();b.get(this.state.get("relationObjectId")).then(function(j){var k=j.relation(d.state.get("relationKey"));Parse._arrayEach(h,function(l){k.remove(f.at(l))});return j.save()}).then(function(){d.state.decReqs();var j="Successfully deleted "+h.length+(h.length===1?" object.":" objects.");d.state.setSuccessMessage(j);d.state.trigger("refresh:rows")},function(){d.state.decReqs();d.state.setErrorMessage("The deletion failed.")})}},handleContextMenu:function(c){var b=this;b.$(".context_menu").remove();var a=this.grid.getCellFromEvent(c);if(this.isCellEditable(a)){c.preventDefault();c.stopImmediatePropagation();this.grid.setActiveCell(a.row,a.cell);this.state.set({contextCell:a.cell,contextRow:a.row});this.$(".slick-cell.active").append(JST["data_browser/_context_menu"]());$("body").one("click",function(){b.$(".context_menu").remove()})}},handleKeyDown:function(f){var a;if(f.keyCode===$.ui.keyCode.BACKSPACE||f.keyCode===$.ui.keyCode.DELETE){a=this.grid.getActiveCell();if(a&&this.isCellEditable(a)){f.preventDefault();var b={unset:true,row:a.row,cell:a.cell};this.updateRow(f,b)}}else{if(f.keyCode===$.ui.keyCode.TAB&&this.grid.getCellEditor()){a=this.grid.getActiveCell();var c=this.grid.getColumns().length;if(f.shiftKey){if(a.cell!==0){this.grid.navigatePrev()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}else{if(a.cell!==c-1){this.grid.navigateNext()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}this.grid.editActiveCell();f.stopImmediatePropagation()}else{if(f.keyCode===$.ui.keyCode.ENTER&&this.grid.getCellEditor()){a=this.grid.getActiveCell();var d=this.grid.getDataLength();if(f.altKey){this.grid.getCellEditor().el.value+="\n";this.grid.getCellEditor().el.scrollTop+=this.grid.getCellEditor().el.clientHeight}else{if(f.shiftKey){if(a.row!==0){this.grid.navigateUp();this.grid.editActiveCell()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}else{if(a.row!==d-1){this.grid.navigateDown();this.grid.editActiveCell()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}}f.stopImmediatePropagation()}}}},columnsReordered:function(c){var a=this.grid.getColumns();a.unshift(this.checkboxSelector.getColumnDefinition());this.grid.setColumns(a);var d=$(".slick-header-columns");var b=$(d.children()[0]);b.addClass("checkbox-selector");this.saveColumnConfig(c)},saveColumnConfig:function(h){var a=this;var f=this.state.get("app").id;var c=this.state.get("className");if(!this.config){this.config={}}if(!this.config[f]){this.config[f]={}}this.config[f][c]={};$(".slick-header-columns").children(".slick-header-column").each(function(e){var k=$(this)[0].title;var j={width:$(this)[0].scrollWidth,order:e+1};a.config[f][c][k]=j});var b="/apps/"+encodeURIComponent(this.state.get("app").id)+"/collections/config_blob";var d={};d.config_blob=this.config;if(!a.options.isAdmin){$.post(b,d)}},dropCollectionConfig:function(c){var b=this.state.get("app").id;var a=this.state.get("className");delete this.config[b][a]},unsetField:function(b){var a={unset:true,row:this.state.get("contextRow"),cell:this.state.get("contextCell")};this.updateRow(b,a)},updateSchemaListener:function(){var a=this.state.getSchema();if(a){a.on("all",this.render)}},updateRow:function(j,k){var m=this;var c=k.row;var o=this.state.get("rows");var n=o.models[c];var f=n.isNew();var b=f?"created":"updated";var l=f?"creating":"updating";var d=this.grid.getColumns();var a=d[k.cell].id;if(k.unset){n.unset(a)}else{var h=k.item[a];n.set(a,h)}this.state.incReqs();n.save().then(function(){if(n!=o.models[c]){c=o.indexOf(n)}m.grid.getData()[c]=n.toDataBrowserJSON();m.grid.updateRow(c);if(f){var s=m.state.get("counts");var e=m.state.getCountKey();s.set(e,(s.get(e)||0)+1);if(m.state.isRelation()){e=m.state.getRelationClassName();s.set(e,(s.get(e)||0)+1)}}if(m.state.isRelation()){var r=Parse.Object.extend(m.state.get("className"));var q=new Parse.Query(r);return q.get(m.state.get("relationObjectId"))}},function(e){if(n!=o.models[c]){c=o.indexOf(n)}m.grid.getData()[c]=n.toDataBrowserJSON();m.grid.updateRow(c);return e}).then(function(e){if(m.state.isRelation()){var q=e.relation(m.state.get("relationKey"));q.add(n);return e.save()}},function(e){return e}).then(function(){m.state.decReqs();m.trigger("renderRow");m.state.setSuccessMessage("Successfully "+b+" object.")},function(e){m.state.decReqs();m.trigger("renderRow");m.state.setErrorMessage("Error: "+e.message)})},render:function(){this.renderRows();this.trigger("render");return this},renderRows:function(){var d=this.state.get("rows");var b=d.toDataBrowserJSON();var e=this.state.get("objectsPerPage");this.grid.setData(b);var a=this.makeColumns();this.grid.setColumns(a);$(".slick-header").show();this.grid.resizeCanvas();this.grid.setSelectedRows([]);var f=$(".slick-header-columns");var c=$(f.children()[0]);c.addClass("checkbox-selector");$(".slick-header-columns").sortable("option","items","> div:not(.checkbox-selector)");this.grid.setSortColumn(this.state.get("sortCol"),this.state.get("sortAsc"))},sort:function(h,a){var f=a.sortCol.field;var b=a.sortAsc;if(!this.state.get("activeFilters").length&&!this.state.isRelation()){if(f!=="createdAt"){var d=this.state.getCount();if(d>DataBrowser.Views.DataBrowser.MAX_COUNT_ALLOWED_FOR_SORT){var c="Too many items to sort. Please use filters to limit the number of items to less than 10000.";this.state.setErrorMessage(c);return}}}this.state.set({sortCol:f,sortAsc:b});this.grid.setSortColumn(f,b)},setup:function(){var a=this;new DataBrowser.Views.Message({state:this.state});new DataBrowser.Views.Classes({state:this.state,s3PublicKey:this.s3PublicKey,s3BucketName:this.s3BucketName});new DataBrowser.Views.PerPage({state:this.state});new DataBrowser.Views.FilterSet({state:this.state}).render();new DataBrowser.Views.SpinnerBar({state:this.state});new DataBrowser.Views.SpinnerOverlay({state:this.state});new DataBrowser.Views.PageInfo({state:this.state});new DataBrowser.Views.Pagination({state:this.state});new DataBrowser.Views.Utility({model:this.state}).render();this.setupGrid();this.grid.onCellChange.subscribe(this.updateRow);this.grid.onSelectedRowsChanged.subscribe(function(c,d){a.state.set("selectedRows",d.rows)});this.grid.onSort.subscribe(this.sort);this.grid.onContextMenu.subscribe(this.handleContextMenu);this.grid.onKeyDown.subscribe(this.handleKeyDown);this.grid.onColumnsResized.subscribe(this.saveColumnConfig);this.grid.onColumnsReordered.subscribe(this.columnsReordered);var b=this.state.get("rows");b.on("reset",this.updateSchemaListener);b.on("reset",this.updateCollection);b.on("add remove reset",this.render);if(this.state.get("schemas").isEmpty()){this.state.get("schemas").reset();this.noDataView.render()}this.state.on("commitCurrentEdit",this.commitCurrentEdit);this.state.on("saveColumnConfig",this.saveColumnConfig);this.state.on("dropCollectionConfig",this.dropCollectionConfig)},setupGrid:function(){var b=this;var c={editable:true,enableAddRow:false,enableCellNavigation:true,asyncEditorLoading:false,autoEdit:false,autoHeight:true,leaveSpaceForNewRows:false,multiSelect:true,multiColumnSort:true};this.checkboxSelector=new Slick.CheckboxSelectColumn({cssClass:"slick-cell-checkboxsel"});var a=new Slick.RowSelectionModel({selectActiveRow:false});this.grid=new Slick.Grid(".data",[],[{id:"dummy"}],c,this.state);$(".slick-header").hide();this.grid.setSelectionModel(a);this.grid.registerPlugin(this.checkboxSelector);this.noDataView=new DataBrowser.Views.NoData({model:this.state});this.schemaConfigView=new DataBrowser.Views.SchemaConfig({model:this.state});this.$(".data_table").append(this.schemaConfigView.$el)},makeColumns:function(){var b=this;var e=this.state.getSchema();var f=this.state.get("app").id;var d=this.state.get("className");var c=[this.checkboxSelector.getColumnDefinition()];if(e){var a=e.get("keys");Parse._each(a,function(l,m){var h;var k;if(b.config&&b.config[f]&&b.config[f][d]&&b.config[f][d][m]){h=parseInt(b.config[f][d][m].order,10);k=parseInt(b.config[f][d][m].width,10)}var j={id:m,name:m,field:m,type:Parse.Schema.beautifyTypeName(l.type),order:h?h:100,width:k?k:140,editor:App.Views.Editors[l.type.name],formatter:DataBrowser.Formatters[l.type.name.toLowerCase()+"Formatter"],sortable:b._isTypeSortable(l.type)};_.extend(j,b.columnForSpecialField(d,m,h,k));c.push(j)});c.sort(function(j,h){var k=j.order-h.order;if(k){return k}if(!k){if(j.name>h.name){return 1}else{if(j.name<h.name){return -1}else{return 0}}}return 0})}return c},columnForSpecialField:function(d,e,a,c){var b;if(e==="objectId"){b={id:"objectId",name:"objectId",field:"objectId",width:c?c:100,order:a?a:0,formatter:DataBrowser.Formatters.stringFormatter,editor:App.Views.Editors.ReadonlyString}}else{if(e==="createdAt"){b={id:"createdAt",name:"createdAt",field:"createdAt",type:"Date",width:c?c:190,order:a?a:1000,editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.simpleDateFormatter}}else{if(e==="updatedAt"){b={id:"updatedAt",name:"updatedAt",field:"updatedAt",type:"Date",width:c?c:190,order:a?a:1001,editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.simpleDateFormatter}}else{if(e==="ACL"){b={id:"ACL",name:"ACL",field:"ACL",type:"ACL",width:c?c:190,order:a?a:1002,editor:App.Views.Editors.ACL,formatter:DataBrowser.Formatters.aclFormatter,sortable:false}}else{if(d==="_User"){if(e==="username"){b={id:"username",name:"username",field:"username",width:c?c:150,order:a?a:10,editor:App.Views.Editors.String,formatter:DataBrowser.Formatters.stringFormatter}}else{if(e==="password"){b={id:"password",name:"password",field:"password",width:c?c:180,order:a?a:11,editor:App.Views.Editors.Password,formatter:DataBrowser.Formatters.passwordFormatter}}else{if(e==="authData"){b={id:"authData",name:"authData",field:"authData",type:"authData",width:c?c:150,order:a?a:12,formatter:DataBrowser.Formatters.authDataFormatter}}else{if(e==="emailVerified"){b={id:"emailVerified",name:"emailVerified",field:"emailVerified",width:c?c:150,order:a?a:13,formatter:DataBrowser.Formatters.booleanFormatter}}}}}}else{if(d==="_Product"){if(e==="download"){b={id:"download",name:"download",field:"download",type:"File",width:c?c:150,order:a?a:10,editor:App.Views.Editors.File,formatter:DataBrowser.Formatters.linklessFileFormatter}}else{if(e==="downloadName"){b={id:"downloadName",name:"downloadName",field:"downloadName",width:c?c:150,order:a?a:11,editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.stringFormatter}}}}}}}}}return b},isCellEditable:function(a){var b=this.grid.getColumns()[a.cell].editor;return b&&b!==App.Views.Editors.ReadonlyString},_isTypeSortable:function(a){return _(["String","Number","Boolean","Date"]).indexOf(a.name)>=0}},{MAX_COUNT_ALLOWED_FOR_SORT:10000});DataBrowser.Views.FilterSet=Backbone.View.extend({el:".filtering_ui",events:{"click .filter_button":"toggleFilterState","click .title":"toggleFilterState","click .add_constraint_button":"addFilter","click .submit":"submit","click .dismiss":"dismiss","click .filters_overlay":"handleOutsideClick",commit:"submit"},initialize:function(){this.state=this.options.state;this.schema=this.state.getSchema();_.bindAll(this);this.state.get("filters").on("add",this.renderAdd);this.state.get("filters").on("remove",this.renderRemove);this.state.get("filters").on("reset",this.render);this.state.get("activeFilters").on("add remove reset",this.renderActiveState);this.state.get("filters").on("add remove reset",this.renderAddButtonState);this.state.on("change:filterState",this.renderFilterState)},render:function(){var a=this;this.$el.html(JST["data_browser/_filters"]({}));this.state.get("filters").each(function(b){a.renderAdd(b)});this.renderActiveState();this.renderFilterState();return this},renderAdd:function(b){var a=new App.Views.Constraint({constraint:b,constraints:this.state.get("filters"),state:this.state,schema:this.state.getSchema()});this.$(".filters").append(a.render().$el)},renderRemove:function(b,d,a){var c=a.index;this.$(".filters tr:nth-child("+(a.index+1)+")").remove()},renderActiveState:function(){var a=this.state.get("activeFilters");if(a.isEmpty()){this.$el.removeClass("active")}else{this.$el.addClass("active")}},renderFilterState:function(){this.$el.removeClass("open collapsed_single collapsed_multi close");var b=this.state.get("activeFilters");if(this.state.get("filterState")===DataBrowser.Models.GlobalState.Filter.OPEN){this.$el.addClass("open")}else{if(this.state.get("filterState")===DataBrowser.Models.GlobalState.Filter.MULTI){var a=(b.length===1)?"condition":"conditions";this.$(".title").text("Currently filtering your data using "+b.length+" "+a);this.$el.show().addClass("collapsed_multi")}else{if(this.state.get("filterState")===DataBrowser.Models.GlobalState.Filter.SINGLE){this.$el.show().addClass("collapsed_single")}else{this.$el.addClass("close")}}}},renderAddButtonState:function(){this.$(".add_constraint_button").removeClass("disabled");if(this.state.get("filters").length>10){this.$(".add_constraint_button").addClass("disabled")}},toggleFilterState:function(){this.state.toggleFilterState();return false},addFilter:function(){if(this.state.get("filters").length<=10){this.state.get("filters").add({})}return false},dismiss:function(){this.state.get("activeFilters").reset([]);this.state.get("filters").reset([]);return false},submit:function(){var a=this;this.$(".errors").empty().hide();this.state.get("filters").trigger("set");var b=true;_.each(this.state.get("filters").models,function(e){var d=e.get("error");if(d){this.$(".errors").append($("<div />").text(d));b=false}});if(b){var c=this.state.get("filters").map(function(d){return d.clone()});this.state.get("activeFilters").reset(c)}else{if(this.timeout){clearTimeout(this.timeout)}this.$(".errors").show();this.timeout=setTimeout(function(){a.$(".errors").hide();a.timeout=null},7000)}return false},handleOutsideClick:function(f){var c=f.pageX;var h=f.pageY;var b=this.$el.offset();var d=this.$el.width();var a=this.$el.height();if(c<b.left||c>(b.left+d)||h<b.top||h>(b.top+a)){this.state.toggleFilterState()}}});DataBrowser.Views.Message=Backbone.View.extend({el:".bottom .message",displayTime:7000,initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.on("set:message",this.render)},render:function(){var a=this;this.$(".message_text").text(this.state.get("message"));if(this.state.get("success")){this.$el.removeClass("error").addClass("success")}else{this.$el.removeClass("success").addClass("error")}this.$el.show("slide",{direction:"up"});setTimeout(function(){a.$el.hide("slide",{direction:"up"})},this.displayTime);return this}});DataBrowser.Views.AddClass=DataBrowser.Views.Modal.extend({events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"change select[name='classType']":"selectClass"}),initialize:function(){_.bindAll(this);this.state=this.options.state;this.schemas=this.state.get("schemas");this.state.on("change:addClassType change:addClassError",this.renderAll);this.state.set({addClassType:"custom",addClassError:""})},selectClass:function(c,a){var b=$(c.target).val();b=Parse.Schema.lowercaseSpecialClassName(b);if(!_.equalIgnoreCase(b,"custom")){b=Parse.Schema.underscoreSpecialClassName(b)}this.state.set("addClassType",b);return false},close:function(a){this.state.off("change:addClassType",this.renderAll);this.state.off("change:addClassError",this.renderAll);return DataBrowser.Views.Modal.prototype.close.call(this,a)},submit:function(){var a=this;var d=this.state.get("addClassType");if(!Parse.Schema.isSpecialClass(d)){d=this.$("input[name='name']").val();var b=Parse.Schema.validateClassName(d);if(b){this.state.set("addClassError",b);return false}}var c=_(this.schemas.pluck("className")).contains(d);if(c){this.state.set("addClassError","This class already exists.");return false}this.schemas.create({className:d},{wait:true,success:function(){var e=App.currentApp.dataRequestUrl()+"collections/"+encodeURIComponent(d)+"/fetch";$.get(e,function(f){a.state.get("collections").add(f.collection);a.state.get("schemas").add(f.schema,{parse:true});a.state.setSuccessMessage('Successfully added class "'+d+'".');Parse.history.navigate("class/"+d,{trigger:true})})},error:function(e,f){a.state.setErrorMessage("Error: "+f.error().responseText)}});this.close();return false},render:function(){this.renderSetup();this.renderAll();return this},renderSetup:function(){var a=_(Parse.Schema.specialClasses).map(function(b){return Parse.Schema.beautifyClassName(b)});classNames=["Custom"].concat(a);this.$el.html(JST["data_browser/_new_class"]({types:classNames}));this.open.call(this,{modal:true,width:450,title:"Add a new class"})},renderAll:function(){this.$(".custom, .special, .description, .errors, .tip").hide();var a=this.state.get("addClassError");if(a){this.$(".errors").text(a).show();this.state.set("addClassError","",{silent:true})}var c=this.state.get("addClassType");if(!Parse.Schema.isSpecialClass(c)){this.$(".custom").show();this.$(".tip").show()}else{var b=Parse.Schema.lowercaseSpecialClassName(c);this.$(".special, ."+b).show()}return this}});DataBrowser.Views.AddColumn=DataBrowser.Views.Modal.extend({events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"change select[name='type']":"displayClasses"}),initialize:function(){_.bindAll(this);this.state=this.options.state;this.schema=this.state.getSchema();this.state.on("change:localError",this.renderError)},displayClasses:function(d,a){var b=$(d.target).val();var c=this.$(".classNameDropdown");if(b==="Pointer"||b==="Relation"){c.show();$(".ui-dialog").addClass("extended")}else{c.hide();$(".ui-dialog").removeClass("extended")}return false},close:function(a){this.state.unset("localError");return DataBrowser.Views.Modal.prototype.close.call(this,a)},submit:function(j){var b=this;var d=this.$("input[name='name']").val();var a=this.$("select[name='type']").val();if(a===""){this.state.set("localError","Select a type for the column.");return false}if(!this.schema.canAddKey(d)){this.state.set("localError","That column already exists.");return false}var c=Parse.Schema.validateNewKeyName(d);if(_.isBlank(a)){this.state.set("localError","You need to select a data type for this column.")}if(c){this.state.set("localError",c);return false}var h=Parse.Schema.Type[a];if(a==="Pointer"||a==="Relation"){var f=this.$("select[name='className']").val();if(!f){this.state.set("localError","Create the class of the pointer first.");return false}h=h(f)}this.schema.addKey(d,h);this.state.incReqs();this.schema.save(null,{success:function(e,k){b.state.decReqs();b.state.trigger("saveColumnConfig");b.state.setSuccessMessage('Successfully added column "'+d+'".')},error:function(k,l){b.state.decReqs();var e=l.response?JSON.parse(l.response).error:l.message?l.message:l;b.state.setErrorMessage("Error: "+e);delete b.schema.get("keys")[d];b.schema.trigger("change")}});this.close();return false},render:function(){this.renderSetup();return this},renderSetup:function(){this.$el.html(JST["data_browser/_new_column"]({types:Parse.Schema.availableNewTypes(),classes:this.state.get("schemas").pluck("className")}));this.$("input[type='radio']").first().attr("checked","checked");this.open.call(this,{modal:true,width:450,title:"Add a Column"});return this},renderError:function(){var a=this.state.get("localError");this.$(".errors").hide();if(a){this.$(".errors").text(a).show()}}});DataBrowser.Views.DropColumn=DataBrowser.Views.Modal.extend({initialize:function(){_.bindAll(this);this.state=this.options.state},submit:function(d){var a=this;var b=this.$("select[name='name']").val();if(_(b).isEmpty()){this.renderError("Please select a column.")}else{var c=this.state.getSchema();c.deleteKey(b);this.state.incReqs();c.save(null,{success:function(e,f){a.state.decReqs();a.state.updateRows();a.state.trigger("saveColumnConfig");a.state.setSuccessMessage('Successfully deleted column "'+b+'".')},error:function(e,f){a.state.decReqs();a.state.setErrorMessage("Error: "+f.error().responseText)}});this.close();return false}},render:function(){this.renderSetup();return this},renderSetup:function(){var a=this.state.getSchema();this.$el.html(JST["data_browser/_drop_column"]({columns:a.deletableKeys()}));this.open.call(this,{modal:true,width:350,title:"Delete a Column"})},renderError:function(a){this.$(".errors").text(a).show()}});DataBrowser.Views.ImportData=DataBrowser.Views.Modal.extend({events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"change select[name='classType']":"selectClass"}),extensions:["json","csv","zip"],initialize:function(){_.bindAll(this);this.state=this.options.state;this.s3PublicKey=this.options.s3PublicKey;this.s3BucketName=this.options.s3BucketName},selectClass:function(c,a){var b=$(c.target).val();b=Parse.Schema.lowercaseSpecialClassName(b);if(!_.equalIgnoreCase(b,"custom")){b=Parse.Schema.underscoreSpecialClassName(b)}this.classType=b;this.renderFileUploadContent();return false},submit:function(){if(this.$(".buttons button").hasClass("disabled")){return false}className=this.classType;if(!Parse.Schema.isSpecialClass(className)){className=this.$(".class_name").val();var a=this.validate(className);if(a){this.$(".errors").text(a).show();return false}}this.$(".buttons button").html("").spin("small","#444").addClass("disabled");this.uploader.uploadStoredFiles();return false},render:function(a){if(!this.import_state){this.renderFileUpload()}else{if(this.import_state==="waiting_on_schema"){this.state.get("pendingImports").add(a);this.renderSchemaInput();this.state.unset("className",{silent:true});Parse.history.navigate("class/"+a.class_name,{trigger:true})}else{if(this.import_state==="processing"||this.import_state==="success"){this.state.get("pendingImports").add(a);this.close();this.state.unset("className",{silent:true});Parse.history.navigate("class/"+a.class_name,{trigger:true})}else{if(this.import_state==="failed"){this.renderFailed(this.last_error)}}}}return this},renderFileUpload:function(){var a=getInternetExplorerVersion();if(a>0&&a<10){this.$el.html("Please upgrade to IE 10, or use Chrome, Safari, or Firefox.")}else{var b=this;this.$el.html(JST["data_browser/_new_import"]({types:["Custom","User","Installation"]}));this.$(".errors").hide();this.classType="custom";this.renderFileUploadContent();var c="/apps/"+encodeURIComponent(this.state.get("app").id)+"/collections/import";this.uploader=new qq.s3.FineUploader({element:this.$(".file")[0],multiple:false,autoUpload:false,request:{endpoint:"https://s3.amazonaws.com/"+b.s3BucketName,accessKey:b.s3PublicKey},signature:{endpoint:App.currentApp.dataRequestUrl()+"collections/import_signature_request",customHeaders:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}},uploadSuccess:{endpoint:App.currentApp.dataRequestUrl()+"collections/import",customHeaders:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},params:{class_name:function(){if(!Parse.Schema.isSpecialClass(b.classType)){return b.$(".class_name").val()}else{return b.classType}}}},objectProperties:{key:function(j){var d=App.currentApp.get("api_key")+"/"+b.uploader.getUuid(j);var h=b.uploader.getName(j);var f=new RegExp(".("+b.extensions.join("|")+")$","i");var e=h.match(f)[0].substring(1);if(_.contains(b.extensions,e)){d+="."+e}return d}},validation:{allowedExtensions:b.extensions,sizeLimit:2147483648,itemLimit:1},callbacks:{onSubmit:function(e,d){b.$(".errors").empty().hide()},onComplete:function(f,e,d){if(!d.error&&d.state!=="failed"){b.seedFileId=d.seed_file.seed_file_id;b.import_state=d.seed_file.state;b.render(d.seed_file)}else{b.renderFailed(d.error)}},onError:function(f,d,e){b.renderFailed(e);b.$(".buttons button").html("Import").removeClass("disabled")},onCancel:function(e,d){b.$(".buttons button").html("Import").removeClass("disabled")}}})}this.open.call(this,{modal:true,width:450,title:"Import Data"})},renderFileUploadContent:function(){this.$(".custom, .special, .description, .errors, .tip").hide();var b=this.classType;if(!Parse.Schema.isSpecialClass(b)){this.$(".custom").show();this.$(".tip").show()}else{var a=Parse.Schema.lowercaseSpecialClassName(b);this.$(".special, ."+a).show()}},renderSchemaInput:function(){this.close()},renderFailed:function(a){this.last_error=a;this.$(".errors").text(a).show()},validate:function(b){if(this.uploader.getUploads().length===0){return"Missing file."}var a=Parse.Schema.validateClassName(b);if(a){return a}}});DataBrowser.Views.PermissionEditor=DataBrowser.Views.Modal.extend({events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"click input[name='public_access']":"publicAccessChanged"}),submit:function(h){var f;var d={};if(this.$("input[name='public_access']").attr("checked")){d["*"]=true}var b=this.$("input[name='roles']").attr("value").split(",");for(f=0;f<b.length;f++){var a=b[f];a=a.replace(/^\s+|\s+$/g,"");if(a.length===0){continue}d["role:"+a]=true}var j=this.$("input[name='users']").attr("value").split(",");for(f=0;f<j.length;f++){var c=j[f];c=c.replace(/^\s+|\s+$/g,"");if(c.length===0){continue}d[c]=true}this.options.permissions[this.options.permissionName]=d;ParseDotCom.Analytics.track("classLevelPermissions",{action:"permissions changed",op:this.options.permissionName,public_access:this.$("input[name='public_access']").attr("checked")?"public":"private",roles:b.length.toString(),users:j.length.toString()});this.close();if(this.options.onSave){this.options.onSave(this.options.permissions)}return false},publicAccessChanged:function(){var a=this.$("input[name='public_access']").attr("checked");if(a){this.$("input[name='users']").addClass("disabled");this.$("input[name='roles']").addClass("disabled")}else{this.$("input[name='users']").removeClass("disabled");this.$("input[name='roles']").removeClass("disabled")}this.$("input[name='users']").attr("disabled",!!a);this.$("input[name='roles']").attr("disabled",!!a)},render:function(){ParseDotCom.Analytics.track("classLevelPermissions",{action:"edit op opened",op:this.options.permissionName});var a=this;this.$el.html(JST._permission_editor({title:this.options.title||"PLEASE ADD A TITLE",instructions:this.options.instructions||"PLEASE ADD INSTRUCTIONS",okText:this.options.okText||"Save Permissions"}));var e=this.options.permissions;var d=this.options.permissionName;var b=e[d]||{};var c=[];var h=[];for(var f in b){if(b[f]!==true){continue}if(f==="*"){continue}if(f.indexOf("role:")===0){c.push(f.substring("role:".length));continue}h.push(f)}this.$("input[name='public_access']").attr("checked",b["*"]===true);this.$("input[name='users']").attr("value",h.join(", "));this.$("input[name='roles']").attr("value",c.join(", "));this.publicAccessChanged();this.open.call(this,{modal:true,height:"auto",width:600,title:"Permissions"})}});DataBrowser.Views.Settings=DataBrowser.Views.Modal.extend({className:"lightbox",events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"click .permission":"editPermission"}),saveUrl:function(){var a=this.state.get("className");var b=this.state.get("app");return"/apps/"+encodeURIComponent(b.id)+"/collections/"+encodeURIComponent(a)+"/save_settings"},editPermission:function(d){var a=this;var c=$(d.target).closest(".permission");this.hasOpenWindow=true;var b=this.state.get("className");new DataBrowser.Views.PermissionEditor({permissions:this.clientPermissions,permissionName:c.attr("name"),title:'"'+c.attr("data-friendly-name")+'" Permissions for '+b,instructions:'Choose which users can perform "'+c.attr("data-friendly-name")+'" operations on the '+b+" class.",okText:"OK",onSave:function(){c.find("small").text("("+a.permissionsToString(c.attr("name"))+")")}}).render();return false},submit:function(c){var a=this;var b={};b.client_permissions=_(this.clientPermissions).chain().values().every(_.isEmpty).value()?null:this.clientPermissions;$.ajax({url:this.saveUrl(),type:"put",data:b,success:function(e){if(!e.error){var d=a.state.get("className");a.state.get("collections").get(d).set(e.collection);ParseDotCom.Analytics.track("classLevelPermissions",{action:"save permissions"});a.state.setSuccessMessage("Successfully saved settings.");a.close()}else{a.renderError(e.error)}},error:function(d){a.renderError("Couldn't save your settings. Try again.")}});return false},renderError:function(a){this.$(".errors").text(a).show()},initialize:function(){this.state=this.options.state;_.bindAll(this);ParseDotCom.Analytics.track("classLevelPermissions",{action:"open editor"})},permissionsToString:function(d){var b=this.clientPermissions[d]||{};if(b["*"]){return"Public"}var a=0;var e=0;for(var c in b){if(c.indexOf("role:")===0){a++}else{e++}}if(a===0&&e===0){return"Disabled"}return a+" Role"+(a!==1?"s":"")+", "+e+" User"+(e!==1?"s":"")},render:function(){this.$el.html(JST["data_browser/_settings"]({className:this.state.get("className")}));var a=this;var b=this.state.get("collections").get(this.state.get("className"));this.clientPermissions=jQuery.extend(true,{},b.get("client_permissions"));this.$(".permission").each(function(d,c){$(c).find("small").text("("+a.permissionsToString($(c).attr("name"))+")")});this.open.call(this,{modal:true,height:"auto",width:400,title:"Settings for "+b.attributes.display_name})}});DataBrowser.Views.NoData=Backbone.View.extend({el:".no_data",events:{"click .dismiss":"dismissAndRedirect","click .view_data":"dismissAndView","click .import_again":"deleteAndRetry"},initialize:function(){_.bindAll(this);this.setup();this.model.get("rows").on("add remove reset",this.render);this.model.get("pendingImports").on("change:progress_rows",this.render);this.model.get("pendingImports").on("change:state add remove",this.renderIfSelected)},setup:function(){this.$el.hide()},renderIfSelected:function(a){if(this.model.selectedClassModel()===a){this.render()}},render:function(){var b=this.model.get("rows");if((b.isEmpty()||this.model.selectedClassIsImporting())&&!this.model.selectedClassIsWaiting()){var a=this.model.get("className");if(this.model.get("schemas").isEmpty()){this.$el.addClass("no_class")}else{this.$el.removeClass("no_class")}this.$el.html(JST["data_browser/_no_data"]({hasClasses:!this.model.get("schemas").isEmpty(),hasFilters:!this.model.get("activeFilters").isEmpty(),isSingleObject:this.model.get("objectId"),seedFile:this.model.get("pendingImports").where({class_name:a})[0]}));this.$el.show()}else{this.$el.hide()}return this},dismissFailedImport:function(d){var a=this;var b=this.model.get("className");var c=this.model.get("pendingImports").where({class_name:b})[0];this.model.get("pendingImports").remove(c);return $.post("seed_files/"+c.id+"/dismiss")},dismissAndRedirect:function(b){this.dismissFailedImport(b);var a=this.model.get("className");Parse.history.navigate("home",{trigger:true});if(this.model.get("schemas").where({className:a})[0]){this.state.unset("className",{silent:true});Parse.history.navigate("class/"+a,{trigger:true})}},dismissAndView:function(c){var a=this;var b=this.model.get("className");this.model.incReqs(true);this.dismissFailedImport(c).then(function(){var d=App.currentApp.dataRequestUrl()+"collections/"+encodeURIComponent(b)+"/fetch";$.get(d).then(function(e){a.model.get("collections").add(e.collection);a.model.get("schemas").add(e.schema,{parse:true});a.model.decReqs();a.model.unset("className",{silent:true});Parse.history.navigate("home",{trigger:true});Parse.history.navigate("class/"+b,{trigger:true})},function(e){Parse.history.navigate("home",{trigger:true});a.model.decReqs()})})},deleteAndRetry:function(d){var c=this.model.get("className");var a=this;this.model.incReqs(true);var b=App.currentApp.dataRequestUrl()+"collections/"+encodeURIComponent(c)+"/fetch";$.get(b).then(function(e){var f=new Parse.Schema(e.schema,{parse:true});f.destroy({success:function(h,j){a.dismissFailedImport(d).then(function(){Parse.history.navigate("home",{trigger:true});new DataBrowser.Views.ImportData({state:a.model}).render();a.model.decReqs()})}})})}});DataBrowser.Views.PageInfo=Backbone.View.extend({el:".page_info",initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.get("rows").on("add remove reset",this.render)},render:function(){var c="";var d=this.state.get("page");var e=this.state.get("objectsPerPage");var f=d*e;var a=f+this.state.get("rows").length;if(!this.state.get("activeFilters").length&&!this.state.isRelation()){var b=this.state.getCount();c=" of "+b+" rows"}if(f||a){f+=1}c=""+f+" - "+a+c;this.$el.text(c)}});DataBrowser.Views.Pagination=Backbone.View.extend({el:".pagination",initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.get("rows").on("add remove reset",this.render)},render:function(){if(!this.state.selectedClassIsReady()){this.$el.hide()}else{var a=this.$("a.next");var c=this.$("a.prev");var d=this.state.get("page");var e=this.state.get("objectsPerPage");var b=this.state.get("fetchedRows").length;var f=b===e+1;if(!f){a.removeAttr("href").addClass("inactive")}else{a.attr("href","#"+this.state.nextPageUrl()).removeClass("inactive")}if(d<=0){c.removeAttr("href").addClass("inactive")}else{c.attr("href","#"+this.state.previousPageUrl()).removeClass("inactive")}this.$el.show()}}});DataBrowser.Views.PerPage=Backbone.View.extend({el:".per_page",events:{"change select":"updateModel"},initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.get("rows").on("add remove reset",this.render)},updateModel:function(a){var b=$(a.target).find(":selected").val();this.state.set("objectsPerPage",parseInt(b,10))},render:function(){if(!this.state.selectedClassIsReady()){this.$el.hide()}else{this.$el.show()}}});DataBrowser.Views.PreviewBrowser=Backbone.View.extend({initialize:function(){_.bindAll(this);this.rows=this.options.rows;this.schema=this.options.schema},getRows:function(){var b=_.keys(this.schema);var a=[];_(this.rows).each(function(d,c){var e=_(d).reduce(function(j,f,h){j[b[h]]=_.escape(f);return j},{});a.push(e)});return a},getColumns:function(){var a=[];_(this.schema).each(function(c,b){a.push({id:b,name:b,field:b,order:100,width:184})});return a},setBrowserData:function(b,a){this.rows=b;this.schema=a},render:function(a){this.$el.html("");var b={editable:false,enableAddRow:false,asyncEditorLoading:false,autoEdit:false,autoHeight:false,leaveSpaceForNewRows:false,multiSelect:false,multiColumnSort:false};this.grid=new Slick.Grid(".preview_browser",this.getRows(),this.getColumns(),b);this.grid.resizeCanvas()}});DataBrowser.Views.SchemaConfig=Backbone.View.extend({className:"schema_wrapper",events:{"submit #edit_seed_file":"submitForm","focus .import_key":"removeInvalidClass"},initialize:function(){_.bindAll(this);var a=this;this.previewBrowser=new DataBrowser.Views.PreviewBrowser();this.model.on("change:className",this.render);this.model.get("rows").on("add remove reset",this.render);$("body").on("click",".schema_buttons .submit_schema",function(b){a.submitForm(b)});$("body").on("click",".schema_buttons .cancel_import",function(b){a.cancelImport()});this.$el.hide()},submitForm:function(f){var a=this;var b=this.model.selectedClassModel();var d=true;this.$(".errors").hide();if($(f.currentTarget).hasClass("disabled")){return false}var c=[];_.each(this.$(".import_header_column .import_key"),function(e){var h=$(e).val();c.push(h);if(Util.isStringBlank(h)||!h.match(/^[a-zA-Z][_a-zA-Z0-9]*$/)){this.$(".errors").show();this.$(".errors").html("Invalid column name. Column name must start with a letter and only contain alphanumerical characters.");d=false;$(e).addClass("invalid")}});if(c.length!=_.uniq(c).length){this.$(".errors").show();this.$(".errors").html("Duplicate keys are not allowed.");d=false}if(!d){return false}$.ajax({url:"seed_files/"+this.seedFile.id,type:"PUT",data:this.$("#edit_seed_file").serialize(),dataType:"json",success:function(j,e,h){b.set("schema",j.seed_file.schema);b.set("state",j.seed_file.state);a.renderRemoveLoading()},error:function(j,e,h){a.$(".errors").show();a.$(".errors").html("Something went wrong. Try again.");a.renderRemoveLoading()}});this.renderLoading();return false},render:function(){if(this.model.selectedClassIsWaiting()){this.seedFile=this.model.selectedClassModel();this.$el.html(JST["data_browser/_schema_config"]({seedFile:this.seedFile}));var a=this.model.selectedClassModel();this.previewBrowser.setBrowserData(a.get("preview_rows"),a.get("schema"));this.previewBrowser.render(".preview_browser");this.$el.show();$(".schema_overlay").show();$(".schema_buttons").show()}else{this.$el.hide();$(".schema_overlay").hide();$(".schema_buttons").hide()}},renderLoading:function(){$("schema_buttons .submit_button").empty().spin("small","#fff").attr("disabled","disabled")},renderRemoveLoading:function(){$(".schema_buttons .submit_button").html("Save Schema").spin(false).removeAttr("disabled")},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},cancelImport:function(){var a=this.model.get("className");var b=this.model.get("pendingImports").where({class_name:a})[0];this.model.get("pendingImports").remove(b);$.post("seed_files/"+b.id+"/dismiss");Parse.history.navigate("home",{trigger:true})}});DataBrowser.Views.SpinnerBar=Backbone.View.extend({el:".spinner_bar",initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:numReqs",this.render);this.$el.hide().spin("small","#717171")},render:function(){var a=this.state.get("numReqs");if(a===0){this.$el.hide()}else{if(!this.state.get("showOverlay")){this.$el.show()}}return self}});DataBrowser.Views.SpinnerOverlay=Backbone.View.extend({el:".spinner_overlay",initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:numReqs",this.render);this.$el.hide().spin("large","#FFFFFF")},render:function(){var b=this.state.get("numReqs");var a=this.$el.closest("#browser");if(b===0){this.$el.hide();a.find(".data_refreshing_overlay").fadeOut(400);a.find(".utility button").each(function(){$(this).removeClass("disabled")});a.find(".utility a").each(function(){$(this).removeClass("disabled")});a.find(".dropdown_container").each(function(){$(this).removeClass("disabled")})}else{if(this.state.get("showOverlay")){a.find(".data_refreshing_overlay").fadeIn(100);this.$el.show();a.find(".utility button").each(function(){$(this).addClass("disabled")});a.find(".utility a").each(function(){$(this).addClass("disabled")});a.find(".dropdown_container").each(function(){$(this).addClass("disabled")})}}return self}});DataBrowser.Views.Utility=Backbone.View.extend({el:".utility",events:{"click .add:not(.disabled)":"addRow","click .new_column:not(.disabled)":"addColumn","click .drop_column:not(.disabled)":"dropColumn","click .security:not(.disabled)":"openSettings","click .deleteAll:not(.disabled)":"deleteCollection","click .drop:not(.disabled)":"dropCollection","click .export_class:not(.disabled)":"exportCollection","click .filter_button:not(.disabled)":"toggleFilterState","click .full_screen_button":"toggleFullScreen","click .refresh_button":"startRefresh"},classURL:function(){return"/apps/"+encodeURIComponent(this.model.get("app").id)+"/collections/"+this.model.get("className")},initialize:function(){_.bindAll(this);this.model.get("rows").on("add remove reset",this.render);this.model.on("change:numReqs",this.maybeEndRefresh);this.model.on("change:selectedRows",this.render);this.model.on("addRow",this.addRow);this.model.get("exportProgress").on("add remove reset change:status",this.render)},render:function(){if(this.model.get("schemas").isEmpty()){this.$("button").addClass("disabled");this.$(".dropdown_container").addClass("disabled")}else{this.$("button").removeClass("disabled");this.$(".dropdown_container").removeClass("disabled");var c=this.model.get("selectedRows");if(_.isEmpty(c)){this.$(".bulk_delete").addClass("disabled")}else{this.$(".bulk_delete").removeClass("disabled")}if(this.model.getSchema()&&_.isEmpty(this.model.getSchema().deletableKeys())){this.$(".drop_column").addClass("disabled")}else{this.$(".drop_column").removeClass("disabled")}if(this.model.isRelation()){this.$(".more").addClass("disabled");this.$(".dropdown_container").addClass("disabled")}else{this.$(".more").removeClass("disabled");this.$(".dropdown_container").removeClass("disabled")}if(!this.model.get("activeFilters").isEmpty()){this.$(".add").addClass("disabled")}else{this.$(".add").removeClass("disabled")}var b=this.model.get("exportProgress").get(this.model.get("className"));var a=!_.isUndefined(b)&&b.isActive();this.$(".export_class").toggleClass("disabled",a)}},addRow:function(){this.model.trigger("commitCurrentEdit");var a=this.model.get("rows");a.add({},{at:0});return false},addColumn:function(a){this.model.trigger("commitCurrentEdit");new DataBrowser.Views.AddColumn({state:this.model}).render()},dropColumn:function(a){this.model.trigger("commitCurrentEdit");new DataBrowser.Views.DropColumn({state:this.model}).render()},openSettings:function(a){this.model.trigger("commitCurrentEdit");new DataBrowser.Views.Settings({state:this.model}).render()},deleteCollection:function(f){var c=this;var d=this.model.get("className");var b=prompt('Are you sure you want to delete all the data in the class "'+d+'"? There is no undo.\n\nType the name of the class to confirm:');if(d===b){var a=this.model.getCountKey();this.model.incReqs(true);$.ajax({url:this.classURL()+"/clear",type:"delete",success:function(h){c.model.get("counts").set(a,0);var e=c.model.get("rows");e.fetch({success:function(j,k){c.model.setSuccessMessage("All data in "+d+" have been deleted.");c.model.decReqs();c.model.get("rows").trigger("remove")},error:function(j,k){c.model.decReqs()}})},error:function(){c.model.setErrorMessage("The request failed.");c.model.decReqs()}})}return false},dropCollection:function(j){var a=this;var d=this.model.get("className");var h=prompt('Are you sure you want to drop the class "'+d+'" and lose all the data in it? There is no undo.\n\nType the name of the class to confirm:');if(d===h){var c=this.model.getCollection();c.off();this.model.get("collections").remove(c);var f=this.model.getSchema();f.off();this.model.incReqs(true);var b=this.model.get("schemas");b.remove(f);f.destroy({success:function(e,k){a.model.decReqs();a.model.setSuccessMessage("Successfully dropped "+d+".");b.trigger("remove");a.model.trigger("dropCollectionConfig");Parse.history.navigate("home",{trigger:true})},error:function(e,k){a.model.decReqs();a.model.setErrorMessage(Util.getErrorMessage(k))}})}return false},exportCollection:function(b){var a=this;var c=this.model.get("className");this.$(".export_class").addClass("disabled");$.ajax({url:App.currentApp.dataRequestUrl()+"export_data",type:"PUT",data:{collections:c}}).then(function(d){if(d.success){a.model.get("exportProgress").upsert({job:"export",id:c,progress:0,status:"queued",message:"Starting export...",});a.render()}})},startRefresh:function(b){if(this.model.get("numReqs")!==0){return false}var a=this.$el.closest("#browser");this.$(".refresh_button").addClass("animating");this.model.updateRows()},maybeEndRefresh:function(b){if(this.model.get("numReqs")!==0){return false}var a=this.$el.closest("#browser");this.$(".refresh_button").removeClass("animating")},toggleFilterState:function(){this.model.toggleFilterState();return false},toggleFullScreen:function(a){this.model.set("fullScreen",!this.model.get("fullScreen"));$("body").toggleClass("full_screen");this.model.trigger("adjustDataHeight");return false}});var QuickStart={Models:{},Views:{},Routers:{},initialize:function(c){var a=new QuickStart.Models.Tree({apps:c.apps});var d=new QuickStart.Views.Wizard({model:a});var b=new QuickStart.Routers.Router({model:a});return a}};QuickStart.Models.Tree=Backbone.Model.extend({defaults:{currentPath:[],currentNode:null,url:null,leafContent:null,fetchOutstanding:false,currentApp:null,social:""},initialize:function(b){_.bindAll(this);var a=this;this.apps=b.apps;this.on("change:url",this.updatePath);this.on("change:currentApp",this.appChange);this.set("currentApp",this.apps.at(0));if($(".app_selector").length){$(".app_selector a").click(function(){var d=$(this).attr("href");d=d.substr(d.lastIndexOf("/")+1);var c=a.apps.get(d);if(c){a.set("currentApp",c)}return false})}this.fetchData()},setCurrentApp:function(a){var b=this.apps.get(a);if(b){this.set("currentApp",b)}},appChange:function(a,b){if(b){this.initParse(b);this.changeAppList(b.get("name"))}},changeAppList:function(a){$(".current_app").text(a).removeClass("prod").removeClass("open")},initParse:function(a){Parse._initialize(a.get("key"),a.get("javascript_key"),a.get("push_key"));Parse._useMasterKey=true;Parse.VERSION="browser"},reset:function(){this.set("currentPath",[]);Parse.history.navigate("",{trigger:false});this.set("currentNode",QuickStart.Models.Tree.Structure)},updatePath:function(){var b=this.get("url").split("/");var c=QuickStart.Models.Tree.Structure;var a;this.set("currentPath",[]);while(b){a=_.findWhere(c.children,{className:b[0]});if(!a){break}c=a;this.get("currentPath").push(b.shift())}this.set("currentNode",c)},selectItem:function(a){var c=_.findWhere(this.get("currentNode").children,{className:a});if(c){var b=this.get("currentPath");b.push(a);Parse.history.navigate(b.join("/"),{trigger:false});this.set({currentNode:c},{silent:true});this.trigger("selected",c)}},replacePathNode:function(c,b){var d=this.findPathNode(c);if(d){var f=_.findWhere(d.children,{className:b});if(f){var e=this.get("currentPath");var a=e.indexOf(c);e.splice(a);e.push(b);Parse.history.navigate(e.join("/"),{trigger:false});this.set("currentNode",f)}}},getChildren:function(){return this.get("currentNode").children},getLeafContent:function(){var b=this.get("currentPath").join("/");var a=this.get("leafContent");return a&&a[b]||null},getEndLinks:function(){var e=this.get("currentNode").links||null;if(!e){var f=this.get("currentPath");var c=f[f.length-1];var a=this.findPathNode(c);e=a.links}var b="<ul>";for(var d in e){b+='<li><a class="link_to" href="'+e[d]+'">';b+=d+"</a></li>"}b+="</ul>";return(this.get("endLinks")||"").replace(/\{\{links\}\}/,b)},getTestDialog:function(){return this.get("testDialog")||""},getProduct:function(){return this.get("currentPath")[0]},getDevice:function(a){var b={ios:"ios",android:"android",windows:"winrt",windows_phone:"winphone"};return b[a]},findPathNode:function(a){var d=this.get("currentPath");var c=QuickStart.Models.Tree.Structure;var e;for(var b=0;b<d.length;b++){e=_.findWhere(c.children,{className:d[b]});if(!e){break}if(d[b]===a){return c}c=e}return null},fetchData:function(){$.get("/apps/quickstart_steps.json",(function(a){this.set("leafContent",a.steps);this.set("endLinks",a.end_links);this.set("testDialog",a.test_dialog);this.trigger("contentLoaded")}).bind(this))},getTestFunction:function(){var a=QuickStart.Models.Tree.Tests[this.getProduct()];return a&&a.bind(this)}},{Structure:{nextStep:"Select a product",children:[{className:"parse_data",nextStep:"Select an environment",name:"Data",children:[{className:"mobile",nextStep:"Select a platform",name:"Mobile",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/ios/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/ios/native/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/ios/xamarin/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/ios/xamarin/existing"}}]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/android/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/android/native/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/android/xamarin/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/android/xamarin/existing"}}]},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows_phone/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/windows_phone/existing"}}]},{className:"desktop",nextStep:"Select a platform",name:"Desktop",children:[{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/osx/existing","Start recording analytics":"/apps/quickstart#analytics/events/desktop/osx/existing"}},{className:"windows",nextStep:"Select a language",name:"Windows 8",children:[{className:"dot_net",nextStep:"Select a type of project",name:".NET (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows/existing","Start recording analytics":"/apps/quickstart#analytics/events/desktop/windows/dot_net/existing"}},{className:"javascript",nextStep:"Select a type of project",name:"JavaScript",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/windows/javascript/existing","Start recording analytics":"/apps/quickstart#analytics/events/desktop/windows/javascript/existing"}}]}]},{className:"web",nextStep:"Select a type of project",name:"Web",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/web/existing","Start recording analytics":"/apps/quickstart#analytics/events/web/existing"}},{className:"unity",nextStep:"Select a type of project",name:"Unity",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/unity/existing","Start recording analytics":"/apps/quickstart#analytics/events/unity/existing"}},{className:"php",name:"PHP",links:{"Read our PHP Guide":"/docs/php_guide","View on GitHub":"https://github.com/parseplatform/parse-php-sdk"}},]},{className:"parse_push",nextStep:"Select an environment",name:"Push",children:[{className:"ios",nextStep:"Select a type of project",name:"iOS",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS","Explore geo queries":"/docs/ios_guide#geo-query/iOS"}},{className:"android",nextStep:"Select a type of project",name:"Android",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/Android","Explore geo queries":"/docs/android_guide#geo-query"}},{className:"windows",nextStep:"Select a type of project",name:"Windows",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/.NET","Explore geo queries":"/docs/dotnet_guide#geo-query"}},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Start recording analytics":"/apps/quickstart#analytics/events/mobile/windows_phone/existing","Explore geo queries":"/docs/dotnet_guide#geo-query"}}]},{className:"analytics",nextStep:"What do you want to record?",name:"Analytics",children:[{className:"events",nextStep:"Select an environment",name:"Events",children:[{className:"mobile",nextStep:"Select a platform",name:"Mobile",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/ios/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/ios/xamarin/existing"}}]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/android/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/Android"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/android/xamarin/existing"}}]},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows_phone/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/.NET"}}]},{className:"desktop",nextStep:"Select a platform",name:"Desktop",children:[{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/osx/existing"}},{className:"windows",nextStep:"Select a language",name:"Windows 8",children:[{className:"dot_net",nextStep:"Select a type of project",name:".NET (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows_phone/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/.NET"}},{className:"javascript",nextStep:"Select a type of project",name:"JavaScript",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/windows/javascript/existing"}}]}]},{className:"web",nextStep:"Select a type of project",name:"Web",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/web/existing"}},{className:"unity",nextStep:"Select a type of project",name:"Unity",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/unity/existing"}}]},{className:"crashreporting",nextStep:"Select a platform",name:"Crash Reporting",children:[{className:"ios",nextStep:"Select a type of project",name:"iOS",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Start recording analytics":"/apps/quickstart#analytics/events/mobile/ios/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS"}},{className:"android",nextStep:"Select a type of project",name:"Android",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Start recording analytics":"/apps/quickstart#analytics/events/mobile/android/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/android"}},]}]},{className:"social",nextStep:"Select an environment",name:"Social",children:[{className:"mobile",nextStep:"Select a platform",name:"Mobile",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook and Twitter login":"/docs/ios_guide#fbusers/iOS","Store other types of objects":"/apps/quickstart#parse_data/mobile/ios/native/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store other types of objects":"/apps/quickstart#parse_data/mobile/ios/xamarin/existing"}}]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook and Twitter login":"/docs/android_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/mobile/android/native/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store other types of objects":"/apps/quickstart#parse_data/mobile/android/xamarin/existing"}}]},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/dotnet_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/mobile/windows_phone/existing"}}]},{className:"desktop",nextStep:"Select a platform",name:"Desktop",children:[{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store other types of objects":"/apps/quickstart#parse_data/mobile/android/native/existing"}},{className:"windows",nextStep:"Select a language",name:"Windows 8",children:[{className:"dot_net",nextStep:"Select a type of project",name:".NET (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/dotnet_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/desktop/windows/dot_net/existing"}},{className:"javascript",nextStep:"Select a type of project",name:"JavaScript",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/js_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/desktop/windows/javascript/existing"}}]}]},{className:"web",nextStep:"Select a type of project",name:"Web",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/js_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/web/existing"}},{className:"unity",nextStep:"Select a type of project",name:"Unity",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/unity_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/unity/existing"}}]},{className:"cloud_code",nextStep:"Select your development environment",name:"Cloud Code",children:[{className:"unix",nextStep:"Set up the command line tool",name:"Mac/Linux"},{className:"windows",nextStep:"Set up the command line tool",name:"Windows"}],links:{"Run jobs when data is saved":"/docs/cloud_code_guide#functions-onsave","Explore cloud modules":"/docs/cloud_code_guide#modules"}},{className:"hosting",nextStep:"Select your development environment",name:"Hosting",children:[{className:"unix",nextStep:"Set up the command line tool",name:"Mac/Linux"},{className:"windows",nextStep:"Set up the command line tool",name:"Windows"}],links:{"Build a dynamic web site":"/docs/hosting_guide#webapp","Explore the command line tool":"/docs/hosting_guide#clt"}}]},Tests:{parse_data:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"data"}).done(function(c){a.fetchOutstanding=false;if(c.data){a.set("social","I just saved my first object with Parse!");b.resolve({text:"Congrats! You saved your first object:",data:JSON.stringify(c.data,null,1)})}else{b.reject({text:"No data yet..."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No data yet..."})});return b},parse_push:function(){var b=new Parse.Query(Parse.Installation);b.equalTo("deviceType",this.getDevice(this.get("currentPath")[1]));var a=this;return b.count().then(function(d){if(!d){return Parse.Promise.error("Can't find any registered devices yet...")}if(d<=10){return Parse.Promise.as()}var e=$('<div class="dialog_blur" />');var c=new QuickStart.Views.Confirmation({message:"You have "+d+" device installations registered.<br/>&nbsp;<br/>Do you really want to send a push notification to all of these devices?",el:e});$("body").append(e);return c.getPromise()}).then(function(){return Parse.Push.send({where:b,data:{alert:"A test push from Parse!"}})}).then(function(c){a.set("social","I just sent my first push notification with Parse!");return Parse.Promise.as({text:"Congrats! You sent your first push notification."})},function(c){if(typeof c==="object"&&c.message){c="Sorry, there was an error sending the push"}return Parse.Promise.error({text:c})})},social:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"users"}).done(function(c){a.fetchOutstanding=false;if(c.data){a.set("social","I just stored my first user with Parse!");b.resolve({text:"Congrats! You created your first user:",data:JSON.stringify(c.data,null,1)})}else{b.reject({text:"No user data yet..."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No user data yet..."})});return b},analytics:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"events"}).done(function(c){a.fetchOutstanding=false;if(c.data&&c.data.length){a.set("social","I just recorded my first custom analytics event with Parse!");b.resolve({text:"Congrats! You recorded your first custom analytics event."})}else{b.reject({text:"No custom analytics events yet..."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No custom analytics events yet..."})});return b},cloud_code:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"cloud_code/release_info").done(function(c){a.fetchOutstanding=false;if(c.version===null){b.reject({text:"No cloud code deployments yet..."})}else{a.set("social","I just made my first Parse Cloud Code deployment!");b.resolve({text:"Congrats! You made your first deployment."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No cloud code deployments yet..."})});return b},hosting:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"cloud_code/release_info").done(function(c){a.fetchOutstanding=false;if(c.version===null){b.reject({text:"No hosting deployments yet..."})}else{a.set("social","I just made my first Parse Hosting deployment!");b.resolve({text:"Congrats! You made your first deployment."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No hosting deployments yet..."})});return b}}});QuickStart.Routers.Router=Parse.Router.extend({initialize:function(a){this.model=a.model},routes:{"*splat":"showPath"},showPath:function(a){this.model.set("url",a);$("html, body").animate({scrollTop:0},"fast")}});QuickStart.Views.Confirmation=Backbone.View.extend({events:{"click .confirmation_cancel":"cancel","click .confirmation_continue":"accept"},initialize:function(a){_.bindAll(this);this.promise=new Parse.Promise();this.$el.append(JST["apps/quickstart/_confirmation"]({message:a.message||"Are you sure?"}))},getPromise:function(){return this.promise},cancel:function(){this.promise.reject("Chose to not continue");this.remove()},accept:function(){this.promise.resolve();this.remove()},remove:function(){this.el.parentNode.removeChild(this.el)}});QuickStart.Views.Wizard=Backbone.View.extend({el:".quickstart_wizard",events:{"click .selector .item":"selectItem","click .reset":"resetTree","mouseenter .breadcrumb .item":"buildBreadcrumbDropdown","click .breadcrumb .dropdown_item":"breadcrumbReset"},initialize:function(){_.bindAll(this);this.model.on("change:currentNode",this.render);this.model.on("change:currentApp",this.appChanged);this.model.on("selected",this.showStep);this.model.on("contentLoaded",this.renderLeafNode);this.$selector=$(".selector");this.$leaf=$(".quickstart_leaf");this.breadcrumbList=$(".breadcrumb ul")[0];this.$leaf.on("click",".ajax_test .btn",this.performTest);this.$leaf.on("click",".fb_share",this.fbShareDialog);this.$leaf.on("click",".twitter_share",this.twitterShareDialog);this.darkCodeClasses=["android","windows","wphone","osx"];this.onboardMode=!!$(".onboard").length;this.appNames=[];this.appIds={};var a=this;this.model.apps.each(function(c){var b=c.get("name");a.appNames.push(b);a.appIds[b]=c.get("friendly_id")});this.appNames.sort(function(d,c){return d.toLowerCase().localeCompare(c.toLowerCase())})},render:function(){var a=this.model.getChildren();if(a&&a.length){this.renderChildren(a)}else{this.renderLeafNode();this.$leaf.show()}this.buildBreadcrumb()},renderChildren:function(b){var a=this.$selector;a.html("");this.$leaf.hide();_.each(b,function(d){a.append('<div class="item '+d.className+'"><div class="title">'+d.name+"</div></div>")})},renderLeafNode:function(){var b=this;var h=this.model.getLeafContent();if(h){var f=this.model.getEndLinks();var e=this.updateAppMetaData(h+f);this.$leaf.html(e);var c=this.model.getTestFunction();if(c&&this.model.get("currentApp")){this.$leaf.find(".with_test ul").append(this.model.getTestDialog())}var d=this.$leaf.find(".card").first();var a=this.stripClasses(d[0].className,[/card/]);if(_.contains(this.darkCodeClasses,a)){d.find(".code").removeClass("parseTheme").addClass("darkParseTheme")}var j=this.$leaf.find(".ui_dropdown");if(j.length&&this.model.get("currentApp")){j.show();new App.Views.Dropdown({el:j,model:new App.Models.Dropdown({options:this.appNames,values:this.appIds,value:this.model.get("currentApp").get("friendly_id"),name:"app_selector",id:"app_selector",changeFunction:function(k){b.model.setCurrentApp(k);b.renderLeafNode()}})})}else{j.hide()}SyntaxHighlighter.highlight()}},updateAppMetaData:function(a){var b=this.model.get("currentApp");if(!b){b={get:function(c){switch(c){case"api_key":return"API KEY";case"javascript_key":return"JAVASCRIPT KEY";case"push_key":return"MASTER KEY";case"rest_api_key":return"REST API KEY";case"windows_key":return".NET KEY";case"key":return"APPLICATION ID";case"secret":return"CLIENT KEY"}return""}}}return a.replace(/\{\{([\w_]+)\}\}/g,function(c,d){return _.escape(b.get(d))||""})},appChanged:function(){this.renderLeafNode();var a=this;$(".app_menu .pages a").each(function(){this.href=this.href.replace(/\/apps\/[\w-]+/,"/apps/"+_.escape(a.model.get("currentApp").get("friendly_id")))})},fbShareDialog:function(){window.open("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fparse.com","facebook-share-dialog","width=626,height=436");return false},twitterShareDialog:function(){var a="https://twitter.com/share?url=http%3A%2F%2Fparse.com&text="+encodeURIComponent(this.model.get("social")||"I just started using Parse!");window.open(a,"twitter-share-dialog","width=700,height=500");return false},showStep:function(a){this.addBreadcrumb(a);if(a.children&&a.children.length){this.renderChildren(a.children)}else{this.$selector.html("");this.renderLeafNode();this.$leaf.show();var b={product:this.model.getProduct(),fullpath:this.model.get("currentPath").join("/")};ParseDotCom.Analytics.track("Quickstart Endpoint",b)}},buildBreadcrumb:function(){var d=this.model.get("currentPath");var b=this.model.get("currentNode");var e=b.nextStep||"Set up the SDK";while(this.breadcrumbList.children.length>1){this.breadcrumbList.removeChild(this.breadcrumbList.lastChild)}var c="";for(var a=0;a<d.length;a++){c+='<li class="step"><div class="item '+d[a]+'">&nbsp;</div></li>'}c+='<li class="next_step">'+e+"</li>";$(this.breadcrumbList).append(c)},addBreadcrumb:function(b){var a=b.nextStep||"Set up the SDK";$(".breadcrumb .next_step").before('<li class="step"><div class="item '+b.className+'">&nbsp;</div></li>').html(a)},buildBreadcrumbDropdown:function(f){var a=this.stripClasses(f.target.className,[/item/]);var c=$(f.target.parentNode);if(c.children(".dropdown").length){return}var d=this.model.findPathNode(a);if(d){var b='<div class="dropdown"><ul>';_.each(d.children,function(e){b+='<li class="'+(e.className===a?" selected":"")+'"><span class="dropdown_item '+e.className+'">'+e.name+"</span></li>"});b+="</ul></div>";$(f.target.parentNode).append(b)}},breadcrumbReset:function(d){var c=this.stripClasses(d.target.className,[/dropdown_item/,/selected/]);var b=d.target;while(b.parentNode&&b.className.indexOf("step")<0){b=b.parentNode}if(!b.parentNode){return}var a=this.stripClasses($(b).children(".item")[0].className,[/item/]);this.model.replacePathNode(a,c)},selectItem:function(b){var a=this.stripClasses(b.target.className,[/item/]);if(this.onboardMode){this.onboardMode=false;$(".onboard").hide();$(".breadcrumb").show()}this.model.selectItem(a)},resetTree:function(){this.model.reset()},performTest:function(){var b=this.testResponse;var a=this.model.getTestFunction();a().then(b.bind(this,true),b.bind(this,false))},testResponse:function(d,b){var a=this.$leaf.find(".ajax_test");a.removeClass("fail").removeClass("success").addClass(d?"success":"fail");this.$leaf.find(".test_message").text(b.text||"");this.$leaf.find(".object_data").text(b.data||"");var c={product:this.model.getProduct(),fullpath:this.model.get("currentPath").join("/"),success:String(!!d)};ParseDotCom.Analytics.track("Quickstart Completion",c)},stripClasses:function(d,b){var e=d;for(var a=0;a<b.length;a++){e=e.replace(b[a],"")}return e.trim()},});(function(d){function b(m){var l=d('meta[name="csrf-token"]').attr("content");if(l){m.setRequestHeader("X-CSRF-Token",l)}}if("ajaxPrefilter" in d){d.ajaxPrefilter(function(l,n,m){if(l.global){b(m)}})}else{d(document).ajaxSend(function(l,m){b(m)})}function c(o,l,n){var m=d.Event(l);o.trigger(m,n);return m.result!==false}function k(o){var r,m,q,l=o.data("type")||(d.ajaxSettings&&d.ajaxSettings.dataType);if(c(o,"ajax:before")){if(o.is("form")){r=o.attr("method");m=o.attr("action");q=o.serializeArray();var n=o.data("ujs:submit-button");if(n){q.push(n);o.data("ujs:submit-button",null)}}else{r=o.data("method");m=o.attr("href");q=null}d.ajax({url:m,type:r||"GET",data:q,dataType:l,beforeSend:function(t,s){if(s.dataType===undefined){t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script)}return c(o,"ajax:beforeSend",[t,s])},success:function(t,s,u){o.trigger("ajax:success",[t,s,u])},complete:function(t,s){o.trigger("ajax:complete",[t,s])},error:function(u,s,t){o.trigger("ajax:error",[u,s,t])}})}}function f(q){var m=q.attr("href"),s=q.data("method"),n=d("meta[name=csrf-token]").attr("content"),r=d("meta[name=csrf-param]").attr("content"),o=d('<form method="post" action="'+m+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';if(r!==undefined&&n!==undefined){l+='<input name="'+r+'" value="'+n+'" type="hidden" />'}o.hide().append(l).appendTo("body");o.submit()}function h(l){l.find("input[data-disable-with]").each(function(){var m=d(this);m.data("ujs:enable-with",m.val()).val(m.data("disable-with")).attr("disabled","disabled")})}function a(l){l.find("input[data-disable-with]").each(function(){var m=d(this);m.val(m.data("ujs:enable-with")).removeAttr("disabled")})}function j(l){var m=l.data("confirm");return !m||(c(l,"confirm")&&confirm(m))}function e(m){var l=false;m.find("input[name][required]").each(function(){if(!d(this).val()){l=true}});return l}d("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(m){var l=d(this);if(!j(l)){return false}if(l.data("remote")!==undefined){k(l);return false}else{if(l.data("method")){f(l);return false}}});d("form").live("submit.rails",function(n){var l=d(this),m=l.data("remote")!==undefined;if(!j(l)){return false}if(e(l)){return !m}if(m){k(l);return false}else{setTimeout(function(){h(l)},13)}});d("form input[type=submit], form button[type=submit], form button:not([type])").live("click.rails",function(){var m=d(this);if(!j(m)){return false}var l=m.attr("name"),n=l?{name:l,value:m.val()}:null;m.closest("form").data("ujs:submit-button",n)});d("form").live("ajax:beforeSend.rails",function(l){if(this===l.target){h(d(this))}});d("form").live("ajax:complete.rails",function(l){if(this===l.target){a(d(this))}})}(jQuery));App.Models.App=Backbone.Model.extend({url:function(){return"/apps/"+encodeURIComponent(this.id)},initialize:function(a){this.id=a.friendly_id},dataRequestUrl:function(){return"/apps/"+encodeURIComponent(this.id)+"/"},});App.Models.Collaboration=Backbone.Model.extend({initialize:function(a){this.userName=a.userName;this.appId=a.app_id;this.id=a.id}});Analytics.Series=Backbone.Model.extend({defaults:{dimensions:{}},initialize:function(){_.bindAll(this);if(!this.get("baseUrl")){this.set("baseUrl",App.currentApp.dataRequestUrl())}if(!this.get("endpoint")){if(this.isCustomEvent()){this.set("endpoint","custom_event")}else{this.set("endpoint","api_request")}}if(!this.get("displayName")){this.set("displayName",this.generateDisplayName())}if(!this.get("tooltipName")){this.set("tooltipName","events")}if(!this.get("seriesId")&&this.id){this.set("seriesId",this.id.toString())}},capitalizeString:function(a){a.toLowerCase();return a.charAt(0).toUpperCase()+a.slice(1,a.length)},generateDisplayName:function(){if(this.isCustomEvent()){var b=this.get("eventName")+" Count ";var a=_.values(this.get("dimensions"));if(a.length>0){b+="("+a.join(", ")+")"}return b}else{if(this.isClassCountAnalytics()){return this.get("className")+" Count"}}switch(this.get("endpoint")){case"api_request":return _.compact([this.capitalizeString(this.get("refinement")||""),this.get("className")||"","API Requests"]).join(" ");case"push":return"Push Notifications";case"analytics_request":return"Analytics Requests";case"file_request":return"File Requests";case"app_opened":return"App Opens";case"app_opened_from_push":return"Push Opens";case"app_opened_from_push_id":return"Push Opens With Id"}},generateDisplayDimensions:function(){var a=_.map(this.get("dimensions"),function(c,b){return b+": "+c});return a.join("\n")},generateDataUrlParams:function(){var a={};if(this.get("endpoint")){a.endpoint=this.get("endpoint")}else{a.endpoint="api_request"}if(this.get("push")){a.push=this.get("push")}if(this.get("eventName")){a.eventName=this.get("eventName")}if(this.get("performanceType")){a.performanceType=this.get("performanceType")}if(this.get("audienceType")){a.audienceType=this.get("audienceType")}if(this.get("pushStatusID")){a.pushStatusID=this.get("pushStatusID")}if(this.get("dimensions")){a.dimensions=this.get("dimensions")}if(this.get("deviceType")){a.deviceType=this.get("deviceType")}if(this.get("className")){a.className=this.get("className")}if(this.get("refinement")){a.refinement=this.get("refinement")}return a},isCustomEvent:function(){return !!this.get("eventName")},isClassCountAnalytics:function(){return this.get("className")&&!this.get("endpoint")},trackEvent:function(a){var b={};if(this.get("deviceType")){b.deviceType=this.get("deviceType").toString()}if(this.get("className")){b.className=this.get("className").toString()}if(this.get("refinement")){b.refinement=this.get("refinement").toString()}b.isCustomEvent=this.isCustomEvent().toString();ParseDotCom.Analytics.track(a,b)},toJSON:function(){var a={};a.endpoint=this.get("endpoint");if(this.get("eventName")){a.eventName=this.get("eventName")}if(this.get("deviceType")){a.deviceType=this.get("deviceType")}if(this.get("className")){a.className=this.get("className")}if(this.get("refinement")){a.refinement=this.get("refinement")}if(this.get("dimensions")){a.dimensions=this.get("dimensions")}return{graph_data:a}},save:function(b){var a=this;$.ajax({url:this.get("baseUrl")+"custom_graphs",type:"POST",data:this.toJSON(),dataType:"json",success:function(d,c,e){a.set("seriesId",d.id);if(b&&b.success){b.success(a,c,e)}a.trackEvent("analytics_custom_graph_create")},error:function(e,c,d){if(b&&b.error){b.error(a,c,d)}}})},destroy:function(b){var a=this;$.ajax({url:this.get("baseUrl")+"custom_graphs/"+this.get("seriesId"),type:"DELETE",success:function(d,c,e){if(b&&b.success){b.success(a,c,e)}a.trackEvent("analytics_custom_graph_destroy")},error:function(e,c,d){if(b&&b.error){b.error(a,c,d)}}})}});Analytics.GraphState=Backbone.Model.extend({defaults:{stride:"day",selectedSeries:null,seriesOptions:null,selectedNavigation:null,app:null,outgoingRequests:0,fullScreen:false,customGraphs:[],customEvents:[],noData:true,previousDates:null,admin:false},initialize:function(){_.bindAll(this);if(_.isUndefined(this.get("baseUrl"))){this.set("baseUrl",this.get("app").dataRequestUrl())}if(this.get("pumaPerformance")){var b=Analytics.GraphState.PerformanceSeriesOptions[0];Analytics.GraphState.PerformanceSeriesOptions[0]=Analytics.GraphState.PerformanceSeriesOptions[3];Analytics.GraphState.PerformanceSeriesOptions[3]=b}this.set("fromDate",this.snapFromDate(moment().subtract("months",1)));this.set("toDate",this.snapToDate(new Date()));if(!this.get("selectedSeries")){var a=new Backbone.Collection();a.model=Analytics.Series;this.set("selectedSeries",a)}this.on("change:fromDate",this.updateAllDataUrl);this.on("change:toDate",this.updateAllDataUrl);this.on("change:stride",this.updateAllDataUrl);this.on("change:selectedNavigation",this.updateSeriesOptions);this.get("selectedSeries").on("add",this.cleanAddSeries);this.get("selectedSeries").on("swap",this.cleanSwapSeries);this.get("selectedSeries").on("add",this.assignSeriesColor);this.get("selectedSeries").on("add swap",this.updateDataUrl);_.each(this.get("customGraphs"),function(c){c.isCustom=true})},cleanAddSeries:function(a){a.unset("color",{silent:true});a.unset("displayId",{silent:true})},cleanSwapSeries:function(a){a.unset("displayId",{silent:true})},encodeDateAsParam:function(a){return Math.round(a.getTime()/1000)},updateSeriesOptions:function(){var a=this.get("selectedNavigation");var b=this.get("seriesOptions");if(!b){b=new Backbone.Collection();b.model=Analytics.Series}else{b.reset()}this.get("selectedSeries").reset();if(this.get("previousDates")){this.set("fromDate",this.get("previousDates").from);this.set("toDate",this.get("previousDates").to);this.unset("previousDates")}if(a==="events"){var e=_.union(Analytics.GraphState.EventsSeriesOptions,this.get("customGraphs"));b.add(_.compact(e))}else{if(a==="data"){b.add(_.compact(this.getClassesOptions()))}else{if(a==="audience"){b.add(_.compact(Analytics.GraphState.AudienceSeriesOptions))}else{if(a==="performance"){b.add(_.compact(Analytics.GraphState.PerformanceSeriesOptions));var c=moment().endOf("hour").toDate();this.pushTemporaryDates(moment(c).subtract("hours",12).toDate(),c)}}}}var d=this.get("baseUrl");b.each(function(f){f.set("baseUrl",d)});this.set("seriesOptions",b);this.set({noData:true},{silent:true})},_classesOptionsCache:null,getClassesOptions:function(){if(!this._classesOptionsCache){this._classesOptionsCache=this.get("appSchema").map(function(c){var b=Parse.Schema.prettifyClassName(c.className);var a=b+" Count";var d={displayName:a,endpoint:"class_count",className:c.className,tooltipName:b+" objects",seriesId:"count_"+c.className,};return d})}return this._classesOptionsCache},snapFromDate:function(a){return moment(a).startOf("day").toDate()},snapToDate:function(a){return moment(a).endOf("day").toDate()},pushTemporaryDates:function(b,a){this.set("previousDates",{from:this.get("fromDate"),to:this.get("toDate")});this.set({fromDate:b,toDate:a})},updateDataUrl:function(b){var a=this;if(!this.get("selectedSeries").isEmpty()&&!_.isUndefined(b)&&!b.changedAttributes().dataUrl){var c={};var d=b.generateDataUrlParams();_.extend(d,{from:this.encodeDateAsParam(this.get("fromDate")),to:this.encodeDateAsParam(this.get("toDate")),time_zone_offset:-moment().zone()*60,stride:b.get("stride")||this.get("stride")});c.params=d;c.url=a.get("baseUrl")+"analytics";b.unset("dataUrl",{silent:true});b.set("dataUrl",c)}},updateAllDataUrl:function(){var a=this;this.get("selectedSeries").each(function(c,b,d){a.updateDataUrl(c)})},assignSeriesColor:function(b,e,c){var a=this;var d=_.find(this.getSeriesColors(),function(h){var f=a.get("selectedSeries").some(function(j){return h===j.get("color")});return !f});if(d){b.set("color",d)}else{b.set("color",this.getSeriesColors()[0])}},incrementOutgoingRequests:function(){this.set("outgoingRequests",this.get("outgoingRequests")+1)},decrementOutgoingRequests:function(){this.set("outgoingRequests",this.get("outgoingRequests")-1)},addSelectedSeries:function(a){if(this.selectedSeriesHasModel(a)){return false}return this.get("selectedSeries").add(a)},addFirstAvailableSeries:function(){var b=this.nextAvailableSeries();if(b){this.addSelectedSeries(b);this.set("noData",false);if(this.get("selectedNavigation")=="performance"){var a=this.nextAvailableSeries();if(a){this.addSelectedSeries(a)}}}else{this.set("noData",true)}},swapSelectedSeriesElement:function(a,b){b.set("color",a.get("color"));var c=this.get("selectedSeries").indexOf(a);this.get("selectedSeries").remove(a,{silent:true});this.get("selectedSeries").add(b,{silent:true,at:c});this.get("selectedSeries").trigger("swap",b);return b},nextAvailableSeries:function(){var a=this;var b=this.get("seriesOptions").find(function(d){var c=a.selectedSeriesHasModel(d);return c?false:d});return b?b:null},selectedSeriesHasModel:function(a){return this.get("selectedSeries").find(function(b){return a.get("seriesId")===b.get("seriesId")})},getGraphStrideOptions:function(){var b=(this.get("selectedNavigation")=="performance")?"minute":this.get("stride");var a=Analytics.GraphState.graphStrideOptions[b];return a||Analytics.GraphState.graphStrideOptions.day},getSeriesColors:function(){return Analytics.GraphState.SeriesColors},getCurrentNavigationUIOptions:function(){var a=_.findWhere(Analytics.GraphState.GraphNavigationOptions,{name:this.get("selectedNavigation")});return a?a.ui:{}},getSeriesOptionWithId:function(a){return this.get("seriesOptions").find(function(b){return a===b.get("seriesId")?b:false})}},{EventsSeriesOptions:[{displayName:"API Requests",endpoint:"api_request",tooltipName:"requests",seriesId:"api_requests"},{displayName:"Analytics Requests",endpoint:"analytics_request",tooltipName:"analytics requests",seriesId:"analytics_requests"},{displayName:"File Requests",endpoint:"file_request",tooltipName:"file requests",seriesId:"file_requests"},{displayName:"Push Notifications",endpoint:"push",tooltipName:"pushes",seriesId:"push_notifications"},{displayName:"App Opens",endpoint:"app_opened",tooltipName:"opens",seriesId:"app_opens"},{displayName:"Push Opens",endpoint:"app_opened_from_push",tooltipName:"opens",seriesId:"push_opens"}],AudienceSeriesOptions:[{displayName:"Daily Active Installations",endpoint:"audience",tooltipName:"daily active installations",seriesId:"daily_active_installations",audienceType:"daily_installations"},{displayName:"Weekly Active Installations",endpoint:"audience",tooltipName:"weekly active installations",seriesId:"weekly_active_installations",audienceType:"weekly_installations"},{displayName:"Monthly Active Installations",endpoint:"audience",tooltipName:"monthly active installations",seriesId:"monthly_active_installations",audienceType:"monthly_installations"},{displayName:"Daily Active Users",endpoint:"audience",tooltipName:"daily active users",seriesId:"daily_active_users",audienceType:"daily_users"},{displayName:"Weekly Active Users",endpoint:"audience",tooltipName:"weekly active users",seriesId:"weekly_active_users",audienceType:"weekly_users"},{displayName:"Monthly Active Users",endpoint:"audience",tooltipName:"monthly active users",seriesId:"monthly_active_users",audienceType:"monthly_users"}],PerformanceSeriesOptions:[{displayName:"Total Requests",endpoint:"performance",tooltipName:"total req/sec",seriesId:"total_requests",performanceType:"total_requests",hideMarker:true},{displayName:"Request Limit",endpoint:"performance",tooltipName:"req/sec limit",seriesId:"request_limit",performanceType:"request_limit",hideMarker:true},{displayName:"Dropped Requests",endpoint:"performance",tooltipName:"dropped req/sec",seriesId:"dropped_requests",performanceType:"dropped_requests",hideMarker:true},{displayName:"Served Requests",endpoint:"performance",tooltipName:"served req/sec",seriesId:"served_requests",performanceType:"served_requests",hideMarker:true}],SeriesColors:["#4da6e9","#f4ac60","#89A54E"],GraphNavigationOptions:[{displayName:"Audience",name:"audience",ui:{breakdown:false,graph:true,requireSeries:true,}},{displayName:"Events",name:"events",ui:{breakdown:true,graph:true,requireSeries:true,}},{displayName:"Data",name:"data",ui:{breakdown:false,graph:true,requireSeries:true,}},{displayName:"Retention",name:"retention",ui:{breakdown:false,graph:false,requireSeries:false,}},{displayName:"Performance",name:"performance",ui:{breakdown:false,graph:true,requireSeries:true,}}],graphStrideOptions:{minute:{dateFormat:"MM/DD HH:mm",tooltipFormat:"MMM DD, HH:mm ZZ",minTickInterval:3600*1000},hour:{dateFormat:"MM/DD HH:mm",tooltipFormat:"MMM DD, HH:mm ZZ",minTickInterval:3600*1000},day:{dateFormat:"MMM D",tooltipFormat:"MMM DD, YYYY",minTickInterval:24*3600*1000}}});App.Models.SignupFlow=Backbone.Model.extend({});App.Models.User=Backbone.Model.extend({firstName:function(){if(this.get("name")){return App.Models.User.separateName(this.get("name")).firstName}return""},lastName:function(){if(this.get("name")){return App.Models.User.separateName(this.get("name")).lastName}return""}},{separateName:function(a){matches=a.match(/(.*?)\s+(.*)/)||[];if(matches.length>=3){return{firstName:matches[1],lastName:matches[2]}}else{return{firstName:a,lastName:""}}}});var Trait=(function(){return({isIE:!!document.documentMode,isFirefox:typeof InstallTrigger!=="undefined",isSafari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,isChrome:!!window.chrome})})();(function(){var c="http://www.w3.org/2000/svg";var a=function(d,k,e,j){var n;if(j){n=document.createElementNS(c,d)}else{n=document.createElement(d)}if(e){if(!Array.isArray(e)){e=[e]}for(var h=0;h<e.length;h++){var f=e[h];if(typeof f==="string"||typeof f==="number"){f=document.createTextNode(f)}n.appendChild(f)}}if(k){for(var l in k){if(l==="style"){for(var m in k[l]){n.style[m]=k[l][m]}}else{if(l.indexOf("data-")===0||j){n.setAttribute(l,k[l])}else{n[l]=k[l]}}}}return n};var b=window.UI={tag:function(e,d,f){return a(e,d,f,false)},svgTag:function(e,d,f){return a(e,d,f,true)},createIcon:function(e){var d=document.createElement("i");d.className="icon_"+e;return d},createTooltip:function(f,d){var e="tooltip_wrap";if(d.direction==="left"){e+=" to_left"}return b.tag("span",{className:e},[b.tag("span",{className:"tip"},f)])},hasAncestor:function(e,d){var f=e.parentNode;while(f){if(f===d){return true}f=f.parentNode}return false},addClass:function(f,e){var d=new RegExp("\\b"+e+"\\b");if(!f.className.match(d)){f.className+=" "+e}},removeClass:function(f,e){var d=new RegExp("\\s*\\b"+e+"\\b","g");f.className=f.className.replace(d,"")},toggleClass:function(e,d,f){if(f){b.addClass(e,d)}else{b.removeClass(e,d)}},hasClass:function(f,e){var d=new RegExp("\\b"+e+"\\b");return !!f.className.match(d)},getStyle:function(d,e){if(d.currentStyle){return d.currentStyle[styleProp]}if(window.getComputedStyle){return document.defaultView.getComputedStyle(d,null).getPropertyValue(e)}return""},documentPosition:function(d){var f={x:0,y:0};var e=d;while(e){f.x+=e.offsetLeft;f.y+=e.offsetTop;e=e.offsetParent}return f},windowPosition:function(d){var e=b.documentPosition(d);e.x-=window.scrollX;e.y-=window.scrollY;return e},delegate:function(j,h,e,d){if(j==="focus"||j==="blur"){throw"Focus and blur delegation are not yet supported"}var k=function(){return false};if(typeof e==="string"){e=e.toUpperCase();k=function(l){return l.tagName===e}}else{if(e.className){var f=new RegExp("\\b"+e.className+"\\b");k=function(l){return l.className.match(f)}}else{if(e.id){k=function(l){return l.id===e.id}}}}h.addEventListener(j,function(m){var l=m.target;while(l){if(k(l)){d.call(l,m)}l=l.parentNode}})},prettyNumber:function(e){var h;var d=Math.ceil(Math.log(Math.abs(e)+1)/Math.LN10);if(d>6&&d<10){h=(e/1000000);if((h|0)===h||Math.round(e%1000000/100000)===0){return(h|0)+"M"}else{return(h|0)+"."+Math.round(e%1000000/100000)+"M"}}else{if(d>5){h=(e/1000);if((h|0)===h||Math.round(e%1000/100)===0){return(h|0)+"K"}else{return(h|0)+"."+Math.round(e%1000/100)+"K"}}else{if(d>3){var f=((e%1000)|0);if(f<10){f="00"+f}else{if(f<100){f="0"+f}}return((e/1000)|0)+","+f}else{return(e|0)+""}}}},ComponentProto:{attach:function(d){if(this.node){d.appendChild(this.node);return this}return null},remove:function(){if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);return this}return null}}}})();(function(d,j,m){if(!d){return}var b=d.StringEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=((typeof n.value==="string")&&n.value)||"";if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};b.prototype={render:function(){var n=this.node=document.createElement("input");n.type="text";n.className="editor_string";n.placeholder=this._placeholder},reset:function(){this.value=""},focus:function(){this.node.focus()},};Object.defineProperty(b.prototype,"value",{get:function(){return this.node.value},set:function(n){this.node.value=n}});Object.defineProperty(b.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n},});j.extend(b.prototype,d.ComponentProto);var a=d.NumberEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=((typeof n.value==="number")&&n.value)||0;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};a.prototype={render:function(){var n=this.node=document.createElement("input");n.type="text";n.className="editor_number";n.placeholder=this._placeholder},reset:function(){this.value=null},focus:function(){this.node.focus()},};Object.defineProperty(a.prototype,"value",{get:function(){var n=this.node.value;if(n===""||isNaN(n)){return NaN}return +n},set:function(n){if(!isNaN(n)){this.node.value=n}}});Object.defineProperty(a.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n}});j.extend(a.prototype,d.ComponentProto);var h=d.BooleanEditor=function(n){if(!n){n={}}this.name=n.name||"boolean_editor";this.render();this.value=n.value||false;if(n.parent){this.attach(n.parent)}};h.prototype={render:function(){this.input=new d.Dropdown({optionSet:["true","false"],name:this.name,value:"false"});this.node=document.createElement("span");this.node.className="editor_boolean";this.input.attach(this.node)},reset:function(){this.value=false},focus:function(){this.node.focus()},};Object.defineProperty(h.prototype,"value",{get:function(){return this.input.value==="true"},set:function(n){this.input.value=n?"true":"false"}});j.extend(h.prototype,d.ComponentProto);var f=d.DateEditor=function(n){if(!n){n={}}this._value=new Date();if(n.value&&n.value.constructor===Date){this._value=n.value}this._disabled=!!n.disabled;this.render();if(n.parent){this.attach(n.parent)}};f.prototype={render:function(){var n=this.node=document.createElement("input");n.type="text";n.className="editor_date";n.disabled=this._disabled;n.addEventListener("focus",this.showIso.bind(this),false);n.addEventListener("change",this.parseContents.bind(this),false);n.addEventListener("blur",this.showHumanReadable.bind(this),false);this.showHumanReadable()},reset:function(){this.value=new Date()},showIso:function(){this.node.value=this._value.toISOString()},showHumanReadable:function(){this.node.value=m(this._value).format("MMM D, YYYY, H:mm")},parseContents:function(){var n=new Date(this.node.value);if(!isNaN(n)){this._value=n}}};Object.defineProperty(f.prototype,"value",{get:function(){return this._value},set:function(n){if(n&&n.constructor===Date){this._value=n}this.node.blur();this.showHumanReadable()}});j.extend(f.prototype,d.ComponentProto);var k=d.GeopointEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||{latitude:"Lat",longitude:"Lon"};this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};k.prototype={render:function(){var n=this.node=document.createElement("span");n.className="editor_geopoint";this._lat=document.createElement("input");this._lat.placeholder=this._placeholder.latitude||"";this._lon=document.createElement("input");this._lon.placeholder=this._placeholder.longitude||"";n.appendChild(this._lat);n.appendChild(document.createTextNode(","));n.appendChild(this._lon)},reset:function(){this.value={latitude:null,longitude:null}},focus:function(){this._lat.focus()},};Object.defineProperty(k.prototype,"value",{get:function(){var n=parseFloat(this._lat.value);var o=parseFloat(this._lon.value);if(isNaN(n)||isNaN(o)){return null}return{latitude:n,longitude:o}},set:function(n){if(typeof n!=="object"){return}if(n.hasOwnProperty("latitude")&&n.hasOwnProperty("longitude")){if(!isNaN(n.latitude)&&!isNaN(n.longitude)){this._lat.value=n.latitude;this._lon.value=n.longitude}}}});Object.defineProperty(k.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this._lat.disabled=n;this._lon.disabled=n},});j.extend(k.prototype,d.ComponentProto);var l=d.ArrayEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};l.prototype={render:function(){var n=this.node=document.createElement("textarea");n.className="editor_array";n.placeholder=this._placeholder},reset:function(){this.value=[]},focus:function(){this.node.focus()},};Object.defineProperty(l.prototype,"value",{get:function(){var o=this.node.value.trim();try{var n=JSON.parse(o);if(Array.isArray(n)){return n}}catch(q){}return null},set:function(o){if(Array.isArray(o)){this.node.value=JSON.stringify(o)}else{if(typeof o==="string"){try{if(Array.isArray(JSON.parse(o))){this.node.value=o}}catch(n){}}}}});Object.defineProperty(l.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n},});j.extend(l.prototype,d.ComponentProto);var e=d.ObjectEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};e.prototype={render:function(){var n=this.node=document.createElement("textarea");n.className="editor_object";n.placeholder=this._placeholder},reset:function(){this.value={}},focus:function(){this.node.focus()},};Object.defineProperty(e.prototype,"value",{get:function(){var n=this.node.value;try{var q=JSON.parse(n);if(typeof q==="object"&&!Array.isArray(q)){return q}}catch(o){}return null},set:function(q){if(typeof q==="object"&&!Array.isArray(q)){this.node.value=JSON.stringify(q)}else{if(typeof q==="string"){try{var o=JSON.parse(q);if(typeof o==="object"&&!Array.isArray(o)){this.node.value=q}}catch(n){}}}}});Object.defineProperty(e.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n}});j.extend(e.prototype,d.ComponentProto);var c=d.FileEditor=function(n){if(!n){n={}}this._name=null;this.applicationId=n.applicationId||"";this.restKey=n.restKey||"";this._onchange=n.onchange||null;this.onerror=n.onerror||null;this.serverURL="https://api.parse.com";if(typeof n.serverURL==="string"){this.serverURL=n.serverURL}this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};c.getFilenameFromPath=function(q){var o=q.lastIndexOf("/");var n=q.substr(o+1).match(/[a-f0-9]{8}\-[a-f0-9]{4}\-[a-f0-9]{4}\-[a-f0-9]{4}\-[a-f0-9]{12}\-(.+)$/);if(n){return n[1]}return q.substr(o+1)};c.prototype={render:function(){var o=this.node=document.createElement("span");o.className="editor_file";var q=this._link=document.createElement("a");q.appendChild(document.createTextNode("Upload a file"));q.setAttribute("target","_blank");o.appendChild(q);var n=this._file=document.createElement("input");n.type="file";n.addEventListener("change",this._uploadFile.bind(this));o.appendChild(n);o.appendChild(d.createIcon("parseData"))},_uploadFile:function(){var n=this;var q=this._file.files[0];if(!q){return}if(q.size>=10*1024*1024){if(n.onerror){n.onerror("File is too large (max 10MB)")}return}var r=new XMLHttpRequest();var o=this.serverURL+"/1/files/"+q.name;r.open("POST",o,true);r.setRequestHeader("X-Parse-Application-ID",this.applicationId);r.setRequestHeader("X-Parse-REST-API-Key",this.restKey);r.onreadystatechange=function(){if(r.readyState===4){n.disabled=false;var t=null;if(r.status===201){var s=JSON.parse(r.responseText);n.value=s.url;t=s.url}else{if(n.onerror){n.onerror("An error occurred while uploading the file")}n.reset()}if(n._onchange){n._onchange(t)}}};this.disabled=true;this._link.innerHTML="Uploading&hellip;";r.send(q)},reset:function(){this._name=null;this._file.value=null;this._link.removeAttribute("href");this._link.innerHTML="Upload a file"}};Object.defineProperty(c.prototype,"value",{get:function(){return this._name},set:function(n){if(typeof n!=="string"||!n.length){return}this._name=n;this._link.setAttribute("href",n);this._link.innerHTML=j.escape(decodeURIComponent(c.getFilenameFromPath(n)))}});Object.defineProperty(c.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this._file.disabled=n;if(n){this.node.className+=" disabled"}else{this.node.className=this.node.className.replace(/\s+disabled/,"")}}});j.extend(c.prototype,d.ComponentProto)})(UI,_,moment);(function(c,a){if(!c){return}var b=c.ACLEditor=function(d){this.title=d.title||"Edit Access Control List (ACL)";this.onSubmit=d.onSubmit;this.onCancel=d.onCancel;this.index=0};b.prototype={setInitialValue:function(f){var d=this;if(this.value){return}if(document.getElementsByClassName("modal_layer").length>0){return}try{this.value=JSON.parse(f)}catch(h){this.unparseableInput=f;this.value={"*":{read:true,write:true}};this.publicRead=true;this.publicWrite=true}new c.Modal({title:d.title,klass:"acl_modal",template:JST["components/acl/_acl_editor_modal"](),init:d.initModal.bind(d)}).then(function(){d.updateACL();d.onSubmit(d.formattedValue())},function(){d.onCancel()})},initModal:function(){var e=this;this.modal=document.getElementsByClassName("acl_modal")[0];if(this.unparseableInput){this.displayError('Could not parse input "'+a.escape(this.unparseableInput)+'". If you save this ACL it will be overwritten.')}if(this.value instanceof Object){a.each(this.value,function(l,k){if(k==="*"){e.publicRead=l.read||false;e.publicWrite=l.write||false}else{e.addACLRow(k,l.read,l.write)}})}var f=this.modal.getElementsByClassName("public_row")[0];var d=f.getElementsByClassName("public_read_checkbox")[0];var j=f.getElementsByClassName("public_write_checkbox")[0];d.addEventListener("change",function(k){e.updatePublicPermission("read",k.target.checked)});j.addEventListener("change",function(k){e.updatePublicPermission("write",k.target.checked)});d.checked=this.publicRead;this.updatePublicPermission("read",this.publicRead);j.checked=this.publicWrite;this.updatePublicPermission("write",this.publicWrite);a.each(this.modal.getElementsByClassName("ui_text"),function(k){e.updateRoleOrUserForInput(k,false)});this.setEmptyRows();var h=this.modal.getElementsByClassName("acl_list")[0];h.scrollTop=0},displayError:function(e){var d=this.modal.getElementsByClassName("modal_errors")[0];d.textContent=e;d.style.display="block";var f=this.modal.getElementsByClassName("acl_list")[0];f.style.height=(f.offsetHeight-d.offsetHeight)+"px"},displayRowError:function(e,d){this.toggleInputSpinner(e,false);c.addClass(e.parentNode,"error");this.setInputIcon(e,"icon_warning");var f=e.parentNode.getElementsByClassName("error_bubble")[0];f.innerHTML=d},updateACL:function(){var d=this;var f={};this.formatPublicACL(f);var e=this.modal.getElementsByClassName("confirm")[0];c.removeClass(e,"disabled");a.each(this.modal.getElementsByClassName("acl_row"),function(h){d.formatPrivateACL(f,h);if(c.hasClass(h,"error")){c.addClass(e,"disabled")}});this.value=f},formatPublicACL:function(e){var d={};if(this.publicRead){d.read=true}if(this.publicWrite){d.write=true}if(!a.isEmpty(d)){e["*"]=d}},formatPrivateACL:function(l,h){var f=h.getElementsByClassName("ui_text")[0];var d=h.getElementsByClassName("read_checkbox")[0];var e=h.getElementsByClassName("write_checkbox")[0];var k=f.getAttribute("data-acl")||f.value;if(k.length===0){return}var j={};if(d.checked){j.read=true}if(e.checked){j.write=true}l[k]=j},addACLRow:function(j,h,q){var o=this;var l=this.modal.getElementsByClassName("acl_list")[0];var d=c.tag("li",{className:"acl_row"});d.innerHTML=JST["components/acl/_acl_editor_row"]({index:this.index,});this.index++;l.appendChild(d);var f=d.getElementsByClassName("ui_text")[0];var e=d.getElementsByClassName("read_checkbox")[0];var m=d.getElementsByClassName("write_checkbox")[0];var k=d.getElementsByClassName("remove_row_button")[0];f.addEventListener("focus",this.inputIsBeingEdited.bind(this));f.addEventListener("blur",this.roleOrUserChanged.bind(this));f.addEventListener("keydown",this.handleTabOrEnterComplete.bind(this));e.addEventListener("change",this.ACLPermissionToggled.bind(this));m.addEventListener("change",this.ACLPermissionToggled.bind(this));e.checked=h;m.checked=q;c.toggleClass(e.parentNode.parentNode,"disabled",this.publicRead);c.toggleClass(m.parentNode.parentNode,"disabled",this.publicWrite);k.addEventListener("click",this.removeRowButtonClicked.bind(this));var n=new Spinner({lines:8,length:4,width:2,radius:4,color:"#5a6b77"}).spin();c.addClass(n.el,"hidden");d.appendChild(n.el);if(j){if(j.indexOf("role:")===0){j=j.slice(5)}f.value=j;c.addClass(d,"show")}l.scrollTop=l.scrollHeight;if(l.scrollHeight>l.offsetHeight){c.addClass(l,"scrollable")}},handleTabOrEnterComplete:function(f){if(f.keyCode===13||f.keyCode===9){f.target.blur();var d=f.target.parentNode;if(f.shiftKey){nextRow=d.previousSibling}else{nextRow=d.nextSibling}if(nextRow&&nextRow.className&&c.hasClass(nextRow,"acl_row")){var h=nextRow.getElementsByClassName("ui_text")[0];h.focus();h.setSelectionRange(h.value.length,h.value.length)}f.preventDefault()}},removeRowButtonClicked:function(h){var f=h.target.parentNode;var d=f.parentNode;this.removeACLRow(d);this.updateACL()},removeACLRow:function(e){var d=e.parentNode;d.removeChild(e);if(d.scrollHeight<d.offsetHeight){c.removeClass(d,"scrollable")}},updatePublicPermission:function(f,h){var e=this;var d;if(f==="read"){this.publicRead=h;d=this.publicWrite}else{if(f==="write"){this.publicWrite=h;d=this.publicRead}}a.each(this.modal.getElementsByClassName(f),function(j){c.toggleClass(j,"disabled",h)});this.setEmptyRows();this.updateACL()},inputIsBeingEdited:function(f){var d=f.target;var h=d.getAttribute("data-username");if(h){d.value=h}c.removeClass(d.parentNode,"error");this.setInputIcon(d,"icon_plusStroke")},setInputIcon:function(e,d){this.removeInputIcons(e);var f=e.parentNode.getElementsByClassName(d)[0];c.removeClass(f,"hidden")},removeInputIcons:function(d){a.each(d.parentNode.getElementsByClassName("input_icon"),function(e){c.addClass(e,"hidden")})},toggleInputSpinner:function(d,h){this.removeInputIcons(d);var f=d.parentNode.getElementsByClassName("spinner")[0];c.toggleClass(f,"hidden",!h);d.disabled=h;var e=this.modal.getElementsByClassName("confirm")[0];c.toggleClass(e,"disabled",h)},roleOrUserChanged:function(h){var d=h.target;var f=d.parentNode;if(d.value.length>0){c.addClass(f,"show")}else{c.removeClass(f,"show");this.setInputIcon(d,"icon_plusStroke");d.removeAttribute("data-acl");d.removeAttribute("data-username");this.updateACL()}this.setEmptyRows();this.updateRoleOrUserForInput(d,true)},updateRoleOrUserForInput:function(e,f){var d=this;if(e.value.length>0){this.toggleInputSpinner(e,true);this.checkIfRoleOrUser(e,f).then(function(){d.updateACL()})}},checkIfRoleOrUser:function(f,j){var e=this;var h=f.value;var d=new Parse.Query(Parse.Role);d.equalTo("name",h);return d.first().then(function(k){if(k){e.setRowToRole(f,j)}else{var m=new Parse.Query(Parse.User);m.equalTo("objectId",h);var l=new Parse.Query(Parse.User);l.equalTo("username",h);var n=Parse.Query.or(m,l);return n.first().then(function(o){if(o){e.setRowToUser(f,o.id,o.get("username"),j)}else{c.addClass(f.parentNode,"error");e.displayRowError(f,"Role or User not found. Enter a valid Role name, Username, or User ID.");f.removeAttribute("data-acl");f.removeAttribute("data-username")}},function(o){c.addClass(f.parentNode,"error");e.displayRowError(f,"User query failed with error: "+o.message);f.removeAttribute("data-acl");f.removeAttribute("data-username")})}},function(k){c.addClass(f.parentNode,"error");e.displayRowError(f,"Role query failed with error: "+k.message);f.removeAttribute("data-acl");f.removeAttribute("data-username")})},setRowToRole:function(e,f){this.toggleInputSpinner(e,false);var d="role:"+e.value;if(f&&this.value[d]&&d!==e.getAttribute("data-acl")){this.displayRowError(e,"This role is already included in the ACL.")}else{this.setInputIcon(e,"icon_permissions");e.setAttribute("data-acl",d)}},setRowToUser:function(e,d,h,f){e.value=h+" ("+d+")";this.toggleInputSpinner(e,false);if(f&&this.value[d]&&d!==e.getAttribute("data-acl")){this.displayRowError(e,"This user is already included in the ACL.")}else{this.setInputIcon(e,"icon_user");e.setAttribute("data-acl",d)}e.setAttribute("data-username",h)},setEmptyRows:function(){var f=this;var e=true;var d=this.modal.getElementsByClassName("ui_text");d=Array.prototype.slice.call(d).reverse();a.each(d,function(h){if(h.value.length===0){if(e){e=false}else{f.removeACLRow(h.parentNode)}}});if(e){this.addACLRow(null,false,false)}},ACLPermissionToggled:function(d){this.updateACL()},formattedValue:function(){return JSON.stringify(this.value)}};a.extend(b.prototype,c.ComponentProto)})(UI,_);(function(f,c){if(!f){return}var b=function(k,j){return j.value-k.value};var h=function(k,j){return k+j.value};var d=function(k,j){return k+j};var e=f.BarChart=function(j){this.segments=j.segments?j.segments.slice(0):[];this.segments.sort(b);this.sum=this.segments.reduce(h,0);this.showPercent=!!j.showPercent;this.render();if(j.parent){this.attach(j.parent)}};e.prototype={render:function(){var k=[];for(var l=0,j=this.segments.length;l<j;l++){var o=this.segments[l].value;var m=o/this.segments[0].value*100;var n=f.prettyNumber(o);if(this.showPercent){n=Math.round(o/this.sum*100)+"% ("+n+")"}k.push(f.tag("tr",{},[f.tag("td",{className:"no_overflow"},this.segments[l].label),f.tag("td",{},f.tag("div",{className:"bar_width",style:{width:m+"%"}},f.tag("div",{className:"bar"},f.tag("div",{className:"bar_count"},n))))]))}this.node=f.tag("table",{className:"chart_bars"},k)}};c.extend(e.prototype,f.ComponentProto);var a=f.DonutChart=function(j){this.width=j.width||200;this.height=j.height||200;this.segments=j.segments||[];this.sum=this.segments.reduce(d,0);this.label=j.label||"";this.render();if(j.parent){this.attach(j.parent)}};a.prototype={render:function(){var t=(this.width/2)|0;var q=(this.height/2)|0;var j=Math.min(t,q)*0.9;var m=t+j;var k=q;var s=0;var w=[f.svgTag("text",{"class":"donut_value","text-anchor":"middle",x:t,y:q},f.prettyNumber(this.sum))];var y=[];for(var u=0,x=this.segments.length;u<x;u++){var l=this.segments[u]/this.sum*2*Math.PI;var o=Math.min(l,Math.PI)+s;var A=j*Math.cos(o)+t;var z=j*Math.sin(o)+q;var B=["M",t,q,"L",m,k,"A",j,j,0,0,1,A,z];if(l>Math.PI){o=l+s;A=j*Math.cos(o)+t;z=j*Math.sin(o)+q;B=B.concat(["A",j,j,0,0,1,A,z])}B.push("Z");var n=f.svgTag("path",{d:B.join(" ")});if(typeof n.style.webkitTransformOrigin==="string"){n.style.webkitTransformOrigin=t+"px "+q+"px"}else{n.style.transformOrigin=t+"px "+q+"px"}y.push(n);w.push(f.svgTag("text",{"class":"donut_value","text-anchor":"middle",x:t,y:q},f.prettyNumber(this.segments[u])));m=A;k=z;s=o}w.push(f.svgTag("text",{"class":"donut_label","text-anchor":"middle",x:t,y:q+20},this.label));var v=f.svgTag("svg",{width:this.width,height:this.height},y.concat([f.svgTag("circle",{"class":"donut_center",cx:t,cy:q,r:Math.min(t,q)*0.8})]).concat(w));this.node=f.tag("div",{className:"chart_donut",style:{width:this.width+"px",height:this.height+"px"}},v)}};c.extend(a.prototype,f.ComponentProto)})(UI,_);(function(c,a){if(!c||!a){return}if(!a.config("forceHandCursor")){a.config({forceHandCursor:true})}var b=c.CopyBox=function(d){if(!d){d={}}this.render(d.multiline);if(d.multiline){this.node.className+=" multiline"}this.setValue(d.value||"");if(d.parent){this.attach(d.parent)}};b.prototype={render:function(){var d=this.node=document.createElement("div");d.className="copybox";var h=this._button=document.createElement("a");h.appendChild(document.createTextNode("Copy"));d.appendChild(h);var f=this._text=document.createElement("div");d.appendChild(f);var e=new a(h);e.on("complete",function(){var j=this;this.innerHTML="Copied!";setTimeout(function(){j.innerHTML="Copy"},3000)})},setValue:function(d){this._text.innerHTML=d;this._button.setAttribute("data-clipboard-text",d)}};_.extend(b.prototype,c.ComponentProto)})(UI,ZeroClipboard);(function(a){a.initMenus=function(){var b=document.getElementsByClassName("app_selector")[0].children;var c=function(f){if(b[0].className.indexOf("open")<0){b[0].className+=" open";f.stopPropagation();document.body.addEventListener("click",d)}};var d=function(h){var f=h.target;while(f){if(f===b[1]){return}f=f.parentNode}b[0].className=b[0].className.replace(/\s*open/,"");document.body.removeEventListener("click",d)};b[0].addEventListener("click",c)}})(UI);(function(d,c){if(!d){return}var b=["Su","Mo","Tu","We","Th","Fr","Sa"];var a=d.Datepicker=function(e){this.origin=new Date();this.origin.setHours(0);this.origin.setMinutes(0);this.origin.setSeconds(0);this.origin.setMilliseconds(0);this.monthOffset=0;this.stringFormat=e.stringFormat||"YYYY-MM-DD";this._value=e.value||new Date();this.name=e.name||"date";this.onChange=e.onChange||null;this.hideOnChange=!!e.hideOnChange;this.preventFuture=!!e.preventFuture;this.preventPast=!!e.preventPast;this.unstyled=!!e.unstyled;this.render();if(e.parent){this.attach(e.parent)}};a.prototype={render:function(){var r=this;this.input=d.tag("input",{type:"text",className:"date_input",name:this.name,value:this.formattedValue()});this.monthHeader=d.tag("span");var f=d.tag("a",{href:"#",className:"date_prev"});var l=d.tag("a",{href:"#",className:"date_next"});f.addEventListener("click",this.decrementMonth.bind(this));l.addEventListener("click",this.incrementMonth.bind(this));var k=d.tag("div",{className:"date_header"},[f,this.monthHeader,l]);var n=[];var j=0;for(;j<7;j++){n.push(d.tag("span",{},b[j]))}n.push(d.tag("div",{className:"week_buffer"}));var q=this.name+"_day";var m=(new Date()).getDate();for(j=1;j<=31;j++){var o=q+"["+j+"]";n.push(d.tag("input",{type:"radio",name:q,id:o,value:j}));var h={htmlFor:o};if(!this.monthOffset&&j===m){h.className="today"}n.push(d.tag("label",h,j+""))}this.dateSelector=d.tag("div",{},n);this.dateButtons=this.dateSelector.getElementsByTagName("input");this.popup=d.tag("div",{className:"date_popup"},[k,this.dateSelector]);var e="date_picker";if(!this.unstyled){e+=" styled"}this.node=d.tag("div",{className:e},[this.input,this.popup]);d.delegate("change",this.dateSelector,"input",function(){r.value=new Date(r.origin.getFullYear(),r.origin.getMonth()+r.monthOffset,this.value);if(r.hideOnChange){r.hide()}});this.input.addEventListener("focus",function(){r.show()});this.input.addEventListener("change",function(){var s=c(this.value);if(s.isValid()){s.second(0).minute(0).hour(0);r.value=s.toDate()}else{r.input.value=r.formattedValue()}});this.input.addEventListener("keydown",function(s){if(s.keyCode===13){r.hide();r.input.blur()}});this._updateMonth()},incrementMonth:function(f){this.monthOffset++;this._updateMonth();f.preventDefault()},decrementMonth:function(f){this.monthOffset--;this._updateMonth();f.preventDefault()},show:function(){if(this.popup.style.display==="block"){return}this.popup.style.display="block";this.popup.style.bottom="initial";this.popup.style.top="30px";this.popup.style.right="initial";this.popup.style.left="0px";var h=d.windowPosition(this.popup);var e=window.innerHeight;var f=document.getElementsByClassName("dashboard_content")[0];if(f){e=f.scrollHeight}if(e-h.y<250){this.popup.style.top="initial";this.popup.style.bottom="30px"}if(window.innerWidth-h.x<220){this.popup.style.right="0px";this.popup.style.left="initial"}this.popup.style.visibility="visible";if(!this._hideHandler){this._hideHandler=(function(j){if(!d.hasAncestor(j.target,this.node)){this.hide()}}).bind(this)}document.body.addEventListener("mousedown",this._hideHandler)},hide:function(){this.popup.style.display="none";this.popup.style.visibility="hidden";document.body.removeEventListener("mousedown",this._hideHandler)},_updateMonth:function(){var l=new Date(this.origin.getFullYear(),this.origin.getMonth()+this.monthOffset);var n=new Date(l.getYear(),l.getMonth()+1,0).getDate();var k="date_selector unselectable start_"+l.getDay()+" has_"+n;var m=c(l).format("MMMM YYYY");var j=-1;if(l.getFullYear()===this.value.getFullYear()&&l.getMonth()===this.value.getMonth()){j=this.value.getDate()-1}if(this.monthOffset>0){k+=" future"}else{if(this.monthOffset<0){k+=" past"}}if(this.preventFuture){k+=" prevent_future"}if(this.preventPast){k+=" prevent_past"}if(this.monthOffset){var f=this.dateSelector.getElementsByClassName("today");if(f[0]){d.removeClass(f[0],"today")}}else{d.addClass(this.dateSelector.getElementsByTagName("label")[(new Date()).getDate()-1],"today")}if(Trait.isIE){this.dateButtons=this.dateSelector.getElementsByTagName("input")}for(var h=0,e=this.dateButtons.length;h<e;h++){this.dateButtons[h].checked=(h===j)}this.monthHeader.innerHTML=m;this.dateSelector.className=k},formattedValue:function(){return c(this.value).format(this.stringFormat)}};Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(f){if(f.constructor!==Date){return}if((this.preventFuture&&f>this.origin)||(this.preventPast&&f<this.origin)){this._updateMonth();return}var e=this._value;this._value=f;this.input.value=this.formattedValue();if(f!==e){this.monthOffset=(f.getFullYear()-this.origin.getFullYear())*12+f.getMonth()-this.origin.getMonth();this._updateMonth();if(this.onChange){this.onChange(f)}}}});_.extend(a.prototype,d.ComponentProto)})(UI,moment);(function(d){if(!d){return}var a="MMM D, YYYY";var c="MMM D";var b=d.Daterange=function(e){this.name=e.name||"daterange";this.compactOnChange=!!e.compactOnChange;this.preventFuture=!!e.preventFuture;this.onChange=e.onChange||null;this.render();if(e.value){this.value=e.value}if(e.parent){this.attach(e.parent)}};b.prototype={render:function(){var e=this;this.node=d.tag("div",{className:"date_range"},d.tag("label",{},"From:"));this.from=new d.Datepicker({parent:this.node,name:this.name+"_from_date",stringFormat:c,onChange:this.fromChanged.bind(this),hideOnChange:true,preventFuture:this.preventFuture,unstyled:true});this.node.appendChild(d.tag("span",{},"-"));this.node.appendChild(d.tag("label",{},"To:"));this.to=new d.Datepicker({parent:this.node,name:this.name+"_to_date",stringFormat:c,onChange:this.toChanged.bind(this),hideOnChange:true,preventFuture:this.preventFuture,unstyled:true});this.node.appendChild(d.createIcon("calendar"));this.node.addEventListener("mousedown",this.expand.bind(this))},expand:function(){if(d.hasClass(this.node,"expanded")){return}d.addClass(this.node,"expanded");this.from.stringFormat=a;this.to.stringFormat=a;this.from.value=this.from.value;this.to.value=this.to.value;if(!this._compactHandler){this._compactHandler=(function(f){if(!d.hasAncestor(f.target,this.node)){this.compact()}}).bind(this)}document.body.addEventListener("mousedown",this._compactHandler)},compact:function(){d.removeClass(this.node,"expanded");this.from.stringFormat=c;this.to.stringFormat=c;this.from.value=this.from.value;this.to.value=this.to.value;document.body.removeEventListener("mousedown",this._compactHandler)},fromChanged:function(e){if(this.compactOnChange){this.compact()}if(e>this.to.value){this.to.value=e}if(this.onChange){this.onChange(this.value)}},toChanged:function(e){if(this.compactOnChange){this.compact()}if(e<this.from.value){this.from.value=e}if(this.onChange){this.onChange(this.value)}}};Object.defineProperty(b.prototype,"value",{get:function(){return{to:this.to.value,from:this.from.value}},set:function(e){if(typeof e!=="object"||!e.hasOwnProperty("to")||!e.hasOwnProperty("from")){return}this.to.value=e.to;this.from.value=e.from}});_.extend(b.prototype,d.ComponentProto)})(UI);(function(d,e,c){if(!d){return}var b=function(f){f.preventDefault()};var a=d.Dropdown=function(f){if(!f){f={}}this.optionSet=f.optionSet||[];this.values=f.values||{};this.name=f.name;this.defaultOption=f.defaultOption||null;this.onChange=f.onChange||null;this.style=f.style||null;this.render();if(typeof f.value!=="undefined"){this.value=f.value}if(f.disabled){this.disabled=true}if(f.parent){this.attach(f.parent)}};a.prototype={render:function(){var j=[];if(this.defaultOption){var l=this.name+"[-1]";j.push(d.tag("input",{type:"radio",name:this.name,id:l,value:"",checked:(this.optionSet.length===0)}));j.push(d.tag("label",{htmlFor:l},this.defaultOption))}for(var m=0,n=this.optionSet.length;m<n;m++){var k=this.optionSet[m];if(this.values[k]!==undefined){k=this.values[k]}var r=false;var h=this.name+"["+m+"]";j.push(d.tag("input",{type:"radio",name:this.name,id:h,value:k,checked:m===0}));j.push(d.tag("label",{htmlFor:h},this.optionSet[m]))}var q=this.style?"ui_dropdown "+this.style:"ui_dropdown";var f=this.node=d.tag("span",{className:q,tabIndex:-1},j);var o=this.onChange;if(o){d.delegate("change",f,"input",function(){o(this.value)})}if(e&&e.isSafari){d.delegate("change",f,"input",function(){f.blur()})}}};Object.defineProperty(a.prototype,"value",{get:function(){var f=this.node.children;for(var h in f){if(f[h].tagName==="INPUT"&&f[h].checked){return f[h].value}}return null},set:function(f){for(var j in this.node.children){var h=this.node.children[j];h.checked=(h.tagName==="INPUT"&&h.value===f)}}});Object.defineProperty(a.prototype,"disabled",{get:function(){return !!this._disabled},set:function(f){if(f){this._disabled=true;this.node.className+=" disabled";this.node.addEventListener("mousedown",b)}else{this._disabled=false;this.node.className=this.node.className.replace(/\s+disabled/g,"");this.node.removeEventListener("mousedown",b)}}});c.extend(a.prototype,d.ComponentProto)})(UI,Trait,_);(function(c,b){if(!c){return}var a=c.Modal=function(d){c.addClass(document.body,"modal_open");d=d||{};this.promise=new Parse.Promise();this.title=d.title||"";this.klass=d.klass||"";this.template=d.template||"";this.keyboardSubmit=!!d.keyboardSubmit;this.footer=d.footer||null;this.parent=d.parent||null;if(d.submit){this.submit=d.submit}if(d.cancel){this.cancel=d.cancel}this.render();if(d.init){d.init.call(this)}return this.promise};a.prototype={_submit:function(d){this.wrap.parentNode.removeChild(this.wrap);c.removeClass(document.body,"modal_open");return Parse.Promise.as(d)},_cancel:function(d){this.wrap.parentNode.removeChild(this.wrap);c.removeClass(document.body,"modal_open");return Parse.Promise.error(d)},_keydownHandler:function(d){if(d.keyCode===13){if(document.activeElement.tagName==="TEXTAREA"&&!d.shiftKey){return true}else{this.submit();d.preventDefault();return false}}else{if(d.keyCode===27){if(this.cancel){this.cancel()}else{this.promise.reject()}return false}}return true},render:function(){var e=this;this.wrap=document.createElement("div");this.wrap.className="modal_layer trans";var d='<div class="modal '+this.klass+'">';d+="<header>"+this.title+'<a class="close"></a></header>';d+='<div class="modal_content">'+this.template+"</div>";if(this.footer){d+="<footer>"+this.footer+"</footer>"}d+="</div>";var h=b(this.wrap);h.append(d);this.promise.then(this._submit.bind(this),this._cancel.bind(this));h.find("a.close").click(this.cancel?this.cancel.bind(this):function(){h.addClass("trans");setTimeout(function(){e.promise.reject()},200)});h.find("a.confirm").click(this.submit?this.submit.bind(this):function(){h.addClass("trans");setTimeout(function(){e.promise.resolve()},200)});var f=this.parent||document.body;f.appendChild(this.wrap);setTimeout(function(){h.removeClass("trans")},50);if(this.keyboardSubmit){this._keydownHandler=this._keydownHandler.bind(this);window.addEventListener("keydown",this._keydownHandler);this.promise.always(function(){window.removeEventListener("keydown",e._keydownHandler)})}}}})(UI,jQuery);(function(c,b){if(!c){return}var a=c.ProgressBar=function(d){this.markers=d.markers||15;this.progress=d.progress||0;this.render();this.setProgress(this.progress);if(d.parent){this.attach(d.parent)}};a.prototype={setProgress:function(h){this.progress=h;var e=Math.max(1,Math.floor(h*this.markers));var k=0;var j=this.node.getElementsByClassName("dot");for(var f=0;f<j.length;f++){var d=j[f];if(f<e){if(!c.hasClass(d,"done")){this.delay(d,k);k++}}else{c.removeClass(d,"done")}}},render:function(){var e=[];e.push(c.tag("div",{className:"start done"}));for(var d=0;d<this.markers;d++){e.push(c.tag("div",{className:"dot"}))}e.push(c.tag("div",{className:"end"}));this.node=c.tag("div",{className:"ui_progress_bar"},e)},delay:function(d,e){setTimeout(function(f,h){c.addClass(f,"done")},e*50,d)}};b.extend(a.prototype,c.ComponentProto)})(UI,_);(function(b){if(!b){return}var a=b.StackTrace=function(c){this.title=c.title||"Stack Trace";this.stack=c.stack||[];this.render();if(c.parent){this.attach(c.parent)}};a.prototype={render:function(){var f=[];for(var c=0;c<this.stack.length;c++){var h=[b.tag("td",{},""+c)];if(typeof this.stack[c]==="string"){h.push(b.tag("td",{},this.stack[c].trim()))}else{h.push(b.tag("td",{},this.stack[c].location&&this.stack[c].location.trim()));h.push(b.tag("td",{},this.stack[c].address&&this.stack[c].address.trim()))}f.push(b.tag("tr",{},h))}var e=this.node=b.tag("div",{className:"stack_trace"},[b.tag("div",{className:"stack_title"},this.title),b.tag("table",{},f)]);if(this.stack.length>20){var d=b.tag("div",{className:"stack_expand"},[b.tag("a",{},"Show full trace"),b.tag("span",{},"("+this.stack.length+" lines)")]);d.addEventListener("click",function(){b.removeClass(e,"limited")});e.appendChild(d);b.addClass(e,"limited")}}};_.extend(a.prototype,b.ComponentProto)})(UI);CloudCode.Collections.JobScheduleCollection=Backbone.Collection.extend({url:function(){var a=App.currentApp.dataRequestUrl()+"cloud_code/jobs";if(this.state.get("schedulePagination").get("current_page")){a+="/page/"+this.state.get("schedulePagination").get("current_page")}return a}});CloudCode.Collections.JobStatusCollection=Backbone.Collection.extend({url:function(){var a=App.currentApp.dataRequestUrl()+"cloud_code/job_status";if(this.state.get("statusPagination").get("current_page")){a+="/page/"+this.state.get("statusPagination").get("current_page")}return a}});CloudCode.Collections.ScriptSources=Backbone.Collection.extend({initialize:function(b,a){this.app=a.app},url:function(){return this.app.dataRequestUrl()+"cloud_code/script_sources"},comparator:function(b){var a=b.get("name");if(a==="main.js"){return""}else{return a}},getScriptSource:function(a){var b=this.find(function(c){return c.get("name")===a});if(b){return b.get("source")}else{return null}}});CloudCode.Models.LogContent=Backbone.Model.extend({defaults:{logLevel:"info"},initialize:function(a,b){this.app=b.app},url:function(){return this.app.dataRequestUrl()+"cloud_code/logs?level="+this.get("logLevel")}});CloudCode.Models.State=Backbone.Model.extend({defaults:{currentScriptSource:"main.js",logLevel:"info",scriptRequests:0,logRequests:0,scheduleRequests:0,statusRequests:0,schedulePage:1,releaseInfo:null},initialize:function(){_.bindAll(this);this.get("jobScheduleCollection").state=this;this.get("jobStatusCollection").state=this;this.on("change:contentSelection",this.fetchData);this.get("logContent").on("change:logLevel",this.fetchData);this.get("schedulePagination").on("change:current_page",this.fetchSchedulePagedData);this.get("statusPagination").on("change:current_page",this.fetchStatusPagedData);this.get("jobScheduleCollection").on("reset",this.humanizeSchedules);this.humanizeSchedules()},fetchData:function(){var a=this.get("contentSelection");if(a=="script"){this.fetchScriptSources()}else{if(a=="log"){this.fetchLogContent()}else{if(a=="job_status"){var b=this.get("statusPagination").get("current_page");this.get("statusPagination").unset("current_page",{silent:true});this.get("statusPagination").set("current_page",b)}}}},fetchScriptSources:function(){var a=this;var c=this.get("scriptSources");var b=this.get("currentScriptSource");if(!(c&&_.isString(c.getScriptSource(b)))){this.increment("scriptRequests");this.get("scriptSources").fetch({success:function(){a.decrement("scriptRequests")},error:function(){a.decrement("scriptRequests")}})}},fetchLogContent:function(){var a=this;this.increment("logRequests");this.get("logContent").fetch({success:function(){a.decrement("logRequests")},error:function(){a.decrement("logRequests")}})},fetchSchedulePagedData:function(){var a=this;this.increment("scheduleRequests");this.get("jobScheduleCollection").fetch({reset:true,success:function(){a.decrement("scheduleRequests")},error:function(){a.decrement("scheduleRequests")}})},fetchStatusPagedData:function(){var a=this;this.increment("statusRequests");this.get("jobStatusCollection").fetch({reset:true,success:function(){$.ajax({url:App.currentApp.dataRequestUrl()+"cloud_code/job_status/pagination_data",success:function(b){a.get("statusPagination").set(b);a.decrement("statusRequests")},error:function(){a.decrement("statusRequests")}})},error:function(){a.decrement("statusRequests")}})},increment:function(a){this.set(a,this.get(a)+1)},decrement:function(a){this.set(a,this.get(a)-1)},humanizeSchedules:function(){this.get("jobScheduleCollection").each(function(h){var e;var d=moment(h.get("startAfter")).utc().format("MM/DD/YY");d+=" at "+moment(h.get("startAfter")).utc().format("hh:mm A");if(_.isUndefined(h.get("repeatMinutes"))){e="On "+d}else{var f="";var c=0;_(h.get("daysOfWeek")).each(function(l,k){if(l>0){f+=moment().day(k).format("dddd");c++}});if(c===7){f="day"}else{f=f.replace(/\s/g,", ")}var b;var a=h.get("repeatMinutes");if(a%(60*24)===0){b=""}else{if(a%60===0){if(a===60){b="hour"}else{b=(a/60)+" hours"}}else{if(a===1){b="minute"}else{b=a+" minutes"}}}var j="";if(a%(60*24)===0){j="at "+moment(h.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().format("hh:mm A")}else{j="after "+moment(h.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().format("hh:mm A")}e="Every "+f;if(b.length>0){e+=" every "+b}e+=" "+j;e+=", starting "+d}h.set("humanizedSchedule",e)})}});CloudCode.Routers.AdminRouter=CloudCode.Routers.Router.extend({routes:{script:"selectScript","script/:scriptSourceName":"selectScript",log:"selectLog","log/:logLevel":"selectLog",jobs:"selectJobs","jobs/page/:page":"selectJobs",job_status:"selectJobStatus","job_status/page/:page":"selectJobStatus",}});CloudCode.Views.DDView=Backbone.View.extend({className:"field_dropdown_expanded",initialize:function(){this.template=this.options.template},render:function(){}});CloudCode.Views.DDStringRow=Backbone.View.extend({});CloudCode.Views.JobSchedulesView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"jobs",events:{"click .run_now":"runScheduledJob"},initialize:function(){_.bindAll(this);var a={};a.rootUrl="jobs";a.model=this.model.get("schedulePagination");if(this.model.get("isAdmin")){a.pushState=false}this.pagination=new App.Views.Paginate(a);this.model.on("change:contentSelection",this.render);this.model.on("change:scheduleRequests",this.renderLoading);this.model.get("jobScheduleCollection").on("reset",this.renderTable);this.model.get("jobScheduleCollection").on("reset",this.renderPagination)},runScheduledJob:function(h){var b=this;var d=$(h.currentTarget);if(d.hasClass("disabled")){return false}var c=d.closest("tr").index()-1;var a=this.model.get("jobScheduleCollection").at(c);var f={jobName:a.get("jobName"),when:0,description:"Executing from job schedule web console.",input:a.get("params")};Parse._request({route:"jobs",method:"POST",data:f}).then(function(){d.spin(false).html("Success!");setTimeout(function(){d.html("Run Now").removeClass("disabled")},3000)},function(){d.spin(false).html("Failed!");setTimeout(function(){d.html("Run Now").removeClass("disabled")},3000)});d.html("").spin("xsmall","#596674").addClass("disabled");return false},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty();this.$(".ui_content_footer .ui_actions_right").empty();this.renderTable();this.renderPagination();this.renderShowHeader();this.renderLoading()}else{this.renderHideHeader()}},renderTable:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".job_table").remove();this.$(".content").append(JST["cloud_code/_job_schedules"]({jobSchedules:this.model.get("jobScheduleCollection")}))}},renderLoading:function(){if(this.model.get("contentSelection")===this.selectionName){var a=this;if(this.$(".overlay").length===0){this.$(".content").append("<div class='overlay'></div>")}if(this.model.get("scheduleRequests")>0){this.$(".overlay").removeClass("hidden");this.$(".job_table").spin("large","#fff");setTimeout(function(){a.$(".overlay").addClass("shown")},0)}else{this.$(".overlay").removeClass("shown");this.$(".job_table").spin(false);setTimeout(function(){a.$(".overlay").addClass("hidden")},500)}}},renderPagination:function(){if(this.model.get("contentSelection")===this.selectionName){if(this.model.get("jobScheduleCollection").length>0||this.model.get("schedulePagination").get("current_page")>1){this.$(".ui_content_footer .ui_actions_right").html(this.pagination.render().$el)}}},renderShowHeader:function(){this.$(".schedule_job").show();this.$(".cloud_title").text("Scheduled Cloud Jobs")},renderHideHeader:function(){this.$(".schedule_job").hide()}});CloudCode.Views.JobStatusView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"job_status",initialize:function(){_.bindAll(this);var a={};a.rootUrl="job_status";a.model=this.model.get("statusPagination");if(this.model.get("isAdmin")){a.pushState=false}this.pagination=new App.Views.Paginate(a);this.model.on("change:contentSelection",this.render);this.model.get("jobStatusCollection").on("reset",this.renderTable);this.model.get("jobStatusCollection").on("reset",this.renderPagination);this.model.on("change:statusRequests",this.renderLoading)},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty();this.$(".ui_content_footer .ui_actions_right").empty();this.$(".cloud_title").text("Cloud Job Statuses");this.renderTable();this.renderPagination();this.renderLoading()}},renderTable:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".job_table").remove();this.$(".content").append(JST["cloud_code/_job_status"]({jobStatus:this.model.get("jobStatusCollection")}))}},renderLoading:function(){if(this.model.get("contentSelection")===this.selectionName){var a=this;if(this.$(".overlay").length===0){this.$(".content").append("<div class='overlay'></div>")}if(this.model.get("statusRequests")>0){this.$(".overlay").removeClass("hidden");this.$(".overlay").spin("large","#fff");setTimeout(function(){a.$(".overlay").addClass("shown")},0)}else{this.$(".overlay").removeClass("shown");this.$(".overlay").spin(false);setTimeout(function(){a.$(".overlay").addClass("hidden")},500)}}},renderPagination:function(){if(this.model.get("contentSelection")===this.selectionName){if(this.model.get("jobStatusCollection").length>0||this.model.get("statusPagination").get("current_page")>1){this.$(".ui_content_footer .ui_actions_right").html(this.pagination.render().$el)}}}});CloudCode.Views.LogContent=Parse.View.extend({className:"log_content",initialize:function(){_.bindAll(this);this.model.get("logContent").on("change:logs",this.render);this.model.on("change:logRequests",this.render)},render:function(){if(this.model.get("logRequests")===0){var a=this.model.get("logContent").get("logLevel");$(".cloud_title").text(a[0].toUpperCase()+a.substr(1).toLowerCase()+" log");$(".content_spinner").hide();this.$el.html(JST["cloud_code/_log_content"]({logs:this.model.get("logContent").get("logs")}));this.$el.show();this.$el.scrollTop(this.$el.prop("scrollHeight")-this.$el.height());this.$el.scrollLeft(0)}else{this.$el.hide();$(".content_spinner").show().spin("large","#717171")}return this}});CloudCode.Views.LogsView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"log",initialize:function(){_.bindAll(this);this.logContentView=new CloudCode.Views.LogContent({model:this.model});this.model.on("change:contentSelection",this.render);this.render()},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty().html('<div class="content_spinner"></div>').append(this.logContentView.render().el);this.$(".ui_content_footer .ui_actions_right").empty()}}});CloudCode.Views.NavView=Backbone.View.extend({el:".dashboard_nav",events:{"click .cc_nav a":"navSelection","change .script_list input[type=radio]":"fileSelection"},initialize:function(){_.bindAll(this);this.model.on("change:contentSelection",this.render);this.model.get("logContent").on("change:logLevel",this.renderLogLevel);this.model.get("scriptSources").on("reset",this.renderScripts);this.model.on("change:currentScriptSource",this.renderScriptSelection);this.renderLogLevel(null,this.model.get("logContent").get("logLevel"));this.renderScriptSelection(null,this.model.get("currentScriptSource"))},navSelection:function(c){var a=$(c.target).closest("a").attr("href");a=a.substr(a.indexOf("/cloud_code/")+12);var d=this.model.get("schedulePagination").get("current_page");var b=this.model.get("statusPagination").get("current_page");if(a==="jobs"&&d>1){a+="/page/"+d}else{if(a==="job_status"&&b>1){a+="/page/"+b}}Parse.history.navigate(a,{trigger:true});return false},fileSelection:function(b){var a="script/"+encodeURIComponent(b.target.value);Parse.history.navigate(a,{trigger:true})},render:function(a,b){this.$el.find(".cc_nav.selected").removeClass("selected");if(b==="jobs"||b==="job_status"){this.$el.find("#nav_jobs .selected").removeClass("selected");this.$el.find("#nav_jobs_"+b).addClass("selected");b="jobs"}this.$el.find("#nav_"+b).addClass("selected")},renderScripts:function(b,e){var a=this.model.get("scriptSources");if(!_.isEmpty(a)){var f=a.pluck("name");var d={".":[]};_.each(f,function(j){var l=d;var k=j.split("/");while(k.length>1){var h=k.shift();if(!l[h]){l[h]={".":[]}}l=l[h]}l["."].push(k[0])});var c={};this.$el.find(".script_list").empty().append(CloudCode.Views.NavView.renderDir(d,"",c));this.renderScriptSelection(null,this.model.get("currentScriptSource"))}},renderLogLevel:function(b,c){var a=".log_"+c.toLowerCase();var d=this.$el.find("#nav_log");d.find(".selected").removeClass("selected");d.find(a).addClass("selected")},renderScriptSelection:function(a,b){this.$el.find("input[type=radio]").each(function(){if(this.value===b){this.checked=true;var c=this.parentNode;while(c&&c.className.indexOf("dir_wrapper")>-1){c.previousElementSibling.previousElementSibling.checked=true;c=c.parentNode}return}})}},{genUniqueId:function(a,b){var d="f_"+a.replace(/[^\w-]/,"_");if(b[d]){var c=1;while(b[d+c]){c++}d=d+c}return d},renderDir:function(d,m,k){var e=Object.keys(d).sort(function(q,o){var n=q.toUpperCase();var r=o.toUpperCase();return(q>o?1:(q<o?-1:0))});var b=document.createDocumentFragment();var f;var a;var j;var h;for(f=1;f<e.length;f++){a=CloudCode.Views.NavView.genUniqueId(e[f],k);k[a]=true;j=document.createElement("input");j.type="checkbox";j.id=a;b.appendChild(j);h=document.createElement("label");h.setAttribute("for",a);h.appendChild(document.createTextNode(e[f]));b.appendChild(h);var l=document.createElement("div");l.className="dir_wrapper";l.appendChild(CloudCode.Views.NavView.renderDir(d[e[f]],m+e[f]+"/",k));b.appendChild(l)}for(f=0;f<d["."].length;f++){var c=d["."][f];j=document.createElement("input");j.type="radio";j.name="hosted_files";a=CloudCode.Views.NavView.genUniqueId(c,k);k[a]=true;j.id=a;j.value=m+c;b.appendChild(j);h=document.createElement("label");h.setAttribute("for",a);h.appendChild(document.createTextNode(c));b.appendChild(h)}return b}});CloudCode.Views.ReleaseInfo=Parse.View.extend({el:".release_info",initialize:function(){_.bindAll(this,"render");this.model=this.options.model;this.model.on("change:releaseInfo",this.render)},render:function(){releaseInfo=this.model.get("releaseInfo");var a;if(releaseInfo){if(releaseInfo.get("version")){if(releaseInfo.get("timestamp")){a="Latest deploy: "+releaseInfo.get("version")+" - "+this.formatTimestamp(releaseInfo.get("timestamp"))}else{a="Latest deploy: "+releaseInfo.get("version")}}else{a="No Cloud Code deploys"}this.$el.html('<i class="icon_parseData"></i> '+_.escape(a))}return this},formatTimestamp:function(b){var a=moment(b);if(a&&a.isValid()){return a.format("dddd MMMM Do YYYY [at] h:mm:ssa (ZZ)")}else{return""}}});CloudCode.Views.ScriptList=Parse.View.extend({tagName:"ul",className:"script_list",initialize:function(){_.bindAll(this,"render");this.model.on("change:currentScriptSource",this.render);this.model.get("scriptSources").on("reset",this.render)},render:function(){var a=this.model.get("scriptSources");if(!_.isEmpty(a)){this.scriptList=a.pluck("name")}this.$el.html(JST["cloud_code/_script_list"]({scriptList:this.scriptList,selectedScript:this.model.get("currentScriptSource")}));this.$el.show();return this}});CloudCode.Views.ScriptSource=Parse.View.extend({className:"script_source",initialize:function(){_.bindAll(this);this.model=this.options.model;this.model.on("change:currentScriptSource",this.render);this.model.get("scriptSources").on("reset",this.render);this.model.on("change:scriptRequests",this.render)},render:function(){if(this.model.get("scriptRequests")===0){$(".content_spinner").hide();this.$el.show();var a=this.model.get("currentScriptSource");var b=this.model.get("scriptSources").getScriptSource(a);this.$el.html(JST["cloud_code/_script_source"]({scriptContents:b}));$(".cloud_title").text(a.substr(a.lastIndexOf("/")+1));SyntaxHighlighter.highlight()}else{this.$el.hide();$(".content_spinner").show().spin("large","#717171")}this.$el.css("max-width",($(window).width()-$("#cloud_code_browser .left").width())+"px");return this}});CloudCode.Views.ScriptsView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"script",initialize:function(){_.bindAll(this);this.scriptSourceView=new CloudCode.Views.ScriptSource({model:this.model});this.model.on("change:contentSelection",this.render);this.render()},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty().html('<div class="content_spinner"></div>').append(this.scriptSourceView.render().el);this.$(".ui_content_footer .ui_actions_right").empty();SyntaxHighlighter.highlight()}}});CloudCode.Views.TabBarView=Backbone.View.extend({el:"#cloud_code_tab_bar",lastSilentChange:null,initialize:function(){_.bindAll(this);this.tabBarView=new App.Views.SegmentControl({model:this.model,template:"cloud_code/_tab_bar",modelAttribute:"tabBarIndex"});this.model.on("change:tabBarIndex",this.tabItemSelected);this.model.on("change:contentSelection",this.contentSelectionChanged)},tabItemSelected:function(b,d){if(this.lastSilentChange!=d){var a=$(this.$("li")[d]).attr("data-tab");var e=this.model.get("schedulePagination").get("current_page");var c=this.model.get("statusPagination").get("current_page");if(a==="jobs"&&e>1){a+="/page/"+e}else{if(a==="job_status"&&c>1){a+="/page/"+c}}Parse.history.navigate(a,{trigger:true});return false}},contentSelectionChanged:function(b,c){var a=this.$("li[data-tab='"+c+"']").index();this.model.set("tabBarIndex",a,{silent:true});this.lastSilentChange=a},render:function(){this.$el.html(this.tabBarView.render().$el)}});CloudCode.Views.DDView=Backbone.View.extend({events:{"click .field_dropdown_expanded .dd_row":"rowSelected",click:"openMenu"},open:false,initialize:function(){var a=this;_.bindAll(this);this.disabled=this.options.disabled||false;this.rowViews=[];this.rowCollection=this.options.rowCollection;this.rowCollection.each(function(c){var d=CloudCode.Views[c.get("type")];if(!_.isUndefined(d)){var b=new d({model:c});a.rowViews.push(b)}});if(this.rowCollection.where({selected:true}).length===0){this.rowCollection.at(0).set("selected",true)}this.rowCollection.on("change:selected",function(b,c){if(c){a.renderSelectedRow()}});this.model.on("change:openedDropdown",function(b){if(a.model.get("openedDropdown")!==a.rowCollection){a.closeMenu()}});$("body").click(function(b){a.closeMenu(b)})},closeMenu:function(a){this.$(".field_dropdown_expanded").hide();this.open=false},openMenu:function(a){if(!this.disabled){this.$(".field_dropdown_expanded").show();this.open=true;this.model.set("openedDropdown",this.rowCollection)}a.stopPropagation()},rowSelected:function(b){var a=$(b.target).closest(".dd_row").index();this.rowCollection.each(function(c){if(c.get("selected")===true){c.set("selected",false)}});this.rowCollection.at(a).set("selected",true);this.closeMenu(b);return false},render:function(){var a=this;this.$el.append("<div class='field_dropdown_expanded'></div>");_(this.rowViews).each(function(b){a.$(".field_dropdown_expanded").append(b.render().$el)});this.renderSelectedRow();return this},renderSelectedRow:function(b){if(this.$(".selected_row").length<=0){this.$el.prepend("<div class='selected_row'></div>")}if(this.selectedRowView){this.selectedRowView.remove()}var a=b||this.currentlySelectedRow();var c=CloudCode.Views[a.get("type")];this.selectedRowView=new c({model:a});this.$(".selected_row").html(this.selectedRowView.render().$el);if(this.disabled){this.$el.addClass("disabled")}},currentlySelectedRow:function(){var a;this.rowCollection.each(function(b){if(b.get("selected")===true){a=b;return}});if(!a){return this.rowCollection.at(0).set("selected",0)}else{return a}}});CloudCode.Views.DDStringRow=Backbone.View.extend({className:"dd_string_row dd_row",initialize:function(){_.bindAll(this);this.model.on("change:selected",this.renderSelected)},render:function(){this.$el.html("<div class='icon_checkmark'></div><label>"+this.model.get("string")+"</label>");this.$el.append("<div class='dd_row_overlay'></div>");this.renderSelected();return this},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.DDDateTimeRow=Backbone.View.extend({className:"dd_date_time_row dd_row",events:{"click .time, .date":"stopEventPropagation","change input.date":"setSelectedDate","change select.hour, select.minute":"setSelectedDate"},dateFormat:"MMMM DD, YYYY",initialize:function(){_.bindAll(this);var b=new Date();var a=new Date();a.setDate(b.getDate()+1);this.dateTimeEditor=new App.Views.Editors.Date({defaultEmpty:false,preventPast:true,dateFormat:this.dateFormat,defaultDate:a});if(!this.model.get("date")){this.model.set("date",moment().add("d",1).hours(0).minutes(0))}this.model.on("change:date",this.renderDate);this.model.on("change:selected",this.renderSelected)},stopEventPropagation:function(a){a.stopPropagation()},setSelectedDate:function(c){var b=$.datepicker.parseDate(this.dateFormat,this.$("input.hasDatepicker").val());var a=moment().utc().month(b.getMonth()).date(b.getDate()).hours(this.$(".time_picker_content .hour").val()).minutes(this.$(".time_picker_content .minute").val());this.model.set("date",a)},render:function(){this.$el.html("<div class='icon_checkmark'>");this.$el.append(this.dateTimeEditor.render().$el);this.$el.append("<div class='dd_row_overlay'></div>");this.renderDate();this.renderSelected();return this},renderDate:function(){var a=this.model.get("date");var b=new Date();b.setDate(a.date());b.setMonth(a.month());b.setHours(a.hours());b.setMinutes(a.minutes());this.$("input.hasDatepicker").datepicker("setDate",b);this.$(".time_picker_content .hour").val(CloudCode.Models.JobSchedule.twoDigitFormat(a.hours()));this.$(".time_picker_content .minute").val(CloudCode.Models.JobSchedule.twoDigitFormat(a.minutes()));this.dateTimeEditor.updateTime()},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.DDDayIntervalRow=Backbone.View.extend({className:"dd_day_interval_row dd_row",events:{"click .time":"stopEventPropagation","change select.hour, select.minute":"setSelectedTime"},dateFormat:"MM dd, yy",initialize:function(){_.bindAll(this);var b=new Date();var a=new Date();a.setDate(b.getDate()+1);this.dateTimeEditor=new App.Views.Editors.Date({defaultEmpty:false,disableDate:true,datePickerOptions:{minDate:b,defaultDate:a,dateFormat:this.dateFormat}});if(!this.model.get("timeMins")||!this.model.get("timeHours")){this.model.set("timeMins","00");this.model.set("timeHours","00")}this.model.on("change:timeHours",this.renderTime);this.model.on("change:timeMins",this.renderTime);this.model.on("change:selected",this.renderSelected)},setSelectedTime:function(){var b=this.$(".time_picker_content .hour").val();var a=this.$(".time_picker_content .minute").val();this.model.set("timeHours",b,{silent:true});this.model.set("timeMins",a)},stopEventPropagation:function(a){a.stopPropagation()},render:function(){this.$el.html("<div class='icon_checkmark'></div><label>Every day at</label>");this.$el.append(this.dateTimeEditor.render().$el);this.$el.append("<div class='dd_row_overlay'></div>");this.renderTime();this.renderSelected();return this},renderTime:function(){var b=this.model.get("timeHours");var a=this.model.get("timeMins");this.$(".time_picker_content .hour").val(b);this.$(".time_picker_content .minute").val(a);this.dateTimeEditor.updateTime()},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.DDHourIntervalRow=Backbone.View.extend({className:"dd_hour_interval_row dd_row",events:{"click .time":"stopEventPropagation","change select.hour, select.minute":"setSelectedTime","change select.time_quantity":"setSelectedInterval","change select.time_unit":"setSelectedInterval"},dateFormat:"MM dd, yy",initialize:function(){_.bindAll(this);var b=new Date();var a=new Date();a.setDate(b.getDate()+1);this.dateTimeEditor=new App.Views.Editors.Date({defaultEmpty:false,disableDate:true,datePickerOptions:{minDate:b,defaultDate:a,dateFormat:this.dateFormat,}});if(_.isUndefined(this.model.get("timeMins"))||_.isUndefined(this.model.get("timeHours"))||_.isUndefined(this.model.get("interval"))||_.isUndefined(this.model.get("intervalUnit"))){this.model.set("timeMins","00");this.model.set("timeHours","00");this.model.set("interval","15");this.model.set("intervalUnit","mins")}this.model.on("change:interval",this.renderIntervalSelectorValues);this.model.on("change:intervalUnit",this.renderIntervalSelector);this.model.on("change:timeHours",this.renderTime);this.model.on("change:timeMins",this.renderTime);this.model.on("change:selected",this.renderSelected)},stopEventPropagation:function(a){a.stopPropagation()},setSelectedTime:function(){var b=this.$(".time_picker_content .hour").val();var a=this.$(".time_picker_content .minute").val();this.model.set("timeHours",b,{silent:true});this.model.set("timeMins",a)},setSelectedInterval:function(){var a=this.$(".interval_selector .time_quantity").val();var b=this.$(".interval_selector .time_unit").val();this.model.set("interval",a,{silent:true});this.model.set("intervalUnit",b)},render:function(){this.$el.html("<div class='icon_checkmark'></div><label>Every</label>");this.$el.append("<div class='interval_selector'></div>");this.renderIntervalSelector();this.$el.append("<label class='subtext'>every day after</label>");this.$el.append(this.dateTimeEditor.render().$el);this.renderTime();this.renderSelected();this.$el.append("<div class='dd_row_overlay'></div>");return this},renderTime:function(){var b=this.model.get("timeHours");var a=this.model.get("timeMins");this.$(".time_picker_content .hour").val(b);this.$(".time_picker_content .minute").val(a);this.dateTimeEditor.updateTime()},renderIntervalSelector:function(){this.$(".interval_selector").html(JST["cloud_jobs/_interval_selector"]({type:this.model.get("intervalUnit"),num:this.model.get("interval")}));this.renderIntervalSelectorValues()},renderIntervalSelectorValues:function(){this.$(".interval_selector .time_quantity").val(this.model.get("interval"));this.$(".interval_selector .time_unit").val(this.model.get("intervalUnit"))},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.JobArea=Backbone.View.extend({events:{"focus textarea":"renderFocus","blur textarea":"renderBlur","click .placeholder_span":"delegateClickEvent","change textarea":"updateValue"},initialize:function(){_.bindAll(this)},delegateClickEvent:function(a){this.$("textarea").focus()},updateValue:function(a){this.model.set("params",this.$("textarea").val())},renderFocus:function(a){this.$(".placeholder_span").hide();$(this.$el.closest(".field_row")[0]).css("height","115px");this.$("textarea").css("height","100px");$(".field_param").addClass("focused")},renderBlur:function(a){if(this.$("textarea").val().trim().length===0){this.$(".placeholder_span").show()}else{this.$(".placeholder_span").hide()}$(this.$el.closest(".field_row")[0]).css("height","");this.$("textarea").css("height","");$(".field_param").removeClass("focused")},render:function(){var a=this.$("textarea").attr("placeholder");this.$("textarea").attr("placeholder","");this.$el.append("<span class='placeholder_span'>"+a+"</span>");if(this.model.get("params")){this.$("textarea").val(this.model.get("params"));this.$(".placeholder_span").hide()}return this}});CloudCode.Views.JobForm=Backbone.View.extend({events:{"click .submit_button":"submitForm","focus .job_description, .field_param textarea":"removeInvalid","click .chzn-single":"removeInvalid"},initialize:function(){if(this.options.updateForm){this.model.set("existed",true)}this.jobSelectView=new CloudCode.Views.JobSelect({el:".field_function",model:model,jobs:this.options.jobsArray,jobsInUse:this.options.jobsInUse});this.jobParamsView=new CloudCode.Views.JobArea({el:".field_param",model:model});this.model.set("startCollection",new Backbone.Collection([{type:"DDStringRow",string:"Start Immediately"},{type:"DDDateTimeRow"}]));this.startDropdownView=new CloudCode.Views.DDView({el:".start_field",model:model,rowCollection:model.get("startCollection"),disabled:this.options.updateForm});this.model.set("repeatCollection",new Backbone.Collection([{type:"DDStringRow",string:"Don't Repeat"},{type:"DDDayIntervalRow"},{type:"DDHourIntervalRow"}]));this.repeatDropdownView=new CloudCode.Views.DDView({el:".repeat_field",model:model,rowCollection:model.get("repeatCollection")})},render:function(){this.jobSelectView.render();this.jobParamsView.render();this.startDropdownView.render();this.repeatDropdownView.render()},submitForm:function(){var a=this;var c=true;if($(".job_description").val().trim().length<=0){$(".job_description").addClass("invalid");c=false}if($(".field_function select").val().trim().length<=0){$(".field_function").addClass("invalid");c=false}var f=$(".field_param textarea").val();if(f.length>0){var b;try{b=$.parseJSON(f)}catch(d){}if(!b){$(".field_param").addClass("invalid");c=false}}if(!c){return false}this.model.save({success:function(){window.location=App.currentApp.dataRequestUrl()+"cloud_code/jobs"},error:function(){a.$(".submit_button").spin(false).html("Failed!")}});this.$(".submit_button").empty().spin("xsmall","#fff")},removeInvalid:function(a){$(".invalid").removeClass("invalid")}});CloudCode.Models.JobSchedule=Backbone.Model.extend({initialize:function(){this.on("change:startCollection",this.setStartCollectionDefaults);this.on("change:repeatCollection",this.setRepeatCollectionDefaults)},save:function(b){var a,c;if(this.get("existed")){a=App.currentApp.dataRequestUrl()+"cloud_code/jobs/"+this.get("objectId");c="put"}else{a=App.currentApp.dataRequestUrl()+"cloud_code/jobs";c="post"}var d=this.toJSON();$.ajax({url:a,type:c,data:{job_schedule:this.toJSON()}}).success(function(e){if(b.success){b.success()}}).error(function(h,e,f){if(b.error){b.error()}})},toJSON:function(){var a=this.extractRepeatValues();var b="{}";if(this.get("params")&&this.get("params").length>0){b=this.get("params")}return{description:$(".job_description").val(),jobName:this.get("jobName"),params:b,startAfter:this.extractStartAfterValue(),daysOfWeek:[1,1,1,1,1,1,1],timeOfDay:a.timeOfDay,repeatMinutes:a.repeatMinutes}},extractStartAfterValue:function(){var a=this.get("startCollection").where({selected:true})[0];if(a.get("date")){return a.get("date").toISOString()}},extractRepeatValues:function(){var c=this.get("repeatCollection").where({selected:true})[0];if(_.isUndefined(c.get("timeHours"))||_.isUndefined(c.get("timeMins"))){return{}}else{var b=moment().utc().minutes(c.get("timeMins")).hours(c.get("timeHours")).toISOString();b=b.split("T")[1];var a=60*24;if(!_.isUndefined(c.get("interval"))&&!_.isUndefined(c.get("intervalUnit"))){if(c.get("intervalUnit")==="mins"){a=c.get("interval")}else{a=c.get("interval")*60}}return{timeOfDay:b,repeatMinutes:a}}},setStartCollectionDefaults:function(){if(this.get("startAfter")){var a=this.get("startCollection").at(1);a.set("date",moment(this.get("startAfter")).utc());a.set("selected",true)}},setRepeatCollectionDefaults:function(){var a=this.get("repeatMinutes");if(!_.isUndefined(a)){var b;if(a===60*24){b=this.get("repeatCollection").at(1)}else{b=this.get("repeatCollection").at(2);if(a<60){b.set("intervalUnit","mins");b.set("interval",a)}else{b.set("intervalUnit","hours");b.set("interval",a/60)}}b.set("selected",true);b.set("timeHours",CloudCode.Models.JobSchedule.twoDigitFormat(moment(this.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().hours()));b.set("timeMins",CloudCode.Models.JobSchedule.twoDigitFormat(moment(this.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().minutes()))}else{this.get("repeatCollection").at(0).set("selected",true)}}},{twoDigitFormat:function(a){if(a<10){return"0"+a}else{return(a).toString()}}});CloudCode.Views.JobSelect=Backbone.View.extend({events:{"focus .search-field .default":"renderFocus","blur .search-field .default":"renderBlur","change .chzn-done":"updateValue"},initialize:function(){_.bindAll(this);var a=this;this.jobs=this.options.jobs;this.jobsInUse=this.options.jobsInUse},updateValue:function(a){this.model.set("jobName",this.$("select").val())},renderFocus:function(a){if(this.$(".search-field .default").is(":visible")){$(".field_function").addClass("focused")}},renderBlur:function(a){$(".field_function").removeClass("focused")},render:function(){var a=this;_(this.jobs).each(function(c){var b="";if(a.model.get("jobName")===c){b="selected"}else{if(_(a.jobsInUse).indexOf(c)>=0){b="disabled"}}a.$("select").append("<option "+b+">"+c+"</option>")});this.$("select").chosen({no_results_text:"Oops, no jobs with that name",max_selected_options:1,disable_add_result:true,display_disabled_options:true})}});App.Collections.Apps=Backbone.Collection.extend({url:"/apps",model:App.Models.App});App.Collections.Collaborations=Backbone.Collection.extend({url:function(){return"/apps/"+encodeURIComponent(this.appId)+"/collaborations"},model:App.Models.Collaboration});App.Collections.Constraints=Backbone.Collection.extend({},{Ops:{String:{equals:{op:"equalTo",editor:App.Views.Editors.SingleLineString},"does not equal":{op:"notEqualTo",editor:App.Views.Editors.SingleLineString},"starts with":{op:"startsWith",editor:App.Views.Editors.SingleLineString},"is one of":{op:"containedIn",editor:App.Views.Editors.ChosenArray},"is not one of":{op:"notContainedIn",editor:App.Views.Editors.ChosenArray},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Number:{equals:{op:"equalTo",editor:App.Views.Editors.Number},"does not equal":{op:"notEqualTo",editor:App.Views.Editors.Number},"less than":{op:"lessThan",editor:App.Views.Editors.Number},"greater than":{op:"greaterThan",editor:App.Views.Editors.Number},"less than or equal to":{op:"lessThanOrEqualTo",editor:App.Views.Editors.Number},"greater than or equal to":{op:"greaterThanOrEqualTo",editor:App.Views.Editors.Number},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Boolean:{equals:{op:"equalTo",editor:App.Views.Editors.Boolean},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Date:{before:{op:"lessThanOrEqualTo",editor:App.Views.Editors.Date},after:{op:"greaterThanOrEqualTo",editor:App.Views.Editors.Date},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Array:{"contains one of":{op:"containedIn",editor:App.Views.Editors.ChosenArray},"does not contain any of":{op:"notContainedIn",editor:App.Views.Editors.ChosenArray},"contains string":{op:"equalTo",editor:App.Views.Editors.SingleLineString},"does not contain string":{op:"notEqualTo",editor:App.Views.Editors.SingleLineString},"contains number":{op:"equalTo",editor:App.Views.Editors.Number},"does not contain number":{op:"notEqualTo",editor:App.Views.Editors.Number},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},File:{},GeoPoint:{},Object:{},Bytes:{},Pointer:{equals:{op:"equalTo",editor:App.Views.Editors.Pointer},"does not equal":{op:"notEqualTo",editor:App.Views.Editors.Pointer},"is one of":{op:"containedIn",editor:App.Views.Editors.ChosenArray},"is not one of":{op:"notContainedIn",editor:App.Views.Editors.ChosenArray},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Relation:{}},addConstraintsToQuery:function(c,b,a){_(c.models).each(function(j){var h=j.get("field");var d=a.typeForQuery(h);var f=j.get("op");var k=App.Collections.Constraints.Ops[d][f].op;var e=j.get("value");if(_.isUndefined(e)){b[k].call(b,h)}else{b[k].call(b,h,e)}})}});App.Models.Datepicker=Backbone.Model.extend({defaults:{value:new Date(),monthOffset:0,minDate:null,maxDate:null,changeHandler:function(){}},initialize:function(){this.on("change:minDate change:maxDate",this.placeWithinBounds);var a=new Date();var b=this.get("value");if(b.getMonth()!=a.getMonth()){this.set("monthOffset",(b.getFullYear()-a.getFullYear())*12+b.getMonth()-a.getMonth())}},validate:function(b,a){if(b.minDate&&b.maxDate){if(b.minDate>b.maxDate){return"min bound can't be greater than max bound"}}},placeWithinBounds:function(){if(this.get("minDate")&&this.get("value")<this.get("minDate")){this.set("value",new Date(this.get("minDate")))}if(this.get("maxDate")&&this.get("value")>this.get("maxDate")){this.set("value",new Date(this.get("maxDate")))}}});App.Views.Datepicker=Backbone.View.extend({events:{"click .ui_dateprev":"decrementMonth","click .ui_datenext":"incrementMonth","change input.ui_dateinput":"parseValue","focus input.ui_dateinput":"show","click input.ui_dateinput":"show","change .ui_dateselector input[type=radio]":"setDate"},open:false,hideOnChange:false,stringFormat:"YYYY-MM-DD",initialize:function(){_.bindAll(this);var a=this;if(!this.model){this.model=new App.Models.Datepicker({changeHandler:this.options.changeHandler||function(){},value:this.options.initialValue||new Date()})}if(this.options.stringFormat){this.stringFormat=this.options.stringFormat}this.name=this.options.name||"date";this.hideOnChange=!!this.options.hideOnChange;this.$el.addClass("ui_datepicker");this.render();this.model.on("change:monthOffset",this.render);this.model.on("change:value",this.render);$("body").mousedown(function(c){var b=$(c.target);if(b.closest(".ui_datepicker")[0]!=a.el&&a.open){a.hide()}})},render:function(){var b=new Date();var h=this.model.get("monthOffset");var e=new Date(b.getFullYear(),b.getMonth()+h);var a="start_"+e.getDay();var j=new Date(e.getYear(),e.getMonth()+1,0).getDate();var c=moment(e).format("MMMM YYYY");var f=this.model.get("value");var d=-1;if(e.getFullYear()===f.getFullYear()&&e.getMonth()===f.getMonth()){d=f.getDate()}this.$el.html(JST["components/_datepicker"]({name:this.name,open:this.open,startClass:a,days:j,headerString:c,currentDay:b.getDate(),monthOffset:h,displayValue:moment(f).format(this.stringFormat),selected:d,preventFuture:!!this.options.preventFuture,drawer:!!this.options.secondaryComponent}));if(this.options.secondaryComponent){this.options.secondaryComponent.setElement(this.$el.find(".ui_datedrawer"));this.options.secondaryComponent.render()}},show:function(){this.open=true;this.$el.find(".ui_dateinput").addClass("editing");this.$el.find(".ui_datepopup").show()},hide:function(){this.open=false;this.$el.find(".ui_dateinput").removeClass("editing");this.$el.find(".ui_datepopup").hide()},setFormat:function(a){this.stringFormat=a;this.$el.children("input[type=text]").val(moment(this.model.get("value")).format(a))},incrementMonth:function(){this.model.set("monthOffset",this.model.get("monthOffset")+1);return false},decrementMonth:function(){this.model.set("monthOffset",this.model.get("monthOffset")-1);return false},parseValue:function(d){var a=moment(d.target.value);if(a.isValid()){a.second(0).minute(0).hour(0);var c=new Date();var b=a.toDate();if(!(this.options.preventFuture&&b>c)){var f=(b.getFullYear()-c.getFullYear())*12+b.getMonth()-c.getMonth();this.model.set({value:b,monthOffset:f});this.model.get("changeHandler")(b)}}d.target.value=moment(this.model.get("value")).format(this.stringFormat)},setDate:function(c){var a=new Date();var b=new Date(a.getFullYear(),a.getMonth()+this.model.get("monthOffset"),parseInt(c.target.value,10));this.$el.children("input[type=text]").val(moment(b).format(this.stringFormat));this.model.set("value",b,{silent:true});if(this.hideOnChange){this.hide()}this.model.get("changeHandler")(b)}});App.Models.Dropdown=Backbone.Model.extend({defaults:{options:[],values:{},value:null,changeFunction:null},initialize:function(){_.bindAll(this);this.on("change:value",this.triggerChange);if(this.get("value")===null){var a=this.get("values")[this.get("options")[0]]||this.get("options")[0];this.set("value",a)}},triggerChange:function(a,b){if(this.get("changeFunction")){if(this.get("values")[b]!==undefined){this.get("changeFunction")(this.get("values")[b])}else{this.get("changeFunction")(b)}}}});App.Views.Dropdown=Backbone.View.extend({events:{"change input":"updateValue"},initialize:function(){_.bindAll(this);this.render()},render:function(){this.$el.empty();this.$el.attr("tabindex","-1");var c=this.model.get("options");var b=this.model.get("values");var f=this.model.get("value");if(this.model.get("defaultOption")){this.$el.append(JST["components/_dropdown"]({name:this.model.get("name"),id:this.model.get("id")+"[-1]",text:this.model.get("defaultOption"),value:"",checked:(c.length===0)}))}for(var e=0,a=c.length;e<a;e++){var h=(b[c[e]]===undefined?c[e]:b[c[e]]);var d=JST["components/_dropdown"]({name:this.model.get("name"),id:this.model.get("id")+"["+e+"]",value:c[e],text:c[e],checked:(f===h)});this.$el.append(d)}},updateValue:function(){var a=this.$el.find("input:checked").val()||null;this.model.set("value",a)}});App.Views.Toggle=Backbone.View.extend({events:{"change input":"changeHandler"},initialize:function(){_.bindAll(this)},render:function(){var a=this.options.values||["on","off"];this.$el.html(JST["components/_toggle"]({name:this.options.name||"toggle",values:a,labels:this.options.labels||a,selection:this.options.selection||a[0]}))},setSelection:function(b){var a=this.options.values.indexOf(b);if(a>-1){this.$el.find("input").eq(a).prop("checked",true)}},changeHandler:function(a){if(this.options.changeHandler){this.options.changeHandler(a.target.value)}}});App.Views.WebBugForm=Backbone.View.extend({events:{click:"launchModal"},initialize:function(){_.bindAll(this)},launchModal:function(){this.dialog=new App.Views.Modal({title:"Report a Web Bug!",template:"components/_web_bug_form",klass:"ui_web_bug"});this.dialog.render();this.dialog.$el.on("change","input, textarea",this.updateMailto);this.updateMailto();return false},updateMailto:function(){var c=encodeURIComponent(this.dialog.$el.find(".task_title").val());var b=this.dialog.$el.find(".task_content").val()+"\n\n";b+="ENV: "+this.options.env+"\n\n";b+="UA: "+navigator.userAgent+"\n\n";b+="URL: "+window.location.host+"/"+window.location.pathname+window.location.hash+"\n\n";b=encodeURIComponent(b);var a="mailto:"+this.options.recipient+"@"+this.options.domain;a+="?subject="+c+"&body="+b;this.dialog.$el.find(".task_button").attr("href",a)}});var Param=Backbone.Model.extend({sync:function(c,b,a){a.url="config.json";if(c==="delete"){a.data=this._deletePayload()}return Backbone.sync("update",b,a)},toJSON:function(b){var a={};a[this.get("name")]=this.get("value");return{params:a}},type:function(){var a=this.get("value");return this._capitaliseFirstLetter(typeof a)},displayValue:function(){var a=this.get("value");if(typeof a==="string"){return _.escape(a)}return a},isNew:function(){return false},_deletePayload:function(){var a={};a[this.get("name")]={__op:"Delete"};return JSON.stringify({params:a})},_capitaliseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},});Param.createFromJSON=function(b,c){var a={name:b,value:c};return new Param(a,{appUrl:this.appUrl})};var DateParam=Param.extend({type:function(){return"Date"},toJSON:function(b){var a={};a[this.attributes.name]={__type:"Date",iso:this.get("value").toJSON()};return{params:a}},});DateParam.createFromJSON=function(b,c){var a={name:b,value:new Date(c.iso)};return new DateParam(a,{appUrl:this.appUrl})};var ObjectParam=Param.extend({displayValue:function(){return _.escape(JSON.stringify(this.get("value")))}});ObjectParam.createFromJSON=function(b,c){var a={name:b,value:c};return new ObjectParam(a,{appUrl:this.appUrl})};var ArrayParam=Param.extend({type:function(){return"Array"},displayValue:function(){return _.escape(JSON.stringify(this.get("value")))},});ArrayParam.createFromJSON=function(b,c){var a={name:b,value:c};return new ArrayParam(a,{appUrl:this.appUrl})};var GeoPointParam=Param.extend({type:function(){return"GeoPoint"},toJSON:function(b){var a={};var c=this.get("value");a[this.get("name")]={__type:"GeoPoint",latitude:c.latitude,longitude:c.longitude};return{params:a}},displayValue:function(){var a=this.get("value");return["(",a.latitude,", ",a.longitude,")"].join("")},});GeoPointParam.createFromJSON=function(b,c){var a={name:b,value:c};return new GeoPointParam(a,{appUrl:this.appUrl})};var FileParam=Param.extend({type:function(){return"File"},toJSON:function(c){var a={};var b=this.get("value").lastIndexOf("/");a[this.get("name")]={__type:"File",url:this.get("value"),name:this.get("value").substr(b+1)};return{params:a}},displayValue:function(){var b=this.get("value");var a=_.escape(decodeURIComponent(UI.FileEditor.getFilenameFromPath(b)));return'<a href="'+b+'" target="_blank">'+a+"</a>"}});FileParam.createFromJSON=function(b,c){var a={name:b,value:c.url};return new FileParam(a,{appUrl:this.appUrl})};var Config=Backbone.Collection.extend({initialize:function(b,a){this.model=Param;this.appUrl=a.appUrl;this.applicationId=a.applicationId;this.restKey=a.restKey;this.serverURL=a.serverURL},model:Param,url:function(){return this.appUrl+"config.json"},parse:function(a){var d=a.params;var f=[];var e;for(var b in d){var c=d[b];e=Config.getTypeFromJSON(c);f.push(e.createFromJSON(b,c))}return f},search:function(b){if(!b.length){return this}try{var a=new RegExp(b,"i");return _(this.filter(function(d){return a.test(d.get("name"))}))}catch(c){}return this},comparator:function(a){return a.get("name").toUpperCase()},});Config.getTypeFromJSON=function(a){if(a.__type){return Config.complexTypes[a.__type]}else{if(Array.isArray(a)){return ArrayParam}else{if(typeof a==="object"){return ObjectParam}}}return Param};Config.getType=function(a){return Config.complexTypes[a]||Param};Config.complexTypes={Array:ArrayParam,Date:DateParam,GeoPoint:GeoPointParam,Object:ObjectParam,File:FileParam,};var ParamModal=function(a){this.config=a};ParamModal.prototype.setValueEditor=function(a){if(this.currValueEditor){this.currValueEditor.remove()}this.currValueEditor=a.attach(document.getElementById("param_value_wrapper"))};ParamModal.prototype.render=function(f){var c=this;var e=!!f;var b=false;var d=function(){c.setPendingRequest(false);c.modalPromise.resolve()};var a=function(m,j,l){var k=JSON.parse(j.responseText||"{}");if(k.code===105&&k.message.match(/invalid field name/)){k.message="Name must start with a letter and contain only letters, digits and underscores."}c.showError(k.message||"unknown error");c.setPendingRequest(false)};var h=function(l){if(!l.name){return{ok:false,message:"Parameter name cannot be empty."}}var k=c.typeDropdown.value;var m=ParamModal.editors.validator(k);var j=m(l.value);if(!j.ok&&!j.message){j.message="Invalid value for "+k+" type."}return j};this.modalPromise=new UI.Modal({klass:"config_modal",title:e?"Edit Parameter":"New Parameter",template:JST["config/_new_parameter_modal"]({updateParam:e}),keyboardSubmit:true,init:function(){var m=function(n){n.serverURL=c.config.serverURL;n.applicationId=c.config.applicationId;n.restKey=c.config.restKey;if(!n.onerror){n.onerror=c.showError.bind(c)}};var j=$(this.wrap).find(".modal_errors");c.showError=function(n){j.text(n).show();return c};c.paramNameEditor=new UI.StringEditor({parent:document.getElementById("param_name_wrapper"),placeholder:"Name",value:f?f.get("name"):"",disabled:!!f});c.paramNameEditor.focus();var k=f?f.type():"String";c.setValueEditor(ParamModal.editors.get(k));if(k==="File"){m(c.currValueEditor)}c.typeDropdown=new UI.Dropdown({optionSet:ParamModal.editors.supportedTypes(),name:"type_dropdown",value:k,disabled:!!f,parent:document.getElementById("type_dropdown_wrapper"),onChange:function(n){c.setValueEditor(ParamModal.editors.get(n));if(n==="File"){m(c.currValueEditor)}}});if(f){c.currValueEditor.value=f.get("value");if(f.type()!="Date"&&c.currValueEditor.focus){c.currValueEditor.focus()}$(this.wrap).find(".ui_delete_button").click(function(){if(b){return false}c.setPendingRequest(true);f.destroy({wait:true,success:d,error:a,});return false})}var l=$(this.wrap).find(".ui_delete_button, .confirm");c.setPendingRequest=function(n){b=n;l.toggleClass("disabled",n)}},footer:e?JST["config/_modal_footer"]():null,submit:function(){if(b){return false}c.setPendingRequest(true);var j={name:c.paramNameEditor.value,value:c.currValueEditor.value,};var l=h(j);if(!l.ok){c.showError(l.message);c.setPendingRequest(false);return false}var k={wait:true,success:d,error:a,};var n=c.config.where({name:j.name});if(n.length){if(e){n[0].save({value:j.value},k)}else{c.showError("Parameter already exists: "+j.name);c.setPendingRequest(false)}}else{var o=Config.getType(c.typeDropdown.value);var m=new o(j);c.config.create(m,k)}return false},});return false};ParamModal.editors=function(){var b=function(){return{ok:true}};var d=function(e){return{ok:e!==null}};var a=null;var c=function(){a=a||{Boolean:{editor:new UI.BooleanEditor(),},String:{editor:new UI.StringEditor({placeholder:"Value"}),},Number:{editor:new UI.NumberEditor({placeholder:"Value"}),validator:function(e){return{ok:typeof e==="number"&&!isNaN(e)&&isFinite(e)}},},Date:{editor:new UI.DateEditor({value:new Date()}),},Object:{editor:new UI.ObjectEditor({placeholder:"{}"}),validator:function(e){if(e===null){return{ok:false}}if(e.__type!==undefined){return{ok:false,message:"__type field is not allowed."}}return{ok:true}},},Array:{editor:new UI.ArrayEditor({placeholder:"[]"}),validator:d,},GeoPoint:{editor:new UI.GeopointEditor(),validator:function(e){return{ok:e!==null}},},File:{editor:new UI.FileEditor(),validator:function(e){return{ok:e!==null}}}};return a};return{supportedTypes:function(){return Object.keys(c())},get:function(f){var e=c()[f].editor;e.reset();return e},validator:function(e){return c()[e].validator||b},}}();var ParseConfigView=Backbone.View.extend({el:"#inner_wrapper",initialize:function(b,a){_.bindAll(this);this.app=new App.Models.App(b);this.config=new Config([],{appUrl:this.app.dataRequestUrl(),applicationId:b.key,restKey:b.rest_api_key,serverURL:a,});this.config.on("reset",this.renderConfig,this);this.config.on("add",this.onAdd,this);this.config.on("remove",this.renderConfig,this);this.renderSpinner();this.config.fetch()},events:{"click #new_param_button":"renderParamModal","keyup .search input":"filterRows"},renderSpinner:function(){$(".content_spinner").show().spin("large","#717171")},onAdd:function(a){this.renderTable(a)},renderConfig:function(){if(_.size(this.config)>0){this.renderTable()}else{this.$el.html(JST["config/_empty_config"]())}},renderTable:function(a){this.$el.html(JST["config/_config_table"]());this.config.each(function(b){this.renderParam(b,b===a)},this);return this},refreshRows:function(b){var a=this.config;if(b){a=a.search(b)}this.$el.find("table").find("tr:gt(0)").remove();a.each(this.renderParam)},renderParam:function(d,a){var c=new ParamView({model:d});var b=this.$el.find("table");b.append(c.render(a).$el);return this},renderParamModal:function(b){var a=new ParamModal(this.config);a.render();return false},filterRows:function(b){var a=b.target.value;this.refreshRows(a)}});var ParamView=Backbone.View.extend({tagName:"tr",events:{click:"rowClick",},initialize:function(){this.model.on("change",function(){this.render(true)},this)},render:function(a){var b=JST["config/_param_row"]({param:this.model});this.$el.html(b);if(a===true){this.$el.fadeIn(100).fadeOut(100).fadeIn(100)}return this},rowClick:function(b){if(b.target.nodeName==="A"){return true}var a=new ParamModal(this.model.collection);a.render(this.model)},});Analytics.Router=Parse.Router.extend({routes:{":navigation-:from-:to-:graphs":"show",":navigation":"navOnly","*string":"index"},tabValues:["area","bar"],initialize:function(a){_.bindAll(this);this.state=a.state;this.state.on("change:selectedNavigation",this.updateNavigation);this.state.on("change:fromDate change:toDate",this.updateDate);this.state.get("selectedSeries").on("add remove reset swap",this.updateGraphs)},navOnly:function(a){var b=_.findWhere(Analytics.GraphState.GraphNavigationOptions,{name:a});if(!b){return this.index()}return this.show(a,this.state.get("fromDate").getTime(),this.state.get("toDate").getTime(),"")},show:function(a,f,h,c){var k=this;this.navigation=a;this.from=f;this.to=h;var l=decodeURIComponent(c);this.graphs=l;this.state.set("selectedNavigation",a);this.state.set({fromDate:new Date(parseFloat(this.from)),toDate:new Date(parseFloat(this.to))});var e=this.state.getCurrentNavigationUIOptions();var d=[];if(e.requireSeries){if(l.length===0){this.state.addFirstAvailableSeries()}else{var j=l.split(",");for(var b=0;b<j.length;b++){if(!this.state.getSeriesOptionWithId(j[b])){return this.index()}}_.each(j,function(o,m,q){var n=k.state.get("seriesOptions").find(function(r){return r.get("seriesId")===o});d.push(n);k.state.addSelectedSeries(n)})}}ParseDotCom.Analytics.track("analytics_route_show",{series:d.toString()})},index:function(){this.state.set("selectedNavigation",Analytics.GraphState.GraphNavigationOptions[0].name);this.state.addFirstAvailableSeries();this.updateDate(false);this.updateGraphs(false);this.updateNavigation(true);ParseDotCom.Analytics.track("analytics_route_index")},updateNavigation:function(a){this.navigation=this.state.get("selectedNavigation");this.updateUrl(a)},updateDate:function(a){this.from=this.state.get("fromDate").valueOf();this.to=this.state.get("toDate").valueOf();this.updateUrl(a)},updateGraphs:function(b){var a=this;this.graphs="";this.state.get("selectedSeries").each(function(d,c,e){if(!d.has("seriesId")){return}a.graphs+=d.get("seriesId");if(c<e.length-1){a.graphs+=","}});this.updateUrl(b)},updateUrl:function(b){if(b){var a=(this.graphs&&this.graphs.length>0)?this.buildUrl():this.navigation;Parse.history.navigate(a,{replace:true})}},buildUrl:function(){return this.navigation+"-"+this.from+"-"+this.to+"-"+encodeURIComponent(this.graphs)}});App.Routers.Docs=Parse.Router.extend({routes:{":anchor/:platform":"show","*path":"show"},initialize:function(a){this.docsState=a.docsState},show:function(b,a){b=_.escape(b);a=_.escape(a);if(!b||!a){b="top";a="iOS"}this.docsState.setAnchor(b);this.docsState.set("currentPlatform",a)}});App.Routers.DocsSimple=Parse.Router.extend({routes:{":anchor/:platform":"show","*path":"show"},initialize:function(a){this.docsState=a.docsState},show:function(b,a){b=_.escape(b);a=_.escape(a);if(!b){b="top"}if(!a&&this.docsState.get("currentPlatform")){a=this.docsState.get("currentPlatform");window.location="#"+b+"/"+a}else{if(!a){a="iOS"}}this.docsState.setAnchor(b);this.docsState.set("currentPlatform",a)}});App.Routers.Signup=Parse.Router.extend({routes:{signup:"showSignup",oauthsignup:"oauthSignup"},initialize:function(a){this.signup_flow=a.signup_flow},showSignup:function(){this.signup_flow.set("stage",1)},oauthSignup:function(){this.signup_flow.set("stage",2);ParseDotCom.Analytics.track("Signed Up 2",{source:"OAuth"})}});App.Models.CrashReporting=Backbone.Model.extend({UNRESOLVED:0,RESOLVED:1,RESOLUTION_ERR:2,defaults:{crash:null,symbolicated:null,resolution:null,versions:{},platforms:[],symbolicationFilter:"",resolvedFilter:"",platformFilter:"",versionFilter:"",page:0,pageSize:10,indexRequestCount:0,},initialize:function(c){this.crashCache={};var b=c.buildVersions||{};this.set("platforms",[]);var d={};for(var a in b){var e=a.toLowerCase();this.get("platforms").push(e);d[e]=b[a]}this.set("versions",d)},fetchIndexData:function(b){var a=this;this.set("indexRequestCount",this.get("indexRequestCount")+1);var c={limit:this.get("pageSize")};if(this.get("symbolicationFilter")){c.symbolicated=this.get("symbolicationFilter")}if(this.get("resolvedFilter")){c.resolved=this.get("resolvedFilter")}if(this.get("platformFilter")){c.platform=this.get("platformFilter")}if(this.get("versionFilter")){c.version=this.get("versionFilter")}if(this.get("page")){c.skip=this.get("page")*this.get("pageSize")}return this.crashRequest("/query",c).then(function(e){for(var d=0;d<e.length;d++){a.crashCache[e[d].id]={counts:{occurrences:e[d].occurrences,installations:e[d].installations,firstSeen:e[d].firstSeen,platform:e[d].platform,version:e[d].version}}}return ParseDotCom.Promise.as(e,b)})},fetchCrashData:function(f){var l=this;var k=l.get("crash");var a=l.get("symbolicated");var b=this.crashCache[k]||{};var h=function(c,m){if(typeof l.crashCache[k]==="undefined"){l.crashCache[k]={}}l.crashCache[k][c]=m;f[c](m)};var d=function(c){};for(var j in f){if(b[j]){f[j](b[j])}else{var e=a?"symbolicated":"unsymbolicated";this.crashRequest("/"+e+"/"+k+"/"+j).then(h.bind(null,j),d.bind(this))}}},setResolution:function(a){if(a){this.set("resolution",this.RESOLVED);return}this.set("resolution",this.UNRESOLVED)},toggleCrashResolutionState:function(){var c=this;var e=c.get("crash");var d=c.get("resolution")==this.RESOLVED;var f=c.get("symbolicated");var a=this.crashCache[e].versions.versions;var b=[];for(i=0;i<a.length;i++){b.push({"parse:mid":e,"parse:appbuildversion":a[i].version,"parse:resolved":!d,})}c.crashRequest("/resolution",{mid_version_pairs:JSON.stringify(b)},"POST").then(function(){c.setResolution(c.get("resolution")===c.UNRESOLVED)},function(){c.set("resolution",c.RESOLUTION_ERR)})},crashRequest:function(d,e,b){var a="/apps/"+app.friendly_id+"/crashes"+d;var c=new ParseDotCom.Promise();$.ajax(a,{data:e,type:b||"GET",dataType:"json",success:function(f){c.resolve(f)},error:function(){c.reject()}});return c}});App.Routers.CrashReportingRouter=ParseDotCom.Router.extend({routes:{":symbolicated/:mid":"show",":symbolicated":"filter","*string":"index"},initialize:function(a){this.state=a.state;this.view=new App.Views.CrashReportingView({model:crashState,el:".dashboard_content"})},index:function(){this.state.set("crash",null);this.state.set("page",0);this.view.render()},filter:function(a){isSymbolicated=a==="symbolicated"?"true":"false";this.state.set("crash",null);this.state.set("page",0);this.view.symbolicationDropdown.value=isSymbolicated;this.state.set("symbolicationFilter",isSymbolicated)},show:function(b,a){b=b==="symbolicated";if(a.match(/^[\dA-Fa-f]+$/)){this.state.set("symbolicated",b);this.state.set("crash",a)}else{this.state.set("crash",null);this.state.set("page",0)}this.view.render()}});App.Views.CrashReportingView=Backbone.View.extend({events:{"click .crash_index_data tr":"selectCrash"},initialize:function(b){_.bindAll(this);var a=this;var d=document.getElementById("crash_filters");this.symbolicationDropdown=new UI.Dropdown({parent:d,name:"symbolication_filter",optionSet:["All Crash Types","Symbolicated","Unsymbolicated"],values:{"All Crash Types":"",Symbolicated:"true",Unsymbolicated:"false"},style:"grey",onChange:this.changeSymbolicationType.bind(this)});this.resolutionDropdown=new UI.Dropdown({parent:d,name:"resolution_filter",optionSet:["Unresolved","Resolved"],values:{Unresolved:"",Resolved:"true"},style:"grey",onChange:this.changeFilter.bind(this,"resolved")});this.platformDropdown=new UI.Dropdown({parent:d,name:"platform_filter",defaultOption:"All Platforms",optionSet:this.humanReadablePlatformTypes()||[],value:"",style:"grey",onChange:this.changeFilter.bind(this,"platform")});this.renderVersionFilter();document.getElementById("nav_crash_index").addEventListener("click",function(j){ParseDotCom.history.navigate(null,{trigger:true});j.preventDefault()});var h=document.getElementById("mark_resolved");h.addEventListener("click",function(j){if(UI.hasClass(h,"saving")||UI.hasClass(h,"waiting")){return false}UI.addClass(h,"saving");this.model.toggleCrashResolutionState();j.preventDefault()}.bind(this));this.emptyState=document.getElementById("empty_state");this.filteredEmptyState=document.getElementById("filtered_empty_state");this.model.on("change:resolution",this.updateResolutionButton);this.model.on("change:platformFilter",this.renderVersionFilter);this.model.on("change:symbolicationFilter change:resolvedFilter change:platformFilter change:versionFilter change:page",this.render);var e=document.getElementById("crash_splash_indicator");var c={crash:document.getElementById("crash_show"),index:document.getElementById("crash_index"),splash:document.getElementById("crash_splash"),};var f=function(j){_.each(c,function(k){k.style.display=(k===j)?"block":"none"})};this.divSwitcher={toCrash:function(){if(c.splash.style.display!="block"){return}f(c.crash)},toCrashLoading:function(){UI.addClass(e,"loading");f(c.splash)},toDataMissingError:function(){if(c.index.style.display=="block"){return}UI.removeClass(e,"loading");f(c.splash)},toIndex:function(){f(c.index)},};this.symbolNotification={};this.symbolNotification.ios=document.getElementById("ios_symbols_alert");this.symbolNotification.android=document.getElementById("android_symbols_alert");this.symbolNotification.ios.style.display="none";this.symbolNotification.android.style.display="none"},renderVersionFilter:function(){var a=document.getElementById("crash_filters");if(this.versionDropdown){a.removeChild(this.versionDropdown.node)}this.versionDropdown=new UI.Dropdown({parent:a,name:"version_filter",defaultOption:"All Versions",optionSet:this.model.get("versions")[this.model.get("platformFilter")]||[],value:"",style:"grey"+(this.model.get("platformFilter")===""?" disabled":""),onChange:this.changeFilter.bind(this,"version")});this.model.set("versionFilter","")},render:function(){if(this.model.get("crash")){this.divSwitcher.toCrashLoading();this.renderCrash()}else{this.divSwitcher.toIndex();this.renderIndex()}this.el.scrollTop=0},renderIndex:function(){var a=this;var c=window.location.pathname;if(c[c.length-1]!=="/"){c+="/"}var b=document.getElementById("crash_index").getElementsByTagName("tbody")[0];while(b.children.length>1){b.removeChild(b.lastChild)}b.parentNode.style.display="table";this.emptyState.style.display="none";this.filteredEmptyState.style.display="none";UI.addClass(b.parentNode,"loading");this.model.fetchIndexData(this.model.get("indexRequestCount")).then(function(f,j){if(this.isLatestRequest(j)){var h=document.createDocumentFragment();for(var e=0;e<f.length;e++){href=c+this.crashPath(f[e].id,f[e].symbolicated);var d=moment(f[e].firstSeen);h.appendChild(UI.tag("tr",{},[UI.tag("td",{},[UI.tag("a",{href:href,isSymbolicated:f[e].symbolicated,mid:f[e].id},[f[e].id.substr(0,8)])]),UI.tag("td",{},UI.prettyNumber(f[e].occurrences)),UI.tag("td",{},f[e].location),UI.tag("td",{},[UI.tag("div",{},d.format("MMM D")),UI.tag("div",{className:"time"},d.format("h:mma"))]),UI.tag("td",{},UI.prettyNumber(f[e].installations)),UI.tag("td",{},UI.createIcon(App.Views.CrashReportingView.PlatformIcons[f[e].platform])),UI.tag("td",{},f[e].resolved?UI.createIcon("checkmark"):""),]))}UI.removeClass(b.parentNode,"loading");if(f.length===0){b.parentNode.style.display="none";if(a.model.get("resolvedFilter")||a.model.get("platformFilter")||a.model.get("versionFilter")){a.emptyState.style.display="none";a.filteredEmptyState.style.display="block"}else{a.filteredEmptyState.style.display="none";a.emptyState.style.display="block"}}b.appendChild(h)}}.bind(this))},isLatestRequest:function(a){return this.model.get("indexRequestCount")===a+1},renderCrashCounts:function(c){Object.keys(this.symbolNotification).forEach(function(d){this.symbolNotification[d].style.display=(c.platform===d&&!this.model.get("symbolicated"))?"block":"none"}.bind(this));var b=document.getElementById("segment_counts");if(!b){return}document.getElementById("count_occurrences").textContent=UI.prettyNumber(c.occurrences);document.getElementById("count_installations").textContent=UI.prettyNumber(c.installations);document.getElementById("count_first_seen").textContent=moment(c.firstSeen).format("MMM D");var a=document.getElementById("count_platform");a.innerHTML="";a.appendChild(UI.createIcon(App.Views.CrashReportingView.PlatformIcons[c.platform]));UI.removeClass(b,"loading");if(c.installations===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderStackTraces:function(c){var b=document.getElementById("segment_stack_traces");var d=document.createDocumentFragment();for(var a=0;a<c.length;a++){new UI.StackTrace({title:c[a].title,parent:d,stack:c[a].stack})}b.innerHTML="";b.appendChild(d);UI.removeClass(b,"loading")},renderVersions:function(b){var a=document.getElementById("segment_crash_versions");a.children[1].innerHTML="";new UI.BarChart({segments:_.map(b.versions,function(c){return{label:c.version,value:c.count}}),showPercent:true,parent:a.children[1]});UI.removeClass(a,"loading");if(b.versions.length>0){this.model.setResolution(b.resolved)}if(b.versions.length===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderPlatforms:function(b){var c=App.Views.CrashReportingView;var a=document.getElementById("segment_crash_devices").children[0];if(a.children[1]){a.removeChild(a.children[1])}new UI.BarChart({segments:_.map(b,function(d){return{label:c.HumanReadableDeviceType(d.version),value:d.count}}),showPercent:false,parent:a});UI.removeClass(a.parentNode,"loading");if(b.length===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderOS:function(b){var a=document.getElementById("segment_crash_devices").children[1];if(a.children[1]){a.removeChild(a.children[1])}new UI.BarChart({segments:_.map(b,function(c){return{label:c.version,value:c.count}}),showPercent:false,parent:a});UI.removeClass(a.parentNode,"loading");if(b.length===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderCrash:function(){this.model.set("resolution",null);document.getElementById("crash_mid").innerHTML=this.model.get("crash");UI.addClass(document.getElementById("segment_counts"),"loading");UI.addClass(document.getElementById("segment_stack_traces"),"loading");UI.addClass(document.getElementById("segment_crash_versions"),"loading");UI.addClass(document.getElementById("segment_crash_devices"),"loading");this.model.fetchCrashData({counts:this.renderCrashCounts.bind(this),traces:this.renderStackTraces.bind(this),versions:this.renderVersions.bind(this),platforms:this.renderPlatforms.bind(this),os:this.renderOS.bind(this),})},changeSymbolicationType:function(a){if(a===""){ParseDotCom.history.navigate("",{trigger:false})}else{if(a==="true"){ParseDotCom.history.navigate("symbolicated",{trigger:false})}else{ParseDotCom.history.navigate("unsymbolicated",{trigger:false})}}this.changeFilter("symbolication",a)},resolutionButtonLoading:function(){var a=document.getElementById("mark_resolved");UI.addClass(a,"waiting");UI.removeClass(a,"pos");UI.removeClass(a,"neg")},changeFilter:function(b,a){a=a.toLowerCase();var c={page:0};c[b+"Filter"]=a;this.model.set(c)},updateResolutionButton:function(){if(this.model.get("resolution")===null){this.resolutionButtonLoading();return}var a=document.getElementById("mark_resolved");UI.removeClass(a,"waiting");UI.removeClass(a,"saving");if(this.model.get("resolution")==this.model.RESOLVED){UI.removeClass(a,"neg");UI.addClass(a,"pos")}else{if(this.model.get("resolution")==this.model.UNRESOLVED){UI.removeClass(a,"pos");UI.addClass(a,"neg")}else{UI.addClass(a,"err");setTimeout(function(){UI.removeClass(a,"err");UI.removeClass(a,"saving")},250)}}},selectCrash:function(c){var a=c.currentTarget.getElementsByTagName("a")[0];if(!a){return}if(c.metaKey){window.open(a.href)}else{var b=this.crashPath(a.mid,a.isSymbolicated);ParseDotCom.history.navigate(b,{trigger:true})}return false},crashPath:function(a,b){var c=b?"symbolicated":"unsymbolicated";return c+"/"+a},humanReadablePlatformTypes:function(){var d={};d.ios="iOS";d.android="Android";var b=[];for(var c=0;c<this.model.get("platforms").length;c++){var a=this.model.get("platforms")[c];if(a in d){b.push(d[a])}else{b.push(a)}}return b},},{PlatformIcons:{ios:"apple",android:"android"},HumanReadableDeviceType:function(a){var b=[{prefix:"iPhone",supports:function(c){return _.startsWith(c,this.prefix)},convert:function(e){var d=e.substring(this.prefix.length);var c={"1,1":"iPhone 1G","1,2":"iPhone 3G","2,1":"iPhone 3GS","3,1":"iPhone 4 (GSM)","3,2":"iPhone 4 (GSM)","3,3":"iPhone 4 (CDMA)","4,1":"iPhone 4S","5,1":"iPhone 5 (GSM)","5,2":"iPhone 5 (Global)","5,3":"iPhone 5C (GSM)","5,4":"iPhone 5C (Global)","6,1":"iPhone 5S (GSM)","6,2":"iPhone 5S (Global)","7,1":"iPhone 6+","7,2":"iPhone 6",};return(c[d]||e)}},{prefix:"iPod",supports:function(c){return _.startsWith(c,this.prefix)},convert:function(e){var d=e.substring(this.prefix.length);var c={"1,1":"iPod Touch 1G","2,1":"iPod Touch 2G","3,1":"iPod Touch 3G","4,1":"iPod Touch 4G","5,1":"iPod Touch 5G",};return(c[d]||e)}},{prefix:"iPad",supports:function(c){return _.startsWith(c,this.prefix)},convert:function(e){var d=e.substring(this.prefix.length);var c={"1,1":"iPad 1G","2,1":"iPad 2 (WiFi)","2,2":"iPad 2 (GSM)","2,3":"iPad 2 (CDMA)","2,4":"iPad 2 (WiFi)","2,5":"iPad Mini (WiFi)","2,6":"iPad Mini (GSM)","2,7":"iPad Mini (Global)","3,1":"iPad 3 (WiFi)","3,2":"iPad 3 (CDMA)","3,3":"iPad 3 (GSM)","3,4":"iPad 4 (WiFi)","3,5":"iPad 4 (GSM)","3,6":"iPad 4 (Global)","4,1":"iPad Air (WiFi)","4,2":"iPad Air (Cellular)","4,3":"iPad Air (China)","4,4":"iPad Mini 2G (WiFi)","4,5":"iPad Mini 2G (Cellular)","4,6":"iPad Mini 2G (China)","4,7":"iPad Mini 3G (WiFi)","4,8":"iPad Mini 3G (Cellular)","4,9":"iPad Mini 3G (China)","5,3":"iPad Air 2 (WiFi)","5,4":"iPad Air 2 (Cellular)",};return(c[d]||e)}},{supports:function(c){return(c==="i386"||c==="x86_64")},convert:function(c){return"Simulator"}},];b.every(function(e,d,f){if(e.supports(a)){var c=e.convert(a);if(c!=a){a=c;return false}}return true});return a}});var Docs={initialize:function(b){var c=new App.Models.Docs.State({accordian:b.accordian});new App.Views.Docs.Main({model:c});var f;if(b.navigationBar){f=App.Views.Docs.NavigationBar}else{if(b.simpleNavigationBar){f=App.Views.Docs.NavigationBarSimple}}if(f){var a=new f({model:c});$(".doc_columns.scrollable").before(a.$el)}if(b.toggle){new App.Views.Docs.Toggle({})}if(b.snippet){var e={};_.each(window.location.search.replace("?","").split("&"),function(h){e[h.split("=")[0]]=h.split("=")[1]});new App.Views.Docs.Snippet({apps:b.snippetApps,currentApp:b.snippetCurrentApp,currentLanguage:e.language,model:c})}var d;if(b.router){d=App.Routers.Docs}else{if(b.simpleRouter){d=App.Routers.DocsSimple}}if(d){new d({docsState:c});Parse.history.start()}}};(function(b){var a=window.Gridflow=function(d,c){this.queue=[];this.lastTime=null;this.parent=d;this.className=c;this.transformKey="transform";if("webkitTransform" in document.body.style){this.transformKey="webkitTransform"}this.calculateSizes();this.floatBlocks()};a.prototype={calculateSizes:function(){var d=this.parent.getElementsByClassName(this.className);var c;if(d.length===0){c=b.tag("div",{className:this.className,style:{position:"absolute",opacity:0}})}else{c=d[0]}this.blockWidth=c.offsetWith;this.blockOffsetLeft=parseInt(b.getStyle(c,"margin-left"),10);this.fullBlockWidth=c.offsetWidth+this.blockOffsetLeft+parseInt(b.getStyle(c,"margin-right"),10);this.blockHeight=c.offsetHeight;this.blockOffsetTop=parseInt(b.getStyle(c,"margin-top"),10);this.fullBlockHeight=c.offsetHeight+this.blockOffsetTop+parseInt(b.getStyle(c,"margin-bottom"),10);this.parentWidth=this.parent.offsetWidth},floatBlocks:function(){this.parent.style.height=this.parent.offsetHeight+"px";if(b.getStyle(this.parent,"position")==="static"){this.parent.style.position="relative"}var d=this.parent.getElementsByClassName(this.className);this.blocks=[];var c;for(c=0;c<d.length;c++){d[c].style.top=d[c].offsetTop+"px";d[c].style.left=d[c].offsetLeft+"px";this.blocks.push(d[c])}for(c=0;c<d.length;c++){d[c].style.margin="0";d[c].style.position="absolute"}},getDest:function(f,d){var h=Math.max(this.parentWidth/this.fullBlockWidth,1)|0;var k=(f/h)|0;var c=f%h+d;while(c>=h){c-=h;k++}while(c<0){c+=h;k--}var j=h;if(k>=(((this.blocks.length+d)/h)|0)){j=(this.blocks.length+d)%h}var e=(this.parentWidth-this.fullBlockWidth*j)/2;e+=this.fullBlockWidth*c;return({x:Math.round(e)+this.blockOffsetLeft,y:k*this.fullBlockHeight+this.blockOffsetTop})},shiftBlocks:function(h,c,e){for(var f=h;f<this.blocks.length;f++){var k={x:this.blocks[f].offsetLeft,y:this.blocks[f].offsetTop};var j=this.getDest(f,c);var m=Math.abs(j.x-k.x)/e;var l=Math.abs(j.y-k.y)/e;if((c>0&&j.y>k.y)||(c<0&&j.y<k.y)){this.blocks[f].style.zIndex=1}var d={el:this.blocks[f],dx:m,dy:l,dest:j,start:k,cb:this.complete.bind(this,j.y,j.x)};this.queue.push(d)}this.animate()},complete:function(e,d,c){c.style.cssText="position:absolute;margin:0;top:"+e+"px;left:"+d+"px;"},animate:function(){if(this.queue.length<1){this.lastTime=null;return}if(!this.lastTime){this.lastTime=new Date();requestAnimationFrame(this.animate.bind(this));return}var e=new Date()-this.lastTime;this.lastTime=new Date();for(var h=0;h<this.queue.length;h++){var f=this.queue[h].el;var j=this.queue[h].dest;var d=this.queue[h].start;if(!this.queue[h].delta){this.queue[h].delta={x:0,y:0}}var k=this.queue[h].delta;var m=this.queue[h].dx*e;var l=this.queue[h].dy*e;if(j.x<d.x+k.x){k.x-=m}else{k.x+=m}if(j.y<d.y+k.y){k.y-=l}else{k.y+=l}var c=true;if(Math.abs(d.x+k.x-j.x)<=m){k.x=j.x-d.x}else{c=false}if(Math.abs(d.y+k.y-j.y)<=l){k.y=j.y-d.y}else{c=false}f.style[this.transformKey]="translate3d("+k.x+"px,"+k.y+"px,0)";if(c){if(this.queue[h].cb){this.queue[h].cb(f)}this.queue.splice(h--,1)}}requestAnimationFrame(this.animate.bind(this))},resizeParent:function(){var c=Math.max(this.parentWidth/this.fullBlockWidth,1)|0;this.parent.style.height=this.fullBlockHeight*(((this.blocks.length-1)/c+1)|0)+"px"},insert:function(d){if(!b.hasClass(d,this.className)){return}var c=this.getDest(-1,1);this.shiftBlocks(0,1,300);this.parent.insertBefore(d,this.blocks[0]);d.style.top=c.y+"px";d.style.left=c.x+"px";d.style.margin=0;d.style.position="absolute";this.blocks.splice(0,0,d);this.resizeParent()},remove:function(d){var c=Math.max(this.parentWidth/this.fullBlockWidth,1)|0;this.parent.removeChild(this.blocks[d]);this.blocks.splice(d,1);this.shiftBlocks(0,0,300);this.resizeParent()}}})(UI);var Marketo={_devEnvironment:true,libraryLoaded:false,clientKey:"713-YFQ-084",associateLead:function(a){if(this._devEnvironment){return}this.load(function(){a=a||{};var c;if(App.currentUser){c={Email:a.Email||App.currentUser.get("email"),FirstName:a.FirstName||App.currentUser.firstName(),LastName:a.LastName||App.currentUser.lastName(),Company:a.Company||App.currentUser.get("company_name"),Company_Type__c:a.Company_Type__c||App.currentUser.get("company_type"),Title:a.Title||App.currentUser.get("title"),Sign_Up_Date__c:a.Sign_Up_Date__c||(new Date(App.currentUser.get("created_at"))).toJSON()}}else{if(_.keys(a).length>0){c=a}}if(typeof(c)!=="undefined"){if(a.Name){var d=App.Models.User.separateName(a.Name);a.FirstName=d.firstName||"";a.LastName=d.lastName||"";delete a.Name}if(a.Question){c.Sales_Form_Question__c=a.Question}var b;if(a.MarketoHash){b=a.MarketoHash;delete a.MarketoHash}else{b=App.currentUser.get("marketo_hash")}mktoMunchkin(this.clientKey);mktoMunchkinFunction("associateLead",c,b)}})},triggerEvent:function(a){if(this._devEnvironment){return}this.load(function(){mktoMunchkin(this.clientKey);mktoMunchkinFunction("clickLink",{href:"/MarketoEvents/"+a})})},load:function(a){if(!this.libraryLoaded){var b=this;this.libraryLoaded=true;$.ajax({url:document.location.protocol+"//munchkin.marketo.net/munchkin.js",dataType:"script",cache:true,success:function(){Munchkin.init(b.clientKey);a.apply(b)}})}else{a()}}};App.Models.Admin.App=App.Models.App.extend({dataRequestUrl:function(){return"/admin/apps/"+encodeURIComponent(this.id)+"/"}});App.Models.Docs.State=Backbone.Model.extend({defaults:{accordian:false,waypointsActive:true},setAnchor:function(b){var c=_.escape(b);var a=_.escape(b.match(/^[^\-]*/)[0]);this.set("currentMajorSection",a);if(a!==c){this.set("currentMinorSection",c)}else{this.set("currentMinorSection","")}}});var Parallax=(function(){var c=false;var a=false;var f=0;var e=[];var b=function(){f=document.body.scrollTop;if(!a){requestAnimationFrame(d)}a=true};var d=function(){for(var j=0,h=e.length;j<h;j++){e[j].el.style.backgroundPositionY=e[j].multiplier*f+"px"}a=false};return(function(h,j){e.push({el:h,multiplier:j});if(!c){window.addEventListener("scroll",b);c=true}})})();var PushDetailsAnalytics={initialize:function(a){var b=new Analytics.GraphState({app:a.app});new App.Views.Apps.PushDetailsAnalyticsView({model:b,pushId:a.pushId,analyticsStatus:a.analyticsStatus,fromDate:a.fromDate,toDate:a.toDate,pushHash:a.pushHash,experimentInfo:a.experimentInfo,analyticsV2:a.analyticsV2}).render();new PushConsole.Views.PushConsoleBeta({el:".launch_group",state:b}).render();new App.Routers.PushNotification({state:b});Parse.history.start()}};PushABConsole.Models.PushState=Backbone.Model.extend({defaults:{countReqs:0,target:0,targetedDevices:[],schema:null,constraints:null,recipientConstraintJson:"",recipientCount:null,isApproximate:false,experiment:false,audiencePercent:30,audienceSize:null,audienceSizeSuggestion:null,message:"",message2:"",format:"text",format2:"text",time:new Date(),time2:new Date(),experimentType:"message",doLocalPush:false,delivery:"now",expires:false,expireType:"time",},initialize:function(){var a=this;_.bindAll(this);this.set({constraints:new App.Collections.Constraints()});if(this.get("schema")){this.get("schema").fetch()}this.on("change:targetedDevices",this.updateRecipientsAndCount);this.on("change:target",this.updateRecipientsAndCount);this.on("change:recipientCount",this.updateAudienceSize);this.on("change:audiencePercent",this.updateAudienceSize);this.on("change:experiment",this.updateAudienceSizeSuggestion);this.updateRecipientsAndCount()},isEveryone:function(){return this.get("target")===PushConsole.Models.PushState.Target.EVERYONE},updateRecipientsAndCount:function(){var b=new Parse.Query("_Installation");if(!this.isEveryone()){var c=this.get("constraints");var a=this.get("schema");App.Collections.Constraints.addConstraintsToQuery(c,b,a);this.updateRecipients(b)}this.updateRecipientCount(b)},updateRecipients:function(c){var b=this.get("targetedDevices");if(b.length===0){this.set("recipientConstraintJson","")}else{var a=c.toJSON().where;this.set("recipientConstraintJson",JSON.stringify(a))}},updateRecipientCount:function(d){var b=this;var c="/apps/"+encodeURIComponent(this.get("app").id)+"/push_subscriber_count";var a=this.get("targetedDevices");if(this.isEveryone()){a=this.get("availableDevices")}var e={deviceTypes:a,where:this.makeCountJson(d),};this.set("countReqs",this.get("countReqs")+1);$.get(c,e,function(f){b.set("countReqs",b.get("countReqs")-1);b.set({recipientCount:f.count,isApproximate:f.approximate})}).error(function(){b.set("countReqs",b.get("countReqs")-1);b.unset("recipientCount");b.unset("isApproximate")})},updateAudienceSize:function(){if(this.get("recipientCount")!==null&&this.get("recipientCount")!==undefined){var a=(this.get("recipientCount")*this.get("audiencePercent")/100)|0;this.set("audienceSize",a)}else{this.unset("audienceSize")}},updateAudienceSizeSuggestion:function(c){if(!this.get("experiment")){return}var b="/apps/"+encodeURIComponent(this.get("app").id)+"/push_notifications/audience_size_suggestion";var a=this;$.get(b,{},function(d){a.set("audienceSizeSuggestion",d.audience_size)}).error(function(){a.unset("audienceSizeSuggestion")})},makeCountJson:function(c){var b="";var a=this.get("doLocalPush");var d=c.toJSON().where;if(a){if(d.timeZone&&d.timeZone instanceof Object&&d.timeZone.$exists===undefined){d.timeZone.$exists=true}else{if(d.timeZone===undefined){d.timeZone={"$exists":true}}}}b=JSON.stringify(d);return b},getErrors:function(){return _(this.get("constraints").models).chain().map(function(a){return a.get("error")}).filter(function(a){return a}).value()},hasError:function(){if(this.get("message")===""){return true}if(this.get("recipientCount")===0){return true}return !_.isEmpty(this.getErrors())}},{Target:{EVERYONE:0,SEGMENT:1}});PushConsole.Models.PushState=Backbone.Model.extend({defaults:{schema:null,constraints:null,target:0,message:"",message2:"",recipientConstraintJson:"",recipientCount:null,isApproximate:false,countReqs:0,format:"message",format2:"message",doLocalPush:false,beta:false},initialize:function(){var a=this;_.bindAll(this);this.set({displayIssues:new Backbone.Model(),displayIssues2:new Backbone.Model(),constraints:new App.Collections.Constraints()});if(this.get("schema")){this.get("schema").fetch()}},updateRecipientsAndCount:function(){var b=new Parse.Query("_Installation");if(!this.isEveryone()){var c=this.get("constraints");var a=this.get("schema");App.Collections.Constraints.addConstraintsToQuery(c,b,a)}this.updateRecipients(b);this.updateRecipientCount(b)},updateRecipients:function(c){var b=this.get("targetedDevices");if(b.length===0){this.set("recipientConstraintJson","")}else{var a=c.toJSON().where;this.set("recipientConstraintJson",JSON.stringify(a))}},updateRecipientCount:function(d){if(!this.get("beta")&&this.get("targetedDevices").length===0){this.set({recipientCount:0,isApproximate:false})}else{var b=this;var c="/apps/"+encodeURIComponent(this.get("app").id)+"/push_subscriber_count";var a=this.get("targetedDevices");if(this.get("beta")&&this.isEveryone()){a=this.get("availableDevices")}var e={deviceTypes:a,where:this.makeCountJson(d),};this.set("countReqs",this.get("countReqs")+1);$.get(c,e,function(f){b.set("countReqs",b.get("countReqs")-1);b.set({recipientCount:f.count,isApproximate:f.approximate})}).error(function(){b.set("countReqs",b.get("countReqs")-1);b.unset("recipientCount");b.unset("isApproximate")})}},makeCountJson:function(c){var b="";var a=this.get("doLocalPush");var d=c.toJSON().where;if(a){if(d.timeZone&&d.timeZone instanceof Object&&d.timeZone.$exists===undefined){d.timeZone.$exists=true}else{if(d.timeZone===undefined){d.timeZone={"$exists":true}}}}b=JSON.stringify(d);return b},makeDevicesQuery:function(a){if(a.length===1){return a[0]}else{return{"$in":a}}},isEveryone:function(){var a=this.get("target");return(a===PushConsole.Models.PushState.Target.EVERYONE)},getErrors:function(){return _(this.get("constraints").models).chain().map(function(a){return a.get("error")}).filter(function(a){return a}).value()},hasError:function(){if(this.get("message")===""){return true}if(this.get("recipientCount")===0){return true}return !_.isEmpty(this.getErrors())}},{Target:{EVERYONE:0,SEGMENT:1}});App.Views.Apps.PushDetailsAnalyticsView=Backbone.View.extend({el:".push_ui",events:{"click .launch":"launchExperiment","click .experiment_tooltip":"toggleExperimentTooltip","click .messageSelect":"updateMessageSelect"},initialize:function(){_.bindAll(this);this.model.set("analyticsStatus",this.options.analyticsStatus);this.$(".sending_date_advanced .date_field").datepicker({dateFormat:"MM d, yy",altFormat:"yy-mm-dd",altField:"#push_date",minDate:0,maxDate:14});this.$(".expiration_date_advanced .date_field").datepicker({dateFormat:"MM d, yy",altFormat:"yy-mm-dd",altField:"#expiration_date",minDate:0});this.model.on("change:pushSegmentIndex",this.renderSegmentToggled);this.segmentControlView=new App.Views.SegmentControl({model:this.model,template:"push_notifications/_segment_control",defaultIndex:0,modelAttribute:"pushSegmentIndex"});this.model.set("fromDate",new moment.unix(this.options.fromDate).toDate());this.model.set("toDate",new moment.unix(this.options.toDate).toDate());this.model.set("stride","hour");if(this.model.get("analyticsStatus")!=="scheduled"){this.graphView=new Analytics.Graph({model:this.model})}var b;if(this.model.get("analyticsStatus")==="show"){if(experimentInfo&&(experimentInfo.is_experiment||experimentInfo.is_launch)){if(experimentInfo.is_experiment){b=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_A.mongo_push_status_id});b.on("change:loading",this.renderLoading);this.model.addSelectedSeries(b);secondSeries=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_B.mongo_push_status_id});secondSeries.set("seriesId","second_series");secondSeries.on("change:loading",this.renderLoading);this.model.addSelectedSeries(secondSeries)}else{b=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_launch.mongo_push_status_id});b.on("change:loading",this.renderLoading);this.model.addSelectedSeries(b)}}else{if(this.options.analyticsV2){b=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:this.options.pushId})}else{b=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push",stride:"hour",push:this.options.pushHash})}b.on("change:loading",this.renderLoading);this.model.addSelectedSeries(b)}}var a=this.$("#push_stat_average_open_rate");a.spin();var c=this.model.get("baseUrl")+"push_notifications/"+this.options.pushId+"/average_open_rate";$.get(c,function(d){a.spin(false);if(d.rate){a.html(d.rate)}})},toggleExperimentTooltip:function(){this.$(".experiment_bubble").toggle()},render:function(){this.$(".content_type").html(this.segmentControlView.render().$el);this.$(".sending_date_advanced .date_field").datepicker({dateFormat:"MM d, yy",altFormat:"yy-mm-dd",altField:"#push_date",minDate:0,maxDate:14});this.$(".expiration_date_advanced .date_field").datepicker({dateFormat:"MM d, yy",altFormat:"yy-mm-dd",altField:"#expiration_date",minDate:0})},renderSegmentToggled:function(a,b){if(b===0){$(".details_content").hide();$(".analytics_content").show();if(this.model.get("analyticsStatus")==="scheduled"){$(".dashboard_toolbar").addClass("no_data")}}else{$(".details_content").show();$(".analytics_content").hide();$(".dashboard_toolbar").removeClass("no_data")}},launchExperiment:function(){this.$("#launch_form").submit()},updateMessageSelect:function(b){var a=$(b.target).attr("id");this.$(".messageSelect").removeClass("active");$(b.target).addClass("active");this.$(".messages").find(":hidden").val(this.$("#"+a+"_id").val())}},{GetDemoData:function(){var b=48;var e=[];for(var a=0;a<b;a++){var d=moment().minutes(0).seconds(0).milliseconds(0).add("h",a).valueOf();var c;if(a<=18){c=10000*Math.cos(0.2*a-(Math.PI/4))+4000*Math.PI}else{c=-120*Math.sqrt(15*a-15*17)+3200}e[a]=[d,Math.floor(c)]}return e}});App.Routers.PushNotification=Parse.Router.extend({routes:{":tab":"show","*tab":"defaultRoute"},tabValues:["analytics","details"],initialize:function(a){_.bindAll(this);this.state=a.state;this.eventsRegistered=false},registerEventHandlers:function(){if(!this.eventsRegistered){this.eventsRegistered=true;this.state.on("change:pushSegmentIndex",this.updateSegmentHash)}},show:function(b){var a=this.tabValues.indexOf(b);if(!b||a<0){a=0}this.state.set("pushSegmentIndex",a);this.registerEventHandlers()},defaultRoute:function(){this.updateSegmentHash();this.registerEventHandlers()},updateSegmentHash:function(){Parse.history.navigate(this.tabValues[this.state.get("pushSegmentIndex")])}});PushConsole.Routers.Router=Parse.Router.extend({initialize:function(a){this.state=a.state},routes:{segment:"segment","":"index"},segment:function(){this.state.set("target",PushConsole.Models.PushState.Target.SEGMENT)},index:function(){this.state.set("target",PushConsole.Models.PushState.Target.EVERYONE)}});PushConsole.Views.Constraint=App.Views.Constraint.extend({events:_.extend({},App.Views.Constraint.prototype.events,{commit:"setModel"}),selectField:function(){this.renderOp();return false},_updateEditor:function(d,b,e){this.unsetModel();var c=App.Collections.Constraints.Ops[b][e].editor;this.editorConstructor=c;if(c){var a=this.schema.key(d).type.className;this.editor=new c({className:a,defaultEmpty:true,shouldCommitWhenBlur:true});this.$(".constraint_value").empty().append(this.editor.$el);this.editor.loadDefaultValue()}else{this.$(".constraint_value").empty();this.editor=null}if(this.editor){this.editor.focusOrCommit()}else{this.setModel()}if(this.editorConstructor===App.Views.Editors.ChosenArray){this.editor.initializeChosen();this.addOptions(this.options.appId,d,this.editor)}},_opsForField:function(b){var a=_.clone(App.Collections.Constraints.Ops[b]);if(b==="Array"){Parse._each(a,function(d,c){if(d.editor!==App.Views.Editors.ChosenArray){delete a[c]}})}return a},addOptions:function(c,b,a){var d="/apps/"+encodeURIComponent(c)+"/installation_column_options";$.get(d,{column:b},function(f){var e=[];f.options=f.options.slice(0,1000);_(f.options).each(function(h){if(_.isString(h)){var j=_.escape(h);var k=(h===""&&b==="channels")?"Broadcast":j;e.push({value:j,option:k})}});a.addOptions(e)})}});PushConsole.Views.NewUserExperience=Backbone.View.extend({events:{"click .question_tip":"openNuxModal","click .next_button":"nextScreen","click .get_started":"closeModal"},open:false,initialize:function(){var a=this},render:function(){if(this.options.displayNUX){setTimeout(this.openNuxModal,2000)}},openNuxModal:function(){this.$("#recipients_spinner").hide();this.nuxModal=new App.Views.Modal({template:"push_notifications/_nux_modal",title:"Push A/B Testing",klass:"nuxModal"}).render();this.$(".nux_slides").slidesjs({pagination:{active:true,effect:"slide"}})},nextScreen:function(){$(".nuxModal .slidesjs-next").click()},closeModal:function(){$(".nuxModal .ui-corner-all").click()}});PushABConsole.Views.PushConsole=Backbone.View.extend({events:{"change #push_targeting":"updateAudienceSelect","change #push_enable_testing":"updateExperiment","change #device_selection":"updateDevices","change #test_selection":"updateExperimentType","change #push_time":"updateDeliveryTime","change #expiration_selection":"updateExpires","change #expiration_type":"updateExpires","change #local_delivery":"updateLocalDelivery","change .push_preview":"renderPreviewDevice","input #push_message textarea":"updateMessages","change #push_message input":"updateFormat","input #experiment_name":"validate","click #send_push":"submit",},initialize:function(){_.bindAll(this);this.state=this.options.state;this.deviceInputs=document.getElementById("device_selection").getElementsByTagName("input");this.targetQuery=document.getElementById("target_query");this.preview=document.getElementsByClassName("push_preview")[0];this.experimentSettings=document.getElementById("experiment_settings");this.experimentRows=this.experimentSettings.getElementsByClassName("ab_test_selection");this.messageElements=document.getElementsByClassName("ab_test_message");this.timeElements=document.getElementsByClassName("ab_test_time");this.standardMessageElements=document.getElementsByClassName("ab_test_standard_message");this.standardTimeElements=document.getElementsByClassName("ab_test_standard_time");this.scheduleElements=document.getElementsByClassName("scheduled_delivery");this.experimentName=document.getElementById("experiment_name");this.audienceSizeSelection=document.getElementById("audience_size_section");this.audienceSizeSuggestion=document.getElementById("test_audience_size_suggestion");this.audienceCountMessage=document.getElementById("audience_count_message");this.audienceCountUnavailable=document.getElementById("audience_count_unavailable");this.sendToRestMessage=document.getElementById("send_to_rest_message");this.submitButton=document.getElementById("send_push");this.pushErrors=document.getElementById("push_errors");this.counts=[document.getElementById("test_recipients_count")];this.percents=[];var b=document.getElementsByClassName("parameter_block");for(var a=0;a<b.length;a++){this.counts.push(b[a].getElementsByTagName("p")[0].getElementsByTagName("span")[0]);this.percents.push(b[a].getElementsByClassName("parameter_header")[0].getElementsByTagName("span")[0])}this.state.on("change:target",this.renderAudience);this.state.on("change:experiment",this.renderExperiment);this.state.on("change:experimentType",this.renderExperiment);this.state.on("change:targetedDevices",this.renderPreviews);this.state.on("change:delivery",this.renderScheduling);this.state.on("change:doLocalPush",this.renderScheduling);this.state.on("change:expires change:expireType change:doLocalPush",this.renderExpiration);this.state.on("change:message change:message2 change:format change:format2",this.renderMessagePreview);this.state.on("change:time change:time2",this.renderTimePreview);this.state.on("change:audiencePercent",this.renderSendToRestMessage);this.state.on("change:audienceSize",this.renderExperimentCounts);this.state.on("change:recipientConstraintJson",this.renderRecipientConstraintInput);this.state.on("change:recipientCount",this.renderAllCounts);this.state.on("change:audienceSize",this.renderAudienceSizeSuggestionText);this.state.on("change:audienceSizeSuggestion",this.renderAudienceSizeSuggestionText);this.state.on("change:recipientCount change:audiencePercent change:experiment change:experimentType change:message change:message2 change:format change:format2 change:time change:time2",this.validate);this.state.get("constraints").on("change remove",this.state.updateRecipientsAndCount);this.setupSlider();this.renderDates();this.renderPreviews();this.renderAllCounts()},validate:function(){var b="";var a=this.state.get("message").length>0;if(!a){b=b||"Your message cannot be empty"}if(this.state.get("format")==="json"){try{JSON.parse(this.state.get("message"))}catch(c){a=false;b=b||"Your message is not valid JSON"}}if(this.state.get("experiment")){if(this.state.get("recipientCount")*this.state.get("audiencePercent")/200<1){a=false;b=b||"You have no recipients for this campaign"}if(this.experimentName.value.length===0){a=false;b=b||"You must name this experiment"}if(this.state.get("experimentType")==="message"){if(this.state.get("message2").length===0){a=false;b=b||"Your message cannot be empty"}if(this.state.get("format2")==="json"){try{JSON.parse(this.state.get("message2"))}catch(c){a=false;b=b||"Your message is not valid JSON"}}}}else{if(this.state.get("recipientCount")===0){a=false;b=b||"You have no recipients for this campaign"}}this.pushErrors.textContent=b;this.pushErrors.style.display=a?"none":"block";UI.toggleClass(this.submitButton,"disabled",!a)},submit:function(){if(UI.hasClass(this.submitButton,"disabled")){return}document.getElementById("push_form").submit()},updateAudiencePercent:function(){var a=document.getElementById("audience_size");this.state.set("audiencePercent",parseInt(a.value,10))},setupSlider:function(){var c=document.getElementById("audience_size");var b=document.getElementById("audience_percent");var a=function(){b.innerHTML=c.value+"%";c.style.backgroundImage="linear-gradient(90deg, #5298fc, #5298fc "+c.value+"%, transparent "+c.value+"%)"};c.addEventListener("input",a);c.addEventListener("change",this.updateAudiencePercent);if(Trait.isIE){c.addEventListener("change",a)}a()},renderDates:function(){var j=document.getElementById("delivery_time");var l=new Date();l.setMinutes(l.getMinutes()+10);new UI.Datepicker({name:"push_date",parent:j,hideOnChange:true,preventPast:true,onChange:this.updateSingleTime.bind(this,false,"push"),value:l});this.generateTimeSelectors(j,"push",{hour:l.getHours()%12,minute:l.getMinutes(),ampm:l.getHours()>12?"PM":"AM"});UI.delegate("change",j,"select",this.updateSingleTime.bind(this,false));var a=document.getElementById("push_delivery").getElementsByClassName("parameter_block");var b=new Date();b.setDate(b.getDate()+1);new UI.Datepicker({name:"exp_group_A_date",parent:a[0].children[1],hideOnChange:true,preventPast:true,onChange:this.updateSingleTime.bind(this,false,"exp_group_A"),value:b});this.generateTimeSelectors(a[0].children[2],"exp_group_A",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});UI.delegate("change",a[0].children[2],"select",this.updateSingleTime.bind(this,false));new UI.Datepicker({name:"exp_group_B_date",parent:a[1].children[1],hideOnChange:true,preventPast:true,onChange:this.updateSingleTime.bind(this,true,"exp_group_B"),value:b});this.generateTimeSelectors(a[1].children[2],"exp_group_B",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});UI.delegate("change",a[1].children[2],"select",this.updateSingleTime.bind(this,true));var k=Util.timezone_acronym();var d=new Date().getTimezoneOffset();var f=Math.abs(d)%60;var m=(d>0?"-":"+")+(Math.abs(d)<600?"0":"")+(Math.abs(d/60)|0)+":"+(f<10?"0":"")+f;document.getElementById("push_time_zone_user").value=m;document.getElementById("push_time_zone_user").nextElementSibling.setAttribute("data-text",k);var c=document.getElementById("expiration_time");new UI.Datepicker({name:"expiration_date",parent:c,hideOnChange:true,preventPast:true,value:b});this.generateTimeSelectors(c,"expiration",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});var h=[];for(var e=1;e<=30;e++){h.push(UI.tag("option",{value:e},e))}var n=document.getElementById("expiration_interval");n.appendChild(UI.tag("select",{name:"expiration_interval_num",value:24},h));n.appendChild(UI.tag("select",{name:"expiration_interval_unit"},[UI.tag("option",{value:"hours"},"Hours"),UI.tag("option",{value:"days"},"Days")]))},generateTimeSelectors:function(h,a,b){b=b||{};var d;var f=[];for(d=1;d<=12;d++){f.push(UI.tag("option",{value:d%12},d))}var e=UI.tag("select",{name:a+"_hour"},f);if(typeof b.hour!=="undefined"){e.value=b.hour}var c=[];for(d=0;d<=59;d++){c.push(UI.tag("option",{value:d},":"+(d<10?"0":"")+d))}var j=UI.tag("select",{name:a+"_minute"},c);if(typeof b.minute!=="undefined"){j.value=b.minute}var l=UI.tag("select",{name:a+"_ampm"},[UI.tag("option",{value:"AM"},"AM"),UI.tag("option",{value:"PM",selected:true},"PM")]);if(typeof b.ampm!=="undefined"){l.value=b.ampm}var k=document.createDocumentFragment();k.appendChild(e);k.appendChild(j);k.appendChild(l);h.appendChild(k)},fetchDate:function(d){var e=document.getElementsByName(d+"_date")[0];var j=document.getElementsByName(d+"_hour")[0];var h=document.getElementsByName(d+"_minute")[0];var f=document.getElementsByName(d+"_ampm")[0];var c=document.getElementById("push_time_zone_user");var b=j.value;if(f.value==="PM"){b=parseInt(b,10)+12}else{if(b.length<2){b="0"+b}}var a=moment(e.value+" "+b+":"+(h.value.length<2?"0":"")+h.value+c.value);return a.toDate()},updateAudienceSelect:function(c){var a=document.getElementById("push_targeting").getElementsByTagName("input");for(var b=0;b<a.length;b++){if(a[b].checked){if(a[b].value){this.state.set("target",PushConsole.Models.PushState.Target.SEGMENT)}else{this.state.set("target",PushConsole.Models.PushState.Target.EVERYONE)}}}},updateExperiment:function(a){this.state.set("experiment",a.target.value==="true")},updateDevices:function(a){this.state.set("targetedDevices",_.foldl(this.deviceInputs,function(d,c){if(!c.disabled&&c.checked){return d.concat([c.value])}return d},[]))},renderRecipientConstraintInput:function(){this.targetQuery.value=this.state.get("recipientConstraintJson")},updateExperimentType:function(c){var a=document.getElementById("test_selection").getElementsByTagName("input");for(var b=0;b<a.length;b++){if(a[b].checked){if(a[b].value){this.state.set("experimentType",a[b].value)}}}if(this.state.get("experimentType")==="message"){if(this.state.get("delivery")==="time"){this.state.set("time",this.fetchDate("push"))}else{this.state.set("time",new Date())}}else{this.state.set("time",this.fetchDate("exp_group_A"));this.state.set("time2",this.fetchDate("exp_group_B"))}},updateDeliveryTime:function(a){this.state.set("delivery",a.target.value);if(a.target.value==="time"){this.state.set("time",this.fetchDate("push"))}else{this.state.set("time",new Date())}},updateSingleTime:function(b,c){var a=c;if(typeof a!=="string"){a=c.target.name.substr(0,c.target.name.lastIndexOf("_"))}var d=this.fetchDate(a);this.state.set("time"+(b?"2":""),d)},updateExpires:function(a){this.state.set("expires",document.getElementById("push_expires_true").checked);this.state.set("expireType",document.getElementById("push_expire_specific").checked?"time":"interval")},updateLocalDelivery:function(a){this.state.set("doLocalPush",a.target.value==="local")},updateMessages:function(a){if(a.target.id==="message_all"||a.target.id==="message_a"){this.state.set("message",a.target.value);if(a.target.id==="message_all"){document.getElementById("message_a").value=a.target.value}else{document.getElementById("message_all").value=a.target.value}}else{if(a.target.id==="message_b"){this.state.set("message2",a.target.value)}}},updateFormat:function(a){if(a.target.name==="increment_badge"){return}if(a.target.name==="data_type"||a.target.name==="data_type_1"){this.state.set("format",a.target.value);if(a.target.name==="data_type"){document.getElementById("push_type_a_"+a.target.value).checked=true}else{document.getElementById("push_type_"+a.target.value).checked=true}}else{if(a.target.name==="data_type_2"){this.state.set("format2",a.target.value)}}},renderAudience:function(){var a=this.state.get("target");if(a===PushConsole.Models.PushState.Target.EVERYONE){this.$(".segment_selection").hide().removeClass("last").prev().addClass("last")}else{this.$(".segment_selection").addClass("last").show().prev().removeClass("last")}},renderExperiment:function(){var a;if(this.state.get("experiment")){UI.removeClass(this.experimentSettings.getElementsByClassName("last")[0],"last");for(a=0;a<this.experimentRows.length;a++){this.experimentRows[a].style.display="block";if(a===this.experimentRows.length-1){UI.addClass(this.experimentRows[a],"last")}}if(this.state.get("experimentType")==="time"){this.state.set("audiencePercent",100);this.audienceSizeSelection.style.display="none";for(a=0;a<this.timeElements.length;a++){this.timeElements[a].style.display="block"}for(a=0;a<this.standardTimeElements.length;a++){this.standardTimeElements[a].style.display="none"}for(a=0;a<this.messageElements.length;a++){this.messageElements[a].style.display="none"}for(a=0;a<this.standardMessageElements.length;a++){this.standardMessageElements[a].style.display="block"}this.submitButton.firstElementChild.textContent="Submit"}else{this.updateAudiencePercent();this.audienceSizeSelection.style.display="block";for(a=0;a<this.timeElements.length;a++){this.timeElements[a].style.display="none"}for(a=0;a<this.standardTimeElements.length;a++){this.standardTimeElements[a].style.display="block"}for(a=0;a<this.messageElements.length;a++){this.messageElements[a].style.display="block"}for(a=0;a<this.standardMessageElements.length;a++){this.standardMessageElements[a].style.display="none"}this.renderScheduling()}this.renderAudienceSizeSuggestionText();this.renderSendToRestMessage()}else{this.$(".ab_test_selection").hide().first().prev().addClass("last");for(a=0;a<this.timeElements.length;a++){this.timeElements[a].style.display="none"}for(a=0;a<this.standardTimeElements.length;a++){this.standardTimeElements[a].style.display="block"}for(a=0;a<this.messageElements.length;a++){this.messageElements[a].style.display="none"}for(a=0;a<this.standardMessageElements.length;a++){this.standardMessageElements[a].style.display="block"}this.renderScheduling()}this.renderPreviewDevice()},renderPreviews:function(){var c=this.state.get("targetedDevices");if(this.state.get("target")===PushConsole.Models.PushState.Target.EVERYONE){c=this.state.get("availableDevices")}this.preview.style.display=(c.length?"block":"none");this.preview.children[0].style.display=(c.length>1?"block":"none");var b={ios:c.indexOf("ios")>-1,android:c.indexOf("android")>-1,winphone:c.indexOf("winphone")>-1||c.indexOf("winrt")>-1};var a=this.preview.children[0].children[0];a.innerHTML="";var e=document.createDocumentFragment();for(var d in b){if(b[d]){e.appendChild(UI.tag("input",{type:"radio",name:"preview_switch",id:"preview_"+d,value:d}));e.appendChild(UI.tag("label",{htmlFor:"preview_"+d},UI.createIcon(PushABConsole.Views.PushConsole.Icons[d])))}}a.appendChild(e);if(a.firstChild){a.firstChild.checked=true}this.renderPreviewDevice()},renderPreviewDevice:function(){var b=this.preview.getElementsByClassName("preview_device");var c;for(c=0;c<b.length;c++){b[c].style.display="none"}var a=this.preview.children[0].children[0];for(c=0;c<a.children.length;c++){if(a.children[c].checked){document.getElementById("preview_device_"+a.children[c].value).style.display="inline-block";if(this.state.get("experiment")){document.getElementById("preview_device_"+a.children[c].value+"_b").style.display="inline-block"}this.renderMessagePreview();this.renderTimePreview();return}}},renderMessagePreview:function(){var m=this.preview.getElementsByClassName("preview_device");for(var f=0;f<m.length;f++){var l=m[f].id.match(/_b$/)&&this.state.get("experimentType")==="message"?"2":"";if(this.state.get("format"+l)==="json"){UI.addClass(m[f],"blurred");continue}else{UI.removeClass(m[f],"blurred")}var d=this.state.get("message"+l)||"Your message here";m[f].getElementsByClassName("message")[0].textContent=d}var k=document.getElementById("message_all");var j=document.getElementById("message_a");var e=this.state.get("format")==="json";UI.toggleClass(k,"json",e);UI.toggleClass(j,"json",e);k.placeholder=j.placeholder=e?"{\n  ...\n}":"Your message here";var h=document.getElementById("message_b");var c=this.state.get("format2")==="json";UI.toggleClass(h,"json",c);h.placeholder=c?"{\n  ...\n}":"Your message here"},renderTimePreview:function(){var a=this.preview.getElementsByClassName("preview_device");for(var c=0;c<a.length;c++){var e=a[c].id.match(/_b$/)&&this.state.get("experimentType")==="time"?"2":"";var d=moment(this.state.get("time"+e));a[c].getElementsByClassName("time")[0].textContent=d.format("h:mm");var b=a[c].getElementsByClassName("date");if(b.length){b[0].textContent=d.format("dddd, MMMM D")}}},renderScheduling:function(){this.scheduleElements[0].style.display=((this.state.get("experiment")&&this.state.get("experimentType")==="time")||this.state.get("delivery")==="now")?"none":"block";var a=(this.state.get("delivery")==="time"||(this.state.get("experiment")&&this.state.get("experimentType")==="time"));this.scheduleElements[1].style.display=a?"block":"none";document.getElementById("push_delivery").getElementsByClassName("warning")[0].style.display=a&&this.state.get("doLocalPush")?"block":"none";this.submitButton.firstElementChild.textContent=this.state.get("delivery")==="now"?"Send now":"Submit"},renderExpiration:function(){var a=document.getElementById("expiration_selection");if(this.state.get("expires")){UI.removeClass(a,"last");a.nextElementSibling.style.display="block";if(this.state.get("expireType")==="time"){document.getElementById("expiration_time").parentNode.style.display="block";document.getElementById("expiration_interval").parentNode.style.display="none";if(this.state.get("doLocalPush")){document.getElementById("expiration_time_label").innerHTML="Expiration Time (UTC)"}else{document.getElementById("expiration_time_label").innerHTML="Expiration Time"}}else{document.getElementById("expiration_time").parentNode.style.display="none";document.getElementById("expiration_interval").parentNode.style.display="block";if(this.state.get("doLocalPush")){document.getElementById("expiration_interval_label").innerHTML="Expire After (from UTC send time)"}else{document.getElementById("expiration_interval_label").innerHTML="Expire After"}}}else{UI.addClass(a,"last");a=a.nextElementSibling;while(a){a.style.display="none";a=a.nextElementSibling}}},renderSendToRestMessage:function(){this.sendToRestMessage.style.display=this.state.get("audiencePercent")<100?"block":"none"},renderExperimentCounts:function(){var c=this.state.get("audienceSize");var b;for(b=0;b<this.counts.length;b++){var a=null;if(c!==null&&c!==undefined){if(b===0){a=c}else{a=Math.floor((c+(b%2))/2)}}if(a===null){if(b===0){this.audienceCountMessage.style.display="none";this.audienceCountUnavailable.style.display="block"}else{this.counts[b].parentNode.style.display="none"}}else{this.counts[b].textContent=a;if(b===0){this.audienceCountMessage.style.display="block";this.audienceCountUnavailable.style.display="none"}else{this.counts[b].parentNode.style.display="block"}}}for(b=0;b<this.percents.length;b++){this.percents[b].textContent=this.state.get("audiencePercent")/2}},renderAudienceSizeSuggestionText:function(){var c=null;if(this.state.get("experiment")&&this.state.get("experimentType")==="message"){var a="Based on your campaign size, we recommend that you include all devices in the test audience for better results.";var b=this.state.get("audienceSizeSuggestion");if(b!==null&&b!==undefined&&this.state.get("recipientCount")!==null&&this.state.get("recipientCount")!==undefined){if(b>0){if(this.state.get("recipientCount")>b){if(this.state.get("audienceSize")<b){c="To achieve statistically significant results, we recommend that you include at least "+b+" devices in the test audience."}}else{if(this.state.get("audiencePercent")<100){c=a}}}else{if(this.state.get("recipientCount")<5000&&this.state.get("audiencePercent")<100){c=a}}}}if(c===null){this.audienceSizeSuggestion.style.display="none"}else{this.audienceSizeSuggestion.getElementsByTagName("p")[0].textContent=c;this.audienceSizeSuggestion.style.display="block"}},renderAllCounts:function(){if(this.state.get("recipientCount")===undefined){document.getElementById("recipients_counter").innerHTML="An error occurred while counting recipients"}else{if(this.state.get("recipientCount")===null){document.getElementById("recipients_counter").innerHTML="Calculating recipients"}else{document.getElementById("recipients_counter").innerHTML="This will be sent to "+(this.state.get("isApproximate")?"approximately ":"")+"<strong>"+this.state.get("recipientCount")+" devices</strong>"}}this.renderExperimentCounts()}},{Icons:{ios:"apple",android:"android",winphone:"windows"}});PushABConsole.Views.PushDetails=Backbone.View.extend({events:{"change #push_time":"updateDeliveryTime","change #expiration_selection":"updateExpires","change #expiration_type":"updateExpires","change #local_delivery":"updateLocalDelivery","change #group_selection":"enableSend","click #send_push":"submit",},initialize:function(c){_.bindAll(this);this.humanize();var d=new moment.unix(this.options.fromDate).toDate();var b=new moment.unix(this.options.toDate).toDate();if(d<moment()&&!Trait.isIE){var f=new Analytics.GraphState({app:c.app,analyticsStatus:c.analyticsStatus,stride:"hour"});new Analytics.Graph({model:f});f.set("fromDate",d);f.set("toDate",b);var e=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_A.mongo_push_status_id});f.addSelectedSeries(e);e.set("color","#fca252");var a=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_B.mongo_push_status_id,});a.set("seriesId","second_series");f.addSelectedSeries(a);a.set("color","#fc527b")}else{document.getElementsByClassName("graph_wrapper")[0].style.display="none"}if(!document.getElementById("launch_form")){return}this.model.on("change:delivery",this.renderScheduling);this.model.on("change:doLocalPush",this.renderScheduling);this.model.on("change:expires change:expireType change:doLocalPush",this.renderExpiration);this.scheduleElements=document.getElementsByClassName("scheduled_delivery");this.submitButton=document.getElementById("send_push");this.renderDates()},humanize:function(){var c=document.getElementsByClassName("time");for(var b=0;b<c.length;b++){var a=moment(c[b].innerHTML);var d=document.createDocumentFragment();if(UI.hasClass(c[b],"breakdown_variable")){d.appendChild(document.createTextNode(a.format("MMMM Do")));d.appendChild(document.createElement("br"));d.appendChild(document.createTextNode(a.format("h:mmA")))}else{d.appendChild(document.createTextNode(a.format("MMMM Do \\at h:mmA")))}c[b].innerHTML="";c[b].appendChild(d)}},renderDates:function(){var j=document.getElementById("delivery_time");var l=new Date();l.setMinutes(l.getMinutes()+10);new UI.Datepicker({name:"push_date",parent:j,hideOnChange:true,preventPast:true,value:l});this.generateTimeSelectors(j,"push",{hour:l.getHours()%12,minute:l.getMinutes(),ampm:l.getHours()>12?"PM":"AM"});var a=document.getElementById("push_delivery").getElementsByClassName("parameter_block");var k=Util.timezone_acronym();var d=new Date().getTimezoneOffset();var f=Math.abs(d)%60;var m=(d>0?"-":"+")+(Math.abs(d)<600?"0":"")+(Math.abs(d/60)|0)+":"+(f<10?"0":"")+f;document.getElementById("push_time_zone_user").value=m;document.getElementById("push_time_zone_user").nextElementSibling.setAttribute("data-text",k);var b=new Date();b.setDate(b.getDate()+1);var c=document.getElementById("expiration_time");new UI.Datepicker({name:"expiration_date",parent:c,hideOnChange:true,preventPast:true,value:b});this.generateTimeSelectors(c,"expiration",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});var h=[];for(var e=1;e<=30;e++){h.push(UI.tag("option",{value:e},e))}var n=document.getElementById("expiration_interval");n.appendChild(UI.tag("select",{name:"expiration_interval_num",value:24},h));n.appendChild(UI.tag("select",{name:"expiration_interval_unit"},[UI.tag("option",{value:"hours"},"Hours"),UI.tag("option",{value:"days"},"Days")]))},generateTimeSelectors:function(h,a,b){b=b||{};var d;var f=[];for(d=1;d<=12;d++){f.push(UI.tag("option",{value:d},d))}var e=UI.tag("select",{name:a+"_hour"},f);if(typeof b.hour!=="undefined"){e.value=b.hour}var c=[];for(d=0;d<=59;d++){c.push(UI.tag("option",{value:d},":"+(d<10?"0":"")+d))}var j=UI.tag("select",{name:a+"_minute"},c);if(typeof b.minute!=="undefined"){j.value=b.minute}var l=UI.tag("select",{name:a+"_ampm"},[UI.tag("option",{value:"AM"},"AM"),UI.tag("option",{value:"PM",selected:true},"PM")]);if(typeof b.ampm!=="undefined"){l.value=b.ampm}var k=document.createDocumentFragment();k.appendChild(e);k.appendChild(j);k.appendChild(l);h.appendChild(k)},updateDeliveryTime:function(a){this.model.set("delivery",a.target.value)},updateExpires:function(a){this.model.set("expires",document.getElementById("push_expires_true").checked);this.model.set("expireType",document.getElementById("push_expire_specific").checked?"time":"interval")},updateLocalDelivery:function(a){this.model.set("doLocalPush",a.target.value==="local")},renderScheduling:function(){for(var a=0;a<this.scheduleElements.length;a++){this.scheduleElements[a].style.display=this.model.get("delivery")==="now"?"none":"block";document.getElementsByClassName("warning")[0].style.display="none"}if(this.model.get("delivery")==="time"){document.getElementsByClassName("warning")[0].style.display=this.model.get("doLocalPush")?"block":"none"}this.submitButton.firstElementChild.textContent=this.model.get("delivery")==="now"?"Send now":"Submit"},renderExpiration:function(){var a=document.getElementById("expiration_selection");if(this.model.get("expires")){UI.removeClass(a,"last");a.nextElementSibling.style.display="block";if(this.model.get("expireType")==="time"){document.getElementById("expiration_time").parentNode.style.display="block";document.getElementById("expiration_interval").parentNode.style.display="none";if(this.model.get("doLocalPush")){document.getElementById("expiration_time_label").innerHTML="Expiration Time (UTC)"}else{document.getElementById("expiration_time_label").innerHTML="Expiration Time"}}else{document.getElementById("expiration_time").parentNode.style.display="none";document.getElementById("expiration_interval").parentNode.style.display="block";if(this.model.get("doLocalPush")){document.getElementById("expiration_interval_label").innerHTML="Expire After (from UTC send time)"}else{document.getElementById("expiration_interval_label").innerHTML="Expire After"}}}else{UI.addClass(a,"last");a=a.nextElementSibling;while(a){a.style.display="none";a=a.nextElementSibling}}},enableSend:function(){UI.removeClass(this.submitButton,"disabled")},submit:function(){if(UI.hasClass(this.submitButton,"disabled")){return}document.getElementById("launch_form").submit()}});PushConsole.Views.PushConsole=Backbone.View.extend({events:{"change #targetSelect":"updateTarget","change #pushTimeSelect":"pushTimeDropdownChanged","change #expirationTimeSelect":"expirationTimeDropdownChanged","change #push_local":"pushLocalChanged","keyup .data_entry":"updateMessage","click .switch":"switchOption",'click .device_types input[type="checkbox"]':"deviceTypeCheckboxClicked","click #send_button":"sendClicked"},initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:target",this.renderTarget);this.state.on("change:target",this.renderAudience);this.state.on("change:targetedDevices",this.decideHasBadgeCounts);this.state.on("change:target change:targetedDevices change:doLocalPush",this.state.updateRecipientsAndCount);this.state.get("constraints").on("change remove",this.state.updateRecipientsAndCount);this.state.on("change:recipientConstraintJson",this.renderRecipientConstraintInput);this.state.on("change:recipientCount change:isApproximate",this.renderCount);this.state.on("change:countReqs",this.renderCountSpinner);this.state.on("change:message change:recipientCount",this.renderSendButton);this.state.get("constraints").on("change:error",this.renderSendButton);this.$(".slidesjs-container").css("width","100%")},renderRecipientConstraintInput:function(){this.$('input[name="target"]').val(this.state.get("recipientConstraintJson"))},render:function(){this.el.reset();this.$(".errors").hide();this.$("#recipients_spinner").spin("small","#ffffff").hide();var a="MM d, yy";var b="yy-mm-dd";var c=0;this.$(".sending_date_advanced .date_field").datepicker({dateFormat:a,altFormat:b,altField:"#push_date",minDate:c,maxDate:14});this.$(".expiration_date_advanced .date_field").datepicker({dateFormat:a,altFormat:b,altField:"#expiration_date",minDate:c});this.$(".tz_picker").each(function(f,e){if(!Util.in_utc()){var h=$("<option>");var l=moment().format("Z");h.html(Util.timezone_acronym());h.attr("value",l);$(e).prepend(h);$(e).val(l)}var j=e.name.replace(/_tz/,"");var k=moment().add("seconds",$("#"+j+"_initial_offset").val());var d=function(m,n){$('select[name="'+j+"_"+m+'"]').val(n)};$('input[name="'+j+'_date"]').val(k.format("YYYY-MM-DD"));$("#"+j+"_human_date").val(k.format("MMMM D, YYYY"));d("hour",k.hours()%12);d("minute",k.minutes()-k.minutes()%5);d("ampm",k.format("A"))});this.state.updateRecipientsAndCount();this.decideHasBadgeCounts();return this},pushLocalChanged:function(){var a=this.$("#push_local").is(":checked:visible");this.$("#push_tz").parent().toggle(!a);this.$("#push_local_warning").toggle(a);this.state.set("doLocalPush",a)},decideHasBadgeCounts:function(){if(this.state.get("targetedDevices")===undefined||!_(this.state.get("targetedDevices")).contains("ios")){this.$(".increment_badge").hide()}else{this.$(".increment_badge").show()}},switchOption:function(a){if($(a.target).hasClass("switch_cursor")){$(a.target).toggleClass("rightValue");$(a.target).parent().parent().children(".label").toggleClass("selectedLabel")}else{$(a.target).children(".switch_cursor").toggleClass("rightValue");$(a.target).parent().children(".label").toggleClass("selectedLabel")}if($(".section_preview .switch_cursor").hasClass("rightValue")){this.state.set("format","json");this.$(".data_type_panel").find(":hidden").val("json")}else{this.state.set("format","message");this.$(".data_type_panel").find(":hidden").val("message")}},renderTarget:function(){if(this.beta){return}var a=this.state.get("target");if(a==PushConsole.Models.PushState.Target.EVERYONE){this.$("#targetSelect").val("everyone");this.$(".target_selector").hide()}else{this.$("#targetSelect").val("target");this.$(".target_selector").show()}},updateTarget:function(b){var a=$(b.target).val();if(a==="target"){this.state.set("target",PushConsole.Models.PushState.Target.SEGMENT);Parse.history.navigate("segment")}else{this.state.set("target",PushConsole.Models.PushState.Target.EVERYONE);Parse.history.navigate("")}},deviceTypeCheckboxClicked:function(b){var a=[];this.$(".device_types *:checked").each(function(c,d){a.push(d.id.replace(/^push_to_/,""))});this.state.set("targetedDevices",a)},pushTimeDropdownChanged:function(b){var a=$(b.target).val();if(a==="time"){this.$(".sending_date_advanced").show();this.$("#expirationRelativeText").text("after scheduled time")}else{this.$(".sending_date_advanced").hide();this.$("#expirationRelativeText").text("from now")}this.pushLocalChanged()},expirationTimeDropdownChanged:function(b){var a=$(b.target).val();if(a==="time"){this.$(".expiration_date_advanced").show()}else{this.$(".expiration_date_advanced").hide()}if(a==="interval"){this.$(".expiration_interval_advanced").show()}else{this.$(".expiration_interval_advanced").hide()}},sendClicked:function(){if(this.state.hasError()){this.$(".error_bubble").show()}else{this.$el.submit()}return false},renderSendButton:function(){if(!this.state.hasError()){this.$("#send_button").removeClass("disabled");this.$(".error_bubble").hide()}else{this.$("#send_button").addClass("disabled")}},updateMessage:function(a){this.state.set("message",this.$(".data_entry").val())},renderCount:function(){if(!this.state.has("recipientCount")){this.$("#recipients_counter").text("Couldn't estimate recipients")}else{var a=this.state.get("isApproximate");var b=this.state.get("recipientCount");var c=(b===1?" recipient":"recipients");this.$("#recipients_counter").text((a?"about ":"")+b+" "+c)}},renderCountSpinner:function(){if(this.state.get("countReqs")===0){this.$("#recipients_spinner").hide()}else{this.$("#recipients_spinner").show()}}});PushConsole.Views.PushConsoleBeta=Backbone.View.extend({events:{"change #push_local":"pushLocalChanged","click .audienceSelect":"updateAudienceSelect","click .expSelect":"updateExpSelect","click .timeSelect":"updateTimeSelect","click .expirySelect":"updateExpirySelect","click .timezoneSelect":"updateTimezoneSelect","click .json_button":"switchJSONOption","click .device_container":"deviceContainerClicked","input .range_slider":"updateSlider","keyup .data_entry_beta":"updateMessageBeta"},initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:target",this.renderAudience);this.$(".slidesjs-container").css("width","100%")},render:function(){var a="MM d, yy";var b="yy-mm-dd";var c=0;this.$(".group_A .date_field").datepicker({dateFormat:a,altFormat:b,altField:"#exp_group_A_date",minDate:c});this.$(".group_B .date_field").datepicker({dateFormat:a,altFormat:b,altField:"#exp_group_B_date",minDate:c});this.$("#user_timezone").html(Util.timezone_acronym());this.$(".tz_picker").each(function(f,e){if(!Util.in_utc()){var h=$("<option>");var l=moment().format("Z");h.html(Util.timezone_acronym());h.attr("value",l);$(e).prepend(h);$(e).val(l)}var j=e.name.replace(/_tz/,"");var k=moment().add("seconds",$("#"+j+"_initial_offset").val());var d=function(m,n){$('select[name="'+j+"_"+m+'"]').val(n)};$('input[name="'+j+'_date"]').val(k.format("YYYY-MM-DD"));$("#"+j+"_human_date").val(k.format("MMMM D, YYYY"));d("hour",k.hours()%12);d("minute",k.minutes()-k.minutes()%5);d("ampm",k.format("A"))});return this},switchJSONOption:function(c){$(c.target).toggleClass("active");var b=($(c.target).hasClass("active"))?"json":"message";var a=$(c.target).data("format_type_id");this.state.set("format"+a,b);$(c.target).find(":hidden").val(b)},updateSlider:function(){var d=this.$(".range_slider").val();this.$(".range_slider").css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+d/100+", #4786fb), color-stop("+d/100+", #D8D8D8))");var c=this.state.get("recipientCount");var b=Math.round(d*c/100);this.$(".warning_bubble").toggle(b<60);this.$(".group_counter").text(d+"% ("+this.sanitizeNumber(b)+")");this.$(".exp_message_counter").text(d/2+"%");var a=Math.round(b/2);this.$(".exp_time_counter").text(d/2+"% ("+this.sanitizeNumber(a)+" people)")},sanitizeNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},updateAudienceSelect:function(b){var a=$(b.target).attr("id");this.$(".audienceSelect").removeClass("active");$(b.target).addClass("active");if(a==="segment"){this.state.set("target",PushConsole.Models.PushState.Target.SEGMENT);this.$(".audience").find(":hidden").val("target")}else{this.state.set("target",PushConsole.Models.PushState.Target.EVERYONE);this.$(".audience").find(":hidden").val("")}},renderAudience:function(){var a=this.state.get("target");if(a===PushConsole.Models.PushState.Target.EVERYONE){this.$(".target_selector").hide();this.$(".devices").hide()}else{this.$(".target_selector").show();this.$(".devices").show()}},updateExpSelect:function(c){var b=$(c.target).attr("id");this.$(".expSelect").removeClass("active");$(c.target).addClass("active");this.$(".range_slider").val(20);this.updateSlider();var d=(b==="message");var a=(b==="time_sent");this.$(".exp_message").toggle(d);this.$(".exp_time").toggle(a);this.$(".send_normal").toggle(!a);this.$(".slider").toggle(d||a);if(b==="none"){this.$(".experiment").find(":hidden").val("")}else{this.$(".experiment").find(":hidden").val(b)}if(d){this.$(".left_phone").css("float","left")}else{this.$(".left_phone").css("float","none")}},updateTimeSelect:function(b){var a=$(b.target).attr("id");this.$(".timeSelect").removeClass("active");$(b.target).addClass("active");if(a==="now"){this.$(".sending_date_advanced").hide();this.$("#expirationRelativeText").text("from now");this.$(".push_time").find(":hidden").val("")}else{this.$(".sending_date_advanced").show();this.$("#expirationRelativeText").text("after scheduled time");this.$(".push_time").find(":hidden").val(a)}this.pushLocalChanged()},pushLocalChanged:function(){var a=this.$("#push_local").is(":checked:visible");this.$("#push_tz").parent().toggle(!a);this.$("#push_local_warning").toggle(a);this.state.set("doLocalPush",a)},deviceContainerClicked:function(f){var c=($(f.target).hasClass("device_container"))?$(f.target):$(f.target).parent();var a=c.attr("id");var d=a.substring(0,a.indexOf("_"));c.toggleClass("active");if(c.hasClass("active")){this.$("#push_to_"+d).attr("checked","checked")}else{this.$("#push_to_"+d).removeAttr("checked")}var b=[];this.$(".device_container").each(function(h,e){if($(e).hasClass("active")){b.push(e.id.substring(0,e.id.indexOf("_")))}});this.state.set("targetedDevices",b)},updateTimezoneSelect:function(c){var b=$(c.target).attr("id");this.$(".timezoneSelect").removeClass("active");$(c.target).addClass("active");var a=(b==="local_timezone");this.$(".exp_push_local_warning").toggle(a);this.$(".exp_timezone").find(":hidden").val(a.toString())},updateExpirySelect:function(b){var a=$(b.target).attr("id");this.$(".expirySelect").removeClass("active");$(b.target).addClass("active");this.$(".expiry").find(":hidden").val(a);this.$(".expiration_date_advanced").toggle(a==="time");this.$(".expiration_interval_advanced").toggle(a==="interval")},updateMessageBeta:function(a){this.state.set("message"+$(a.target).data("message_id"),$(a.target).val())}});PushConsole.Util=PushConsole.Util||{};PushConsole.Util.previewDeviceType=function(a){return function(){this.state.set("previewedDevice",a);var b=this;_.each(this.knownDeviceTypes,function(c){if(c===a){b.$("#preview_"+c).show();b.$(".b_"+c).addClass("on")}else{b.$("#preview_"+c).hide();b.$(".b_"+c).removeClass("on")}});if(this.$("#preview_"+a+" > .slidesjs-pagination li").length===1){this.$(".preview_panel_platform").addClass("centered_panel");this.$("#preview_"+a+" > .slidesjs-pagination").hide()}else{this.$(".preview_panel_platform").removeClass("centered_panel");this.$("#preview_"+a+" > .slidesjs-pagination").show()}}};PushConsole.Views.PushPreview=Backbone.View.extend({events:{"click .b_ios":"previewIos","click .b_android":"previewAndroid","click .b_winrt":"previewWinRT","click .b_winphone":"previewWinPhone"},initialize:function(){_.bindAll(this);this.state=this.options.state;this.expRightPhone=this.options.expRightPhone;this.phoneID=(this.expRightPhone)?"2":"";this.state.on("change:target change:targetedDevices",this.updateAvailableDevices);this.state.on("change:format"+this.phoneID,this.displayFormatChanged);this.state.get("displayIssues"+this.phoneID).on("change",this.displayIssuesChanged);this.state.on("change:message"+this.phoneID,this.updatePreview);if(this.state.get("availableDevices")!==undefined&&this.state.get("availableDevices").length===0){this.state.get("displayIssues"+this.phoneID).set("no devices","Your application does not have any registered devices to which it can send notifications.")}},render:function(){this.$(".preview_slides").slidesjs({pagination:{active:true,effect:"slide"}});this.updateAvailableDevices();if($("a.slidesjs-next")){var a="<div class='inner_button'><div class='arrow'></div></div>";$("a.slidesjs-next").html(a);$("a.slidesjs-previous").html(a)}this.updatePreview();return this},knownDeviceTypes:["ios","android","winrt","winphone"],updateAvailableDevices:function(){var d=this.state.get("previewedDevice");var b=this.state.get("availableDevices");if(b!==undefined&&b.length===0){return}var a=[];if(this.state.get("beta")&&this.state.isEveryone()){a=b}else{a=this.state.get("targetedDevices")}_.each(this.knownDeviceTypes,function(e){if(_(a).contains(e)){this.$(".b_"+e).show()}else{this.$(".b_"+e).hide()}});if(d===undefined||!_(a).contains(d)||this.expRightPhone){var c=a[0];if(c!==undefined){this.$(".b_"+c).click()}}if(a.length===0){this.state.get("displayIssues"+this.phoneID).set("no devices","You need to target at least one mobile platform.")}else{this.state.get("displayIssues"+this.phoneID).unset("no devices");if(a.length===1){this.$(".preview_panel_platform").hide();this.$(".slidesjs-pagination").addClass("centered_panel")}else{this.$(".preview_panel_platform").show();this.$(".slidesjs-pagination").removeClass("centered_panel")}}},previewIos:PushConsole.Util.previewDeviceType("ios"),previewAndroid:PushConsole.Util.previewDeviceType("android"),previewWinRT:PushConsole.Util.previewDeviceType("winrt"),previewWinPhone:PushConsole.Util.previewDeviceType("winphone"),displayIssuesChanged:function(){var a=_.keys(this.state.get("displayIssues"+this.phoneID).attributes);if(a.length===0){this.$(".preview").show();this.$(".preview_not_available").hide()}else{this.$(".preview").hide();this.$(".preview_not_available").text(this.state.get("displayIssues"+this.phoneID).get(a[0]));this.$(".preview_not_available").show()}},displayFormatChanged:function(){if(this.state.get("format"+this.phoneID)==="json"){this.state.get("displayIssues"+this.phoneID).set("json","Previews are not available for custom JSON payloads.")}else{this.state.get("displayIssues"+this.phoneID).unset("json")}},updatePreview:function(){var a=this.state.get("message"+this.phoneID);if(a){this.$(".message").text(a)}else{this.$(".message").text("Enter your notification message")}if(a.length>50){this.$("#mini_preview_ios").text(a.substring(0,50)+"...");this.$("#mini_preview_android").text(a.substring(0,45)+"...");if(a.length>140){this.$("#mini_preview_winrt").text(a.substring(0,137)+"...")}if(a.length>130){this.$(".lock_screen .notification").css("top","145px");this.$("#notif_center_ios").text(a.substring(0,130)+"...")}else{this.$(".lock_screen .notification").css("top","165px")}}else{this.$(".lock_screen .notification").css("top","185px")}}});PushConsole.Views.QueryBuilder=Backbone.View.extend({events:{"click .add_constraint_button":"createConstraint"},initialize:function(){_.bindAll(this);this.state=this.options.state;this.constraints=this.state.get("constraints");this.constraints.on("add",this.addConstraint);this.constraints.on("remove",this.removeConstraint);this.constraints.on("add remove change:error",this.renderErrors)},render:function(){var b=this.state.get("targetedDevices").length>0;this.$el.html(JST["layouts/query_builder/_query_builder"]({display:b}));this.table=this.$("table.query_builder");var a=this;this.constraints.each(function(c){a.addConstraint(c)});return this},createConstraint:function(a){this.constraints.add({});return this},addConstraint:function(c){var b=this;var a=new PushConsole.Views.Constraint({appId:this.state.get("app").id,schema:this.state.get("schema"),constraint:c,constraints:this.constraints,excludedFields:["objectId","deviceToken","deviceType","installationId"],defaultField:"channels"});this.table.append(a.el);a.render();return this},removeConstraint:function(b,d,a){var c=a.index+1;this.$("tr:nth-child("+c+")").remove()},renderErrors:function(){var a=this.state.getErrors();if(!_.isEmpty(a)){this.$(".errors").empty().show();_.each(a,function(b){this.$(".errors").append($("<div>").text(b))})}else{this.$(".errors").hide()}}});App.Views.About=Backbone.View.extend({initialize:function(){this.imageState={};this.$wrap=$(".wrap");this.$cards=$([]);this.render();if(!Util.is_chrome){$(".artwork").addClass("no_animation");$(".intro").addClass("no_gradient")}$(window).bind("load",function(){$(".artwork").addClass("launch").show()});var a=_.throttle(this.updateCards.bind(this),100);this.$wrap.scroll(a);$(window).resize(a)},imageLoaded:function(b,a){if(b[a]){b[a]--}if(!b[a]){this.className+=" loaded"}},updateCards:function(){var c=this.$wrap.outerWidth();var b=c/2;var a=this.$wrap.scrollLeft()+b;this.$cards.each(function(d){var j=this.offsetLeft+$(this).outerWidth()/2;var h=Math.abs(j-a);var e=Math.max(1-(Math.max(h-400,0)/b),0);var f=1-(1-e)/8;if(h-300>b){$(this).css("visibility","hidden")}else{$(this).css({visibility:"visible",opacity:e,transform:"scale("+f+")"})}})},render:function(){var a=this;var c=new ParseDotCom.Query("TeamMember");var d={};c.find().then(function(f){var e=_.shuffle(f);var j=$(".team_icons")[0];var h=document.createDocumentFragment();_(e).each(function(o){var k=o.get("name");var n=document.createElement("img");n.setAttribute("src",o.get("photo_full").url().replace(/http:\/\//,"https://s3.amazonaws.com/"));var m=document.createElement("img");m.setAttribute("src",o.get("photo_alt").url().replace(/http:\/\//,"https://s3.amazonaws.com/"));var l=document.createElement("div");l.className="team_member";l.setAttribute("data-name",k);a.imageState[k]=2;n.onload=a.imageLoaded.bind(l,a.imageState,k);m.onload=a.imageLoaded.bind(l,a.imageState,k);d[k]={img:o.get("photo_full").url().replace(/http:\/\//,"https://s3.amazonaws.com/"),handle:o.get("twitter_handle"),bio:(o.get("bio")||"").replace(/\n/g,"<br /><br />")};l.appendChild(n);l.appendChild(m);h.appendChild(l)});j.appendChild(h);$(j).on("click",".team_member",function(){var l=this.getAttribute("data-name");var m=d[l];var k=$(".team_info");k.find("img").attr("src",m.img);k.find("h3").text(l);if(m.handle){k.find(".card_left a").attr("href","https://twitter.com/"+m.handle).text("@"+m.handle)}else{k.find(".card_left a").attr("href","").text("")}k.find(".card_right").html(m.bio);k.addClass("expanded");return false});$(".team").click(function(l){var k=$(l.target);if(!k.closest(".card_left").length&&!k.closest(".card_right").length){$(".team_info").removeClass("expanded")}})},function(){$(".team").hide()});var b=new ParseDotCom.Query("Career");b.ascending("order").find().then(function(f){var e=document.createDocumentFragment();_(f).each(function(n){var h=document.createElement("div");h.className="card";var j=document.createElement("img");if(n.get("icon")){j.setAttribute("src",n.get("icon").url().replace(/http:\/\//,"https://s3.amazonaws.com/"))}else{j.setAttribute("style","visibility: hidden;")}var m=document.createElement("h3");m.appendChild(document.createTextNode(n.get("title")));var l=document.createElement("p");l.appendChild(document.createTextNode(n.get("text")));var k=document.createElement("a");k.appendChild(document.createTextNode("Apply for this position"));k.href=n.get("link");k.className="apply_button";h.appendChild(j);h.appendChild(m);h.appendChild(l);h.appendChild(k);e.appendChild(h)});$(".careers .wrap")[0].appendChild(e);a.$cards=$(".wrap .card");a.updateCards()},function(){$(".careers").hide()})}});App.Views.AccountInfoForm=Backbone.View.extend({events:{"change select":"toggleFields","change input":"checkIfFixed","submit form":"updateUser"},initialize:function(){this.render()},render:function(){var a=this;setTimeout(function(){a.$(".mini_window").show().addClass("animation")},500);setTimeout(function(){a.$(".mini_window").removeClass("animation")},2000)},getFormData:function(){var a={user:{}};if($("#user_name").length){a.user.name=this.$("#user_name").val()}a.user.company_type=this.$("#company_type").val();a.user.company_name=this.$("#user_company_name").val();a.user.title=this.$("#user_title").val();if($("#parse_app_name").length){a.parse_app={};a.parse_app.name=this.$("#parse_app_name").val()}return a},validateFields:function(){var b=this.getFormData();var a=true;if(b.user.name!==undefined){a=a&&b.user.name.length}if(b.parse_app){a=a&&b.parse_app.name.length}if(b.user.company_type!=="individual"){a=a&&b.user.company_name&&b.user.title&&b.user.company_name.length&&b.user.title.length}return !!(a)},toggleFields:function(){var a=this.$("#company_type").val();if(a.length){this.$("#company_type").removeClass("invalid")}this.$("#user_company_name").toggle(a!=="individual");this.$("#user_title").toggle(a!=="individual")},checkIfFixed:function(a){if(a.target.value.length){$(a.target).removeClass("invalid")}},updateUser:function(){var a=this;if(!this.validateFields()){$("input, select").each(function(){if(this.value.length){$(this).removeClass("invalid")}else{$(this).addClass("invalid")}});this.$(".errors").text("Please respond to all fields").show();this.$("button").removeAttr("disabled").removeClass("disabled");return false}this.$("button").html('<div class="spinner"></div>');this.$(".spinner").spin("large","#717171").show();$.ajax("/account",{dataType:"json",type:"PUT",data:this.getFormData()}).done(function(){window.location="/apps/quickstart?onboard="}).fail(function(){a.$(".spinner").hide();a.$("button").removeAttr("disabled").removeClass("disabled").text("Start using Parse")});return false}});App.Views.Accounts.Notifications=Backbone.View.extend({events:{"click .switch":"submitSwitch"},initialize:function(){_.bindAll(this);this.rpc=new App.Views.RPC()},submitSwitch:function(j){var a=$(j.target);var b=a.parent().children("input[type=hidden]");a.toggleClass("off");a.toggleClass("on");var h=!a.hasClass("off");b.attr("value",h);var d=a.parents("form:first");var c=d.length>0?d.attr("action"):App.currentApp.dataRequestUrl();var k=b.attr("name");var f={};f[k]=b.val();this.rpc.call({view:a.closest(".line"),url:c,method:"post",params:f,success:function(){if(f.gk){location.reload()}}})}});App.Views.Accounts.Statement=Backbone.View.extend({events:{"click .app_item > .expandable":"toggleApp",},toggleApp:function(a){$(a.currentTarget).parent().find("ul.invoice_items").toggle()}});App.Views.Admin.HomeCMS=Backbone.View.extend({events:{"change .card_selectors select":"updateCard","change #card_type":"updateEditorType","change #card_selector":"setFormContent","click #card_submit":"saveForm"},initialize:function(){_.bindAll(this);this.datepicker=new App.Views.Datepicker({el:document.getElementById("card_date"),name:"card_date",hideOnChange:true});var b=ParseDotCom.Object.extend("ContentCard");var a=new ParseDotCom.Query(b);var c=this;a.find().then(function(k){c.cards={};var h=[];var e=[];_.each(k,function(r,n){c.cards[r.id]=r;for(var m=0;m<3;m++){if(r.get("location")==="home_"+m){e[m]=n}}var q='<option value="'+r.id+'">'+r.get("title")+"</option>";h.push(q)});var d=h.join("");var l=[];for(var f=0;f<3;f++){$("#home_"+f).append(d).find("option").eq(e[f]).attr("selected","");l[f]=k[e[f]]}$("#card_selector").append(d);$(".content_cards").append(App.Views.Home.Main.CardMarkup[l[0].get("type")](l[0])).append(App.Views.Home.Main.CardMarkup[l[1].get("type")](l[1])).append(App.Views.Home.Main.CardMarkup[l[2].get("type")](l[2])).show()});this.updateEditorType({target:{value:0}})},updateCard:function(f){var m=this.cards[f.target.value];if(!m){return}var b=f.target.id.match(/\d+/);var a;if(!m.get("location")){for(a in this.cards){if(this.cards[a].get("location")===f.target.id){this.cards[a].set("location","");this.cards[a].save()}}m.set("location",f.target.id);m.save();$(".content_cards a").eq(parseInt(b[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[m.get("type")](m));return}var d=$("#"+m.get("location"));if(d.length){var l=m.get("location");for(a in this.cards){if(this.cards[a].get("location")===f.target.id){m.set("location",f.target.id);this.cards[a].set("location",l);$("#"+l).val(a);this.cards[a].save();m.save();$(".content_cards a").eq(parseInt(b[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[m.get("type")](m));var j=l.match(/\d+/);if(j){$(".content_cards a").eq(parseInt(j[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[this.cards[a].get("type")](this.cards[a]))}return}}}},updateEditorType:function(a){$(".type0, .type1").hide();$(".type"+a.target.value).show()},setFormContent:function(b){var c=b.target.value;var a=this.cards[c];if(!(c&&a)){$("#card_id").val("");$("#card_title").val("");$("#card_link").val("");$("#card_image").val("");return}$("#card_id").val(c);$("#card_title").val(a.get("title"));$("#card_link").val(a.get("link"));$("#card_type").val(a.get("type"));$("#card_image").val("");$("#card_title").val(a.get("title"));switch(a.get("type")){case 0:if(a.get("image")){$("#card_image_link").href(a.get("image").url()).text(a.get("image").url())}break;case 1:this.datepicker.model.set("value",a.get("date"));break}this.updateEditorType({target:{value:a.get("type")}})},saveForm:function(){var c;if($("#card_id").val()){c=this.cards[$("#card_id").val()]}if(!c){var a=ParseDotCom.Object.extend("ContentCard");c=new a()}c.set("title",$("#card_title").val());c.set("link",$("#card_link").val());var e=parseInt($("#card_type").val(),10);c.set("type",e);switch(e){case 0:var d=document.getElementById("card_image").files[0];if(d){c.set("image",new ParseDotCom.File(d.name,d))}break;case 1:c.set("date",this.datepicker.model.get("value"));break}var b=this;c.save().then(function(h){$(".row.error").hide();if(b.cards[h.id]){$(".card_selectors select option[value="+h.id+"]").text(h.get("title"));$("#card_selector option[value="+h.id+"]").text(h.get("title"));if(h.get("location")){var f=h.get("location").match(/\d+/);if(f){$(".content_cards a").eq(parseInt(f[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[h.get("type")](h))}}}else{b.cards[h.id]=h;var j='<option value="'+h.id+'">'+h.get("title")+"</option>";$(".card_selectors select").append(j);$("#card_selector").append(j);$("#card_selector").val(h.id)}},function(f){$(".row.error").show()});return false}});App.Views.Admin.SupportOperationsCenterChart=Backbone.View.extend({initialize:function(){var a=this;this.el=this.options.el;_.bindAll(this,"updateTimestamp","reload");this.counter=300;this.chart=new Highcharts.Chart(this.options.highchartOptions);setTimeout(this.updateTimestamp,1000);setTimeout(this.reload,this.counter*1000)},updateTimestamp:function(){var a="second";if(this.counter!=1){a="seconds"}$("#timestamp").text("Refresh in "+this.counter+" "+a+".");this.counter--;setTimeout(this.updateTimestamp,1000)},reload:function(){window.location.reload(true)}});App.Views.Admin.VerticalHistogram=Backbone.View.extend({initialize:function(){this.el=this.options.el;this.width=this.options.width;this.height=this.options.height;this.labels=this.options.labels;this.values=this.options.values;this.max_value=this.options.max_value;this.render()},render:function(){var c=this;var d=150;var f=d3.scale.ordinal().domain(c.labels).rangeBands([0,c.height]);var e=d3.scale.linear().domain([0,c.max_value]).range([0,c.width-d]);var b=d3.select(c.el[0]).append("svg").attr("width",c.width).attr("height",c.height).style("padding-top","50px").style("padding-bottom","50px").style("padding-left","50px").style("padding-right","50px");var a=b.append("g").attr("transform","translate("+d+",0)");var h=b.append("g").attr("transform","translate(0,0)");h.selectAll("text#labels").data(c.labels).enter().append("text").attr("id","labels").attr("transform",function(k,j){return"translate("+(d-10)+","+(f(j)+f.rangeBand()/2)+")"}).attr("text-anchor","end").text(String);a.selectAll("line#rule").data(e.ticks(10)).enter().append("line").attr("id","rule").attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",c.height).style("stroke","#ccc");a.selectAll("text#rule_text").data(e.ticks(10)).enter().append("text").attr("id","rule_text").attr("transform",function(j){return"translate("+e(j)+", 0)"}).attr("text-anchor","middle").text(String);a.selectAll("rect#bars").data(c.values).enter().append("rect").attr("id","bars").attr("fill","steelblue").attr("stroke","white").attr("x",0).attr("y",function(k,j){return f(j)+f.rangeBand()/4}).attr("height",f.rangeBand()/2).attr("width",e)}});Analytics.ContentView=Backbone.View.extend({ignore:function(){return this.model.get("selectedNavigation")!==this.type},cleanup:function(){},update:function(){if(this.ignore()){this.$el.hide();return}this.fetchData()},render:function(){if(this.ignore()){this.$el.hide();this.cleanup();return}this.$el.empty();this.$el.html(JST["apps/analytics/_content_"+this.type](this.content));this.$el.show();return this}});Analytics.ContentAudience=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.model.on("change:toDate",this.update);this.type="audience";this.resetContent();this.xhrs={};if(!this.ignore()){this.fetchData()}},resetContent:function(){var b=this;var a=this.model.get("toDate");this.content={date:a,stats:{}};_.each(Analytics.ContentAudience.Types,function(c){b.content.stats["total_"+c]=0});_.extend(this.content,Analytics.ContentAudience.ViewHelpers);_.extend(this.content,Analytics.ViewHelpers)},cleanup:function(){var a=this;_.each(this.xhrs,function(d,b,c){a.xhrs[b].abort();delete a.xhrs[b]});this.resetContent()},buildAudienceStatBox:function(b,d){var c=(d[0]-d[1])/d[1];var a=(d[1]-d[2])/d[2];return{current:{stat:d[0],date:b,delta:c},previous:{stat:d[1],date:moment(b).subtract("weeks",1),delta:a},last:{stat:d[2],date:moment(b).subtract("weeks",2)}}},fetchData:function(){var a=this;this.cleanup();this.$el.empty();this.content.date=this.model.get("toDate");var c=Math.round(this.content.date.getTime()/1000);var b=this.model.get("baseUrl")+"analytics_content_audience";_.each(Analytics.ContentAudience.Types,function(e){var f="total_"+e.toLowerCase();var d=$.get(b,{at:c,audienceType:f},function(h){delete a.xhrs[f];if(!h.total){return}a.content.date=h.date;a.content.stats["total_"+e]=h.total;a.render();_.each(Analytics.ContentAudience.Frequencies,function(k){var j=k.toLowerCase()+"_"+e.toLowerCase();var l=$.get(b,{at:c,audienceType:j},function(m){delete a.xhrs[j];if(!m.content){return}a.content.stats[k+"_"+e]=a.buildAudienceStatBox(m.date,m.content);a.render()});a.xhrs[j]=l})});a.xhrs[f]=d})},},{Types:["Users","Installations"],Frequencies:["Daily","Weekly","Monthly"],ViewHelpers:{formatDate:function(a){return moment(a).format("MMMM D, YYYY")},deltaStr:function(a){if(a===Infinity){return"∞ %"}else{if(a===-Infinity){return"-∞ %"}else{if(isNaN(a)){return"0%"}else{if(a>=10000000){return(a/10000000).toPrecision(3)+"B%"}else{if(a>=10000){return(a/10000).toPrecision(3)+"M%"}else{if(a>=10){return(a/10).toPrecision(3)+"K%"}}}}}}return(a*100).toFixed(2)+"%"},deltaClass:function(a){if(a<0){return"decline"}else{if(a>0){return"growth"}}return""}}});Analytics.ContentEvents=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.model.get("selectedSeries").on("change:data reset remove",this.update);this.type="events";this.resetContent()},resetContent:function(){this.content={dataBySeries:[]}},fetchData:function(){var a=0;var b=[];this.model.get("selectedSeries").each(function(e,c,f){if(e.has("data")){var d=_.reduce(e.get("data"),function(h,j){return h+j[1]},0);a+=d;b.push({model:e,aggr:d})}});if(b.length===0){this.$el.hide();return}this.content.dataBySeries=b;this.render()}});Analytics.ContentPerformance=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.type="performance";this.resetContent();if(!this.ignore()){this.fetchData()}},resetContent:function(){var a=this;this.content={stats:{}};_.extend(this.content,Analytics.ContentPerformance.ViewHelpers);_.extend(this.content,Analytics.ViewHelpers)},fetchData:function(){var a=this;_.each(Analytics.ContentPerformance.Types,function(c){var b=a.model.get("baseUrl")+"billing_"+c;$.get(b,{},function(d){a.content.stats[c]=d;a.render()})})},render:function(){Analytics.ContentView.prototype.render.apply(this);var a=this;_.each(a.content.stats,function(d,c){var b=$("#billing_graph_"+c+" .donut");var e=d.total/d.limit*360;a.initDonut(b,e)})},initDonut:function(a,b){if(b>360){b=360}if(b>180){a.addClass("over_180").find(".donut_mask").css("transform","rotateZ(180deg)");a.find(".donut_mask_second").css("transform","rotateZ("+(b-180)+"deg)")}else{a.find(".donut_mask").css("transform","rotateZ("+b+"deg)")}},},{Types:["file_storage","database_storage","data_transfer"],ViewHelpers:{formatPercent:function(b,a){return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(b/a*100)+"%"},humanizeFloat:function(b,a){if(b<10){b=Math.round(b*100)/100}else{if(b<100){b=Math.round(b*10)/10}else{b=Math.round(b)}}return Analytics.ViewHelpers.humanize(b,3)},formatType:function(a){switch(a){case"file_storage":return"File Storage";case"database_storage":return"Database Storage";case"data_transfer":return"Data Transfer";default:return""}},formatTotal:function(b,c,a){switch(b){case"file_storage":return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(c)+"/"+Analytics.ContentPerformance.ViewHelpers.humanizeFloat(a)+"GB";case"database_storage":return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(c)+"/"+Analytics.ContentPerformance.ViewHelpers.humanizeFloat(a)+"GB";case"data_transfer":return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(c)+"/"+Analytics.ContentPerformance.ViewHelpers.humanizeFloat(a)+"TB";default:return""}}},});Analytics.ContentRetention=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.type="retention";this.resetContent();if(!this.ignore()){this.fetchData()}},resetContent:function(){var b=this;var a=this.model.get("toDate");this.content={noData:false};_.each(Analytics.ContentRetention.DaysAgo,function(c){b.content["days_old_"+c]={time:moment(a).subtract("days",c)}});_.extend(this.content,Analytics.ContentRetention.ViewHelpers)},fetchData:function(){var b=this;this.resetContent();this.render();var a=this.model.get("toDate");$.get(this.model.get("baseUrl")+"analytics_retention",{at:moment(a).startOf("day").toDate().getTime()/1000},function(c){if(!c.content){b.content.noData=true;b.render();return}_.extend(b.content,c.content);b.renderSwap()})},renderSwap:function(){if(this.ignore()){return}var a=JST["apps/analytics/_content_retention"](this.content);var c=this.$el.find("table");var b=$("<div>"+a+"</div>").find("table");b.hide();this.$el.show();c.after(b);b.fadeIn(400,function(){c.fadeOut(c.remove.bind(c))});return this},},{ViewHelpers:{formatDate:function(a){return moment.utc(a).format("MMMM D")},formatActivityDate:function(a,b){return moment.utc(a).add("days",b).format("MMMM D")},ratio:function(a){if(typeof(a)!=="object"||a.active===undefined||!a.total){return -1}return a.active/a.total},insignificant:function(d){var c=this.ratio(d);var b=Math.round(c*100)/100;var a=this.RetentionSignificance[b];if(a){return d.total<a}},percentify:function(b){var a=this.ratio(b);if(a<0){return""}return(a*100).toFixed(1)+"%"},style:function(f){var l=this.ratio(f);if(l<0){return""}var d;if(l<0.1){d="b8d4fc"}else{if(l<0.2){d="a7cafc"}else{if(l<0.3){d="96c0fc"}else{if(l<0.4){d="85b6fc"}else{if(l<0.5){d="74acfc"}else{if(l<0.6){d="63a2fc"}else{if(l<0.7){d="5298fc"}else{if(l<0.8){d="5190e9"}else{if(l<0.9){d="4b88de"}else{d="4882d6"}}}}}}}}}if(this.insignificant(f)){var j=parseInt(d,16);var a=(j>>16)&255;var h=(j>>8)&255;var k=j&255;var c="rgba("+a+", "+h+", "+k+", 0.9)";var e="rgba("+a+", "+h+", "+k+", 0.95)";return"background: repeating-linear-gradient(135deg, #"+d+", #"+d+" 5px, "+c+" 5px, "+e+" 8px)"}return"background-color: #"+d},RetentionSignificance:{0:25,0.01:30,0.02:36,0.03:43,0.04:51,0.05:59,0.06:67,0.07:75,0.08:83,0.09:92,0.1:100,0.11:108,0.12:116,0.13:123,0.14:131,0.15:138,0.16:146,0.17:153,0.18:159,0.19:166,0.2:172,0.21:179,0.22:185,0.23:191,0.24:196,0.25:202,0.26:207,0.27:212,0.28:217,0.29:221,0.3:226,0.31:230,0.32:234,0.33:237,0.34:241,0.35:244,0.36:247,0.37:250,0.38:253,0.39:255,0.4:258,0.41:260,0.42:261,0.43:263,0.44:264,0.45:266,0.46:267,0.47:267,0.48:268,0.49:268,0.5:268,0.51:268,0.52:268,0.53:267,0.54:267,0.55:266,0.56:264,0.57:263,0.58:261,0.59:260,0.6:258,0.61:255,0.62:253,0.63:250,0.64:247,0.65:244,0.66:241,0.67:237,0.68:234,0.69:230,0.7:226,0.71:221,0.72:217,0.73:212,0.74:207,0.75:202,0.76:196,0.77:191,0.78:185,0.79:179,0.8:172,0.81:166,0.82:159,0.83:153,0.84:146,0.85:138,0.86:131,0.87:123,0.88:116,0.89:108,0.9:100,0.91:92,0.92:83,0.93:75,0.94:67,0.95:59,0.96:51,0.97:43,0.98:36,0.99:30,1:25}},DaysAgo:[1,2,3,4,5,6,7,8,14,21,28],});Analytics.GraphBreakdownSidebar=Backbone.View.extend({events:{"click .graph_breakdown_sidebar_close":"cancelSidebar","change .toggle input":"toggleDimension","click .add_series_button":"createSeries",},initialize:function(){_.bindAll(this);this.uiDropdowns={};this.model.on("change:sidebarDropdown",this.renderSeries)},getSelectedEventInfo:function(){var a=this.eventDropdown.value;var b={};if(_.findWhere(Analytics.GraphState.EventsSeriesOptions,{endpoint:a})){b={endpoint:a}}else{b={endpoint:"custom_event",eventName:a}}return b},buildSeries:function(){var b=this.getSelectedEventInfo();var a=this;var e={};var d;var c;var f;_.each(this.$("li"),function(j,h,k){var m=$(j).children("input[type=hidden]");if(m.val()==="false"){return}var l=a.uiDropdowns[m.data("dimension")];if(_.isUndefined(l)){return}if(l.name==="device_type"){d=l.value}else{if(l.name==="class_name"){c=l.value}else{if(l.name==="refinement"){f=l.value}else{e[l.name]=l.value}}}});_.extend(b,{baseUrl:this.model.get("baseUrl"),dimensions:e,deviceType:d,className:c,refinement:f,isCustom:true});return new Analytics.Series(b)},addNewSeriesToUI:function(a){this.model.get("seriesOptions").add(a);this.dropdown.swapSeries(a);$(".add_series_button").spin(false);this.hideSidebar()},createSeries:function(){var a=this;$(".add_series_button").html("").spin("small","#777");var b=this.buildSeries();if(this.model.get("admin")){return this.addNewSeriesToUI(b)}b.save({success:this.addNewSeriesToUI,error:function(){$(".add_series_button").spin(false)}})},changeEvent:function(j){var h=this.$("ul");var c=this.getSelectedEventInfo().eventName;var b=this;var a=h.children("li.missing").remove();h.empty();h.spin();this.updateDisplayedSeries();var f=function(e){h.empty();b.renderDefaultOptions();_.each(e&&e.dimensions,function(m,n,o){var k=n.replace(/\s/g,"_");var l={dimensionName:n,sanitizedDimensionName:k};h.append(JST["apps/analytics/_graph_breakdown_sidebar_option"](l));b.uiDropdowns[n]=new UI.Dropdown({optionSet:m,name:n,value:m[0],onChange:b.updateDisplayedSeries,parent:document.getElementById(k+"_select")})});h.append(a);h.spin(false)};if(!c){f()}else{var d=this.seriesModel.get("baseUrl")+"custom_event_dimensions";$.get(d,{event:c},f)}},updateDisplayedSeries:function(b){var a=this.buildSeries();this.dropdown.swapSeries(a,true);this.displayedSeries=a},toggleDimension:function(f){var b=f.target;var h=b.parentNode.parentNode;var c=h.nextElementSibling;var d=b.checked;c.value=d;var a=c.nextElementSibling;if(d){a.style.display="block"}else{a.style.display="none"}this.updateDisplayedSeries()},showSidebar:function(){this.$el.animate({right:0,opacity:0.93})},hideSidebar:function(a){this.model.unset("sidebarDropdown",true);this.$el.animate({right:-300,opacity:0});if(a){a.stopPropagation()}},cancelSidebar:function(a){if(this.displayedSeries!=this.seriesModel){this.dropdown.swapSeries(this.seriesModel,true)}this.hideSidebar()},renderDefaultOptions:function(){var b={isAPIRequest:this.displayedSeries.get("endpoint")==="api_request",};var d=JST["apps/analytics/_graph_breakdown_sidebar_default_options"](b);this.$("ul").prepend(d);if(document.getElementById("device_type_select")){var h={iOS:"ios",Android:"android",JavaScript:"js",".NET":"windows",REST:"rest"};this.uiDropdowns.deviceType=new UI.Dropdown({optionSet:_.keys(h),name:"device_type",values:h,value:"ios",onChange:this.updateDisplayedSeries,parent:document.getElementById("device_type_select")})}if(document.getElementById("class_name_select")){var e=_.map(this.model.get("appSchema"),function(j){return j.className});if(_.isEmpty(e)){var f=document.createElement("span");f.style["margin-left"]="10px";f.style["font-size"]="0.8em";f.innerHTML="No classes defined for "+this.model.get("app").get("name");var c=document.getElementById("class_name_select");c.appendChild(f)}else{this.uiDropdowns.className=new UI.Dropdown({optionSet:e,name:"class_name",value:e[0],onChange:this.updateDisplayedSeries,parent:document.getElementById("class_name_select")})}}if(document.getElementById("refinement_select")){var a={"Create requests":"create","Get requests":"get","Find requests":"find","Update requests":"update","Delete requests":"delete"};this.uiDropdowns.refinement=new UI.Dropdown({optionSet:_.keys(a),name:"refinement",values:a,value:"create",onChange:this.updateDisplayedSeries,parent:document.getElementById("refinement_select")})}},renderSeries:function(d,e,c){this.dropdown=d.get("sidebarDropdown");if(!this.dropdown){this.hideSidebar();return}this.seriesModel=this.dropdown.seriesModel;this.displayedSeries=this.dropdown.seriesModel;var a={legendColor:this.seriesModel.get("color"),displayedSeries:this.displayedSeries};this.$el.html(JST["apps/analytics/_graph_breakdown_sidebar"](a));var b=_.reduce(Analytics.GraphState.EventsSeriesOptions,function(f,h){f[h.displayName]=h.endpoint;return f},{});_.each(this.model.get("customEvents"),function(f){b[f]=f});this.eventDropdown=new UI.Dropdown({optionSet:_.keys(b),name:"event",values:b,value:b[this.displayedSeries.get("displayName")],onChange:this.changeEvent,parent:document.getElementById("event_select")});this.renderDefaultOptions();this.showSidebar()},render:function(){return this}});Analytics.GraphDropdown=Backbone.View.extend({className:"graph_refinement",events:{"click .dropdown_button":"toggleMenu","click .refinement_dropdown li.series_option:not(.unavailable)":"optionSelected","click .dropdown_remove":"renderRemoveDropdown","click .new_series_button":"showCreateSeries","click .remove_series_button":"removeSeries"},initialize:function(){var a=this;_.bindAll(this);this.seriesModel=this.options.seriesModel;this.model.get("selectedSeries").on("add remove",this.renderRemoveButton);this.model.get("seriesOptions").on("remove",this.renderRemoveSeriesOptions);this.registerSeriesModelEvents()},registerSeriesModelEvents:function(){this.seriesModel.on("change:loading",this.renderLoading);this.seriesModel.on("change:loading",this.renderRemoveButton)},unregisterSeriesModelEvents:function(){this.seriesModel.off("change:loading",this.renderLoading);this.seriesModel.off("change:loading",this.renderRemoveButton)},toggleMenu:function(b,a){if(b&&$(b.target).hasClass("dropdown_remove")){return}if(this.$(".refinement_dropdown")[0]){if(this.open){this.open=false;this.$(".refinement_dropdown").hide().removeClass("visible")}else{this.open=true;this.$(".refinement_dropdown").show();if(a){this.$(".refinement_dropdown").addClass("visible")}else{setTimeout(function(){this.$(".refinement_dropdown").addClass("animation visible")},10);setTimeout(function(){this.$(".refinement_dropdown").removeClass("animation")},200)}}}},closeMenu:function(b,a){if(this.open){this.toggleMenu(b,a)}},openMenu:function(b,a){if(!this.open){this.toggleMenu(b,a)}},optionSelected:function(b){var a=this.model.get("seriesOptions").at($(b.target).closest("li").index());this.swapSeries(a)},swapSeries:function(a,c){this.unregisterSeriesModelEvents();var b=this.seriesModel;this.seriesModel=this.model.swapSelectedSeriesElement(this.seriesModel,a);this.registerSeriesModelEvents();this.render();ParseDotCom.Analytics.track("analytics_swap_series",{from_model:b.get("displayName"),to_model:a.get("displayName")});if(!c){this.toggleMenu()}return false},removeSeries:function(b){var a;if(b instanceof $.Event){a=this.model.get("seriesOptions").at($(b.target).closest("li").index())}else{a=b}this.model.get("seriesOptions").remove(a);if(!this.model.get("admin")){a.destroy()}b.stopImmediatePropagation();return false},showCreateSeries:function(){this.model.set("sidebarDropdown",this);this.closeMenu()},render:function(){var b=this.open;var c=this.model.getCurrentNavigationUIOptions();var a={seriesOptions:this.model.get("seriesOptions"),seriesModel:this.seriesModel,state:this.model,shouldShowBreakdown:c&&c.breakdown};this.$el.html(JST["apps/analytics/_graph_dropdown"](a));this.renderAllSeriesOptions();this.renderRemoveButton(null,this.model.get("selectedSeries"),null);this.renderLoading(this.seriesModel);if(b){this.open=false;this.openMenu(null,true)}return this},renderAllSeriesOptions:function(){var a=this;this.$(".dropdown_options li.series_option").remove();this.model.get("seriesOptions").each(function(b,c){var d=c===a.model.get("seriesOptions").length-1;a.renderSingleSeriesOption(b,d)});return this},renderSingleSeriesOption:function(a,c){var b={seriesOption:a};b.isSelected=a.get("seriesId")===this.seriesModel.get("seriesId");b.isSelectedElsewhere=this.model.get("selectedSeries").some(function(e,d,f){return e.get("seriesId")===a.get("seriesId")&&!b.isSelected});b.isLast=c;if(this.$(".dropdown_options li.series_option").length===0){this.$(".dropdown_options").prepend(JST["apps/analytics/_graph_dropdown_option"](b))}else{this.$(".dropdown_options li.series_option").last().after(JST["apps/analytics/_graph_dropdown_option"](b))}},renderRemoveButton:function(a,c,b){if(this.model.get("selectedSeries").length>1&&this.seriesModel&&!this.seriesModel.get("loading")){this.$(".dropdown_remove").show()}else{this.$(".dropdown_remove").hide()}},renderLoading:function(a){if(a.get("loading")){this.$(".graph_loading").spin("xsmall","#717171").css("display","inline-block");this.$(".legend").hide()}else{this.$(".graph_loading").hide();this.$(".legend").css("display","inline-block")}},renderRemoveDropdown:function(a){this.model.get("selectedSeries").remove(this.seriesModel);ParseDotCom.Analytics.track("analytics_remove_series",{model:this.seriesModel.get("displayName")});return false},renderRemoveSeriesOptions:function(a){this.$(".series_option[data-series-id="+a.get("seriesId")+"]").remove();if(this.seriesModel.get("seriesId")===a.get("seriesId")){this.swapSeries(this.model.nextAvailableSeries(),true)}}});Analytics.GraphNavigationSidebar=Backbone.View.extend({events:{"click a":"navigateTo"},initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.changeSelectedNavigation)},navigateTo:function(c){var b=c.currentTarget;if(!b.id){return true}var a=b.id.substr(4);if(a!==this.model.get("selectedNavigation")){this.model.set("selectedNavigation",a);this.model.addFirstAvailableSeries();ParseDotCom.Analytics.track("analytics_swap_navigation",{navigation:a})}return false},changeSelectedNavigation:function(){var a=this.model.get("selectedNavigation");this.$el.find(".selected").removeClass("selected");this.$el.find("#nav_"+a).parent().addClass("selected")}});Analytics.GraphToolbar=Backbone.View.extend({events:{"click .graph_add":"addButtonEventHandler","click .full_screen_button":"toggleFullScreen","click .export_button":"exportGraph","click .refresh_button":"startRefreshGraph"},initialize:function(){this.dropdownViews=[];var a=this;_.bindAll(this);this.model.on("change:fromDate change:toDate",this.checkExportability);this.model.get("selectedSeries").on("add",this.renderAddDropdown);this.model.get("selectedSeries").on("remove",this.renderRemoveDropdown);this.model.get("selectedSeries").on("add remove reset",this.renderAddButton);this.model.get("selectedSeries").on("reset",this.renderRemoveAllDropdowns);this.model.get("selectedSeries").on("change:loading",this.maybeStopRefresh);this.model.get("selectedSeries").on("add remove swap",this.renderDropdowns);$(document).delegate("body, .chart_container","click",function(b){_.each(a.dropdownViews,function(c){c.closeMenu(b);b.stopPropagation()})});$(document).delegate(".graph_refinement","click",function(b){_.each(a.dropdownViews,function(c){if($(b.target).closest(".graph_refinement")[0]!==c.$el[0]){c.closeMenu(b)}});b.stopPropagation()});$(".highcharts-container").click(this.hideToolbarElements)},toggleFullScreen:function(a){$(".p_apps_show").toggleClass("full_screen");this.model.set("fullScreen",$(".p_apps_show").hasClass("full_screen"));ParseDotCom.Analytics.track("analytics_toggle_fullscreen",{enabled:this.model.get("fullScreen").toString()});$(".highcharts-container").click(this.hideToolbarElements)},isExportOutOfRange:function(c){var b=this.model.get("toDate")-this.model.get("fromDate");var a=b/1000/60/60/24;return a>184},checkExportability:function(a){this.$(".export_button").toggleClass("export_disabled",this.isExportOutOfRange())},exportGraph:function(c){if(this.isExportOutOfRange()){return false}var b=this.model.get("selectedSeries");var a=b.reduce(function(e,d){e.endpoints.push(d.generateDataUrlParams());return e},{from:this.model.encodeDateAsParam(this.model.get("fromDate")),to:this.model.encodeDateAsParam(this.model.get("toDate")),stride:this.model.get("stride"),endpoints:[]});window.location=this.model.get("baseUrl")+"analytics_batch?"+$.param(a);return false},startRefreshGraph:function(a){this.$(".refresh_button").addClass("animating");this.model.get("selectedSeries").each(function(c,b,d){c.trigger("change:dataUrl",c)});return false},maybeStopRefresh:function(a,c,b){if(!c){this.$(".refresh_button").removeClass("animating")}},addButtonEventHandler:function(a){this.$(".graph_add").removeClass("graph_add").addClass("graph_refinement graph_refinement_placeholder");this.$(".graph_dropdowns").append(JST["apps/analytics/_graph_add_button"]());this.model.addSelectedSeries(this.model.nextAvailableSeries());ParseDotCom.Analytics.track("analytics_add_series")},hideToolbarElements:function(a){_.each(this.dropdownViews,function(b){b.closeMenu(a)})},render:function(){var a=this;this.$el.append(JST["apps/analytics/_graph_toolbar"]());if(this.model.get("selectedSeries").length>0){this.model.get("selectedSeries").each(function(c,b,d){a.renderAddDropdown(c,d,{index:b})})}this.renderAddButton(null,this.model.get("selectedSeries"),null)},renderAddDropdown:function(a,d,b){$(".last").removeClass("last");var c=$(".graph_refinement_placeholder").removeClass("graph_refinement_placeholder").addClass("last");var e;if(c.length>0){e=new Analytics.GraphDropdown({model:this.model,seriesModel:a,index:b.index,el:c});e.render()}else{e=new Analytics.GraphDropdown({model:this.model,seriesModel:a,index:b.index});this.$(".graph_dropdowns .graph_add").before(e.render().$el)}this.dropdownViews.push(e)},renderRemoveDropdown:function(b,d,c){var a=this.dropdownViews.splice(c.index,1)[0];a.undelegateEvents();a.remove();if(a===this.model.get("sidebarDropdown")){this.model.unset("sidebarDropdown")}},renderRemoveAllDropdowns:function(b,a){while(this.dropdownViews.length>0){this.renderRemoveDropdown(null,null,{index:0})}},renderAddButton:function(b,d,c){var a=this.model.get("seriesOptions").length;if(d.length<3&&d.length<a&&a>0){this.$(".graph_add").css("display","inline-block")}else{this.$(".graph_add").hide()}},renderDropdowns:function(){_.each(this.dropdownViews,function(a){a.renderAllSeriesOptions()})}});Analytics.Graph=Backbone.View.extend({minChartHeight:550,initialize:function(){_.bindAll(this);var a=this;this.chartContainer="chart_container_"+this.model.get("app").id;this.model.get("selectedSeries").on("change:dataUrl",this.updateSeriesData);this.model.get("selectedSeries").on("change:data",this.renderAddSeries);this.model.get("selectedSeries").on("remove",this.renderRemoveSeries);this.model.get("selectedSeries").on("reset",this.renderResetSeries);this.model.on("change:fromDate",this.updateDateFrom);this.model.on("change:toDate",this.updateDateTo);this.model.on("change:fullScreen",this.updateChartHeight);this.dateRange=new UI.Daterange({value:{from:this.model.get("fromDate"),to:this.model.get("toDate")},preventFuture:true,compactOnChange:true,onChange:function(b){a.model.set({fromDate:a.model.snapFromDate(b.from),toDate:a.model.snapToDate(b.to)});ParseDotCom.Analytics.track("analytics_change_date")},parent:this.$(".graph_dates")[0]});$(window).resize(_.debounce(function(){if(a.model.get("fullScreen")){a.updateChartHeight()}},500));this.chartHeight=this.minChartHeight;this.chartType="line";if(this.options.chartBackgroundColor){this.chartBackgroundColor=this.options.chartBackgroundColor}else{if(getInternetExplorerVersion()>0){this.chartBackgroundColor="#FFF"}else{this.chartBackgroundColor="transparent"}}if($("body").hasClass("dark_dashboard")){this.chartBorderColor="#5a6065"}Highcharts.setOptions({global:{useUTC:false}})},updateSeriesData:function(b){var a=this;b.set("loading",true);this.model.incrementOutgoingRequests();var c=b.get("dataUrl");$.get(c.url,c.params).success(function(e){var f=e.requested_data;var d;if(f){if(f.length<=0){d=[]}else{d=_(f).map(function(j){var h=Parse._decode("date",{date:j[0]}).date;return[parseInt($.datepicker.formatDate("@",h),10),j[1]]})}}b.unset("data",{silent:true});b.set("data",d);a.model.decrementOutgoingRequests();b.set("loading",false)}).error(function(){a.model.decrementOutgoingRequests();b.set("loading",false)})},updateDateFrom:function(){if(this.dateRange){this.dateRange.from.value=this.model.get("fromDate")}},updateDateTo:function(){if(this.dateRange){this.dateRange.to.value=this.model.get("toDate")}},updateChartHeight:function(){if(this.model.get("fullScreen")){var a=$(".app_menu").outerHeight()+$(".graph_toolbar").outerHeight()+$(".aggr_container").outerHeight()+3;this.chartHeight=$(".container").height()-a}else{this.chartHeight=this.minChartHeight}this.chartRendered=false;this.render()},render:function(){var a=this;var c=this.$el.find(".graph_container");var b=this.model.getCurrentNavigationUIOptions();if(!b.graph){c.hide();return}if(!this.chartRendered){c.show();this.renderChart();this.chartRendered=true}while(this.graph.series.length>0){a.graph.series[0].remove(false)}this.model.get("selectedSeries").each(function(e,d,f){a.renderAddSeries(e,false)});if(this.graph.yAxis[0].getExtremes().dataMax>0.9*this.graph.yAxis[0].getExtremes().max){this.graph.yAxis[0].setExtremes(0,this.graph.yAxis[0].getExtremes().max*1.1)}this.graph.redraw();c.show()},renderAddSeries:function(a,c){if(!this.chartRendered){this.renderChart();this.chartRendered=true}a.set("displayId",Analytics.Graph.generateId());var b=a.get("tooltipName");this.graph.addSeries({color:a.get("color"),data:a.get("data"),id:a.get("displayId"),marker:{symbol:"circle",enabled:!a.get("hideMarker")},showInLegend:false,tooltipName:b},false);this.renderSyncSeries();if(typeof(c)==="undefined"||c){this.graph.redraw()}},renderRemoveSeries:function(a,f,b){var d=this.graph.get(a.get("displayId"));var e=d.data;for(var c=0;c<e.length;c++){e[c].update(0,false)}this.graph.redraw();setTimeout(function(){d.remove()},500)},renderResetSeries:function(){this.chartRendered=false;this.render()},renderSyncSeries:function(){var a=this;_.each(this.graph.series,function(c){var d=c.options.id;var b=a.model.get("selectedSeries").some(function(f,e,h){return f.get("displayId")===d});if(!b){a.graph.get(d).remove()}})},renderDemoData:function(a){this.chartWidth=958;this.renderChart();this.graph.addSeries({color:this.model.getSeriesColors()[0],data:a,id:"demo",marker:{symbol:"circle"},showInLegend:false,tooltipName:"opens"})},renderChart:function(){var a=this.model.getGraphStrideOptions();this.graph=new Highcharts.Chart({chart:{backgroundColor:this.chartBackgroundColor||"#FFF",height:this.chartHeight,plotBackgroundColor:this.chartBackgroundColor||"#FFF",plotBorderColor:this.chartBorderColor||"#c0bfbf",plotBorderWidth:1,renderTo:this.chartContainer,shadow:false,spacingRight:-1,spacingTop:0,type:this.chartType,width:this.chartWidth||null,marginRight:30},credits:{enabled:false},loading:{labelStyle:{display:"none"},style:{position:"absolute",marginLeft:"1px",marginRight:"1px",marginTop:"1px",marginBottom:"1px"}},plotOptions:{series:{fillOpacity:0.1,marker:{fillColor:"#FFFFFF",lineColor:null,lineWidth:2},shadow:false,states:{hover:{enabled:false}}}},title:{text:null},tooltip:{backgroundColor:"rgba(242,242,242,0.8)",borderWidth:1,formatter:function(){return'<span class="tooltip_date">'+moment.unix(this.x/1000).format(a.tooltipFormat)+'</span><br/><span class="tooltip_value">'+this.y+" "+this.series.options.tooltipName+"</span>"},style:{"padding-top":10},shadow:false,useHTML:true},xAxis:{labels:{formatter:function(){return moment.unix(this.value/1000).format(a.dateFormat)},style:{color:"#949fa3",fontSize:"13",fontWeight:"500",fontFamily:"Helvetica Neue",lineHeight:" 20px"},y:20},minTickInterval:a.minTickInterval,tickLength:10,tickPosition:"inside",tickPixelInterval:"140",type:"datetime",tickColor:this.chartBorderColor||"#e0e4e9",lineColor:this.chartBorderColor||"#e0e4e9"},yAxis:{allowDecimals:false,gridLineColor:this.chartBorderColor||"#e0e4e9",gridLineDashStyle:"LongDash",labels:{style:{color:"#798082",fontSize:"13",fontWeight:"500",fontFamily:"Helvetica Neue",lineHeight:"20px"},y:5},min:0,plotLines:[{value:0,width:1,color:this.chartBorderColor||"#e0e4e9"}],showFirstLabel:false,showLastLabel:false,tickPixelInterval:"140",tickPosition:"inside",title:{text:null},tickColor:this.chartBorderColor||"#e0e4e9",lineColor:this.chartBorderColor||"#e0e4e9"}})}},{generateId:function(){var a=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return a()+a()+"-"+a()+a()+"-"+a()+a()}});Analytics.NoData=Backbone.View.extend({el:".empty_wrapper",states:{},initialize:function(){_.bindAll(this);this.setup();this.model.get("selectedSeries").on("add remove swap change",this.render);this.model.on("change:noData",this.render);this.model.on("change:outgoingRequests",this.render);if(this.model.get("noData")){this.render()}},getErrorMessages:function(a){return{api_request:{text:"You don't have any API Requests data for this period.",action:"/apps/quickstart",actionText:"Learn how to make API Requests"},analytics_request:{text:"You haven't tracked any Analytics events for this period.",action:"/apps/quickstart#analytics",actionText:"Learn how to get started with Analytics"},file_request:{text:"You're not storing any files on Parse.",action:"/docs/rest#files",actionText:"Learn how to store Files"},push:{text:"You don't have any Push Notifications data for this period.",action:"/apps/quickstart_push",actionText:"Learn how to send Push Notifications"},app_opened:{text:"You don't have any App Opens data for this period.",action:"/apps/quickstart",actionText:"Learn how to track App Opens"},app_opened_from_push:{text:"You don't have any Push Opens data for this period.",action:"/docs/push_guide#receiving-tracking/iOS",actionText:"Learn how to track Push Opens"},custom_event:{text:"You don't have any custom events for this period.",action:"/docs/rest#analytics-custom",actionText:"Learn how to track Custom Events"},class_count:{text:"You don't have any data for this period.",action:"/apps/quickstart",actionText:"Get started with Parse"},audience:{text:"You don't have any user engagement data for this period.",action:"/apps/quickstart",actionText:"Get started with Parse"},performance:{text:"You don't have any performance data for this period.",action:"/apps/quickstart",actionText:"Get started with Parse"},multiple:{text:"You don't have any data for this period.",action:"/apps/quickstart",actionText:"Get started with Parse"},navigation_performance:{text:"You don't have any performance data for this period.",action:"/apps/quickstart",actionText:"Get started with Parse"},navigation_data:{text:"You don't have any Classes defined on Parse.",action:a.dataRequestUrl()+"collections/",actionText:"Add a Parse Class"},navigation_audience:{text:"You don't have any user engagement data for this period.",action:"/apps/quickstart",actionText:"Get started with Parse"}}},setup:function(){this.$el.hide();var a=this;this.states=this.getErrorMessages(this.model.get("app"))},render:function(){var c=this.model.getCurrentNavigationUIOptions();if(!c.graph){this.$el.hide();return}var a=this;var b=this.model.get("selectedSeries");var e=null;if(b.size()>1){e=this.states.multiple}else{if(b.size()===1){e=this.states[b.first().get("endpoint")]}else{e=this.states["navigation_"+this.model.get("selectedNavigation")]}}var d=b.some(function(h,f,k){var j=h.get("data");if(a.model.get("outgoingRequests")>0){return true}return !!j&&j.length>0&&j.some(function(l){return l[1]>0})});this.$el.html(JST["apps/analytics/_no_data"]({text:e.text,action:e.action,actionText:e.actionText}));if(d){this.$el.hide()}else{this.$el.fadeIn()}return this}});App.Views.Apps.Annoucement=Backbone.View.extend({events:{"click #close_button":"closeAnnouncement"},COOKIE_NAME:"parseJSAnnouncement",initialize:function(){var a=this;this.render();if($.cookie(this.COOKIE_NAME)=="closed"){var b=new Date();b.setTime(b.getTime()+3600*24*300*1000);$.cookie(this.COOKIE_NAME,"closed",{path:"/",expires:b.toGMTString()})}},render:function(){if($(".announcement").is(":visible")){if($.cookie(this.COOKIE_NAME)=="closed"){$(".announcement").hide()}}},closeAnnouncement:function(b){$(".announcement").slideUp();var a=new Date();a.setTime(a.getTime()+3600*24*300);$.cookie(this.COOKIE_NAME,"closed",{path:"/",expires:a.toGMTString()})}});App.Views.Index={};App.Views.Index.initialize=function(){var a="/apps/cloning_progress";var n=new App.Collections.ProgressFetcher(cloningJson,{url:a});n.resetFetchLoop();var h=function(o){var q=new App.Views.ProgressBar({model:o,markers:15});$(".cloning[data-api-key="+o.id+"] .cloning_content").append(q.$el);q.render()};n.each(function(o){h(o)});var b=new Gridflow($(".app_list")[0],"app_card");var k=function(){return UI.tag("div",{className:"create_header"},[UI.tag("div",{className:"title"},"What's the name of your new app?"),UI.tag("input",{className:"new_name",type:"text",placeholder:"New App"})])};var d=function(o){return UI.tag("div",{className:"clone_header"},[UI.tag("div",{className:"title"},"What's the name of your new app?"),UI.tag("input",{className:"new_name",type:"text",placeholder:"New App"}),UI.tag("span",{className:"clone_warning"},["This will clone everything but data and background jobs schedules. You can do custom clones from the ",UI.tag("a",{href:"/apps/"+o+"/edit"},"settings page"),"."])])};var m=function(r,s){var q=r+"_content";var o=r+"_button";return UI.tag("div",{className:q},[UI.tag("a",{className:"ui_action_button "+o},s),UI.tag("a",{className:"cancel"},[UI.tag("i",{className:"icon_crossCircle"}),UI.tag("span",{},"cancel")])])};var j=function(){return UI.tag("a",{className:"ui_action_button dismiss_button",href:"#"},["Ok, got it"])};var f=function(o){if(o){$(".new_app_button a").removeClass("hidden")}else{$(".new_app_button a").addClass("hidden")}};var c=function(q){var o=$(".light_overlay");if(q){o.show();setTimeout(function(){o.css("opacity",1)},0)}else{o.css("opacity",0);setTimeout(function(){o.hide()},500)}};var e=function(o,q){if(o){q.removeClass("hidden")}else{q.addClass("hidden")}};var l=function(o,s,u,v){var r="/apps/"+s;v.find(".gear, .badge").attr("href",r+"/edit");v.find(".app_icon").attr("href",r);var q=v.find(".buttons a");q=_.reduce(q,function(x,w){x[w.innerHTML]=w;return x},{});$(q.Core).attr("href",r+"/collections");$(q.Analytics).attr("href",r);$(q.Push).attr("href",r+"/push_notifications");$(q.Quickstart).attr("href","/apps/quickstart?app_id="+s);var t=v.find(".popover_menu a");t=_.reduce(t,function(x,w){x[w.innerHTML]=w;return x},{});$(t.Settings).attr("href",r+"/edit");$(t.Export).attr("href",r+"/edit#export");$(t.Keys).attr("href",r+"/edit#keys");v.attr("data-friendly-id",s);v.attr("data-api-key",u);v.find(".app_name").html(o)};$(".new_app_button a").on("click",function(o){if($(this).hasClass("hidden")){return false}f(false);$(".dashboard_content").animate({scrollTop:0},300);setTimeout(function(){$card=$($("#new_app_template").html());$card.addClass("new_app");$card.find(".header").append(k());$card.find(".content").append(m("create","Create"));b.insert($card[0]);$card.find(".new_name").focus();c(true)},300);return false});$("body").delegate(".new_app .cancel","click",function(o){b.remove($(".new_app").index());c(false);setTimeout(function(){f(true)},600);return false});$("body").delegate(".create_button","click",function(q){var r=$(".new_app");$(".create_button").html("").spin("small","#fff");var o=$(".new_name").val();$.post("/apps",{parse_app:{name:o}}).then(function(t){$(".create_button").spin(false).html("Create");if(t.success){r.removeClass("new_app").addClass("new_app_transition");c(false);r.find(".animated_name").show().css("opacity",1).css("top","50px").html(o);r.find(".app_name").css("opacity",0);var s=t.app.friendly_id;l(o,s,t.app.api_key,r);r.find(".analytics_content").html('Your app is ready to go! Check out the <br><a href="/apps/quickstart?app_id='+s+'">quickstart guide</a>, or grab your <a href="/apps/'+s+'/edit#keys">keys</a>.');setTimeout(function(){f(true);r.removeClass("new_app");r.find(".animated_name").hide();r.find(".app_name").css("opacity",1);r.find(".create_header").remove();r.find(".create_content").remove()},500)}else{r.find(".title").html(t.errors[0]).addClass("error")}});return false});$("body").delegate(".clone_menu","click",function(o){var q=$(this).closest(".app_card");q.find(".header").append(d(q.attr("data-friendly-id")));q.find(".content").append(m("clone","Next"));e(false,q.find(".buttons"));f(false);c(true);setTimeout(function(){q.addClass("clone_app");var r=q.find(".app_info .app_name").html();q.find(".new_name").val(r+"-Clone").focus()},0);return false});$("body").delegate(".clone_app .cancel","click",function(o){var q=$(this).closest(".app_card");q.removeClass("clone_app");q.find(".clone_header").remove();q.find(".clone_content").remove();c(false);f(true);setTimeout(function(){e(true,q.find(".buttons"))},300)});$("body").delegate(".clone_app .clone_button","click",function(o){var r=$(this).closest(".app_card");$(this).addClass("warned").html("Clone");r.find(".clone_header .title").css("opacity",0);var q="-45px";r.find(".new_name").css({"-webkit-transform":"translateY("+q+")","-moz-transform":"translateY("+q+")",transform:"translateY("+q+")"});setTimeout(function(){r.find(".clone_warning").css("opacity",1)},350)});$("body").delegate(".clone_app .clone_button.warned","click",function(s){var t=$(this).closest(".app_card");$(this).html("").spin("small","#fff");var o=$(".new_name").val();var r="/apps/"+t.attr("data-friendly-id")+"/clone_app";var q={cloud_code:true,background_jobs:false,config:true,schema:true,app_settings:true};$.post(r,{app_name:o,options:q}).then(function(u){$(".clone_button").spin(false).html("Clone");if(u.success){$cloneCard=$($("#new_app_template").html());$cloneCard.addClass("cloning");$cloneCard.addClass("keep_on_top");$cloneCard.find(".subtext").text("Cloning app...");$cloneCard.find(".content").append(UI.tag("div",{className:"cloning_content"}));l(o,u.app.friendly_id,u.app.api_key,$cloneCard);t.removeClass("clone_app");t.find(".clone_header").remove();t.find(".clone_content").remove();$(".dashboard_content").animate({scrollTop:0},300);b.insert($cloneCard[0]);n.upsert({job:"cloning",id:u.app.api_key,progress:0,status:"queued"});setTimeout(function(){c(false);f(true);e(true,t.find(".buttons"));setTimeout(function(){$cloneCard.removeClass("keep_on_top")},500)},800)}else{t.find(".clone_warning").html(u.error[0]).addClass("error")}})});$("body").delegate(".clone_error .dismiss_button","click",function(q){var r=$(this).closest(".app_card");$(".dismiss_button").html("").spin("small","#fff");var o="/apps/"+r.attr("data-friendly-id")+"/dismiss_clone";$.get(o,{}).then(function(s){if(s.success){b.remove(r.index())}})});n.on("remove change:status",function(o){$card=$('.app_card[data-api-key="'+o.id+'"]');if(o.get("status")=="failed"){$card.removeClass("cloning").addClass("clone_error");$card.find(".subtext").html("Something went wrong with your clone!");$card.find(".content").append(j())}else{if(o.changedAttributes()===false){o.set("progress",1);setTimeout(function(){$card.removeClass("cloning");$card.find(".subtext").html("Created <strong>just now</strong>")},1500)}}});n.on("add",function(o){h(o)})};App.Views.Collaborations=Backbone.View.extend({events:{"click #collab_invite":"create","click .indexCollection a":"deleteCollaboration"},initialize:function(){var a=this;this.isOwner=this.options.isOwner;this.listView=this.$(".indexCollection");this.errorBox=this.$(".error_box");if(this.isOwner){this.$("#collab_email").keyup(function(b){if(b.keyCode===13){a.create(b)}})}this.render()},render:function(){this.listView.empty();this.collection.each(this.insertIntoView,this)},insertIntoView:function(a){var b=$(JST["apps/_collaborator_list"]({userName:a.get("userName"),userEmail:a.get("userEmail"),isOwner:this.isOwner,url:a.url()}));b.hide();this.listView.append(b);b.slideDown(1000)},showError:function(a){if(a){this.errorBox.text(a).slideDown(400)}else{this.errorBox.empty().hide()}},create:function(c){var b=this.$("#collab_email");if(!b.val().length){return false}var a=this;$.post(a.collection.url(),{collaboration:{email:b.val()}}).then(function(e){if(e.success){b.val("");a.showError(false);var d=new App.Models.Collaboration(e.data);a.collection.add(d);a.insertIntoView(d)}else{var f=e.error||(e.errors?e.errors.join("\n"):"");a.showError(f)}},function(){a.showError("An error occurred while trying to add a collaborator")});return false},deleteCollaboration:function(c){var b=c.target.getAttribute("href");c.target.setAttribute("href","#");c.target.className+=" disabled";var a=this;$.ajax({url:b,type:"post",dataType:"json",data:{_method:"delete"}}).then(function(d){$(c.target).removeClass("disabled");if(d.success){var e=parseInt(b.substr(b.lastIndexOf("/")+1),10);if(!isNaN(e)){a.collection.remove(e)}$(c.target.parentNode).slideUp(400)}else{c.target.setAttribute("href",b)}},function(){$(c.target).removeClass("disabled").attr("href",b)});return false}});App.Views.Apps.Edit=Backbone.View.extend({events:{"change input[type=checkbox]:not(.prod_switch):not(.noImplicitAjax)":"submitSwitch","change #parse_app_parse_app_metadata_production":"submitProdSwitch","click #export_button:not(.disabled)":"exportApp","click #cleanupButton":"cleanupFilesOnApp","click #deleteButton":"deleteApp","click #cloneButton":"cloneApp","keydown #clone_name_":"cloneApp","click #resetMasterKeyButton":"resetMasterKeyForApp","click .dashboard_nav a":"changeSection","change input[type=text]:not(.noImplicitAjax)":"fieldBlurred","change textarea:not(.noImplicitAjax)":"fieldBlurred","change input[type=file]":"uploadFile","change .keyRows input":"updateKeyList","click .addKeyRow":"addKeyRow","click .deleteRow":"deleteKeyRow"},initialize:function(){_.bindAll(this,"renderExport","createExportView","removeExportView");this.app_keys=this.options.app_keys||[];this.exportProgress=this.options.exportProgress;if(window.location.hash){var b=window.location.hash.substr(1);this.showSection(_.escape(b))}else{this.showSection("general")}$("input").keyup(function(c){if(c.keyCode==13){$(this).blur()}});if(this.exportProgress.models.length>0){this.createExportView(this.exportProgress.models[0])}this.exportProgress.on("change:status",this.renderExport);this.exportProgress.on("add",this.createExportView);this.exportProgress.on("remove",this.removeExportView);this.exportProgress.on("remove",this.renderExportNotification);var a=this;$(".hasKeyRows").each(function(){a.renderKeyRows($(this))});this.delegateEvents();this.rpc=this.options.rpc||new App.Views.RPC();this.rpc.delegateEvents();this.renderExport()},renderKeyRows:function(k){var a="parse_app[auth_options_attributes]";var h=k.find("input.app_id_list");var c=h.attr("name").replace(a,"");var b=k.find("input.app_secret_list");var d=b.attr("name").replace(a,"");var j=(h.val()||"").split(/\s*,\s*/);var f=(b.val()||"").split(/\s*,\s*/);var e=Math.max(j.length,f.length);k.find(".keyRows").html(JST["apps/_key_rows"]({row_count:e,id_list_name:c,secret_list_name:d,id_list:j,secret_list:f}))},showSection:function(d){var a=this;$(".dashboard_nav .selected").removeClass("selected");window.location.hash=d;$(".section").hide();$("#link_"+d).parent().addClass("selected");$("#section_"+d).css("opacity","0").show().animate({opacity:1});$(".dashboard_content")[0].scrollTop=0;if(d==="keys"){for(var c=0;c<a.app_keys.length;c++){var b=a.app_keys[c];new App.Views.CopyButton({id:b.id,text:b.key.slice(1,-1)}).render()}$("embed").show()}else{$("embed").hide()}},changeSection:function(c){$(".ui_flash").hide();var a=$(c.target).closest("a");if(!a.parent().hasClass("selected")){var b=a.attr("id").replace("link_","");this.showSection(b)}return false},submitSwitch:function(f){var a=$(f.target);var c=a.parents("form:first");var b=c.length>0?c.attr("action"):App.currentApp.dataRequestUrl();var h=a.attr("name");var d={};d[h]=!!f.target.checked;options={view:a.closest(".row"),url:b,method:"PUT",params:d};this.rpc.call(options)},submitProdSwitch:function(a){if(a.target.checked){$(".production_metadata").show()}else{$(".production_metadata").hide()}},fieldBlurred:function(f){var l=$(f.target);if(!l.hasClass("noSaveValue")){var b=l.parents("form:first");var a=b.length>0?b.attr("action"):App.currentApp.dataRequestUrl();var d={};var c=_.filter(l[0].classList,function(e){return e.indexOf("saveGroup")===0});var j;if(c.length===0){d[l.attr("name")]=l.val();j=l.closest(".row")}else{var k=_.map(c,function(e){return"."+e});var h=false;$(k.join(",")).each(function(e,m){if(!m.value||!m.value.length){h=true}else{d[m.getAttribute("name")]=m.value}});if(h){return}j={el:l,dx:26,dy:l.height()/2-18}}this.rpc.call({view:j,url:a,method:"PUT",params:d})}},updateKeyList:function(j){var h=$(j.target);var b="";if(h.attr("name").indexOf("app_ids")>-1){b="app_id"}else{if(h.attr("name").indexOf("app_secrets")>-1){b="app_secret"}else{return}}var a=[];var f=h.closest(".hasKeyRows");f.find("input[type=text]").each(function(){if(this.name&&this.name.indexOf(b)>-1){a.push(this.value)}});var c=f.find("."+b+"_list");var d={};var k=a.join(",");d[c.attr("name")]=k;c.val(k);this.rpc.call({view:{el:c.parent()},url:App.currentApp.dataRequestUrl(),method:"PUT",params:d})},addKeyRow:function(d){var a=$(d.target).closest(".hasKeyRows");var c=a.find("input.app_id_list");var b=a.find("input.app_secret_list");c.val(c.val()+",");b.val(b.val()+",");this.renderKeyRows(a);return false},deleteKeyRow:function(j){var d=$(j.target).closest("li");var b=d.closest(".hasKeyRows");d.remove();var h=[];var c=[];b.find("input[type=text]").each(function(e){if(this.name.indexOf("app_id")>-1){h.push(this.value)}else{if(this.name.indexOf("app_secret")>-1){c.push(this.value)}}this.name=this.name.replace(/\[\d+\]/,"["+((e/2)|0)+"]")});var k=b.find("input.app_id_list");var a=b.find("input.app_secret_list");var f={};f[k.attr("name")]=h.join(",");k.val(h.join(","));f[a.attr("name")]=c.join(",");a.val(c.join(","));this.rpc.call({view:{el:b},url:App.currentApp.dataRequestUrl(),method:"PUT",params:f});return false},uploadFile:function(a){$(a.target).parents("form:first").submit()},cleanupFilesOnApp:function(b){var a=$(b.target);this.rpc.call({view:{el:a,dx:-230,dy:-10},spinnerView:a.closest(".row"),url:a.parents("form:first").attr("action"),method:"PUT",params:{cleanup:true},successMessage:function(c){return c.notice}});return false},exportApp:function(c){var a=this;var b=$(c.target);this.rpc.call({view:{el:b.closest(".row")},url:b.parents("form:first").attr("action"),method:"PUT",params:{"export":true},customSuccess:true,success:function(){a.exportProgress.upsert({id:"",progress:0,status:"queued",message:"Starting export..."});$("#export_button").removeClass("disabled")}});$("#export_button").addClass("disabled");return false},validateAndConfirm:function(b,a){var c=$(b);if(c.length&&c.val().length<1){c.css("border-color","#dd4b39");return false}if(!confirm(a)){return false}c.closest("form").submit();return true},deleteApp:function(b){var a=this.validateAndConfirm("#password_confirm_delete","Are you sure you want to delete this app? All the data will be deleted, and there is no undo.");if(a){ParseDotCom.Analytics.track("website_app_delete",{app:App.currentApp.id,user:App.currentUser.id.toString()});$(b.target).closest("form").submit()}return false},cloneApp:function(c){var b=c.keyCode||c.which;if(c.type=="keydown"&&b!==13){return true}var a=$("#cloneButton");this.rpc.call({view:{el:a,dx:20,dy:-13},spinnerView:a.closest(".row"),url:a.parents("form:first").attr("action"),method:"POST",params:{app_name:$("#clone_name_").val(),options:{cloud_code:$(".clone_app input#cloud_code")[0].checked,background_jobs:$(".clone_app input#background_jobs")[0].checked,config:$(".clone_app input#config")[0].checked,schema:$(".clone_app input#schema")[0].checked,app_settings:$(".clone_app input#app_settings")[0].checked}},success:function(){$(".edit_parse_app").hide();$(".clone_success").show()}});return false},resetMasterKeyForApp:function(a){return this.validateAndConfirm("#password_confirm_reset_master_key","Are you sure you want to reset your master key? There is no undo.")},createExportView:function(a){this.exportView=new App.Views.ProgressBar({model:a,showMessage:true});$(".export_status").html(this.exportView.$el);this.renderExport(a)},removeExportView:function(){if(this.exportView){this.exportView.remove();this.exportView=undefined}this.renderExport()},renderExport:function(b){var a=this.exportProgress.get("");if(!_.isUndefined(a)){if(a.isActive()){this.exportView.render();$("#export_button, .export_success, .export_error").hide();$(".export_status").show()}else{if(a.isFailed()){$(".export_success, .export_status").hide();$("#export_button, .export_error").show()}}}else{$(".export_success, .export_error, .export_status").hide();$("#export_button").show()}},renderExportNotification:function(a){$(".export_success").show()}});App.Views.Apps.New=Backbone.View.extend({events:{"submit form":"createApp"},initialize:function(){this.render()},render:function(){var a=this;setTimeout(function(){a.$(".mini_window").show().addClass("animation")},500);setTimeout(function(){a.$(".mini_window").removeClass("animation")},2000)},createApp:function(){var a=this;var c={};c.parse_app={name:$("#parse_app_name").val()};var b=$("#tango");if(b.length&&b[0].checked){c.tango=true}a.$("button").html("<div class='spinner'></div>").attr("disabled",true);a.$(".spinner").spin("large","#717171").show();$.post("/apps/",c,function(d){if(d.success){a.step2(d)}else{$(".errors").text(d.errors[0]).show();a.$("button").html("Create app").attr("disabled",false).removeClass("disabled")}});return false},step2:function(a){var b=this;b.$(".mini_window").css("min-height","650px");b.$(".mini_window").css("margin-top","-325px");b.$(".container").css("min-height","750px");setTimeout(function(){b.$(".mini_window").html($(JST["apps/_new_app_step2"]({result:a})));$(".copy_container").each(function(){var d=$(this).children("input").val();var c=$(this).children("a").attr("id");new App.Views.CopyButton({id:c,text:d}).render()});b.$(".copy_container input").click(function(c){$(c.target).select();return false})},500)}});App.Views.Apps.OnBoard=Backbone.View.extend({initialize:function(){ParseDotCom.Analytics.track_links(".onboard_links a","Onboard click",function(a){return{url:$(a).attr("href")}});this.render()},render:function(){}});App.Views.ProductionMetadata=Backbone.View.extend({events:{"change input[type=checkbox]":"render"},initialize:function(){_.bindAll(this);var a=this;_.each(this.options.prod_metadata,function(b){a.$("#prod_metadata_"+b.platform)[0].checked=true;$("."+b.platform+"_link").val(b.url).show()})},render:function(c){if(!c){return}var a=c.target.id;var b="."+a.substr(a.lastIndexOf("_")+1)+"_link";$(b).toggle(c.target.checked)}});App.Models.Progress=Backbone.Model.extend({isActive:function(){return this.get("status")==="queued"||this.get("status")==="processing"},isFailed:function(){return this.get("status")==="failed"},isSuccess:function(){return this.get("status")==="success"}});App.Collections.ProgressFetcher=Backbone.Collection.extend({fetchLoop:undefined,url:undefined,model:App.Models.Progress,initialize:function(b,a){this.url=a.url;this.on("add remove reset change:status",this.resetFetchLoop);this.resetFetchLoop()},resetFetchLoop:function(){var a=this;if(this.activeModelsCount()===0&&!_.isUndefined(this.fetchLoop)){clearInterval(this.fetchLoop);this.fetchLoop=undefined}if(this.activeModelsCount()>0&&_.isUndefined(this.fetchLoop)){this.fetchLoop=setInterval(function(){a.fetch()},5000);this.fetch()}},fetch:function(){var a=this;$.get(this.url).then(function(b){_(b).each(function(c){a.upsert(c)});a.each(function(d){var c=_(b).where({id:d.id})[0];if(_.isUndefined(c)){a.remove(d)}})})},upsert:function(b){var a=this.get(b.id);if(!_.isUndefined(a)){return a.set(b)}return this.add(b)},activeModelsCount:function(){return this.select(function(a){return a.isActive()}).length}});App.Views.ProgressBar=Backbone.View.extend({className:"progress_status",initialize:function(){_.bindAll(this);this.showMessage=this.options.showMessage;this.model.on("change:progress change:message change:status",this.render);this.markers=this.options.markers||15;this.createView()},render:function(){var a=this;if(this.model.isActive()){this.$el.show();if(this.showMessage){this.$(".progress_message").html(this.model.get("message"))}this.progressBar.setProgress(this.model.get("progress"))}else{this.$el.hide()}return this},createView:function(){this.$el.html("<div class='progress_bar'></div><div class='progress_message'></div>");this.progressBar=new UI.ProgressBar({parent:this.$(".progress_bar")[0],markers:this.markers})}});App.Views.Apps.Show=Backbone.View.extend({initialize:function(){this.app=this.options.app;this.render()},render:function(){$.get(this.app.graphDataUrl(),function(a){if(a.no_pushes){$("#push_graph").hide();$("#pushes_empty").show()}else{$("#push_graph").removeClass("chart_waiting");new App.Views.Apps.Graphs({el:$("#push_graph"),data:a.pushes})}if(a.no_api_requests){$("#api_requests_graph").hide();$("#api_requests_empty").show()}else{$("#api_requests_graph").removeClass("chart_waiting");new App.Views.Apps.Graphs({el:$("#api_requests_graph"),data:a.api_requests})}})}});App.Views.Apps.UserSurvey=Backbone.View.extend({events:{"click .types .type":"chooseType"},initialize:function(){var a=this;if(App.currentUser.get("company_type")==="unknown"){this.$(".step_one").show()}else{this.$(".step_two").show()}this.$("form").bind("ajax:success",function(d,c,b,f){$(a.el).html("Thanks for the info!");setTimeout(function(){$(a.el).slideUp()},2000)})},chooseType:function(c){var b=$(c.target).closest("a");var a=this;$.ajax("/account",{data:"user[company_type]="+b.attr("data-type"),type:"PUT"});a.$(".step_one").hide();a.$(".step_two").show()},render:function(){}});App.Views.ContentCards=Backbone.View.extend({render:function(){var b=this;var d=this.$cards=$el.find(".content_card");var c={};d.each(function(){c[this.id]=this});var a=new ParseDotCom.Query("ContentCard");a.containedIn("locationID",Object.keys(c));a.find().then(function(e){_.each(e,function(f){b.renderCard(c[f.get("locationID")],f)})})},renderCard:function(c,b){var d=document.createElement("a");d.className="content_card";var l=document.createElement("h2");l.appendChild(document.createTextNode(b.get("title")));var h=document.createElement("div");h.className="card_image";d.appendChild(l);d.appendChild(h);var k={};if(b.get("metadata")){k=JSON.parse(b.get("metadata"))}switch(b.get("type")){case"image":var e=document.createElement("img");e.src=b.get("banner").url().replace(/http:\/\//,"https://s3.amazonaws.com/");h.appendChild(e);break;case"calendar":var a=document.createElement("div");var f=document.createElement("span");var j=document.createElement("span");f.appendChild(document.createTextNode(k.month));j.appendChild(document.createTextNode(k.day));a.appendChild(f);a.appendChild(j);h.appendChild(a);break}$(c).replaceWith(d)}});App.Views.CopyButton=Backbone.View.extend({initialize:function(){this.text=this.options.text;this.extendedHeight=this.options.extendedHeight;this.elem_id=this.options.id},render:function(){var a=this;var c=$("#"+this.elem_id);c.attr("data-clipboard-text",this.text);var b=new ZeroClipboard(c);ZeroClipboard.config({forceHandCursor:true});b.on("complete",function(d,h){var e=$(this);var f=e.html();e.html("Copied!");setTimeout(function(){e.html(f)},3000)})}});App.Views.CreditCards.Type=Backbone.View.extend({events:{"blur .card-number":"switchType","keyup .card-number":"switchType"},getCreditCardType:function(b){var a="unknown";if(/^5[1-5]/.test(b)){a="mastercard"}else{if(/^4/.test(b)){a="visa"}else{if(/^3[47]/.test(b)){a="amex"}}}return a},switchType:function(b){var c=$(".card-number").val();type=this.getCreditCardType(c);var a=$(".card-number").attr("data-type");switch(type){case"mastercard":if(a!=="mastercard"){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/mastercard.png").fadeIn(300)},500)}break;case"visa":if(a!=="visa"){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/visa.png").fadeIn(300)},500)}break;case"amex":if(a!=="amex"){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/american_express.png").fadeIn(300)},500)}break;default:if(a!=="unknown"&&a!==null){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/credit_cards_icon.png").fadeIn(300)},500)}}$(".card-number").attr("data-type",type)},render:function(c){if(this.timer){clearTimeout(this.timer)}var a=this;var b=this.$(".inner");b.html("").html(c);$(this.el).css("visibility","visible");$(this.el).css("display","block");this.timer=setTimeout(function(){a.dismiss()},7000)}});App.Views.Customers.Featured=Backbone.View.extend({initialize:function(){this.$(".spinner").spin("large","#717171");this.render()},render:function(){var a=this;var b=1400;$("#showcase .featured_customer").each(function(){var c=$(this);setTimeout(function(){if(a.$(".spinner").is(":visible")){a.$(".spinner").fadeOut()}c.addClass("show_animation");setTimeout(function(){c.removeClass("show_animation");c.addClass("shown")},1000)},b);if(b<=2000){b+=250}else{b+=100}})}});App.Views.Customers.Gallery.Main=Backbone.View.extend({events:{"click .app_icon .icon":"show_popup","click .app_icon h4":"show_popup","click .popup_app_icon":"hide_popup","click .close":"hide_popup"},initialize:function(){this.render()},render:function(){var b=this;$("body").click(function(c){if(!($(c.target).hasClass("popup")||$(c.target).parent().hasClass("popup"))){$(".popup").hide();$(".selected").removeClass("selected")}});if(navigator.appName!="Microsoft Internet Explorer"){var a=function(){var c=$(window).height();if(c<=850){$(".container").css("margin-top","-42px");$(".top_menu").css("top","40px");$("#showcase").css("height","902px");$(".wrapper").css("height","902px");$(".toplights").css("top","40px");$(".container").css("margin-bottom","15px")}else{$(".container").css("margin-top","-2px");$(".top_menu").css("top","0px");$("#showcase").css("height","942px");$(".wrapper").css("height","902px");$(".toplights").css("top","0px");$(".container").css("margin-bottom","55px")}};$(document).ready(a);$(window).resize(a)}$(window).load(function(){$(".leftCurtain").addClass("animateLeftCurtain");$(".rightCurtain").addClass("animateRightCurtain");setTimeout(function(){$(".spinner").fadeOut();$(".slidesjs-container, .app_icon").animate({opacity:1})},1000)})},show_popup:function(a){a.stopPropagation();$(".popup:visible").hide();$(a.target).closest(".app_icon").children(".popup").show();window.location.hash=$(a.target).closest(".app_icon").attr("id").substr(4)},hide_popup:function(a){a.stopPropagation();if($(a.target).hasClass(".popup")){$(a.target).hide()}else{$(a.target).parent().hide()}}});App.Views.Customers.Gallery.Slides=Backbone.View.extend({apps:[],initialize:function(){var a=this;_.bindAll(this,"lazyLoadWindow");$("h4.appName").each(function(c){var b=encodeURIComponent($(this).html().split(" ").join("").toLowerCase());$(this).closest(".app_icon").attr("id","app_"+b);a.apps[c]="app_"+b});setTimeout(function(){if(location.hash){window.scrollTo(0,0)}},1);this.render()},render:function(){var a=this;var d=1;function b(h){return h|0}var f=_.escape(window.location.hash);if(f!==""){if(!isNaN(f.substr(1))){d=f.substr(1)}else{var c="#app_"+f.substr(1);if($(c)){var e=$.inArray(c.substr(1),a.apps);if(e!=-1){d=b(e/12)+1}$(c).addClass("selected")}}}this.$el.slidesjs({pagination:{active:true,effect:"slide"},keyboard_activated:true,start:d,callback:{start:function(h){a.lazyLoadWindow(h);window.location.hash=h+1}}});this.pages=$(".slidesjs-container .slide");this.current=this.pages[0];this.lazyLoadWindow(d-1)},lazyLoadWindow:function(e){var d=this;var a=function(f){d.pages.eq(f).find("img").each(function(j){var k=$(this).attr("src");var h=$(this).attr("data-src");if(_.isUndefined(k)){$(this).attr("src",h)}})};var b=(e+1>this.pages.length-1)?0:e+1;var c=(e-1<0)?this.pages.length-1:e-1;_([e,c,b]).each(function(f){a(f)})}});App.Views.Customers.Testimonials=Backbone.View.extend({initialize:function(){this.render()},render:function(){$("#showcase .app_icon").click(function(){var a=$(this).attr("id");if(!$("."+a).hasClass("selectedApp")){$("."+a).show();$(".selectedApp").hide();$(".selectedApp").removeClass("selectedApp");$("."+a).addClass("selectedApp");$(".selectedApp").css("opacity","1");$(".selected").children(".img_wrapper").find("img:first").stop().css("opacity","0");$(".selected").removeClass("selected");$("#"+a).addClass("selected");$(".selected").children(".img_wrapper").find("img:first").stop().css("opacity","1")}});$.waypoints.settings.scrollThrottle=30;$("#showcase").waypoint(function(a,b){$(this).parent().toggleClass("sticky",b==="down");if(b=="down"){$("#showcase .app_icon").addClass("easeTransition")}else{$("#showcase .app_icon").removeClass("easeTransition")}a.stopPropagation()},{offset:-410});$(window).load(function(){setTimeout(function(){$("#showcase .app_icon").animate({top:0,left:0,opacity:1})},30);setTimeout(function(){$("#showcase").find(".app_icon:first").stop().addClass("selected");$(".selected").children(".img_wrapper").find("img:first").stop().css("opacity","1");$(".selectedApp").animate({opacity:1})},600)})}});App.Views.Dashboard.AppList=Backbone.View.extend({events:{"click .app_selector h1":"toggle","click .app_selector_dropdown a":"selectItem"},open:false,override:null,initialize:function(){var a=this;$("body").click(function(c){var b=$(c.target);if(!b.closest(".app_selector_dropdown")[0]&&a.open){a.toggle();c.stopPropagation()}})},toggle:function(a){this.open=!this.open;this.$el.find(".app_selector_dropdown").toggle(this.open);if(a){a.stopPropagation()}},setText:function(a){this.$el.find(".app_selector h1").text(a)},selectItem:function(a){if(this.override){var b=$(a.target).data("id");this.override(b);this.setText($(a.target).text());this.toggle();return false}}});App.Views.Dashboard.Menu=Backbone.View.extend({events:{"mouseenter .login_container":"openLoginView","mouseleave .login_container":"closeLoginView"},open:false,initialize:function(){var a=this},openLoginView:function(a){if(this.$(".login_dropdown_logged_in")[0]){clearTimeout(this.timeoutBubble);this.$(".login_dropdown_logged_in").show()}},closeLoginView:function(a){if(this.$(".login_dropdown_logged_in")[0]){this.timeoutBubble=setTimeout(function(){this.$(".login_dropdown_logged_in").hide()},1000)}}});App.Views.Dashboard.ColorSwitch=Backbone.View.extend({events:{"click .color_switch .switch":"switchOption"},COOKIE_NAME:"parseDashboardColor",initialize:function(){if($.cookie(this.COOKIE_NAME)=="dark"){$("body").addClass("dark_dashboard");$(".color_switch").children(".switch").children(".switch_cursor").addClass("rightValue");$(".color_switch").children(".label").toggleClass("selectedLabel")}},switchColor:function(c){var a="dark";if($("body").hasClass("dark_dashboard")){$("body").removeClass("dark_dashboard");a="light"}else{$("body").addClass("dark_dashboard")}var b=new Date();b.setTime(b.getTime()+3600*24*3000);$.cookie(this.COOKIE_NAME,a,{path:"/",expires:b.toGMTString()})},switchOption:function(c){var a="dark";if($(c.target).hasClass("switch_cursor")){$(c.target).toggleClass("rightValue");$(c.target).parent().parent().children(".label").toggleClass("selectedLabel")}else{$(c.target).children(".switch_cursor").toggleClass("rightValue");$(c.target).parent().children(".label").toggleClass("selectedLabel")}if($("body").hasClass("dark_dashboard")){$("body").removeClass("dark_dashboard");a="light"}else{$("body").addClass("dark_dashboard")}var b=new Date();b.setTime(b.getTime()+3600*24*3000);$.cookie(this.COOKIE_NAME,a,{path:"/",expires:b.toGMTString()})}});App.Views.Docs.ApiLibraries=Backbone.View.extend({initialize:function(){this.libs={};this.getLibs()},getLibs:function(){var a=this;var b=new ParseCMS.Query("Library");b.exists("name");b.exists("url");b.find().then(function(c){_(c).each(function(e){var d=e.get("category");if(!a.libs[d]){a.libs[d]=[]}a.libs[d].push(e)});a.render()})},render:function(){this.$el.html(JST["docs/_third_party_libraries"]({libs:this.libs}))}});App.Views.Docs.Changelogs=Backbone.View.extend({events:{"click .show_more_logs":"show_logs"},initialize:function(){this.render()},render:function(){var a=5;$(".log").each(function(){var d=$(this);var c=d.children(".note").size();if(c>a){d.children(".note").each(function(){if(d.children(".note").index($(this))>a-1){$(this).hide()}});var b=d.children(".note")[a-1];$(b).after("<a href='#' class='show_more_logs'>See more >></a>")}})},show_logs:function(a){a.stopPropagation();$(a.target).parent(".log").children(".note").show();$(a.target).hide();return false}});App.Views.Docs.CloudModules=Backbone.View.extend({initialize:function(){_.bindAll(this);var a=new ParseCMS.Query("CloudModule");a.exists("name");a.exists("url");a.equalTo("enabled",true);this.collection=a.collection();this.collection.on("reset",this.render);this.getModules()},getModules:function(){var a=this;a.collection.fetch()},render:function(){var c=this;var a=this.collection.groupBy(function(e){var f=e.get("category");return f.charAt(0).toUpperCase()+f.substr(1).toLowerCase()});var b=_(a).chain().keys().sortBy(function(e){return e}).value();var d={};_.each(b,function(f){var e=_(a[f]).chain().sortBy(function(h){return h.get("name").toLowerCase()}).value();d[f]=e});this.$el.html(JST["docs/_cloud_modules"]({categories:b,modules:d}))}});App.Views.Docs.FullScreen=Backbone.View.extend({el:"html",events:{"click .full_screen_button":"toggle_full_screen"},initialize:function(){this.render()},toggle_full_screen:function(){this.$("body").toggleClass("full_screen");var a=this.$("body").hasClass("full_screen");if(typeof(this.model)!==undefined){this.model.set("fullScreen",a)}$.waypoints("refresh");return false},render:function(){if((getInternetExplorerVersion()>=5)&&(getInternetExplorerVersion()<=11)){return this.$(".full_screen_button").hide()}else{return this.$(".full_screen_button").show()}}});App.Views.Docs.LanguageSelector=Backbone.View.extend({initialize:function(a){var b=document.getElementsByClassName("dashboard_content")[0];if(!b){b=document.getElementsByClassName("content_column")[0]}if(!b){return}new UI.Dropdown({optionSet:["English","中文(简体)","中文(台灣)","日本語","한국어","Русский"],values:{English:"","中文(简体)":"cn","中文(台灣)":"tw","日本語":"jp","한국어":"kr","Русский":"ru",},name:"language_selection",value:a.currentLang||"",parent:b,onChange:function(c){if(c.length){c+="/"}var d=window.location.pathname;if(d[d.length-1]!=="/"){d+="/"}window.location=d.replace(/\/docs\/(\w\w\/)?/,"/docs/"+c)}})}});App.Views.Docs.Main=Backbone.View.extend({el:"body",events:{"click .menu .wrapper a":"selectMenuItem"},initialize:function(){var a=this;this.slideLock=false;_.bindAll(this);if(this.$(".doc_columns").hasClass("scrollable")){this.$(".menu_column").bind("mousewheel DOMMouseScroll",function(c){var b=null;if(c.type=="mousewheel"){b=(c.originalEvent.wheelDelta*-1)}else{if(c.type=="DOMMouseScroll"){b=40*c.originalEvent.detail}}if(b){c.preventDefault();$(this).scrollTop(b+$(this).scrollTop())}})}if(this.model.get("accordian")){$(".wrapper ul li ul").hide()}$(".section").waypoint(function(h,f){if($(this).is(":hidden")||Math.abs($(this).offset().top)>500||!a.model.get("waypointsActive")){return false}$(".menu ul li a").removeClass("active");var c=null;if(f==="down"){c=$(this).attr("name")}else{var d=$(this).prevAll(".section").first();if(d){c=d.attr("name")}}if(c){var b=c.match(/(.*)_anchor/);c=b[1];if(c.match(/\//)){c=c.replace(/\/[\w]*/,"/");$(".menu li a[href^='#"+c+"']").addClass("active");c=c.replace("/","")}else{$(".menu li a[href='#"+c+"']").addClass("active")}a.setMajorSection(c)}},{offset:25,context:".content_column"});this.render()},setMajorSection:function(d){if(!this.model.get("accordian")){return false}var c=this;if(this.slideLock){return false}d=d.match(/^[^\/]*/)[0];var a=d.match(/(.*)-/);var b=(a&&a[1])?a[1]:d;if(b===d){this.model.set("currentMinorSection","")}else{this.model.set("currentMinorSection",d)}if(b){var f=this.getExpandableMenuSection(b);var e=this.getExpandableMenuSection(this.model.get("currentMajorSection"));if(f&&!(e&&(f[0]==e[0]))){if(e){e.slideUp()}this.slideLock=true;f.slideDown(0,function(){c.slideLock=false})}else{if(!f){f=$(".menu li.major[data-section='"+b+"']");if(e){e.slideUp()}}}this.model.set("currentMajorSection",b)}return false},getExpandableMenuSection:function(a){var b=$(".menu li[data-section="+a+"] ul").first();return b.size()>0?b:null},selectMenuItem:function(c){var a=this;this.$(".menu li a").removeClass("active");$(c.target).addClass("active");var b=$(c.target).attr("href").substring(1);this.setMajorSection(b);this.model.set("waypointsActive",false);window.setTimeout(function(){a.model.set("waypointsActive",true)},500);window.location="#"+b},render:function(){var a=this;this.$("option[data-language="+this.language+"]").attr("selected",true);$.waypoints("refresh");return this}});App.Views.Docs.NavigationBar=Backbone.View.extend({className:"docs_navigation",events:{"click .navbar_link":"buttonSelected"},initialize:function(){var a=this;_.bindAll(this);this.platformOptions=[];this.model.on("change:currentPlatform",this.selectPlatform);this.model.on("change:currentPlatform",this.updateMenuWithPlatform);this.model.on("change:fullScreen",this.validateWidth);$(window).resize(_.throttle(this.validateWidth,100));$(".content_column").scroll(_.throttle(this.validateShadow,100));var b={};$(".content_option").each(function(){var c=$(this).attr("data-platform");if(b.hasOwnProperty(c)){return}a.platformOptions.push(c);b[c]=1});if(this.platformOptions.length>0){this.render()}return false},selectPlatform:function(d,a){var b=this;this.model.set("waypointsActive",false);if(typeof(a)==="undefined"){a=this.model.get("currentPlatform")}else{this.model.set("currentPlatform",a)}$(".navbar_link").removeClass("active");$(".navbar_link[data-platform-button='"+a+"']").addClass("active");$(".content_option").hide();$(".content_option[data-platform='"+a+"']").show();$.waypoints("refresh");window.setTimeout(function(){b.model.set("waypointsActive",true)},500);var c=this.model.get("currentMinorSection");if(typeof(c)==="undefined"||c===""){c=this.model.get("currentMajorSection")}if(Parse.History.started){this.navigateToAnchor(c,a)}},buttonSelected:function(b){var a=$(b.target).attr("data-platform-button");if(a===this.model.get("currentPlatform")){return false}this.selectPlatform(this.model,a)},navigateToAnchor:function(b,a){Parse.history.navigate(b+"/"+a);window.location="#"+b+"/"+a},updateMenuWithPlatform:function(){var a=this.model.get("currentPlatform");$(".menu .wrapper a").each(function(){var c=$(this).attr("href");var b=c.match(/^[#\w\-]+/)[0]+"/"+a;$(this).attr("href",b)});return false},validateShadow:function(){if($(".content_column").scrollTop()>0){this.$el.addClass("docs_navigation_fixed")}else{this.$el.removeClass("docs_navigation_fixed")}return false},validateWidth:function(){$.waypoints("refresh");return false},render:function(){this.$el.html(JST["docs/_navigation_bar"]({navbarItems:this.platformOptions}));this.selectPlatform(this.model,this.model.get("currentPlatform"));this.validateShadow();this.validateWidth();return this}});App.Views.Docs.NavigationBarSimple=App.Views.Docs.NavigationBar.extend({navigateToAnchor:function(b,a){var c=$("a[name='"+b+"/"+a+"_anchor']");if(c.length===0||c.parent().is(":hidden")){b=b.split("-")[0]}Parse.history.navigate(b+"/"+a);window.location="#"+b+"/"+a}});App.Views.Docs.Snippet=Backbone.View.extend({el:"body",events:{"change .app_name select":"selectApp","change .language select":"selectLanguage"},initialize:function(){var a=this;this.snippets=this.$el.find(".snippet_option");this.languages=[];this.apps=this.options.apps;if(this.apps&&this.apps.length>0){this.currentApp=this.apps.first()}else{this.currentApp=new App.Models.App({rest_api_key:"${REST_API_KEY}",push_key:"${MASTER_KEY}",key:"${APPLICATION_ID}"})}$(this.snippets).each(function(b,c){a.languages.push($(c).attr("data-snippet-lang"))});this.languages=_.uniq(this.languages);if(this.languages.indexOf(this.options.currentLanguage)!==-1){this.currentLanguage=this.options.currentLanguage}else{if(this.languages.indexOf("curl")!==-1){this.currentLanguage="curl"}else{this.currentLanguage=this.languages[0]}}$(".code_snippet").after($("<div class='code_params'>").append(JST["docs/_app_list"]({languages:this.languages,apps:this.apps})));this.$el.bind("syntaxComplete",function(){a.snippets.each(function(b,c){$(c).html($(c).html().replace("${REST_API_KEY}","<span class=rest_api_key></span>").replace("${MASTER_KEY}","<span class=master_key></span>").replace("${APPLICATION_ID}","<span class=application_id></span>"))});a.render()});this.render()},selectApp:function(a){var b=this.apps.at(a.target.selectedIndex);this.currentApp=b;this.render();return false},selectLanguage:function(b){var a=this;this.currentLanguage=$(b.target.options[b.target.selectedIndex]).attr("data-language");this.model.set("waypointsActive",false);this.render();window.setTimeout(function(){a.model.set("waypointsActive",true)},500);$.waypoints("refresh");$(b.target).closest(".code-container")[0].scrollIntoView()},render:function(){var a=this;this.$("option[data-app="+this.currentApp.id+"]").attr("selected",true);this.$(".rest_api_key").text(this.currentApp.get("rest_api_key"));this.$(".master_key").text(this.currentApp.get("push_key"));this.$(".application_id").text(this.currentApp.get("key"));this.$("option[data-language="+this.currentLanguage+"]").attr("selected",true);$(this.snippets).hide();$(this.snippets).filter("[data-snippet-lang='"+this.currentLanguage+"']").each(function(){$(this).css("display","block")});return this}});App.Views.Docs.Toggle=Backbone.View.extend({el:".toggled-code",initialize:function(a){this.$el.each(function(b){$(".code-container .code-section:first-child",this).show();$(".toggles .toggle-item:first-child",this).addClass("selected")});if(a.mobile){this.$(".toggles .toggle-item a").on("touchstart",this.toggleSnippet)}else{this.$(".toggles .toggle-item a").click(this.toggleSnippet)}},toggleSnippet:function(b){var d=$(b.target);d.parents(".toggle-item").siblings().removeClass("selected");d.parents(".toggle-item").addClass("selected");var c=d.parents(".toggled-code").find(".code-container .code-section");c.hide();var a=d.parents(".toggle-item").index();$(c[a]).show();return false}});App.Views.EditAccountForm=Backbone.View.extend({url:"/account",type:"PUT",redirect:"account/edit",events:{"submit .edit_user":"submitForm"},initialize:function(){this.$(".spinner").hide().spin("large","#717171");this.$(".errors").hide();this.$(".success_box").hide()},submitForm:function(c){var a=this;this.$(".spinner").show();var b={user:{name:this.$("#user_name").val(),title:this.$("#user_title").val(),company_name:this.$("#user_company_name").val(),email:this.$("#user_email").val(),password:this.$("#user_password").val(),},confirm_password:this.$("#confirm_password").val(),};a.$(".spinner").show();$.ajax("/account",{dataType:"json",type:"PUT",data:b,success:function(d){if(d.success){a.succeed()}else{a.fail(d.errors)}},error:function(d){var e=JSON.parse(d.responseText).errors;a.fail(e)}});return false},succeed:function(){var a=this;this.$(".success_box").show();$(window).click(function(){if(a.$(".success_box").is(":visible")){a.$(".success_box").hide()}});this.$("#submit_info").removeAttr("disabled").removeClass("disabled");this.$(".spinner").hide()},fail:function(b){var a=this;this.$(".modal_errors").html("").show();_(b).each(function(c){var d=$("<p></p>");d.text(c);a.$(".modal_errors").append(d)});$(window).click(function(){if(a.$(".modal_errors").is(":visible")){a.$(".modal_errors").hide()}});this.$("#submit_info").removeAttr("disabled").removeClass("disabled");this.$(".spinner").hide();this.$("#confirm_password").val("").blur()},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},render:function(){var a=this},});App.Views.FullScreen=Backbone.View.extend({el:"html",events:{"click .full_screen_button":"toggle_full_screen"},initialize:function(){this.render()},toggle_full_screen:function(){this.$("body").toggleClass("full_screen");var a=this.$("body").hasClass("full_screen");return false},render:function(){if((getInternetExplorerVersion()>=5)&&(getInternetExplorerVersion()<=11)){return this.$(".full_screen_button").hide()}else{return this.$(".full_screen_button").show()}}});App.Views.Header=Backbone.View.extend({events:{"click .header_login":"openLoginView","click .questions_login":"openLoginView"},open:false,initialize:function(){var a=this;$("body").click(function(c){var b=$(c.target);if(!b.closest(".login_container")[0]&&a.open){a.openLoginView()}})},openLoginView:function(b){var a=this;this.loginForm=new UI.Modal({title:"Log in to Parse",klass:"login_modal",template:JST["home/_login_modal_pure"](),footer:JST["home/_login_footer_pure"](),init:function(){var c=$(this.wrap);a.populateCSRFMeta(c);c.find("input[type=password]").on("keydown",function(d){if(d.keyCode===13){c.find("form").submit()}});c.find("a.submit_button").click(function(){c.find("form").submit()})}})},populateCSRFMeta:function(b){var a=$('meta[name="csrf-token"]').attr("content");b.find('input[name="authenticity_token"]').val(a)}});App.Views.HeaderLoggedIn=Backbone.View.extend({events:{"mouseenter .dropdown":"openLoginView","mouseleave .dropdown":"closeLoginView"},timeoutBubble:null,initialize:function(){},openLoginView:function(a){if(this.$(".login_dropdown_logged_in")[0]){clearTimeout(this.timeoutBubble);this.$(".login_dropdown_logged_in").show()}},closeLoginView:function(a){if(this.$(".login_dropdown_logged_in")[0]){this.timeoutBubble=setTimeout(function(){this.$(".login_dropdown_logged_in").hide()},1000)}}});App.Views.Home.CodeBlock=Backbone.View.extend({platforms:["ios","android","curl","javascript","windows"],initialize:function(){var a=this;this.selector=this.$el.next(".selector");this.selector.find("li").click(function(f){var d=$(f.target);var c=d.attr("href");if(!c){c=$(d).parent().attr("href")}var b=c.substr(1,c.length);if(_(a.platforms).indexOf(b)!==-1){a.selector.find("li").removeClass("selected");d.closest("li").addClass("selected");a.$(".platform").hide();a.$("."+b).show()}return false});this.render()},render:function(){$.get("/home/blog_feed",function(a){if(a&&a.entries){$(".blog .entries").html(JST["home/_blog_feed"](a))}})}});App.Views.Home.Main=Backbone.View.extend({events:{"click .call_to_action_section .show_signup":"showSignupEvent","click .bottom_signup .show_signup":"scrollToTop"},scrollToTop:function(a){a.stopPropagation();$("html,body").animate({scrollTop:0},1000);this.showSignupEvent(a)},showSignupEvent:function(a){this.options.signup_flow.set("stage",1);a.stopPropagation();return false},initialize:function(){_.bindAll(this,"showSignupEvent");var a=this;$(document).ready(function(){a.renderCards(["home_0","home_1","home_2"])})},renderCards:function(d){var b=this;var a=ParseDotCom.Object.extend("ContentCard");var c=new ParseDotCom.Query(a);c.containedIn("location",d);c.ascending("location");c.find().then(function(e){if(e.length){var f=$(".content_cards").first();_.each(e,b.renderCard.bind(b,f));f.show()}})},renderCard:function(c,b){var a=App.Views.Home.Main.CardMarkup[b.get("type")];if(a){c.append(a(b))}}},{CardMarkup:[function(a){var b=a.get("image")?a.get("image").url().replace(/http:\/\//,"https://s3.amazonaws.com/"):"";return'<a href="'+a.get("link")+'" class="content_card"><div class="card_image"><img src="'+b+'"/></div><h2>'+a.get("title")+"</h2></a>"},function(a){var b=moment(a.get("date"));return'<a href="'+a.get("link")+'" class="content_card cc_calendar"><h2>'+a.get("title")+'</h2><div class="card_image"><div class="calendar"><div class="month">'+b.format("MMMM")+'</div><div class="day">'+b.format("D")+"</div></div></div></a>"}]});App.Views.Home.SignupForm=Backbone.View.extend({url:"/users",type:"POST",redirect:"/apps/onboard",events:{"submit .firststep .new_user":"submitStep1","submit .secondstep .new_user":"submitStep2","click .close":"closeEvent","focus .signup_field":"removeInvalidClass","blur #user_email":"tryLoadingGravatar","change #company_type":"renderCompanyInfoFields"},initialize:function(){this.errors1=this.$(".errors1");this.errors2=this.$(".errors2");if(this.options.redirect_url){this.redirect=this.options.redirect_url}this.$(".spinner").hide().spin("large","#717171");this.options.signup_flow.on("change:stage",this.signupFlowChanged,this);this.content_class=this.options.content_class},submitStep1:function(f){var b=this;var d=true;$.watermark.showAll();_.each(this.$(".firststep .new_user:first").find(".signup_field"),function(e){if(Util.isStringBlank($(e).val())){d=false;$(e).addClass("invalid")}});if(!d){this.$(".submit").removeAttr("disabled").removeClass("disabled");return false}var c={user:{name:this.$("#user_name").val(),email:this.$("#user_email").val(),password:this.$("#user_password").val(),signup_type:this.$("#user_signup_type").val()}};var a=this.$("#box_user_language").val();var h=this.$("#box_user_api_key").val();if(a&&h){c.box_user={language:a,api_key:h}}this.$(".submit").attr("disabled","disabled").addClass("disabled");this.$(".firststep .spinner").show();$.ajax(this.url,{dataType:"json",type:"POST",data:c,success:function(e){if(e.errors){b.errors1.html("").show();_(e.errors).each(function(j){var k=$("<p></p>");b.errors1.append(k);k.text(j)});$("body").click(function(){if(b.errors1.is(":visible")){b.errors1.hide()}});b.$(".submit").removeAttr("disabled").removeClass("disabled");b.$(".firststep .spinner").hide()}else{b.showSignupSecondStep();b.addFBConversionPixel();b.addTwitterConversionPixel();ParseDotCom.Analytics.track("Signed Up 2");ParseDotCom.Analytics.track("$born");_gaq.push(["_trackEvent","user","signup"]);Marketo.associateLead({Email:c.user.email,Name:c.user.name,Sign_Up_Date__c:(new Date()).toJSON(),MarketoHash:e.marketo_hash});Marketo.triggerEvent("SignUp");b.marketoHash=e.marketo_hash;b.marketoEmail=c.user.email}}});return false},submitStep2:function(h){var b=this;var f=true;var j=this.$("#company_type").val()==="individual";$.watermark.showAll();_.each(this.$(".secondstep .new_user:first").find(".signup_field"),function(e){var k=$(e).attr("id")==="user_company_name"||$(e).attr("id")==="user_title";if(Util.isStringBlank($(e).val())&&!(j&&k)){f=false;$(e).addClass("invalid")}});if(!f){this.$(".getStarted").removeAttr("disabled").removeClass("disabled");return false}var a=this.$("#parse_app_name").val();var c=this.$("#company_type").val();var d={user:{company_type:c}};if(!j){d.user.company_name=this.$("#user_company_name").val();d.user.title=this.$("#user_title").val()}d.parse_app={name:a};this.$(".getStarted").attr("disabled","disabled").addClass("disabled");this.$(".secondstep .spinner").show();Marketo.associateLead({Email:b.marketoEmail,Company:d.user.company_name,Company_Type__c:d.user.company_type,Title:d.user.title,MarketoHash:b.marketoHash});$.ajax("/account",{dataType:"json",type:"PUT",data:d,success:function(e){if(e.errors){b.errors2.html("").show();_(e.errors).each(function(l){var m=$("<p></p>");b.errors2.append(m);m.text(l)});$("body").click(function(){if(b.errors2.is(":visible")){b.errors2.hide()}});b.$(".getStarted").removeAttr("disabled").removeClass("disabled");b.$(".secondstep .spinner").hide()}else{b.$(".secondstep .spinner").hide();ParseDotCom.Analytics.track("Signed Up 2 - Filled Information");if(b.options.next_url){window.location=b.options.next_url}else{if(e.app){var k=b.redirect;if(b.redirect.indexOf("?")==-1){k+="?"}else{k+="&"}window.location=k+"app_id="+e.app.friendly_id}else{window.location=b.redirect}}}}});return false},closeEvent:function(a){if(Parse.history){Parse.history.navigate("",{replace:true})}this.options.signup_flow.set("stage",0);$(".show_signup").removeClass("disabled");this.$el.hide("drop",{direction:"up",duration:200});$("#slides, .call_to_action_section .call_to_action_content, #header .inner").removeClass("blurry_effect");$(this.content_class).show();return false},signupFlowChanged:function(){var a=this.options.signup_flow.get("stage");if(a===1){this.showSignup();$(".show_signup").addClass("disabled")}else{if(a===2){this.showSignup();this.showSignupSecondStep()}}},showSignup:function(){$(this.content_class).hide();this.$el.show("drop",{direction:"up",duration:200});$("#slides, .call_to_action_section .call_to_action_content, .p_home #header .inner").addClass("blurry_effect")},showSignupSecondStep:function(){this.$(".firststep").hide();this.$(".secondstep").show();this.$(".conditions").show();this.options.signup_flow.set("stage",2)},addFBConversionPixel:function(){var a=document.createElement("script");a.type="text/javascript";a.text=JST["fb_conversion/sign_up"]({});document.body.appendChild(a);var d=document.createElement("noscript");d.innerHTML='<img height="1" width="1" alt="" style="display:none" src="https://www.facebook.com/offsite_event.php?id=6010887695824&amp;value=0&amp;currency=USD" />';document.body.appendChild(d);var b=newImage();b.src="http://em.facebookmail.com/pub/cct?_ri_=X0Gzc2X%3DWQpglLjHJlYQGN2ApNlgkzczefONXkGRlhGJR&_ei_=EuUn5NEBhTqI7amliSQF4PM";var c=new Image();c.src="https://ad.atdmt.com/m/img;m=11002201328825;cache=?page_name=parse_signup_conf";_gaq.push(["_trackEvent","Registration","Signup","RegisterParse"])},addTwitterConversionPixel:function(){twttr.conversion.trackPid("l4ka4");var a=document.createElement("noscript");a.innerHTML='<img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=l4ka4&p_id=Twitter" /><img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=l4ka4&p_id=Twitter" />';document.body.appendChild(a)},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},tryLoadingGravatar:function(b){var a=$("#user_email").val();if(a!==""){$(".gravatar").css("background-image","url(https://secure.gravatar.com/avatar/"+md5(a)+"?default=https://www.parse.com/images/home/no_avatar.png)").show()}else{$(".gravatar").css("background-image","none").hide()}},fillFormFields:function(a){if(a.get("name")){this.$("#user_name").val(a.get("name"))}if(a.get("email")){this.$("#user_email").val(a.get("email"))}if(a.get("company_name")){this.$("#user_company_name").val(a.get("company_name"))}if(a.get("title")){this.$("#user_title").val(a.get("title"))}},renderCompanyInfoFields:function(a){if(this.$("#company_type").val()==="individual"){this.$("#user_company_name").hide();this.$("#user_title").hide()}else{this.$("#user_company_name").show();this.$("#user_title").show()}}});App.Views.Home.Windows.CodeBlock=Backbone.View.extend({platforms:["csharp","vb","javascript"],initialize:function(){var a=this;this.selector=this.$el.next(".selector");this.selector.find("li").click(function(f){var d=$(f.target);var c=d.attr("href");var b=c.substr(1,c.length);if(_(a.platforms).indexOf(b)!==-1){a.selector.find("li").removeClass("selected");d.closest("li").addClass("selected");a.$(".platform").hide();a.$("."+b).show()}return false});this.render()},render:function(){}});App.Views.MarketingHeader=Backbone.View.extend({el:".marketing_header",events:{"click a.log_in":"openLoginModal"},initialize:function(){_.bindAll(this)},openLoginModal:function(){var a=this;new UI.Modal({title:"Log in to Parse",klass:"login_modal",template:JST["home/_login_modal_pure"](),footer:JST["home/_login_footer_pure"](),init:function(){var b=$(this.wrap);a.populateCSRFMeta(b);b.find("input[type=password]").on("keydown",function(c){if(c.keyCode===13){b.find("form").submit()}});b.find("a.submit_button").click(function(){b.find("form").submit()})}});return false},populateCSRFMeta:function(b){var a=$('meta[name="csrf-token"]').attr("content");b.find('input[name="authenticity_token"]').val(a)}});App.Views.Migration.UrbanAirshipMigrator=Backbone.View.extend({events:{"click .migrate_button":"openSignInModal",},initialize:function(){this.appNames=this.options.appNames;this.appSlugs=this.options.appSlugs;this.windowSize();var a=_.throttle(this.windowSize,100);$(window).resize(a)},windowSize:function(){var a=$(window).height();if(a<700){a=700}$(".top_section").css("height",a)},openSignInModal:function(){new UI.Modal({title:"Migrate to Parse",klass:"migration_modal",template:JST["migration/_sign_in"]({email:App.currentUser?App.currentUser.get("email"):""})});modal=document.getElementsByClassName("migration_modal")[0];this.modalContent=modal.getElementsByClassName("modal_content")[0];var e=this.modalContent.getElementsByClassName("signup")[0];var c=this.modalContent.getElementsByClassName("login")[0];var a=this.modalContent.getElementsByClassName("continue")[0];var b=this.modalContent.getElementsByClassName("login_text")[0];var d=this.modalContent.getElementsByClassName("continue_text")[0];if(App.currentUser){UI.addClass(e,"hidden");UI.addClass(c,"hidden");UI.addClass(b,"hidden");a.addEventListener("click",this.openUAKeysModal.bind(this))}else{UI.addClass(a,"hidden");UI.addClass(d,"hidden");e.addEventListener("click",this.openSignupView.bind(this));c.addEventListener("click",this.openLoginView.bind(this))}return false},openUAKeysModal:function(){this.modalContent.innerHTML=JST["migration/_ua_keys"]();var b=this.modalContent.getElementsByClassName("verify")[0];var d=this.modalContent.getElementsByClassName("close")[0];b.addEventListener("click",this.verifyUAKeys.bind(this));d.addEventListener("click",this.closeModal);var c=new Spinner({lines:30,length:4,width:6,radius:44,color:"#5298fc",corners:0,}).spin();var a=this.modalContent.getElementsByClassName("spinner_container")[0];a.appendChild(c.el)},verifyUAKeys:function(){var d=this;var f=this.modalContent.getElementsByClassName("errors_box")[0];f.textContent="";var b=this.modalContent.getElementsByTagName("input");var a=b[0];var h=a.value;a.addEventListener("focus",function(){UI.removeClass(a.parentNode,"error")});var e=b[1];var c=e.value;e.addEventListener("focus",function(){UI.removeClass(e.parentNode,"error")});if(h&&c){this.showSpinnerSlide();$.get("/migrate/urban_airship_device_types",{appKey:h,masterKey:c}).then(function(j){d.hideSpinnerSlide();if(j.success){d.appKey=h;d.masterKey=c;d.ios=j.ios;d.android=j.android;if(!j.ios&&!j.android){f.textContent="We found an Urban Airship app with those keys, but it did not have any installations to import. Please check your keys.";UI.addClass(a.parentNode,"error");UI.addClass(e.parentNode,"error")}else{if(j.android){d.openAndroidKeysModal()}else{d.openAppSelection()}}}else{if(j.error==="Unauthorized"){f.textContent="There was a problem with your keys. Please check them and try again.";UI.addClass(a.parentNode,"error");UI.addClass(e.parentNode,"error")}else{f.textContent=j.error}}})}else{if(c){f.textContent="Please enter your App Key.";UI.addClass(a.parentNode,"error")}else{if(h){f.textContent="Please enter your App Master Secret.";UI.addClass(e.parentNode,"error")}else{f.textContent="Please enter your Urban Airship Keys.";UI.addClass(a.parentNode,"error");UI.addClass(e.parentNode,"error")}}}},openAndroidKeysModal:function(){var b=this;this.modalContent.innerHTML=JST["migration/_android_keys"]();var c=this.modalContent.getElementsByClassName("verify")[0];var e=this.modalContent.getElementsByClassName("close")[0];c.addEventListener("click",this.verifyAndroidKeys.bind(this));e.addEventListener("click",this.closeModal);var d=new Spinner({lines:30,length:4,width:6,radius:44,color:"#5298fc",corners:0,}).spin();var a=this.modalContent.getElementsByClassName("spinner_container")[0];a.appendChild(d.el)},verifyAndroidKeys:function(){var e=this;var f=this.modalContent.getElementsByClassName("errors_box")[0];f.textContent="";var d=this.modalContent.getElementsByTagName("input");var c=d[0];var b=c.value;c.addEventListener("focus",function(){UI.removeClass(c.parentNode,"error")});var a=d[1];var h=a.value;a.addEventListener("focus",function(){UI.removeClass(a.parentNode,"error")});if(b&&h){this.showSpinnerSlide();$.get("/migrate/urban_airship_verify_android_keys",{gcmKey:b,senderID:h}).then(function(j){e.hideSpinnerSlide();if(j.success){e.gcmKey=b;e.senderID=h;e.openAppSelection()}else{if(j.gcm_key_is_invalid&&j.sender_id_is_invalid){f.textContent="There was a problem with your keys. Please check them and try again.";UI.addClass(c.parentNode,"error");UI.addClass(a.parentNode,"error")}else{if(j.gcm_key_is_invalid){f.textContent="There was a problem with your Google API Key. Please check it and try again.";UI.addClass(c.parentNode,"error")}else{if(j.sender_id_is_invalid){f.textContent="There was a problem with your Google API Project Number. Please check it and try again.";UI.addClass(a.parentNode,"error")}}}}})}else{if(h){f.textContent="Please enter your Google API Key.";UI.addClass(c.parentNode,"error")}else{if(b){f.textContent="Please enter your Google API Project Number.";UI.addClass(a.parentNode,"error")}else{f.textContent="Please enter both of your Google Keys.";UI.addClass(c.parentNode,"error");UI.addClass(a.parentNode,"error")}}}},openAppSelection:function(){var q=this;this.modalContent.innerHTML=JST["migration/_app_selection"]({deviceCount:this.ios_device_count,appNames:this.appNames,appSlugs:this.appSlugs});var e=this.modalContent.getElementsByClassName("import")[0];var c=this.modalContent.getElementsByClassName("close")[0];var m=this.modalContent.getElementsByClassName("bottom_buttons")[0];var f=this.modalContent.getElementsByClassName("errors_box")[0];var a=this.modalContent.getElementsByClassName("ua_box")[0];if(!q.ios){UI.addClass(a,"no_ios")}if(!q.android){UI.addClass(a,"no_android")}var l=this.modalContent.getElementsByClassName("apps")[0];var j=this.modalContent.getElementsByClassName("create_app")[0];var o=this.modalContent.getElementsByClassName("create_dialog")[0];var b=new Spinner({lines:15,length:2,width:4,radius:18,color:"#5298fc",corners:0,}).spin();m.appendChild(b.el);UI.addClass(b.el,"hidden");e.addEventListener("click",function(){f.textContent="";var t=l.querySelector('input[name="app"]:checked');if(!t){f.textContent="Please choose an app.";return}UI.removeClass(b.el,"hidden");var s=t.id.slice(4);$.post("/apps/"+s+"/import_ua",{ua_username:q.appKey,ua_password:q.masterKey,gcm_sender_id:q.senderID}).then(function(u){UI.addClass(b.el,"hidden");if(u.success){q.showImportConfirmation(s);$.post("/migrate/add_gcm_creds",{slug:s,gcmKey:q.gcmKey,senderID:q.senderID})}else{f.textContent=u.error}})});c.addEventListener("click",this.closeModal);j.addEventListener("click",function(){UI.removeClass(o,"hidden")});if(this.appNames.length===0){UI.removeClass(o,"hidden")}var n=new Spinner({lines:15,length:2,width:4,radius:18,color:"#5298fc",corners:0,}).spin();o.appendChild(n.el);UI.addClass(n.el,"hidden");var d=o.getElementsByClassName("create_cancel")[0];var r=o.getElementsByClassName("create_submit")[0];var k=o.getElementsByTagName("input")[0];var h=o.getElementsByClassName("create_error")[0];d.addEventListener("click",function(){k.value="";h.textContent="";UI.addClass(o,"hidden")});r.addEventListener("click",function(){var s=k.value;if(s){h.textContent="";UI.removeClass(n.el,"hidden");$.post("/apps",{parse_app:{name:s}}).then(function(w){UI.addClass(n.el,"hidden");if(w.success){var t=w.app.friendly_id;var v=UI.tag("input",{type:"radio",name:"app",id:"app_"+t,checked:true});var u=UI.tag("label",{htmlFor:"app_"+t},[s,UI.tag("div",{className:"radio_button"})]);l.insertBefore(u,l.firstChild);l.insertBefore(v,l.firstChild);l.scrollTop=0;k.value="";UI.addClass(o,"hidden")}else{h.textContent=w.errors[0]}})}else{h.textContent="app name required"}})},showImportConfirmation:function(a){this.modalContent.innerHTML=JST["migration/_import_confirmation"]({slug:a})},openLoginView:function(b){var a=this;new UI.Modal({title:"Log in to Parse",klass:"login_modal",template:JST["home/_login_modal_pure"](),init:function(){var d=$(this.wrap);var e=this.wrap;var c=e.getElementsByClassName("modal_content")[0];var f=UI.tag("div",{className:"errors_box"});c.appendChild(f);var h=new Spinner({lines:10,length:3,width:4,radius:8,color:"#FFFFFF",corners:0,}).spin();c.appendChild(h.el);UI.addClass(h.el,"hidden");a.populateCSRFMeta(d);d.find("a.submit_button").click(function(k){var j=k.target;UI.removeClass(h.el,"hidden");UI.addClass(j,"has_spinner");f.innerHTML="";$.post("/user_session",d.find("form").serialize()).then(function(l){UI.addClass(h.el,"hidden");UI.removeClass(j,"has_spinner");if(l.success){a.appNames=l.app_names;a.appSlugs=l.app_slugs;e.parentNode.removeChild(e);a.openUAKeysModal()}else{_.each(l.errors,function(m){f.appendChild(UI.tag("div",{className:"error"},m))})}})})}})},openSignupView:function(b){var a=this;new UI.Modal({title:"Sign up for Parse",klass:"signup_modal",template:JST["home/_signup_modal_pure"](),init:function(){var d=$(this.wrap);var e=this.wrap;var c=e.getElementsByClassName("modal_content")[0];var f=UI.tag("div",{className:"errors_box"});c.appendChild(f);var h=new Spinner({lines:10,length:3,width:4,radius:8,color:"#FFFFFF",corners:0,}).spin();c.appendChild(h.el);UI.addClass(h.el,"hidden");a.populateCSRFMeta(d);d.find("a.submit_button").click(function(k){var j=k.target;UI.removeClass(h.el,"hidden");UI.addClass(j,"has_spinner");f.innerHTML="";$.post("/users",d.find("form").serialize()).then(function(l){UI.addClass(h.el,"hidden");UI.removeClass(j,"has_spinner");if(l.success){e.parentNode.removeChild(e);a.openUAKeysModal()}else{_.each(l.errors,function(m){f.appendChild(UI.tag("div",{className:"error"},m))})}})})}})},populateCSRFMeta:function(b){var a=$('meta[name="csrf-token"]').attr("content");b.find('input[name="authenticity_token"]').val(a)},showSpinnerSlide:function(){var a=this.modalContent.getElementsByClassName("spinner_container")[0];UI.removeClass(a,"hidden")},hideSpinnerSlide:function(){var a=this.modalContent.getElementsByClassName("spinner_container")[0];UI.addClass(a,"hidden")},closeModal:function(){UI.removeClass(document.body,"modal_open");var a=document.getElementsByClassName("modal_layer")[0];a.parentNode.removeChild(a)}});App.Views.Mobile.Docs=Backbone.View.extend({events:{},initialize:function(a){if(a.toggle){new App.Views.Docs.Toggle({mobile:true})}this.render()},render:function(){var a=this;$(document).ready(function(){if(!a.options.no_spinner){$("#loading_modal").bind("syntaxComplete",function(){$("#loading_modal").fadeOut()})}else{$("#loading_modal").hide()}$("img").wrap("<div class='scrollable_container' />")})}});App.Views.Mobile.Products=Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){$(document).ready(function(){if($(".mobile").is(":visible")){$(".products_menu .button").click(function(){if(!$(this).hasClass("opened")){$(this).parent().animate({bottom:"-140px"},200);$(this).addClass("opened")}else{$(this).parent().animate({bottom:"-206px"},200);$(this).removeClass("opened")}})}if($(".local_datastore")){$(".card.local_datastore .icon").addClass("on");$(".card.local_datastore .icon").click(function(a){$(this).toggleClass("on")})}})}});App.Views.Mobile.Home.Retina=Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){$(document).ready(function(){if($(".mobile").is(":visible")){var a=!!window.devicePixelRatio?window.devicePixelRatio:1;if(a>1){$(".section .image, .slide2 .image, .top_section .artwork, .products_menu .button").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"));$(this).css("background-size","100%")});$(".big_button .image").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace("128","256"));$(this).css("background-size","85%")});$(".retina").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"))});$(".slide2 .box").each(function(b){$(this).css("background-size","90%")});$(".slide2 .build, .slide2 .cloud").each(function(b){$(this).css("background-size","70%")});$("#nav_bar .back").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"));$(this).css("background-size","85%")});$(".tappable").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"));$(this).css("background-size","7px")});$(".slide1 img").each(function(b){$(this).attr("src",$(this).attr("src").replace(".jpg","@2x.jpg").replace(".png","@2x.png"))})}}})}});App.Views.Mobile.Home.SignupForm=Backbone.View.extend({url:"/users",type:"POST",redirect:"/home/thanks",events:{"submit .new_user":"submitForm","focus .signup_field":"removeInvalidClass"},initialize:function(){this.errors=$(".errors");if(this.options.redirect_url){this.redirect=this.options.redirect_url}},submitForm:function(j){var m=this;m.errors.html("").hide();var a=true;_.each(this.$(".new_user:first").find(".signup_field"),function(e){if($(e).val().length===0){a=false;$(e).addClass("invalid")}});if(!a){this.$(".submit").removeAttr("disabled").removeClass("disabled");return false}this.$(".submit").attr("disabled","disabled").addClass("disabled");var k=$("#user_name").val();var c=$("#user_email").val();var n=$("#user_password").val();var l=$("#parse_app_name").val();var b=$("#company_type").val();var h=$("#user_company_name").val();var d=$("#user_title").val();if(b===""){b="unknown"}var f={user:{name:k,email:c,password:n,signup_type:$("#user_signup_type").val(),company_type:b,company_name:h,title:d}};f.parse_app={name:l};$(".spinner").show();$.ajax(this.url,{dataType:"json",type:"POST",data:f,success:function(e){if(e.errors){m.errors.html("").show();_(e.errors).each(function(o){var q=$("<p></p>");m.errors.append(q);q.text(o)});$("body").click(function(){if(m.errors.is(":visible")){m.errors.hide()}});$(".submit").removeAttr("disabled").removeClass("disabled");$(".spinner").hide()}else{ParseDotCom.Analytics.track("Signed Up 2",{mobile:"true"});ParseDotCom.Analytics.track("$born");_gaq.push(["_trackEvent","user","signup"]);Marketo.associateLead({Email:c,Name:k,Company:h,Company_Type__c:b,Title:d,Sign_Up_Date__c:(new Date()).toJSON(),MarketoHash:e.marketo_hash});m.marketoHash=e.marketo_hash;m.marketoEmail=c;window.location=m.redirect}},error:function(o,e){m.errors.html("<p>Unfortunately, an error has occurred. Please try again later.</p>").show();$(".submit").removeAttr("disabled").removeClass("disabled");$(".spinner").hide()}});return false},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},render:function(){}});App.Views.Modal=Backbone.View.extend({className:"lightbox",events:{"click .close":"close"},initialize:function(){_.bindAll(this);this.headerTitle=this.options.title;this.template=this.options.template;this.templateOptions=this.templateOptions||{};this.klass=this.options.klass;this.isStatic=this.options.isStatic||false;this.modalOptions=this.options.modalOptions||{}},close:function(a){this.$el.dialog("close");if(typeof this.dispose=="function"){this.dispose()}return false},render:function(){if(this.isStatic){var b=JST[this.template](this.templateOptions);this.$el=JST._static_modal({title:this.headerTitle,content:b,klasses:this.klass,closeButton:false})}else{if(this.template){this.$el.html(JST[this.template]())}var a={modal:true,height:"auto",width:350,title:this.headerTitle,draggable:false,dialogClass:this.klass,resizable:false,show:{effect:"drop",direction:"down"},open:this.afterModalRender,beforeClose:this.beforeModalClose};_.extend(a,this.modalOptions);this.$el.dialog(a)}return this},afterModalRender:function(){},beforeModalClose:function(){}});App.Views.Nagging.Banner=Backbone.View.extend({el:".banner_nag",render:function(){var a=this;$.get("/nagging/banner",function(d){if(d&&!_.isEmpty(d)){var b=0;_.each(d,function(h,f){var e=UI.tag("li",{className:"nag"});if(JST["nagging/_"+f]){e.innerHTML=JST["nagging/_"+f](h);a.el.appendChild(e);ParseDotCom.Analytics.track("nagging_banner",{name:f});b++}});if(b>0){ParseDotCom.Analytics.track("nagging_banner_count",{count:b.toString()});if(a.el.offsetHeight>0){var c=parseInt(window.getComputedStyle(document.body,null).getPropertyValue("padding-top"),10);document.body.style.paddingTop=c+a.el.offsetHeight+"px"}}}})}});App.Views.Paginate=Backbone.View.extend({className:"pagination",initialize:function(){_.bindAll(this);this.rootUrl=this.options.rootUrl;this.pushState=this.options.pushState||true;this.model.on("change",this.render)},render:function(){this.$el.html(JST._paginate({totalRows:this.model.get("total_rows"),perPage:this.model.get("per_page"),totalPages:Math.ceil(this.model.get("total_rows")/this.model.get("per_page")),currentPage:this.model.get("current_page"),rootUrl:this.rootUrl,pushState:this.pushState}));return this}});App.Views.Platforms.OSX=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this.options.el;$(document).ready(function(){if((getInternetExplorerVersion()>5)&&(getInternetExplorerVersion()<10)){$(a).find(".logo div").hide();$(a).find(".logo").html("<img src='/images/icons/osx_512.png' />");$(a).find(".logo").css("border","none")}})}});App.Views.Platforms.WindowsPhone=Backbone.View.extend({windowsPhoneAnimation:function(){var a=this;$(".tiles div").show();$(".tiles div").css("-webkit-transform","rotateX(0deg)");$(".tiles").show();a.$(".logo_screen").css("-webkit-transform","rotateY(90deg)").css("opacity",0);setTimeout(function(){var b=0;$(".tiles div").each(function(c){var d=$(this);b=c*70;setTimeout(function(){$(d).css("-webkit-transform","rotateX(180deg)");setTimeout(function(){$(d).hide()},500)},70*c)});setTimeout(function(){a.$(".tiles").fadeOut();a.$(".logo_screen").css("-webkit-transform","rotateY(0deg)").css("opacity",1)},b+500)},1500)},initialize:function(){this.render()},render:function(){var a=this;$(document).ready(function(){if(((getInternetExplorerVersion()>5)&&(getInternetExplorerVersion()<10))||(is_ios())){a.$(".screen").hide();a.$(".logo_screen").show()}else{setTimeout(function(){a.windowsPhoneAnimation()},500)}})}});App.Views.PreFooter=Backbone.View.extend({initialize:function(){var b=$("body").attr("class").split(" ");var a=window.location.href.toString().split(window.location.host)[1];ParseDotCom.Analytics.track_links(".show_signup","Bottom link",{page:a})}});App.Views.PricingPlans.PricingPlanSelector=Backbone.View.extend({events:{"drag .control":"renderSlider","dragstop .control":"renderSlider",},initialize:function(){this.baseReqs=this.options.baseLimit||30;this.maxReqs=400;this.control=this.$(".control")[0];this.controlRadius=10;this.sliderFills=this.$(".fill > li");this.sliderLiWidth=$(this.sliderFills[1]).width();this.sliderTicks=this.$(".ticks > li");this.limitLabel=$(this.$("#request_limit")[0]);this.priceLabel=$(this.$("#request_limit_price")[0]);this.bgJobs=this.$(".bgjobs > .amount");this.bgJobsText=this.$(".bgjobs > .charge");this.bgJobsTextShort=this.$(".bgjobs > .jobtext");this.confirmButton=$(this.$(".confirm_button")[0]);this.contactButton=$(this.$(".contact_button")[0]);this.successBox=$(this.$(".success_box")[0]);this.errorBox=$(this.$(".modal_errors")[0]);this.spinner=$(this.$(".spinner")[0]);this.confirmURL=this.confirmButton.attr("href");this.basePrice=this.options.basePrice||0;this.$(".control").draggable({containment:this.$(".containment"),axis:"x",grid:[10]});this.spinner.hide().spin("small","#717171");this.setInitialVars();this.setupUpdateAjax();this.render()},setInitialVars:function(){this.startLimit=this.limitLabel.text();this.limit=this.startLimit},render:function(){var a=this;$(document).ready(function(){a.setSliderPosition();a.renderSlider()})},renderSlider:function(){var a=this.control.offsetLeft+this.controlRadius;_.each(this.sliderFills,function(b){if(b.offsetLeft<a){$(b).addClass("full")}else{$(b).removeClass("full")}});_.each(this.sliderTicks,function(b){if(b.offsetLeft<a){$(b).addClass("full")}else{$(b).removeClass("full")}});this.limit=(a/this.sliderLiWidth)*10;this.setLabels()},setSliderPosition:function(){var a=this.limit>this.maxReqs?this.maxReqs:this.limit;var b=(a/10)*this.sliderLiWidth-this.controlRadius;$(this.control).css({left:b});this.setLabels()},setLabels:function(){labelLimit=(this.limit==this.maxReqs&&this.startLimit>=this.maxReqs)?this.startLimit:this.limit;this.limitLabel.text(labelLimit);var b=Math.max((labelLimit-this.baseReqs)*10,0);var d=this.basePrice+b;var c=d>0?"$"+d+"/month":"Free";this.priceLabel.text(c);this.bgJobs.text(Math.floor(this.limit/20));var a=this.limit<40?"job":"jobs";this.bgJobsText.text("Concurrent "+a);this.bgJobsTextShort.text(a);if(labelLimit==this.startLimit){this.confirmButton.hide();if(labelLimit>this.maxReqs){this.$(".control").draggable({disabled:true});this.contactButton.text("Contact us to change")}if(labelLimit>=this.maxReqs){this.contactButton.show()}else{this.contactButton.hide()}}else{this.confirmButton.show();this.contactButton.hide()}this.successBox.hide();this.errorBox.hide()},setupUpdateAjax:function(){var a=this;this.confirmButton.click(function(){a.errorBox.hide();a.spinner.show();$.ajax({url:a.confirmURL+"?new_limit="+a.limit,type:"PUT"}).then(function(c){a.spinner.hide();if(c.success){a.setInitialVars();a.render();a.successBox.show()}else{var b=c.error;var d=$("<p></p>");d.text(b);a.errorBox.html("").show();a.errorBox.append(d);$(window).click(function(){if(a.errorBox.is(":visible")){a.errorBox.hide()}})}});return false})}});App.Views.Products.CloudCode=Backbone.View.extend({events:{},showSignupEvent:function(c){if(c){var b=$(c.target);var a=b.attr("data-position");ParseDotCom.Analytics.track("Cloud Code Product - Click on Sign Up",{position:a})}$(".top_section").hide();$(".signup").show();return true},initialize:function(){var a=this;$(document).ready(function(){if(App.currentUser===null){if(window.location.hash==="#signup_form"){a.showSignupEvent()}$(".show_signup").click(a.showSignupEvent)}})},render:function(){}});App.Views.Products.CloudModules=Backbone.View.extend({events:{},cloudModulesAnimation:function(){var f=this;if(!this.running){this.running=true;$(".brick").remove();$(".bricks").show();$(".final_icon").hide();var e=[[0,0],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[0,-12],[-2,-12],[-5,-12],[-5,-12],[-9,-11],[-10,-10],[-11,-9],[-12,-7],[-12,-5],[-12,-4],[-12,1],[-12,1],[-12,3],[-12,4],[-12,5],[-12,7],[-10,10],[-8,11],[-7,11],[-3,12],[-12,5],[-12,5],[-12,6],[-11,9],[-11,9],[-10,10],[-6,12],[-6,11],[-5,12],[-3,12],[-1,12],[0,12],[0,12],[2,12],[4,12],[4,12],[9,10],[9,11],[10,10],[10,10],[11,8],[-4,12],[-2,12],[3,12],[6,12],[6,12],[11,10],[11,8],[12,4],[12,1],[3,12],[6,12],[10,10],[10,10],[11,7],[12,4],[12,3],[12,0],[12,-2],[12,-2],[12,-2],[12,-8],[10,-10],[8,-11],[7,-12]];for(i=0;i<e.length;i++){$(".bricks").append("<div class='brick displayNone'></div>")}var b=218;var d=361;for(i=0;i<e.length;i++){b+=e[i][0];d+=e[i][1];var c=$(".brick")[i];$(c).css("top",b+"px");$(c).css("right",d+"px")}var a=0;$(".brick").each(function(h){a+=20+(a/60);if(h>80){a+=(a/50)}var j=$(this);setTimeout(function(){$(j).removeClass("displayNone");$(j).animate({top:"+=50"})},a)});setTimeout(function(){$(".brick").addClass("illuminated")},a+500);setTimeout(function(){$(".brick").fadeOut(300);setTimeout(function(){$(".bricks").hide()},400);$(".final_icon").fadeIn(1000);f.running=false},a+900)}},initialize:function(){var a=this;$(document).ready(function(){if(((getInternetExplorerVersion()>5)&&(getInternetExplorerVersion()<10))||(is_ios())){a.$(".bricks").hide();a.$(".final_icon").show()}else{if(a.options.use_waypoints===true){$.waypoints.settings.scrollThrottle=30;$("body").waypoint(function(b,c){if(c==="down"){if(!a.running){a.cloudModulesAnimation()}}b.stopPropagation()},{offset:-2200})}else{setTimeout(function(){a.cloudModulesAnimation()},500)}$(".final_icon").click(function(){$(this).fadeOut(1000);setTimeout(function(){a.cloudModulesAnimation()},1500)})}})},render:function(){}});App.Views.Products.Core=Backbone.View.extend({events:{},initialize:function(){var a=this;this.render()},render:function(){$(document).ready(function(){$(".card.local_datastore .icon").removeClass("on");$(".card.local_datastore").waypoint(function(a){$(".card.local_datastore .icon").addClass("on")},{offset:"25%"});$(".card.local_datastore .icon").click(function(a){$(this).toggleClass("on")})})}});App.Views.Products.Hosting=Backbone.View.extend({events:{},initialize:function(){var a=this;this.render()},render:function(){$(document).ready(function(){$(".hat").click(function(a){$(".hat").addClass("no_animation").addClass("animation");setTimeout(function(){$(".hat").removeClass("animation")},500)})})}});App.Views.Products.Index=Backbone.View.extend({initialize:function(){this.bg=$(".top_section");$(window).scroll(_.throttle(this.updateBackground.bind(this),100))},updateBackground:function(){var a=$(window).scrollTop()*-0.1;a=Math.min(Math.max(a,-270),0);this.bg.css("background-position","top "+a+"px right")}});App.Views.Products.Push=Backbone.View.extend({events:{},showSignupEvent:function(c){if(c){var b=$(c.target);var a=b.attr("data-position");ParseDotCom.Analytics.track("Push Product - Click on Sign Up",{position:a})}$(".top_section").hide();$(".signup").show();return true},initialize:function(){var a=this;$(document).ready(function(){if(App.currentUser===null){if(window.location.hash==="#signup_form"){a.showSignupEvent()}$(".show_signup").click(a.showSignupEvent)}})},render:function(){}});App.Views.Products.Retina=Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){$(document).ready(function(){var a;if($(".p_products_push").is(":visible")){a=!!window.devicePixelRatio?window.devicePixelRatio:1;if(a>1){$(".iphone, .background, .pricing_1, .pricing_2, .pricing_3").each(function(c){var b=$(this).css("background-image").replace(".jpg","@2x.jpg").replace(".png","@2x.png");$(this).css("background-image",b);$(this).css("background-size","100%")});$(".logo img:first-child, #push_logo, #push_app_icon, .notification, .article, .badge, #server, #cloud_data_icon").each(function(b){$(this).attr("src",$(this).attr("src").replace(".jpg","@2x.jpg").replace(".png","@2x.png"))})}}if($(".p_products_cloud_code").is(":visible")){a=!!window.devicePixelRatio?window.devicePixelRatio:1;if(a>1){$(".scanning img:first-child, .flashing first-child, #cloud_code_icon, #cloud_code_logo, #trash, #cloudjs, #terminal, #imagination, #server").each(function(b){$(this).attr("src",$(this).attr("src").replace(".jpg","@2x.jpg").replace(".png","@2x.png"))})}}})}});App.Views.Products.Tabs=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this;var c=1;if(window.location.hash!==""){var b=_.escape(window.location.hash);c=parseInt($(".slide").index($(b))+1,10);setTimeout(function(){window.scrollTo(0,0)},1)}this.$el.slidesjs({pagination:{active:true,effect:"fade",customPaginationClass:"paginationTabs"},play:{auto:false},generatePagination:false,effect:{effect:"fade"},start:c,navigation:{active:false},callback:{complete:function(e){var d=$("body").scrollTop();window.location.hash=$($(".slide")[e-1]).attr("id");$("html,body").scrollTop(d);if($(".p_products_push")&e===0){PushScenario.render()}}}})}});App.Views.Questions.AssignButton=Backbone.View.extend({events:{click:"setTitleForAssignedQuestion","ajax:success":"handleSuccessResponse","ajax:error":"handleErrorResponse"},initialize:function(){this.state=this.options.state;if(this.state==="assigned"){this.setTitleForAssignedQuestion()}else{this.setTitleForUnassignedQuestion()}this.$el.qtip({content:"Creates a Help Scout with a link to this question.<br/><br/>The question will remain listed.",show:"mouseover",hide:"mouseout",position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{tip:true}})},setTitleForAssignedQuestion:function(){this.$el.html("Assigned").removeClass("assign_question").addClass("assigned_question");this.state="assigned"},setTitleForUnassignedQuestion:function(){this.$el.html("Assign question").removeClass("assigned_question").addClass("assign_question");this.state="unassigned"},displayError:function(){this.setTitleForUnassignedQuestion();alert("Could not assign this question.")},handleSuccessResponse:function(c,b,a){if(!b.success){this.displayError()}},handleErrorResponse:function(){this.displayError()}});App.Views.Questions.BugReport=Backbone.View.extend({el:".bug_report",events:{click:"launchBugModal"},initialize:function(){var a=this.appIds={};this.appNames=this.options.apps.map(function(c){var b=_.escape(c.get("name"));a[b]=c.get("friendly_id");return b})},launchBugModal:function(){this.dialog=new UI.Modal({title:"Report a Bug",template:JST["questions/_bug_report_modal"](),klass:"ui_bug_report",init:(function(b,d,a){var c=function(f){var e="https://developers.facebook.com/x/bugs/?email="+App.currentUser.get("email");if(f){e+="&appid="+f;e+="&appname="+encodeURIComponent(b.get(f).get("name"))}$(this.wrap).find(".facebook_link_button").attr("href",e)};if(d.length){return(function(){new App.Views.Dropdown({el:$(this.wrap).find(".ui_dropdown"),model:new App.Models.Dropdown({defaultOption:"No particular app",options:d,values:a,id:"bug_app_dropdown",name:"bug_app_dropdown",changeFunction:c.bind(this)})})})}else{return(function(){$(this.wrap).find(".requires_apps").remove();c.call(this)})}})(this.options.apps,this.appNames,this.appIds)});return false}});App.Views.Questions.Comment=Backbone.View.extend({events:{"click .comment_toggle":"showCommentBox"},initialize:function(){var a=this;this.$el.find(".form").live("ajax:beforeSend",function(b,d,c){if(!App.currentUser.get("name")||App.currentUser.get("name")===""){new App.Views.Users.NameWidget({form:a.$el.find(".form")});return false}else{if(a.$el.find(".comment_box").attr("value").length===0){a.$el.find(".comment_box").focus();a.$el.find(".error_explanation").html("Your comment can't be empty").show();return false}else{if(a.$el.find(".comment_box").attr("value").length>2000){a.$el.find(".comment_box").focus();a.$el.find(".error_explanation").html("Your comment must be less than 2000 characters.").show();return false}else{a.$el.find(".comment_button").addClass("disabled_button").attr("disabled","disabled")}}}}).live("ajax:success",function(c,d,b,e){a.$el.find(".comment_box").attr("value","");a.$el.find(".new_comment").css("display","none");a.$el.find(".error_explanation").html("").hide();a.$el.find(".comments").append(e.responseText);a.$el.find(".comment_button").removeClass("disabled_button").removeAttr("disabled","disabled");a.$el.find(".comment_toggle").show();if(typeof(markButton)!=="undefined"){markButton.updateTitleForNewComment()}}).live("ajax:error",function(c,e,b,d){a.$el.find(".comment_button").removeClass("disabled_button").removeAttr("disabled","disabled");a.$el.find(".error_explanation").html("We were unable to post your comment.").show()})},showCommentBox:function(a){this.$el.find(".comment_box").val="";this.$el.find(".new_comment").show();this.$el.find(".comment_box").focus();this.$el.find(".comments").show();this.$el.find(".comment_toggle").hide();return false}});App.Views.Questions.MarkButton=Backbone.View.extend({events:{click:"toggleMarkButtonTitle"},initialize:function(){this.state=this.options.state;if(this.state==="read"){this.setTitleForReadQuestion()}else{this.setTitleForUnreadQuestion()}this.$el.qtip({content:"Unread questions will appear in the Admin tab.",show:"mouseover",hide:"mouseout",position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{tip:true}})},toggleMarkButtonTitle:function(){if(this.state==="read"){this.setTitleForUnreadQuestion()}else{this.setTitleForReadQuestion()}},setTitleForReadQuestion:function(){this.$el.html("Mark as unread").removeClass("mark_read").addClass("mark_unread");this.state="read"},setTitleForUnreadQuestion:function(){this.$el.html("Mark as read").removeClass("mark_unread").addClass("mark_read");this.state="unread"},updateTitleForNewComment:function(){this.setTitleForReadQuestion()},updateTitleForNewAnswer:function(){this.setTitleForReadQuestion()}});App.Views.Questions.PaginatedList=Backbone.View.extend({initialize:function(){var a=this;this.listName=this.options.listName;this.$(".pagination a").live("click",function(b){a.$(".loading").show();a.$("pagination a").css("pointer-events","none").css("cursor","default");$.get(this.href,null,function(c){a.$el.html(c)},"html");return false})}});App.Views.Questions.PinButton=Backbone.View.extend({events:{click:"togglePinButtonTitle"},initialize:function(){this.state=this.options.state;if(this.state==="pinned"){this.setTitleForPinnedQuestion();this.showPinnedAssetForQuestion()}else{this.setTitleForUnpinnedQuestion();this.hidePinnedAssetForQuestion()}this.$el.qtip({content:"Pinned questions show up at the top of the Popular Questions list.",show:"mouseover",hide:"mouseout",position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{tip:true}})},togglePinButtonTitle:function(){if(this.state==="pinned"){this.setTitleForUnpinnedQuestion();this.hidePinnedAssetForQuestion()}else{this.setTitleForPinnedQuestion();this.showPinnedAssetForQuestion()}},setTitleForPinnedQuestion:function(){this.$el.html("Unpin").removeClass("unpin_question").addClass("pin_question");this.state="pinned"},setTitleForUnpinnedQuestion:function(){this.$el.html("Pin").removeClass("pin_question").addClass("unpin_question");this.state="unpinned"},showPinnedAssetForQuestion:function(){$(".unpinned_question").removeClass("unpinned_question").addClass("pinned_question")},hidePinnedAssetForQuestion:function(){$(".pinned_question").removeClass("pinned_question").addClass("unpinned_question")}});App.Views.Questions.TakeOfflineButton=Backbone.View.extend({events:{click:"setStatusForTakenOffline","ajax:success":"handleSuccessResponse","ajax:error":"handleErrorResponse"},initialize:function(){this.state=this.options.state;if(this.state==="take_offline"){this.setStatusForTakeOffline()}else{this.setStatusForTakenOffline()}this.$el.qtip({content:"Hide the question from the public. It will remain visible to admins.<br/><br/>Use this to continue conversations privately.",show:"mouseover",hide:"mouseout",position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{tip:true}})},setStatusForTakeOffline:function(){this.$el.html("Make private").removeClass("taken_offline").addClass("take_offline");this.state="take_offline"},setStatusForTakenOffline:function(){this.$el.hide();this.state="taken_offline";alert("This question has been taken offline. Only the author of the original question will be able to see this thread. You may follow up with the customer by using comments or answers.")},displayError:function(){this.setStatusForTakeOffline();alert("Could not take this question offline.")},handleSuccessResponse:function(c,b,a){if(!b.success){this.displayError()}},handleErrorResponse:function(){this.displayError()}});App.Views.RPC=function(c){var a=c?$(c).data("rpc"):null;if(a){return a}var b={isExecuting:false,view:(function(){var e=$("<div>").addClass("callback");$(c?c:document.body).append(e);return e})(),resetView:function(e){this.view.empty().removeClass("error_bubble greenBubble").remove()},positionView:function(e){if(!e){return}var f=e.el?e.el:e;this.view.appendTo(f);this.view.css({right:e.dx||-30,top:e.dy||15})},displayCustomSuccess:function(e,f){this.resetView();this.positionView(e);this.view.fadeIn(f)},displaySuccess:function(e,f){this.resetView();this.positionView(e);this.view.append(this.success);this.view.fadeIn(f)},displaySuccessMessage:function(e,f,h){this.resetView();this.positionView(e);this.view.append($("<p>").append(_.escape(f)));this.view.addClass("greenBubble");this.view.fadeIn(h)},displayErrors:function(e,h){this.resetView();this.positionView(e);this.view.addClass("error_bubble");var f=this;_(h).each(function(j){f.view.append($("<p>").append(_.escape(j)))});this.view.fadeIn()},success:$("<div class='icon_callback_saved'></div>"),displayThinking:function(e){this.positionView(e);this.view.append($("<div class='settings_spinner'></div>"));$(".settings_spinner").spin("small","#5a6b77");if(this.view.css("display")==="none"){this.view.fadeIn()}}};var d={call:function(e){b.resetView();if(e.spinnerView){b.displayThinking(e.spinnerView,e.offset)}else{b.displayThinking(e.view,e.offset)}b.isExecuting=true;$.ajax(e.url,{dataType:"json",type:e.method,data:e.params,success:function(f){if(f.errors){b.displayErrors(e.view,f.errors)}else{if(f.error){b.displayErrors(e.view,[f.error])}else{var h=function(){if(e.success){e.success(f.data)}};if(e.customSuccess){b.displayCustomSuccess(e.view,h)}else{if(e.successMessage){b.displaySuccessMessage(e.view,e.successMessage(f),h)}else{b.displaySuccess(e.view,h)}}}}b.isExecuting=false},error:function(f,j,h){b.displayErrors(e.view,[h]);b.isExecuting=false}})},delegateEvents:function(){$("body").click(function(e){if(!b.isExecuting){if(!$(e.target).closest(".callback")[0]){b.resetView()}b.isExecuting=false}})},isExecuting:function(){return self.isExecuting},hide:function(){b.resetView()},fadeOut:function(e,f){b.view.fadeOut(e,function(){b.resetView();if(f){f()}})}};d.delegateEvents();if(c){$(c).data("rpc",d)}return d};App.Views.SchemaBrowser=Backbone.View.extend({el:"#schemas",initialize:function(b){var a=this;this.collections=b.collections;this.schemas=b.schemas;var c=this.$el.find(".ui_selection_column");this.collections.each(function(f,e){c.append('<input type="radio" id="classes['+e+']" name="classes" value="'+f.id+'" /><label for="classes['+e+']" data-count="'+f.get("count")+'">'+_.escape(f.get("display_name"))+"</label>")});c.on("change","input",function(f){a.renderSchema(f.target.value)});var d=c.find("input")[0];if(d){d.checked=true;this.renderSchema(d.value)}else{this.renderEmpty()}},renderSchema:function(e){var c=this.collections.get(e).get("count");this.$(".class_info").text(_.escape(e)+": "+c+(c===1?" row":" rows"));var a=this.schemas.get(e).get("keys");var b="";for(var d in a){b+="<div><span>"+_.escape(d)+"</span><span>"+a[d].type.name+"</span></div>"}this.$(".schema").html(b)},renderEmpty:function(){this.$(".schema").hide();this.$(".class_info").text("No classes to show")}});App.Views.SegmentControl=Backbone.View.extend({tagName:"ul",className:"segment_control",events:{"click li":"toggleTab"},initialize:function(){_.bindAll(this);this.template=this.options.template;this.modelAttribute=this.options.modelAttribute||"segmentIndex";this.model.on("change:"+this.modelAttribute,this.render);if(this.options.defaultIndex>=0){this.model.set(this.modelAttribute,this.options.defaultIndex)}return this},render:function(){var a=this.model.get(this.modelAttribute);this.$el.html(JST[this.template]({}));this.$("li").removeClass("active");$(this.$("li")[a]).addClass("active");return this},toggleTab:function(b){var a=$(b.target).closest("li").index();this.model.set(this.modelAttribute,a)}});App.Views.MultiSegmentControl=App.Views.SegmentControl.extend({initialize:function(){this.options.defaultIndex=undefined;App.Views.MultiSegmentControl.__super__.initialize.call(this);this.model.set(this.modelAttribute,[],{silent:true});this.model.on("change:"+this.modelAttribute,this.render)},render:function(){var a=this;var b=this.model.get(this.modelAttribute);this.$el.html(JST[this.template]({indices:b}));return this},toggleTab:function(c){var b=this.model.get(this.modelAttribute).slice(0);var a=$(c.target).closest("li").index();if($(this.$("li")[a]).hasClass("active")){b=_(b).without(a)}else{b.push(a);b=_(b).uniq()}this.model.set(this.modelAttribute,b);return false}});App.SessionRedirect={initialize:function(){var a=this;this.signUpNextUrl="/?#oauthsignup";this.loginNextUrl="/apps";$(".oauth_login").live("click",function(b){Util.createCookie("signup_next_url",a.signUpNextUrl,0.01);Util.createCookie("login_next_url",a.loginNextUrl,0.01);return true})},setNextUrls:function(b,a){this.signUpNextUrl=b;this.loginNextUrl=a}};App.Views.Support.BillingInquiry=Backbone.View.extend({el:".billing_inquiry",events:{click:"launchBillingInquiryModal"},initialize:function(){_.bindAll(this)},launchBillingInquiryModal:function(){this.dialog=new App.Views.Support.BillingInquiryModal({title:"Report a Billing Issue",template:"support/_billing_inquiry_modal",klass:"ui_billing_inquiry",modalOptions:{width:500,beforeClose:(function(){this.parentNode.remove()})}});this.dialog.render();return false}});App.Views.Support.BillingInquiryModal=App.Views.Modal.extend({url:"/support/billing",events:{"submit form":"submitEvent",},submitEvent:function(a){if(this.$("textarea[name='question']").val()===""){this.showError("Your inquiry cannot be blank.");return false}this.$("form button").attr("disabled","disabled").addClass("disabled");this.sendFormData();return false},showError:function(a){this.$(".errors").text(a).show();this.$("form button").removeAttr("disabled").removeClass("disabled")},sendFormData:function(){var a=this;$.ajax({url:this.url,type:"POST",data:this.$("form").serialize(),dataType:"json",success:function(b){if(b.success){a.$(".billing_inquiry_form").hide();a.$(".inquiry_confirmation").show();setTimeout(function(){a.close()},2000)}else{a.showError("Something went wrong. Please try again. If that still doesn't work, email billing@parse.com.")}},error:function(b){a.showError("Something went wrong. Please try again. If that still doesn't work, email billing@parse.com.")}});return false}});App.Views.Tutorials.Filters=Backbone.View.extend({events:{"click .filters li":"activateFilter"},initialize:function(){this.render()},render:function(){var a=this},activateFilter:function(c){var b=$(c.target).closest("li");if(b.hasClass("active")){b.removeClass("active");$(".section").show()}else{var a=b.attr("class");this.$("li").removeClass("active");b.addClass("active");$(".section").hide();$(".section."+a).show()}}});App.Views.Tutorials.ScrollAppKeys=Backbone.View.extend({events:{},scrollToAppKeys:function(a){window.scrollTo("appKeys")},initialize:function(){if(window.location.hash==="#appKeys"){this.scrollToAppKeys()}},render:function(){}});App.Views.Tutorials.ShowAppKeys=Backbone.View.extend({initialize:function(){this.el=$("#"+this.options.el);this.title=this.options.title;this.appKey=this.options.appKey;this.appSecret=this.options.appSecret;this.render()},render:function(){var a=this;a.el.html(JST["tutorials/_app_keys"]({appKey:a.appKey,appSecret:a.appSecret,title:a.title}))}});App.Views.Tutorials.Slides=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this;this.$el.slidesjs({pagination:{active:true},navigation:{active:false},play:{auto:true,interval:4000},})}});App.Views.Users.NameWidget=Backbone.View.extend({url:"/account",events:{"submit form":"submitEvent","click .close":"close"},initialize:function(){this.form=this.options.form;this.render()},showError:function(a){this.$(".errors").text(a).show();$.colorbox.resize()},close:function(a){$.colorbox.close();return false},submitEvent:function(b){var a=this;a.newName=this.$("input[name='name']").val();if(this.$("input[name='name']").val()===""){this.showError("Please enter your name.");return false}this.$("form button").attr("disabled","disabled").addClass("disabled");$.colorbox.resize();$.ajax({url:this.url,type:"PUT",data:{user:{name:""+this.newName+""}},dataType:"json",success:function(c){App.currentUser.set({name:a.newName});a.form.submit();a.close()},error:function(c){a.showError("Something went wrong. Please try again.");a.$("form button").removeAttr("disabled").removeClass("disabled")}});return false},render:function(){$.colorbox({html:JST["users/_name_widget"]({user:App.currentUser})});this.el=$("#colorbox");this.delegateEvents()}});App.Views.Users.New=Backbone.View.extend({url:"/users",type:"POST",events:{submit:"submitEvent"},initialize:function(){this.emailField=this.$el.find("[name=email]");this.passwordField=this.$el.find("[name=password]");this.emailField.watermark("Email Address");this.passwordField.watermark("Create Password");this.errors=this.$el.find(".errors");if(!this.errors[0]){var a=$("<div class='errors'></div>").hide();this.$el.prepend(a);this.errors=a}_.bindAll(this,"submitEvent")},submitEvent:function(){var c=this.emailField.val();var b=this.passwordField.val();var a=this;var d={user:{email:c,password:b}};if(this.options.appName){d.parse_app={name:this.options.appName}}$.ajax(this.url,{dataType:"json",type:"POST",data:d,success:function(e){if(e.errors){a.errors.html("").show();_(e.errors).each(function(f){var h=$("<p></p>");a.errors.append(h);h.text(f)});a.$("button").removeAttr("disabled").removeClass("disabled")}else{if(a.options.callback){a.options.callback(e)}}}});return false},render:function(){}});App.Views.Videos.Index=Backbone.View.extend({events:{"click .video":"openVideo"},initialize:function(){this.videos={};this.render()},render:function(){var a=this;var b=new ParseCMS.Query("Video");b.find().then(function(c){_(c).each(function(f,d){var e="small";if(d===0){e="large"}a.$el.append(JST["videos/_video"]({video:f,size:e}))})})},openVideo:function(a){video=a.target;$(".large").removeClass("large").removeClass("playing").addClass("small");$(video).closest(".video").addClass("large").addClass("playing")}});App.Views.Votes.New=Backbone.View.extend({initialize:function(){var a=this;this.direction=this.options.direction;this.vote=this.options.vote;var b=this.$el.find(".vote_button");if(this.vote>0){if(this.direction==="up"){a.setUpButtonSelected(b)}else{a.setButtonDisabled(b)}}else{if(this.vote<0){if(this.direction==="down"){a.setDownButtonSelected(b)}else{a.setButtonDisabled(b)}}else{b.attr("href","#");b.removeAttr("disabled","disabled")}}this.$el.live("ajax:beforeSend",function(c,f,e){if($(c.target).find(".vote_button").is("[disabled]")){return false}var h=a.direction==="up"?1:-1;var d=$(c.target).parent().find(".vote_num");if(!/[a-zA-Z]+/.test(d.html())){d.html(parseInt(d.html(),10)+h)}if(a.direction==="up"){a.setUpButtonSelected($(c.target).find(".vote_up"));a.setButtonDisabled($(c.target).parent().find(".vote_down"))}else{a.setDownButtonSelected($(c.target).find(".vote_down"));a.setButtonDisabled($(c.target).parent().find(".vote_up"))}}).live("ajax:success",function(d,e,c,f){}).live("ajax:error",function(d,f,c,e){})},setUpButtonSelected:function(a){a.removeAttr("href").attr("disabled","disabled").removeClass("vote_up").addClass("vote_up_selected")},setDownButtonSelected:function(a){a.removeAttr("href").attr("disabled","disabled").removeClass("vote_down").addClass("vote_down_selected")},setButtonDisabled:function(a){a.removeAttr("href").attr("disabled","disabled")}});(function(){window.JST=window.JST||{};window.JST._paginate=_.jammit_template('<% var prevInactive = currentPage === 1 %>\n<% var prevHref = rootUrl + "/page/" %>\n<% prevHref += prevInactive ? currentPage : (currentPage - 1) %>\n\n<a data-pushstate="true" class="prev <%= prevInactive ? "inactive" : ""  %>" rel="prev" href="<%= prevHref %>">\n  <div></div>\n</a>\n\n<% var fromRows = (currentPage - 1) * perPage + 1 %>\n<% var toRows = Math.min(currentPage * perPage, totalRows) %>\n\n<span class="page_info"><%= fromRows %> - <%= toRows %> of <%= totalRows %></span>\n\n<% var nextInactive = currentPage === totalPages %>\n<% var nextHref = rootUrl + "/page/" %>\n<% nextHref += nextInactive ? currentPage : (currentPage + 1) %>\n\n<a data-pushstate="true" class="next <%= nextInactive ? "inactive" : ""  %>" rel="next <%= currentPage === 2 ? "start" : "" %>" href="<%= nextHref %>">\n  <div></div>\n</a>');window.JST._permission_editor=_.jammit_template('<form>\n  <h2><%= title %></h2>\n  <p><small><%= instructions %></small></p>\n\n  <input type="checkbox" name="public_access">Any user can perform this action</input>\n  \n  <div class="textboxes">\n    <label>Roles <div class=\'with_tooltip question_tip\'><span class=\'big mini_tooltip\'>"A comma-separated list of role names that are granted this permission."</span></div></label>\n    <input type="text" name="roles" />\n    <label>Users <div class=\'with_tooltip question_tip\'><span class=\'big mini_tooltip\'>"A comma-separated list of user object ids that are granted this permission."</span></div></label>\n    <input type="text" name="users" />\n  </div>\n\n  <div class="buttons">\n    <button><%= okText %></button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>\n');window.JST._static_modal=_.jammit_template('<div style="display: block; z-index: 1002; outline: 0px; height: auto; width: 350px; top: 122px; left: 324px;" class="ui-dialog ui-widget ui-widget-content ui-corner-all <%= klasses %>" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-2">\n\n  <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">\n    <span class="ui-dialog-title" id="ui-dialog-title-2"><%= title %></span>\n    <% if (closeButton) { %>\n      <a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button">\n        <span class="ui-icon ui-icon-closethick">close</span>\n      </a>\n    <% } %>\n  </div>\n  <div class="lightbox ui-dialog-content ui-widget-content" style="width: auto; min-height: 75px; height: auto; display: block;" scrolltop="0" scrollleft="0">\n    <%- content %>\n  </div>\n</div>');window.JST["apps/_app_list"]=_.jammit_template('<ul>\n    <% apps.each(function(item) { %>\n        <li><a href="#" data-app="<%= item.id %>"><%= item.get(\'name\') %></a></li>\n    <% }); %>\n</ul>\n        ');window.JST["apps/_collaborator_list"]=_.jammit_template('<li>\n  <span>\n  <% if (userName) { %>\n    <%= userName %> (<%= userEmail %>)\n  <% } else { %>\n    <%= userEmail %>\n  <% } %>\n  </span>\n  <% if (isOwner) { %>\n    &mdash; <a href="<%= url %>"\n               data-method="delete"\n               rel="nofollow"\n               class="danger">Stop Sharing</a>\n  <% } %>\n</li>\n');window.JST["apps/_key_rows"]=_.jammit_template('<% for (var i = 0; i < row_count; i++) { %>\n  <% var id_name = id_list_name + \'[\' + i + \']\'; %>\n  <% var secret_name = secret_list_name + \'[\' + i + \']\'; %>\n  <li>\n    <input class="noImplicitAjax ui_text" type="text" name="<%= id_name %>" value="<%= _.escape(id_list[i]) %>" placeholder="App ID" />\n    <input class="noImplicitAjax ui_text" type="text" name="<%= secret_name %>" value="<%= _.escape(secret_list[i]) %>" placeholder="App Secret" />\n    <a class="deleteRow"><i class="icon_crossCircle"></i></a>\n  </li>\n<% } %>');window.JST["apps/_new_app_step2"]=_.jammit_template('<div class="header">\n  <div class="title">Getting started</div>\n</div>\n<div class="content">\n  <div class="notice">\n    <p class="confirmation_message"><%= _.escape(result.notice) %></p>\n    <p class="advices">Learn how to use Parse in your app using our\n      Quickstart Guide, or start designing your app\n      in the Data Browser.\n    </p>\n    <div class="action_buttons">\n      <a href="/apps/quickstart?app_id=<%= result.app.friendly_id %>">Quickstart Guide</a>\n      <a href="/apps/<%= result.app.friendly_id %>/collections">Data Browser</a>\n    </div>\n  </div>\n  \n  <div class="app_keys">\n    <h2>App keys</h2>\n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Application ID</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= result.app.key %>" />\n          <a href="copy" id="copy_client_key">Copy</a>\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Client Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= result.app.secret %>" />\n          <a href="copy" id="copy_client_secret">Copy</a>\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Javascript Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= result.app.javascript_key %>" />\n          <a href="copy" id="copy_javascript_key">Copy</a>\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>.NET Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= result.app.windows_key %>" />\n          <a href="copy" id="copy_windows_key">Copy</a>\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>REST API Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= result.app.rest_api_key %>" />\n          <a href="copy" id="copy_rest_api_key">Copy</a>\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Master Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= result.app.push_key %>" />\n          <a href="copy" id="copy_push_key">Copy</a>\n        </div>\n      </div>\n    </div>\n\n    <a class="app_keys_link" href="/apps/<%= result.app.friendly_id %>/edit#keys">Get all your app keys</a>\n  </div>\n</div>    \n');window.JST["apps/_production_metadata_segment"]=_.jammit_template("<li class=\"first <%= _(indices).contains(0) ? 'active' : '' %>\">\n  <div>iOS</div>\n</li>\n<li class=\"<%= _(indices).contains(1) ? 'active' : '' %>\">\n  <div>Android</div>\n</li>\n<li class=\"<%= _(indices).contains(2) ? 'active' : '' %>\">\n  <div>Web</div>\n</li>\n<li class=\"<%= _(indices).contains(3) ? 'active' : '' %>\">\n  <div>Windows</div>\n</li>\n<li class=\"last <%= _(indices).contains(4) ? 'active' : '' %>\">\n  <div>Other</div>\n</li>");window.JST["apps/_waiting"]=_.jammit_template('<div><img src="/images/docs/icon_checkmark_quick.png" /> Congrats! You saved your first object:</div>\n<div class="obj"><%= object %></div>\n<div class="share_widget">\n  <a class="action_link fb_share" href="#"> \n    <div class="icon"/>\n    Share on Facebook\n  </a>\n  <a class="action_link twitter_share" href="#"> \n    <div class="icon"/>\n    Share on Twitter\n  </a>\n</div>\n');window.JST["apps/analytics/_content_audience"]=_.jammit_template('<% _.each(Analytics.ContentAudience.Types, function(type) { %>\n  <% if (stats[\'total_\' + type]) { %>\n    <div class="audience_date">As of <%= formatDate(date) %>:</div>\n    <% _.each(Analytics.ContentAudience.Frequencies, function(frequency) { %>\n      <% var statBoxData = stats[frequency + \'_\' + type] %>\n      <div class="stat_box">\n        <% if (statBoxData) { %>\n          <span class="audience_stat"><%= humanize(statBoxData.current.stat, 3) %></span>\n          <a class="delta <%= deltaClass(statBoxData.current.delta) %> with_tooltip">\n            <%= deltaStr(statBoxData.current.delta) %>\n            <span class="mini_tooltip">\n              <table>\n                <tr>\n                  <td class="tooltip_date" nowrap><%= formatDate(statBoxData.last.date) %></td>\n                  <td class="tooltip_stat"><%= humanize(statBoxData.last.stat, 4) %></td>\n                </tr>\n\n                <tr>\n                  <td class="tooltip_date" nowrap><%= formatDate(statBoxData.previous.date) %></td>\n                  <td class="tooltip_stat"><%= humanize(statBoxData.previous.stat, 4) %></td>\n                  <td class="tooltip_delta <%= deltaClass(statBoxData.previous.delta) %>">\n                    <%= deltaStr(statBoxData.previous.delta) %>\n                  </td>\n                </tr>\n\n                <tr>\n                  <td class="tooltip_date current" nowrap><%= formatDate(statBoxData.current.date) %></td>\n                  <td class="tooltip_stat current"><%= humanize(statBoxData.current.stat, 4) %></td>\n                  <td class="tooltip_delta <%= deltaClass(statBoxData.current.delta) %>">\n                    <%= deltaStr(statBoxData.current.delta) %>\n                  </span>\n                </tr>\n              </table>\n            </span>\n          </a>\n        <% } %>\n        <div class="label"><%= frequency %> Active <%= type %></div>\n      </div>\n    <% }); %>\n\n    <div class="stat_box total">\n      <span class="audience_stat"><%= humanizeTotal(stats[\'total_\' + type]) %></span>\n      <div class="label">Total <%= type %></div>\n    </div>\n  <% } // end "if total" %>\n<% }); %>\n');window.JST["apps/analytics/_content_events"]=_.jammit_template("<% _.each(dataBySeries, function(seriesParams) { %>\n  <span class='aggr_series' style='color:<%= seriesParams.model.get('color') %>'>\n    <%= seriesParams.aggr + ' ' + seriesParams.model.get('displayName') %>\n  </span>\n<% }); %>\n");window.JST["apps/analytics/_content_performance"]=_.jammit_template('<div class="billing_header">Billing data as of today</div>\n<% _.each(Analytics.ContentPerformance.Types, function(type) { %>\n  <div class="billing_graph" id="billing_graph_<%= type %>">\n    <div class="donut">\n      <div class="donut_fill_second"></div>\n      <div class="donut_mask_second"></div>\n      <div class="donut_fill"></div>\n      <div class="donut_mask"></div>\n      <div class="donut_content">\n        <% if (stats[type]) { %>\n          <div class="percentage">\n            <%= formatPercent(stats[type].total, stats[type].limit) %>\n          </div>\n          <div class="total">\n            <%= formatTotal(type, stats[type].total, stats[type].limit) %>\n          </div>\n        <% } %>\n      </div>\n    </div>\n    <div class="billing_type">\n      <%= formatType(type) %>\n    </div>\n  </div>\n<% }); %>\n');window.JST["apps/analytics/_content_retention"]=_.jammit_template('<% var formatDate = Analytics.ContentRetention.ViewHelpers.formatDate; %>\n<h3>% of active users X days after signup</h3>\n<table>\n  <tr>\n    <th class="x_days_after"></th>\n    <th>1</th>\n    <th>2</th>\n    <th>3</th>\n    <th>4</th>\n    <th>5</th>\n    <th>6</th>\n    <th>7</th>\n    <th>8</th>\n    <th>14</th>\n    <th>21</th>\n    <th>28</th>\n  </tr>\n    <tr>\n      <th class="x_days_after">28 days ago</th>\n      <% _.each([1, 2, 3, 4, 5, 6, 7, 8, 14, 21, 28], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_28, t: t }) %>\n      <% }); %>\n    </tr>\n    <tr>\n      <th class="x_days_after">21 days ago</th>\n      <% _.each([1, 2, 3, 4, 5, 6, 7, 8, 14, 21], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_21, t: t }) %>\n      <% }); %>\n      <td class="not_applicable"></td>\n    </tr>\n    <tr>\n      <th class="x_days_after">14 days ago</th>\n      <% if (noData) { %>\n        <td></td><td></td>\n        <td class="no_retention" colspan="6">You don\'t have any User Retention data for this period.</td>\n        <td></td>\n      <% } else { %>\n        <% _.each([1, 2, 3, 4, 5, 6, 7, 8, 14], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_14, t: t }) %>\n        <% }); %>\n      <% } %>\n      <% for (var i = 0; i < 2; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after">8 days ago</th>\n      <% if (noData) { %>\n        <td></td><td></td><td></td>\n        <td class="no_retention" colspan="4">\n          <a href="/apps/quickstart#social">Get started with Parse Users</a>\n        </td>\n        <td></td>\n      <% } else { %>\n        <% _.each([1, 2, 3, 4, 5, 6, 7, 8], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_8, t: t }) %>\n        <% }); %>\n      <% } %>\n      <% for (var i = 0; i < 3; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_7.time) %></th>\n      <% _.each([1, 2, 3, 4, 5, 6, 7], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_7, t: t }) %>\n      <% }); %>\n      <% for (var i = 0; i < 4; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_6.time) %></th>\n      <% _.each([1, 2, 3, 4, 5, 6], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_6, t: t }) %>\n      <% }); %>\n      <% for (var i = 0; i < 5; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_5.time) %></th>\n      <% _.each([1, 2, 3, 4, 5], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_5, t: t }) %>\n      <% }); %>\n      <% for (var i = 0; i < 6; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_4.time) %></th>\n      <% _.each([1, 2, 3, 4], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_4, t: t }) %>\n      <% }); %>\n      <% for (var i = 0; i < 7; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_3.time) %></th>\n      <% _.each([1, 2, 3], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_3, t: t }) %>\n      <% }); %>\n      <% for (var i = 0; i < 8; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_2.time) %></th>\n      <% _.each([1, 2], function(t) { %>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_2, t: t }) %>\n      <% }); %>\n      <% for (var i = 0; i < 9; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n    </tr>\n    <tr>\n      <th class="x_days_after"><%= formatDate(days_old_1.time) %></th>\n      <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_1, t: 1 }) %>\n      <% for (var i = 0; i < 7; i++) { %>\n        <td class="not_applicable"></td>\n      <% } %>\n      <td class="not_applicable" colspan="3">\n        <a href="http://blog.parse.com/2014/04/30/the-more-you-grow-the-more-you-know">What does this table mean?</a>\n      </td>\n    </tr>\n</table>\n');window.JST["apps/analytics/_content_retention_cell"]=_.jammit_template('<% var datum = day[\'day_\' + t];\n   var style = Analytics.ContentRetention.ViewHelpers.style(datum);\n   var ratio = Analytics.ContentRetention.ViewHelpers.ratio(datum);\n   var date = Analytics.ContentRetention.ViewHelpers.formatDate(day.time);\n   var percent = Analytics.ContentRetention.ViewHelpers.percentify(datum);\n   var displayInsignificant = Analytics.ContentRetention.ViewHelpers.insignificant(datum);\n   var daysAgoDate = Analytics.ContentRetention.ViewHelpers.formatActivityDate(day.time, t); %>\n\n<% if (ratio < 0) { %>\n  <td></td>\n<% } else { %>\n  <td class="with_tooltip" style="<%= style %>">\n    <%= percent %>\n    <span class="mini_tooltip<%= displayInsignificant ? \' shaded\' : \'\' %><%= t > 7 ? \' right_side\' : \'\' %>">\n      <span class="tooltip_container">\n        Of the <span class="datum"><%= Analytics.ViewHelpers.humanizeTotal(datum.total) %></span> users\n        who signed up on\n        <span class="date"><%= date %></span>,\n        <span class="datum"><%= Analytics.ViewHelpers.humanizeTotal(datum.active) %></span> (<%= percent %>)\n        were active on <span class="date"><%= daysAgoDate %></span>.\n\n        <% if (displayInsignificant) { %>\n          <span class="disclaimer">\n            <span class="icon"></span>\n            There may be too few users to reliably measure retention.\n          </span>\n        <% } %>\n      </span>\n    </span>\n  </td>\n<% } %>\n');window.JST["apps/analytics/_graph"]=_.jammit_template('<div class="graph_container">\n  <div class="graph_toolbar ui_content_header"></div>\n  <div class="graph_breakdown_sidebar" id="graph_breakdown_sidebar_<%= appId %>">\n  </div>\n  <div class="chart_wrapper">\n    <div class="empty_wrapper">\n    </div>\n    <div class="chart_container" id="chart_container_<%= appId %>">\n    </div>\n  </div>\n</div>\n<div class="content_container">\n  <div class="content_audience" id="content_audience_<%= appId %>">\n  </div>\n  <div class="content_events" id="content_events_<%= appId %>">\n  </div>\n  <div class="content_retention" id="content_retention_<%= appId %>">\n  </div>\n  <div class="content_performance" id="content_performance_<%= appId %>">\n  </div>\n</div>\n');window.JST["apps/analytics/_graph_add_button"]=_.jammit_template('<div class="graph_add plus_button"><span></span></div>');window.JST["apps/analytics/_graph_breakdown_sidebar"]=_.jammit_template('<i class="icon_cross graph_breakdown_sidebar_close"></i>\n<p>Custom Breakdown</p>\n<p>\n    <div id="event_select" />\n</p>\n\n<p class="analytics_header_filters">Filters</p>\n\n<ul>\n    <li class="missing">\n        <div class="popover">\n            <i class="icon_questionMark"></i>\n            <div class="popover_menu">\n                We currently only store the first eight dimension pairs\n                provided for a custom event.\n            </div>\n        </div>\n        Missing data?\n    </li>\n</ul>\n\n<div class="add_series_button ui_action_button">Save Breakdown</div>\n');window.JST["apps/analytics/_graph_breakdown_sidebar_default_options"]=_.jammit_template('<li>\n    <div class="sidebar_option_header">\n        Platform\n        <span class="toggle">\n            <input id="breakdown_default_platform" type="checkbox" />\n            <label for="breakdown_default_platform" data-on="" data-off="" />\n        </span>\n    </div>\n\n    <input data-dimension="deviceType" type="hidden" value="false" />\n    <div class="breakdown_select" id="device_type_select" />\n</li>\n<% if (isAPIRequest) { %>\n    <li>\n        <div class="sidebar_option_header">\n            Class\n            <span class="toggle">\n                <input id="breakdown_default_class" type="checkbox" />\n                <label for="breakdown_default_class" data-on="" data-off="" />\n            </span>\n        </div>\n\n        <input data-dimension="className" type="hidden" value="false" />\n        <div class="breakdown_select" id="class_name_select" />\n    </li>\n    <li>\n        <div class="sidebar_option_header">\n            Request Type\n            <span class="toggle">\n                <input id="breakdown_default_req_type" type="checkbox" />\n                <label for="breakdown_default_req_type" data-on="" data-off="" />\n            </span>\n        </div>\n\n        <input data-dimension="refinement" type="hidden" value="false" />\n        <div class="breakdown_select" id="refinement_select" />\n    </li>\n<% } %>\n');window.JST["apps/analytics/_graph_breakdown_sidebar_option"]=_.jammit_template('<li>\n    <div class="sidebar_option_header">\n        <%= dimensionName %>\n        <span class="toggle">\n            <input id="breakdown_toggle_<%= sanitizedDimensionName %>" type="checkbox" />\n            <label for="breakdown_toggle_<%= sanitizedDimensionName %>" data-on="" data-off="" />\n        </span>\n    </div>\n\n    <input data-dimension="<%= dimensionName %>" type="hidden" value="false" />\n    <div class="breakdown_select" id="<%= sanitizedDimensionName %>_select" />\n</li>\n');window.JST["apps/analytics/_graph_dropdown"]=_.jammit_template('<div class="dropdown_button">\n  <div class="legend" style="background-color: <%= seriesModel.get(\'color\') %>"></div>\n  <div class="graph_loading"></div>\n  <span class="tab_label" href="#">\n    <% if (seriesModel.get(\'deviceType\')) { %>\n      <div class="platform_icon <%= seriesModel.get(\'deviceType\') %>"></div>\n    <% } %>\n    <%= seriesModel.get(\'displayName\') %>\n  </span>\n  <a href="#" class="dropdown_remove"></a>\n</div>\n\n<div class="refinement_dropdown">\n  <div class="refinement_titlebar">\n    <div class="legend" style="background-color: <%= seriesModel.get(\'color\') %>"></div>\n    <div class="graph_loading"></div>\n    <span class="tab_label" href="#">\n      <% if (seriesModel.get(\'deviceType\')) { %>\n        <div class="platform_icon <%= seriesModel.get(\'deviceType\') %>"></div>\n      <% } %>\n      <%= seriesModel.get(\'displayName\') %>\n    </span>\n    <a href="#" class="dropdown_remove"></a>\n  </div>\n  <ul class="dropdown_options">\n    <% if (shouldShowBreakdown) { %>\n      <li class="new_series">\n        <a class="new_series_button">Custom Breakdown</a>\n      </li>\n    <% } %>\n  </ul>\n</div>\n');window.JST["apps/analytics/_graph_dropdown_option"]=_.jammit_template('<li class="series_option \n  <%= isSelected ? "selected " : "" %>\n  <%= isSelectedElsewhere ? "unavailable " : "" %>"\n  data-series-id="<%= seriesOption.get(\'seriesId\') %>">\n\n  <% if (isSelected) { %>\n    <span class="checkmark <%= !seriesOption.get("isCustom") ? "" : "option" %>">✓</span>\n  <% } %>\n\n  <a class="item_label" title="<%= seriesOption.generateDisplayDimensions() %>">\n    <% if (seriesOption.get(\'deviceType\')) { %>\n      <div class="platform_icon <%= seriesOption.get(\'deviceType\') %>"></div>\n    <% } %> \n    <%= seriesOption.get(\'displayName\') %>\n  </a>\n    <% if (seriesOption.get("isCustom")) { %>\n      <a class="remove_series_button"></a>\n    <% } %>\n</li>\n');window.JST["apps/analytics/_graph_navigation_sidebar"]=_.jammit_template("<ul class='list'>\n  <% _.each(graphNavigationOptions, function(option, index) { %>\n    <li\n      class='navigationOption <%= (option.name === selectedNavigationOption) ? 'selected' : '' %>'\n      data-navigation='<%= option.name %>'\n    >\n      <div class='icon <%= option.name %>'></div>\n      <div class='name' title='<%= option.displayName %>'>\n        <%= option.displayName %>\n      </div>\n    </li>\n  <% }); %>\n</ul>\n");window.JST["apps/analytics/_graph_toolbar"]=_.jammit_template('<div class="ui_actions_right">\n  <span class="graph_dates">\n  </span>\n  <a href="#" class="refresh_button with_tooltip">\n    <i class="icon_refresh"></i>\n    <span class=\'mini_tooltip right_side bottom\'>Refresh graph</span>\n  </a>\n  <a class="export_button with_tooltip" href="#">\n    <i class="icon_exportData"></i>\n    <span class="mini_tooltip bottom right_side">\n      <span class="export_enabled_text">\n        Download as CSV\n      </span>\n      <span class="export_disabled_text">\n        Maximum date range for export is 6 months\n      </span>\n    </span>\n  </a>\n</div>\n<div class="graph_dropdowns">\n  <%- JST[\'apps/analytics/_graph_add_button\']() %>\n</div>');window.JST["apps/analytics/_no_data"]=_.jammit_template("<div class='empty'>\n  <div class='empty_image'></div>\n  <p><%= text %></p>\n  <a class='ui_button' href='<%= action %>'><%= actionText %></a>\n</div>\n");window.JST["apps/quickstart/_confirmation"]=_.jammit_template('<div class="confirmation">\n  <div class="message"><%- message %></div>\n  <div class="confirmation_feedback"><a class="confirmation_cancel">Cancel</a><a class="confirmation_continue">Continue</a></div>\n</div>');window.JST["cloud_code/_job_schedules"]=_.jammit_template('<div class="job_table">\n  <% if (jobSchedules.length > 0) { %>\n      <table id="job_schedule" class="full_table">\n        <tr>\n          <th>Name</th>\n          <th>Function</th>\n          <th>Schedule (UTC)</th>\n          <th>Actions</th>\n        </tr>\n        <% jobSchedules.each(function(sched) { %>\n          <% var schedUrl = App.currentApp.dataRequestUrl() + "cloud_code/jobs/" + sched.get("objectId") %>\n          <tr>\n            <td><%= sched.get("description") %></td>\n            <td><%= sched.get("jobName") %></td>\n            <td><%= sched.get("humanizedSchedule") %></td>\n            <td>\n              <a class="run_now ui_button" href="#">Run Now</a>\n              <a class="edit_schedule ui_button" href="<%= schedUrl + "/edit" %>">Edit</a>\n              <a class="delete_schedule ui_button danger" href="<%= schedUrl %>" data-confirm="Deleting is permanent. Are you sure?" data-method="delete" rel="nofollow">Delete</a>\n            </td>\n          </tr>\n        <% }); %>\n      </table>\n  <% } else { %>\n    <div class="no_data">\n      <div class="empty">\n        <img src="/images/glyphs/icon_no_cloudcode.png" />\n        <p>No job schedules to show yet</p>\n        <a href="/docs/cloud_code_guide#jobs" class="ui_action_button">Learn more</a>\n      </div>\n    </div>\n  <% } %>\n</div>\n');window.JST["cloud_code/_job_status"]=_.jammit_template('<div class="job_table">\n  <% if (jobStatus.length > 0) { %>\n    <table id="job_status" class="full_table">\n      <tr>\n        <th>Function</th>\n        <th>Started (UTC)</th>\n        <th>Ended (UTC)</th>\n        <th>Status</th>\n        <th>Message</th>\n      </tr>\n      <% jobStatus.each(function(status) { %>\n        <tr>\n          <td><%= status.get("jobName") %></td>\n          <td><%= moment(Parse._decode(\'date\',status.get("createdAt"))).utc().format("MM/DD/YY hh:mm A UTC") %></td>\n          <td><%= status.get("finishedAt") ? moment(Parse._decode(\'date\',status.get("finishedAt"))).utc().format("MM/DD/YY hh:mm A UTC") : "Not completed" %></td>\n          <td class="status <%= status.get("status") %>"><%= status.get("status") %></td>\n          <td class="job_status_message"><%= status.get("message") %></div>\n        </tr>\n      <% }); %>\n    </table>\n  <% } else { %>\n    <div class="no_data">\n      <div class="empty">\n        <img src="/images/glyphs/icon_no_cloudcode.png" />\n        <p>No job status to show yet</p>\n        <a href="/docs/cloud_code_guide#jobs" class="ui_action_button">Learn more</a>\n      </div>\n    </div>\n  <% } %>\n</div>\n');window.JST["cloud_code/_log_content"]=_.jammit_template("<% if(!_.isEmpty(logs)) { %>\n  <div class='logs_list'>\n    <ul>\n    <% _.each(_.initial(logs), function(line) { %>\n      <li><pre><%= line %></pre></li>\n    <% }); %>\n      <li class=\"last_line\"><pre><%= _.last(logs) %></pre></li>\n    </ul>\n  </div>\n<% } else { %>\n  <div class='no_data'>\n    <div class='empty'>\n      <div class='no_logs'>\n        <img src=\"/images/glyphs/icon_no_cloudcode.png\" />\n        <p>No logs to show yet</p>\n        <a href=\"/docs/cloud_code_guide\" class=\"ui_action_button\">Get Started with Cloud Code</a>\n      </div>\n    </div>\n  </div>\n<% } %>\n");window.JST["cloud_code/_log_control"]=_.jammit_template('<li>\n  <a href="log/info"\n    data-pushstate="true"\n  <% if (selection === \'INFO\') { %>\n    class="selected"\n  <% } %>><div class=\'icon_info\'></div>\n    Info\n  </a>\n</li>\n<li>\n  <a href="log/error"\n    data-pushstate="true"\n  <% if (selection === \'ERROR\') { %>\n    class="selected"\n  <% } %>><div class=\'icon_errors\'></div>\n    Error\n  </a>\n</li>\n');window.JST["cloud_code/_logs_view"]=_.jammit_template('<div class="content_spinner"></div>');window.JST["cloud_code/_script_list"]=_.jammit_template('<% _.each(scriptList, function(fileName) { %>\n  <% if (!_.isEmpty(fileName)) { %>\n    <li>\n      <a href="script/<%= encodeURIComponent(fileName) %>" \n        data-pushstate="true"\n      <% if (fileName === selectedScript) { %>\n        class="selected"\n      <% } %>>\n        <% if (fileName === "main.js") { %>\n          <div class="icon_main"></div>\n        <% } else { %>\n          <div class="icon_file"></div>\n        <% } %>\n        <%= fileName %>\n      </a>\n    </li>\n  <% } %>\n<% }); %>\n');window.JST["cloud_code/_script_source"]=_.jammit_template('<% if (_.isString(scriptContents)) { %>\n  <% if (!_.isEmpty(scriptContents)) { %>\n    <div class="script_content">\n      <div class="javascript code_block cloudCodeTheme"><pre class="brush: js; gutter: true"><%= scriptContents %></pre></div>\n    </div>\n  <% } else { %>\n    <div class=\'no_data\'>\n      <div class=\'empty\'>\n        <div class="no_script">\n          <img src="/images/glyphs/icon_no_cloudcode.png" />\n          <p>File is empty</p>\n        </div>\n      </div>\n    </div>\n  <% } %>\n<% } else { %>\n  <div class=\'no_data no_files\'>\n    <div class=\'empty\'>\n      <div class=\'no_script\'>\n        <img src="/images/glyphs/icon_no_cloudcode.png" />\n        <p>No files to show yet</p>\n        <a href="/docs/cloud_code_guide" class="ui_action_button">Get Started with Cloud Code</a>\n      </div>\n    </div>\n  </div>\n<% } %>\n');window.JST["cloud_code/_script_view"]=_.jammit_template('<div class="left">\n  <div class="left_container">\n    <div class="menu_container">\n    </div>\n  </div>\n</div>\n<div class="right">\n  <div class="content_spinner"></div> \n</div>');window.JST["cloud_code/_tab_bar"]=_.jammit_template('<li class="first" data-tab="script">\n  Files\n</li>\n<li data-tab="log">\n  Logs\n</li>\n<li data-tab="jobs">\n  Scheduled Jobs\n</li>\n<li class="last" data-tab="job_status">\n  Job Status\n</li>');window.JST["cloud_jobs/_dd_date_time_row"]=_.jammit_template('<input type="text" class="job_date dd_date" value="<%= toDate %>" />\n\n<input type="text" class="job_time dd_time" value="<%= toTime %>" />');window.JST["cloud_jobs/_interval_selector"]=_.jammit_template('<% if (type === "mins") { %>\n  <% var val = (num > 60 || num < 0) ? 60 : num; %>\n  <select class="minute_quantity time_quantity">\n    <% for(var i = 1; i <= 60; i++) { %>\n      <option <%= val == i ? "selected" : "" %>><%= i %></option>\n    <% } %>\n  </select>\n<% } else { %>\n  <% var val = (num > 24 || num < 0) ? 24 : num; %>\n  <select class="hour_quantity time_quantity">\n    <% for(var i = 1; i <= 24; i++) { %>\n      <option <%= val == i ? "selected" : "" %>><%= i %></option>\n    <% } %>\n  </select>\n<% } %>\n\n<select class="time_unit">\n  <option <%= type === "mins" ? "selected" : "" %>>mins</option>\n  <option <%= type === "hours" ? "selected" : "" %>>hours</option>\n</select>');window.JST["components/_datepicker"]=_.jammit_template('<input type="text" name="<%= name %>" class="ui_dateinput" value="<%= displayValue %>" />\n<div class="ui_datepopup" style="<%= open ? \'display:block\' : \'\' %>">\n  <div class="ui_dateheader">\n    <a class="ui_dateprev" href="#"></a>\n    <span><%= headerString %></span>\n    <a class="ui_datenext" href="#"></a>\n  </div>\n  <% var className = startClass + (monthOffset > 0 ? \' future\' : \'\') + (preventFuture ? \' prevent_future\' : \'\') %>\n  <div class="ui_dateselector clearfix <%= className %>">\n    <span>Su</span><span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span>\n    <div class="week_buffer"></div>\n    <% for (var i = 1; i <= days; i++) { %>\n      <% var className = (!monthOffset && i === currentDay) ? \'class=today\' : \'\'; %>\n      <% var id_i = name + \'_day[\' + i + \']\'; %>\n      <input type="radio" name="<%= name %>_day" id="<%= id_i %>" value="<%= i %>" <%= selected === i ? \'checked\' : \'\' %> /><label <%= className %> for="<%= id_i %>"><%= i %></label>\n    <% } %>\n  </div>\n  <% if (drawer) { %>\n    <div class="ui_datedrawer"></div>\n  <% } %>\n</div>');window.JST["components/_daterange"]=_.jammit_template('<div class="ui_daterange">\n<label>From:</label><div class="from_date" /><span>-</span><label>To:</label><div class="to_date" /><div class="icon"></div>\n</div>');window.JST["components/_dropdown"]=_.jammit_template('<input type="radio" name="<%= name %>" id="<%= id %>" value="<%= value %>" <%= checked ? "checked" : "" %> />\n<label for="<%= id %>"><%= text %></label>');window.JST["components/_toggle"]=_.jammit_template('<div class="ui_toggle">\n<input type="radio" name="<%= name %>" id="<%= name %>[0]" value="<%= values[0] %>" <%= selection === values[0] ? "checked" : "" %> />\n<label for="<%= name %>[0]"><%= labels[0] %></label>\n<input type="radio" name="<%= name %>" id="<%= name %>[1]" value="<%= values[1] %>" <%= selection === values[1] ? "checked" : "" %> />\n<label for="<%= name %>[1]"><%= labels[1] %></label>\n</div>');window.JST["components/_web_bug_form"]=_.jammit_template('<div>\n  <label>Task title:</label>\n  <input type="text" class="task_title" />\n</div>\n<div>\n  <label>Bug details (or steps to repro):</label>\n  <textarea class="task_content" />\n</div>\n<p>If you have screenshots, attach them to the email before sending it.</p>\n\n<a href="#" class="task_button">#fileatask</a>');window.JST["components/acl/_acl_editor_modal"]=_.jammit_template('<div class="modal_errors"></div>\n<div class="public_row">\n  <i class="icon_people"></i>\n  <span class="public_label">Public</span>\n  <ul class="acl_checkboxes">\n    <li class="public_read">\n      <span class="checkbox">\n        <input class="public_read_checkbox" id="public_read" type="checkbox" />\n        <label for="public_read" data-on="On" data-off="Off">Read</label>\n      </span>\n    </li>\n    <li class="public_write">\n      <span class="checkbox">\n        <input class="public_write_checkbox" id="public_write" type="checkbox" />\n        <label for="public_write" data-on="On" data-off="Off">Write</label>\n      </span>\n    </li>\n  </ul>\n  <a class="public_tooltip with_tooltip">\n    <i class="icon_questionMark"></i>\n    <span class="mini_tooltip bottom right_side">\n      Public permissions override all private permissions. Uncheck public permissions to edit private permissions.\n    </span>\n  </a>\n</div>\n<ul class="acl_list">\n</ul>\n<div class="column_overlay second"></div>\n<div class="column_overlay fourth"></div>\n<a class="learn_more" href="/docs/data#security-objects" target="_blank">Why are ACLs important?</a>\n<a class="confirm ui_action_button">Save ACL</a>\n<a class="close ui_button">Cancel</a>\n');window.JST["components/acl/_acl_editor_row"]=_.jammit_template('<i class="input_icon icon_plusStroke"></i>\n<i class="input_icon icon_user hidden"></i>\n<i class="input_icon icon_permissions hidden"></i>\n<i class="input_icon icon_warning hidden"></i>\n<input class="ui_text" type="text" name="acl_<%= index %>" placeholder="Role name, Username, or User ID&hellip;">\n<div class="error_bubble"></div>\n<ul class="acl_checkboxes">\n  <li class="read">\n    <span class="checkbox">\n      <i class="icon_checkmark"></i>\n      <input class="read_checkbox" id="read_<%= index %>" type="checkbox"/>\n      <label for="read_<%= index %>">Read</label>\n    </span>\n  </li>\n  <li class="write">\n    <span class="checkbox">\n      <i class="icon_checkmark"></i>\n      <input class="write_checkbox" id="write_<%= index %>" type="checkbox"/>\n      <label for="write_<%= index %>">Write</label>\n    </span>\n  </li>\n</ul>\n<a class="remove_row_button">\n  <i class="icon_trashcan"></i>  \n</a>\n');window.JST["config/_config_table"]=_.jammit_template('<div class="ui_content_header">\n  <div class="ui_actions_left">\n    <span class="search"><input type="text" placeholder="Search parameters" /></span>\n  </div>\n  <div class="ui_actions_right">\n    <a href="#" class="ui_button" id="new_param_button"><i class="icon_plus"></i><span>New Parameter</span></a>\n  </div>\n  <div>Set up your Config</div>\n</div>\n<table class="full_table">\n  <tr>\n    <th style="width: 20%">Parameter</th>\n    <th style="width: 20%">Type</th>\n    <th>Value</th>\n  </tr>\n</table>\n');window.JST["config/_empty_config"]=_.jammit_template('<div class="ui_empty_state">\n  <i class="icon_settingGears"></i>\n  <div class="ui_empty_caption">Configure your app</div>\n  <p>Create and edit parameters to modify your app\'s behavior</p>\n  <a id="new_param_button" class="ui_action_button"><i class="icon_plus"></i><span>New Parameter</span></a>\n</div>');window.JST["config/_modal_footer"]=_.jammit_template('<a href="#" class="ui_delete_button"><i class="icon_trashcan"></i><span>Delete Parameter</span></a>');window.JST["config/_new_parameter_modal"]=_.jammit_template('<div class="modal_errors"></div>\n  \n<table class="modal_form">\n  <tr><td>Name:</td><td id="param_name_wrapper"></td></tr>\n  <tr><td>Type:</td><td><div class="dropdown_field" id="type_dropdown_wrapper"></div></td></tr>\n  <tr><td>Value:</td><td id="param_value_wrapper"></td></tr>\n</table>\n\n<div class="centered">\n  <a href="#" class="ui_action_button confirm"><%- updateParam ? \'<i class="icon_checkmark"></i><span>Update Parameter</span>\' : \'<span>Create Parameter</span><i class="icon_arrowRight"></i>\' %></a>\n</div>\n');window.JST["config/_param_row"]=_.jammit_template('<td class="param_name"><%= param.get(\'name\') %></td>\n<td class="param_type"><%= param.type() %></td>\n<td class="param_value"><%- param.displayValue() /*TODO:renderer*/%> </td>\n');window.JST["data_browser/_boolean_editor"]=_.jammit_template("<select>\n  <option value='true'>true</option>\n  <option value='false'>false</option>\n</select>");window.JST["data_browser/_classes"]=_.jammit_template('<% _(classes).each(function(col) { %>\n  <li class="<%= col.className === selectedClassName && !relationKey ? \'selected\' : \'\' %>\n             <%= col.exporting ? \' exporting\' : \'\' %>\n             <%= col.processing ? \' processing\' : \'\' %>\n             <%= col.waiting ? \' waiting\' : \'\' %>">\n    <a href="#class/<%= col.className %>" data-name="<%= col.className %>">\n      <% if (col.className === \'_Product\') { %>\n        <i class="icon_cart"></i>\n      <% } else if (col.className === \'_Installation\') { %>\n        <i class="icon_device"></i>\n      <% } else if (col.className === \'_User\') { %>\n        <i class="icon_users"></i>\n      <% } else if (col.className === \'_Role\') { %>\n        <i class="icon_permissions"></i>\n      <% } %>\n      <% var name = Parse.Schema.beautifyClassName(col.className) %>\n      <span title="<%= name %>">\n        <%= name %>\n      </span>\n      <% if (!_.isUndefined(col.count)) { %>\n        <span><%= col.displayedCount %></span>\n      <% } else if (col.waiting) { %>\n        <span>?</span>\n      <% } else if (col.failed) { %>\n        <span>!</span>\n      <% } %>\n    </a>\n  </li>\n  <% if (relationKey && col.className === selectedClassName) { %>\n    <li class="selected">\n      <a href="<%= relationLink %>">\n        <i class="icon_nextCircle"></i>\n        <span><%= relationKey %></span>\n        <span></span>\n      </a>\n    </li>\n  <% } %>\n<% }); %>\n<li class="action">\n  <a href="#" class="ui_button add_class">\n    <i class="icon_plus"></i>\n    <span>Add Class</span>\n  </a>\n  <a href="#" class="ui_button import">\n    <i class="icon_importStroke" style="font-size: 20px; margin-right: 0.25em;"></i>\n    <span>Import</span>\n  </a>\n</li>\n');window.JST["data_browser/_constraint"]=_.jammit_template('<td class="constraint_column"></td>\n<td class="constraint_comparator"></td>\n<td class="constraint_value"></td>\n<td class="constraint_remove">\n  <a class="constraint_remove with_tooltip">\n    <i class="icon_crossCircle"></i>\n    <span class="mini_tooltip bottom" style="width: 120px">Remove condition</span>\n  </a>\n</td>');window.JST["data_browser/_constraint_field"]=_.jammit_template("<div class='dropdown'>\n  <select class='field'>\n    <% _.each(fields, function(field) { %>\n      <option value='<%= field %>'><%= field %></option>\n    <% }); %>\n  </select>\n</div>\n");window.JST["data_browser/_constraint_op"]=_.jammit_template("<div class='dropdown'>\n  <select class='op'>\n    <% Parse._each(ops, function(op, description) { %>\n      <option value='<%= description %>'><%= description %></option>\n    <% }); %>\n  </select>\n</div>");window.JST["data_browser/_context_menu"]=_.jammit_template("<ul class='context_menu'>\n  <li class='delete'>Delete value</li>\n</ul>");window.JST["data_browser/_date_editor"]=_.jammit_template("<% if (!disableDate) { %><span class='date' /><% } %>\n<div class='time_container'>\n  <div class='time'>00 : 00</div>\n  \n  <div class='time_picker_overlay'></div>\n  <div class='time_picker'>\n    <div class='time_picker_header'>Select time</div>\n    <div class='time_picker_content'>\n      <div class='hour_container'>\n        <select class='hour'>\n          <% for (var hour = 0; hour < 24; hour++) {\n            var formattedHour = App.Views.Editors.Date.doubleDigits(hour);\n          %>\n            <option value=<%= formattedHour %>> <%= formattedHour %></option>\n          <% } %>\n        </select>\n      </div>\n      <div class='colon'>:</div>\n      <div class='minute_container'>\n        <select class='minute'>\n          <% for (var minute = 0; minute < 60; minute++) {\n            var formattedMinute = App.Views.Editors.Date.doubleDigits(minute);\n          %>\n            <option value=<%= formattedMinute %>><%= formattedMinute %></option>\n          <% } %>\n        </select>\n      </div>\n    </div>\n  </div>\n  \n  <div class='time_zone_badge'>UTC</div>\n</div>");window.JST["data_browser/_delete_file"]=_.jammit_template('<img class="remove" src="/images/data_browser/circle_x.png" />\n');window.JST["data_browser/_drop_column"]=_.jammit_template('<form>\n    <div class="errors" style="display:none"></div>\n    \n    <label for="name">Name</label>\n    <div class="styled-select">\n        <select name="name">\n            <% _(columns).each(function(column) { %>\n                <option value="<%= column %>"> <%= column %> </option>\n            <% }); %>\n        </select>\n    </div>\n\n    <div class="buttons">\n        <button>Drop Column</button>\n        <a href="#" class="cancel along">Cancel</a>\n    </div>\n</form>\n');window.JST["data_browser/_file_input"]=_.jammit_template('<a href="javascript: void(0)">Upload File</a>\n<input class="upload" type="file" id="upload_input" name="upload" />\n\n');window.JST["data_browser/_filters"]=_.jammit_template('<div class="filters_overlay"></div>\n<span class="filter_button"></span>\n<div class="title"></div>\n<div class="filters_container">\n  <table class="filters"></table>\n  <div class="controls">\n    <a class="add_constraint_button ui_button"><i class="icon_plus"></i><span>Add condition</span></a>\n    <a class="submit ui_button"><i class="icon_checkmarkCircle"></i><span>Apply</span></a>\n    <a class="dismiss">Clear All</a>\n    <div class="filter_errors"></div>\n  </div>\n</div>\n');window.JST["data_browser/_geopoint_editor"]=_.jammit_template("<input type='text' class='latitude' /> , <input type='text' class='longitude' />");window.JST["data_browser/_link_to_file"]=_.jammit_template("<a class='new_tab' href=\"<%= url %>\">\n    <%= name %>\n</a>\n");window.JST["data_browser/_new_class"]=_.jammit_template('<form class="new_class">\n\n  <div class="errors"></div>\n\n  <div class="custom">\n    <input type="text" name="name" value="" placeholder="Class name" />\n  </div>\n  \n  <div class="dropdown">\n    <select name="classType">\n      <% _(types).each(function(type) { %>\n        <option value="<%= type %>"> <%= type %> </option>\n      <% }); %>\n    </select>\n  </div>  \n  <div class="special">\n    <small class="description user">The User class is a special class that can be authenticated, allowing users of your app to log in, sign up, and more.</small>\n    <small class="description role">The Role class is a special class that allows you to specify groups of users with shared permissions.</small>\n    <small class="description installation">The Installation class is a special class that stores push notification subscriptions for each device running your app.</small>\n    <small class="description product">The Product class is a special class that stores your in-app product data.</small>\n  </div>\n  \n  <div class="tip">Class names must only contain numbers, letters, and underscore, and can only begin with a letter.</div>\n  \n  \n  <div class="buttons">\n    <button>Create Class</button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>');window.JST["data_browser/_new_column"]=_.jammit_template('<form class=\'new_column\'>\n  <div class=\'errors\' style=\'display: none\'></div>\n  \n  <input type=\'text\' name=\'name\' placeholder=\'Column name\' />\n\n  <div class="dropdown">\n    <select name="type">\n      <option value="">Select a type</option>\n      <% _(types).each(function(type) { %>\n        <option value="<%= type %>"> <%= type %> </option>\n      <% }); %>\n    </select>\n  </div>\n  \n  <div class="dropdown classNameDropdown">\n    <select name="className">\n      <option value="">Target class</option>\n      <% _(classes).each(function(className) { %>\n        <option value="<%= className %>"> <%= className %> </option>\n      <% }); %>\n    </select>\n  </div>\n  \n  <div class="tip">Must only contain alphanumeric or underscore characters, and must begin with a letter or number.</div>\n    \n  \n  \n  \n  <div class="buttons">\n    <button>Create Column</button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>\n');window.JST["data_browser/_new_import"]=_.jammit_template("<form class='import'>\n  <div class='errors'></div>\n\n  <div class='file' />\n\n  <div class='info_tip'><small>We accept .json and .csv files. <a href=\"/docs/data#data-import\" target=\"_blank\" class='info_tip'>Learn more</a>.</small></div>\n\n  <div class='custom'>\n    <input type='text' class='class_name' value='' placeholder='Class Name' />\n  </div>\n\n  <div class=\"dropdown\">\n    <select name=\"classType\">\n      <% _(types).each(function(type) { %>\n        <option value=\"<%= type %>\"> <%= type %> </option>\n      <% }); %>\n    </select>\n  </div>\n  <div class=\"special\">\n    <small class=\"description user\"> (JSON only) The User class is a special class that can be authenticated, allowing users of your app to log in, sign up, and more.</small>\n    <small class=\"description installation\"> (JSON only) The Installation class is a special class that track installation of your app on devices that can receive push notifications.</small>\n  </div>\n  \n  <div class=\"tip\"><small>Class names must only contain numbers, letters, and underscore, and can only begin with a letter.</small></div>\n\n  <div class='buttons'>\n    <button type='submit'>Import</button>\n    <a href=\"#\" class='cancel along'>Cancel</a>\n  </div>\n</form>\n");window.JST["data_browser/_no_data"]=_.jammit_template("<div class='empty'>\n  <!-- Import encountered an error -->\n  <% if (!_.isUndefined(seedFile) && seedFile.get(\"state\") === \"failed\") { %>\n    <div class='empty_image'></div>\n    <% if (seedFile.get('error_message')) { %>\n      <p class=\"error_header\">Import encountered the following error \n        <%= seedFile.get(\"error_on_row\") ? \"in row (or in json object) \" + seedFile.get(\"error_on_row\") : \"\" %>: \n        <%= seedFile.get('error_message') %></p>\n    <% } else { %>\n      <p>Import encountered an unknown error.</p>\n    <% } %>\n    <% if (!seedFile.get('partial_import')) { %>\n      <p class=\"error_message\">No data was imported.</p>\n      <a class=\"dismiss ui_action_button\">Dismiss Error</a>\n    <% } else { %>\n      <p class=\"error_message\">Some data was successfully imported.</p>\n      <a class=\"view_data ui_action_button\">View Data</a>\n    <% } %>\n  <!-- Collection importing data -->\n  <% } else if (!_.isUndefined(seedFile)) { %>\n    <div class='empty_image'></div>\n    <% if (seedFile.get('progress_rows')) { %>\n      <p><%= seedFile.get('progress_rows') %> rows imported...</p>\n    <% } else if (seedFile.get('state') == \"processing\") { %>\n      <p>Validating data...</p>\n    <% } else { %>\n      <p>Starting import...</p>\n    <% } %>\n\n  <!-- No data given the filter -->\n  <% } else if (hasFilters) { %>\n    <div class='empty_image'></div>\n    <p>There is no data matching your filters for this page.</p>\n\n  <!-- No object given ID -->\n  <% } else if (isSingleObject) { %>\n    <div class='empty_image'></div>\n    <p>There is no object matching the objectId.</p>\n\n  <!-- Simply no data -->\n  <% } else { %>\n    <div class='empty_image'></div>\n    <p>You don't have any data to display yet.</p>\n  	<% if (!hasClasses) { %>\n      <a class='add_class ui_action_button'>Add a class</a>\n    <% } else { %>\n      <a class='add ui_action_button'>Add a row</a>\n    <% } %>\n  <% } %>\n</div>");window.JST["data_browser/_schema_config"]=_.jammit_template('<div class="schema_config">\n  <div class="form_wrapper">\n    <div class="errors"></div>\n    <form accept-charset="UTF-8" class="edit_seed_file" id="edit_seed_file" method="post">\n      <div style="margin:0;padding:0;display:inline">\n        <input name="utf8" type="hidden" value="✓">\n        <input name="_method" type="hidden" value="put">\n      </div>\n      <div class="import_header">\n        <% _(seedFile.get("schema")).each(function(value, key) { %>\n          <div class="import_header_column">\n            <input type="text" class="import_key" name="schema_<%= key %>[key]" value="<%= key %>" placeholder="Column Name"/>\n            <div class="type_dropdown">\n              <select class="import_type" name="schema_<%= key %>[type]">\n                <option>string</option>\n                <option>boolean</option>\n                <option>number</option>\n              </select>\n            </div>\n          </div>\n        <% }); %>\n      </div>\n      <div class="preview_browser"></div>\n    </form>\n  <div>\n</div>');window.JST["data_browser/_settings"]=_.jammit_template('<form class="set_permissions">\n  <div class="errors" style="display:none"></div>\n\n  <h2>Client Permissions</h2>\n  <p><small>Choose which operations your client applications can make on the <%= className %> class.</small></p>\n\n  <a href="#" class="permission" name="get" data-friendly-name="Get">Get <small class="inline" /></a>\n  <a href="#" class="permission" name="find" data-friendly-name="Find">Find <small class="inline" /></a>\n  <a href="#" class="permission" name="update" data-friendly-name="Update">Update <small class="inline" /></a>\n  <a href="#" class="permission" name="create" data-friendly-name="Create">Create <small class="inline" /></a>\n  <a href="#" class="permission" name="delete" data-friendly-name="Delete">Delete <small class="inline" /></a>\n  <a href="#" class="permission" name="addField" data-friendly-name="Add Fields">Add fields <small class="inline" /></a>\n\n  <div class="buttons">\n    <button type="submit">Save Settings</button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>\n');window.JST["docs/_app_list"]=_.jammit_template('<% if (typeof(languages) !== "undefined" && languages.length > 0) { %>\n  <span class="language">Show examples for:\n    <select>\n      <% _.each(languages, function(item) { %>\n        <option data-language="<%= item %>"><%= item %> </option>\n      <% }); %> \n    </select>\n  </span>\n<%}%>\n\n<% if (typeof(apps) !== "undefined" && apps.length > 0) { %>\n  <span class="app_name">Use keys for: \n    <select>\n      <% apps.each(function(item) { %>\n        <option data-app="<%= item.id %>"><%= item.get(\'name\') %></option>\n      <% }); %>\n    </select>\n  </span>\n<%}%>\n');window.JST["docs/_cloud_modules"]=_.jammit_template('<% if (typeof(categories) !== "undefined" && categories.length > 0) { %>\n  <% _.each(categories, function(category) { %>\n    <h4><%= category %></h4>\n\n    <ul class="text">\n      <% _.each(modules[category], function(module) { %>\n        <li>\n          <a href="<%= module.get("url") %>"><%= module.get("name") %></a>\n          <% if (module.get("description")) { %>\n            &mdash; <%= module.get("description") %>\n          <% } %>\n        </li>\n      <% });%>\n    </ul>\n  <% }); %>\n<%} else {%>\n  <p>There are currently no modules available.</p>\n<%}%>\n');window.JST["docs/_navigation_bar"]=_.jammit_template('<div class=\'dashboard_toolbar\'>\n  <ul class="segment_control">\n    <% for (var index in navbarItems) { %>\n      <li class="navbar_link" data-platform-button="<%= navbarItems[index] %>">\n        <% if (navbarItems[index] === \'OSX\') { %>\n          OS X\n        <% } else { %>\n          <%= navbarItems[index] %>\n        <% } %>\n      </li>\n    <% } %>\n  </ul>\n</div>');window.JST["docs/_third_party_libraries"]=_.jammit_template('<% _(libs).chain().keys().sortBy(function(i) { return i.toLowerCase(); }).each(function(category) { %>\n  <h4><%= category %></h4>\n\n  <ul class="text">\n    <% _(libs[category]).chain().sortBy(function(i) { return i.get("name").toLowerCase(); }).each(function(lib) { %>\n      <li>\n        <a href="<%= lib.get("url") %>"><%= lib.get("name") %></a>\n        <% if (lib.get("description")) { %>\n          &mdash; <%= lib.get("description") %>\n        <% } %>\n      </li>\n    <% });%>\n  </ul>\n<% }); %>\n');window.JST["events/rsvp"]=_.jammit_template('<p>We\'re glad to hear you\'re attending. We just need a couple pieces of information first.</p>\n<div class="modal_errors centered"></div>\n<table class="modal_form">\n  <tr>\n    <td>Name</td><td><input class="ui_text" type="text" id="rsvp_name" /></td>\n  </tr>\n  <tr>\n    <td>Email</td><td><input class="ui_text" type="text" id="rsvp_email" /></td>\n  </tr>\n</table>\n<div class="centered">\n  <a class="ui_action_button confirm" href="#"><i class="icon_send"></i><span>Register</span></a>\n</div>');window.JST["fb_conversion/sign_up"]=_.jammit_template("var fb_param = {};\nfb_param.pixel_id = '6010887695824';\nfb_param.value = '5.00';\nfb_param.currency = 'USD';\n(function(){\n  var fpw = document.createElement('script');\n  fpw.async = true;\n  fpw.src = '//connect.facebook.net/en_US/fp.js';\n  var ref = document.getElementsByTagName('script')[0];\n  ref.parentNode.insertBefore(fpw, ref);\n})();\n\n// Facebook Conversion Code for NEW - PARSE - Sign up\n(function() {\n  var _fbq = window._fbq || (window._fbq = []);\n  if (!_fbq.loaded) {\n    var fbds = document.createElement('script');\n    fbds.async = true;\n    fbds.src = '//connect.facebook.net/en_US/fbds.js';\n    var s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(fbds, s);\n    _fbq.loaded = true;\n  }\n})();\nwindow._fbq = window._fbq || [];\nwindow._fbq.push(['track', '6014412664824', {'value':'0.00','currency':'USD'}]);\n");window.JST["home/_blog_feed"]=_.jammit_template('<% _(entries).each(function(entry) { %>\n  <p class="title"><!-- <span class=\'date\'><%= Parse._parseDate(entry.date).toDateString() %></span> &middot; --> <a href="<%= entry.url %>"><%= entry.title %></a></p>\n  <p class="summary"><%= _(entry.summary).truncate(120) %> <a href="<%= entry.url %>">Read more</a></p>\n<% }); %>\n');window.JST["home/_login_footer_pure"]=_.jammit_template('<a class="login-facebook oauth_login" href="/auth/facebook">\n<span>Log in with Facebook</span>\n</a>\n\n<a class="login-github oauth_login" href="/auth/github">\n<span>Log in with GitHub</span>\n</a>\n\n<a class="login-google oauth_login" href="/auth/google_oauth2">\n<span>Log in with Google</span>\n</a>');window.JST["home/_login_modal"]=_.jammit_template('<form action="/user_session" class="new_user_session" id="new_user_session" method="post">\n  <div style="margin:0;padding:0;display:inline">\n      <input name="authenticity_token" type="hidden" />\n  </div>\n  <div class="field user_email">\n    <div class="icon"></div>\n    <input id="user_session_email" name="user_session[email]" size="30" tabindex="100" type="text" placeholder="email" />\n  </div>\n\n  <div class="field user_password">\n    <div class="icon"></div>\n    <input id="user_session_password" name="user_session[password]" size="30" tabindex="101" type="password" placeholder="password" />\n  </div>\n\n  <a class="forgot_password" href="/password_resets/new" tabindex="103">Forgot password?</a>\n\n  <button type="submit" class="button submit_button" tabindex="102">Log in</button>\n</form>\n<div class="alt_logins">\n  <a class="login-facebook oauth_login" href="/auth/facebook">\n    Log in with Facebook\n  </a>\n\n  <a class="login-github oauth_login" href="/auth/github">\n    Log in with GitHub\n  </a>\n\n  <a class="login-google oauth_login" href="/auth/google_oauth2">\n    Log in with Google\n  </a>\n</div>\n');window.JST["home/_login_modal_pure"]=_.jammit_template('<form action="/user_session" class="new_user_session" id="new_user_session" method="post">\n  <div style="margin:0;padding:0;display:inline">\n      <input name="authenticity_token" type="hidden" />\n  </div>\n  <div class="field user_email">\n    <input id="user_session_email" name="user_session[email]" size="30" tabindex="100" type="text" placeholder="email" />\n  </div>\n\n  <div class="field user_password">\n    <input id="user_session_password" name="user_session[password]" size="30" tabindex="101" type="password" placeholder="password" />\n  </div>\n  <div class="clearfix">\n    <a class="forgot_password" href="/password_resets/new" tabindex="103">Forgot password?</a>\n  </div>\n\n  <a class="ui_action_button submit_button" tabindex="102">Log in</a>\n</form>');window.JST["home/_signup_modal_pure"]=_.jammit_template('<form action="/users" class="new_user" id="new_user" method="post">\n  <div style="margin:0;padding:0;display:inline">\n      <input name="authenticity_token" type="hidden" />\n  </div>\n  <div class="field user_name">\n    <input id="user_name" name="user[name]" size="30" tabindex="100" type="text" placeholder="name" />\n  </div>\n\n  <div class="field user_email">\n    <input id="user_email" name="user[email]" size="30" tabindex="101" type="text" placeholder="email" />\n  </div>\n\n  <div class="field user_password">\n    <input id="user_password" name="user[password]" size="30" tabindex="102" type="password" placeholder="password" />\n  </div>\n\n  <a class="ui_action_button submit_button" tabindex="102">Sign up</a>\n</form>\n');window.JST["layouts/query_builder/_query_builder"]=_.jammit_template('<% if (display) { %>\n    <div class="top">\n      <div class="phone"></div>\n      <h3>The Installation must match:</h3>\n    </div>\n    <table class="query_builder"></table>\n    <button class="add_constraint_button" type="button">Add condition</button>\n    <div class="errors"></div>\n<% } else { %>\n    <div class="center">Query Builder inaccessible because no valid devices were found!</div>\n<% } %>\n');window.JST["migration/_android_keys"]=_.jammit_template('<div class="keys_img"><i class="icon_android"></i></div>\n<h2>Looks like you have some Android users!</h2>\n<p>We need the GCM API Key to import these. <a class="more_info" href="http://docs.urbanairship.com/platform/android.html#gcm-setup" target="_blank">More info</a></p>\n<span class="key">\n  <h4>GCM API Key</h4>\n  <input class="ui_text" type="text" name="gcm_key" placeholder="AIzaSyCNwhyV-XuKUDni_eCkdB7f3OJTbj3QMO1"/>\n</span>\n<span class="key">\n  <h4>Google API Project Number</h4>\n  <input class="ui_text" type="text" name="sender_id" placeholder="377225441038"/>\n</span>\n<p class="adm_note">Note: Parse does not currently support Amazon Device Messaging (ADM).</p>\n<div class="bottom_buttons">\n  <div class="errors_box"></div>\n  <a class="ui_action_button verify">Verify</a>\n  <a class="close ui_button">Cancel</a>\n</div>\n<div class="spinner_container hidden">\n  <h2>Verifying keys...</h2>\n</div>\n');window.JST["migration/_app_selection"]=_.jammit_template('<span class="migrate_info">\n  <h4>Source</h4>\n  <div class="box ua_box">\n    <i class="icon_iosDevice"></i>\n    <i class="icon_androidDevice"></i>\n    <div class="source_keys">\n      <div class="source_key">\n        <i class="icon_checkmarkStroke"></i>\n        App Key\n      </div>\n      <div class="source_key">\n        <i class="icon_checkmarkStroke"></i>\n        App Master Secret\n      </div>\n      <div class="source_key android">\n        <i class="icon_checkmarkStroke"></i>\n        Android Keys\n      </div>\n    </div>\n  </div>\n  <h3>Urban Airship</h3>\n</span>\n<span class="arrow">\n  <i class="icon_arrowRight"></i>\n</span>\n<span class="migrate_info">\n  <h4>Destination</h4>\n  <div class="box app_box">\n    <div class="apps">\n      <% for (var i=0; i < appNames.length; i++) { %>\n        <input type="radio" name="app" id="app_<%= appSlugs[i] %>" <%= i === 0 ? \'checked\' : \'\' %>>\n        <label for="app_<%= appSlugs[i] %>">\n          <%= appNames[i] %>\n          <div class="radio_button"></div>\n        </label>\n      <% } %>\n    </div>\n    <a href="#" class="create_app">Create a New App</a>\n    <div class="create_dialog hidden">\n      <input type="text" placeholder="New App Name">\n      <div class="create_error"></div>\n      <a class="create_cancel">Cancel</a>\n      <a class="create_submit">Create App</a>\n    </div>\n  </div>\n  <img class="logo" alt="Parse" src="/images/logo_light.png">\n</span>\n<div class="bottom_buttons">\n  <div class="errors_box"></div>\n  <a class="ui_action_button import">Import</a>\n  <a class="close ui_button">Cancel</a>\n</div>\n');window.JST["migration/_import_confirmation"]=_.jammit_template('<i class="icon_checkmarkStroke"></i>\n<h2>Your import is in progress.</h2>\n<p>We\'ll send you an email when it is complete.</p>\n<a href="/tutorials/migrating-from-urban-airship" class="ui_action_button confirm">Next steps</a>\n');window.JST["migration/_sign_in"]=_.jammit_template('<img class="parachute" src="/images/migration/parachute.png"></img>\n<h2>Let\'s get started with your import!</h2>\n<p class="login_text">Login or create a new Parse account to continue.</p>\n<p class="continue_text">You\'re already logged in to Parse as <%= email %></p>\n<a href="#" class="ui_button signup">Create an account</a>\n<a href="#" class="ui_action_button login">Login to Parse</a>\n<a href="#" class="ui_action_button continue">Continue</a>\n');window.JST["migration/_ua_keys"]=_.jammit_template('<div class="keys_img"><i class="icon_downloadBox"></i></div>\n<h2>Where are we importing from?</h2>\n<p>Enter your Urban Airship credentials. <a class="more_info" href="http://docs.urbanairship.com/reference/app_keys_secrets.html" target="_blank">More info</a></p>\n<span class="key">\n  <h4>App Key</h4>\n  <input class="ui_text" type="text" name="app_key" placeholder="Gp2spGmwSKGyGZDgoEN-wx"/>\n</span>\n<span class="key">\n  <h4>App Master Secret</h4>\n  <input class="ui_text" type="text" name="master_key" placeholder="5s3VgNw9R5ucP0zhuZYxHB"/>\n</span>\n<div class="bottom_buttons">\n  <div class="errors_box"></div>\n  <a class="ui_action_button verify">Verify</a>\n  <a class="close ui_button">Cancel</a>\n</div>\n<div class="spinner_container hidden">\n  <h2>Verifying keys...</h2>\n</div>\n');window.JST["nagging/_client_push_experiment"]=_.jammit_template('<strong>Notice:</strong> You have a possible security vulnerability in your app <%= appname %>. Read more about this <a href="http://blog.parse.com/2014/09/03/the-dangerous-world-of-client-push">here</a>, and consider disabling "client push" in your app\'s <a href="<%= link %>">settings</a>.\n');window.JST["nagging/_failed_charge"]=_.jammit_template('<strong>Notice:</strong> We attempted to charge your credit card for <%= amount %> on <%= date %>, but the card was declined. <a href="/credit_card/new">Add a valid card to ensure your service isn’t interrupted</a>.\n');window.JST["nagging/_has_overages"]=_.jammit_template('<strong>Notice:</strong> You have overages for this month but you don’t have a credit card on file. <a href="/credit_card/new?up=1">Add one to ensure your service isn’t interrupted</a>.\n');window.JST["push_notifications/_nux_modal"]=_.jammit_template('<div class="nux_content">\n		<div class="nux_slides">\n				<div class="slide" id="slide1">\n						<div class="picture_container flask"></div>\n						<div class="title">\n								Introducing Push A/B Testing\n						</div>\n						<div class="subtitle">\n								Send the right message, at the right time\n						</div>\n						<a class="next_button">Next</a>\n				</div>\n				<div class="slide" id="slide2">\n						<div class="title title_above">\n								Test your message\n						</div>\n						<div class="subtitle">\n								Send different messages to your 2 test groups to know which one is the best.\n						</div>\n						<div class="picture_container sample"></div>\n						<a class="next_button second_next">Next</a>\n				</div>\n				<div class="slide" id="slide2">\n						<div class="title title_above">\n								Send the winner\n						</div>\n						<div class="subtitle">\n								Send the winning message to the rest of your users (the Launch Group)\n						</div>\n						<div class="picture_container launch"></div>\n						<a class="next_button">Next</a>\n				</div>\n				<div class="slide" id="slide2">\n						<div class="title title_above">\n								Try different times\n						</div>\n						<div class="subtitle">\n								Schedule a push campaign with 2 different times to see which time performs best.\n						</div>\n						<div class="picture_container timer"></div>\n						<a class="get_started">Get started!</a>\n				</div>\n		</div>\n</div>\n');window.JST["push_notifications/_push_time"]=_.jammit_template("<% var time = moment(time_string); %>\n<div class='widget_date'>\n  <div class='month'>\n    <%= time.format(\"MMM\").toUpperCase() %>\n</div>\n  <div class='day'>\n    <%= time.format(\"DD\") %>\n </div>\n</div>\n<div class='widget_clock'>\n  <div class='period'>\n    <%= time.format(\"A\") %>\n  </div>\n  <div class='icon'></div>\n  <div class='time'>\n    <%= time.format(\"hh:mm\") %>\n </div>\n</div>\n\n<% \n  if (-1 == time_string.indexOf('Z')) {\n%>\n    <div class='local_time'><a href=\"#\" title='Local time'>&nbsp;</a></div>\n<% } %>\n");window.JST["push_notifications/_segment_control"]=_.jammit_template('<li class="first">\n  <div class="analytics">\n    <span class="text_label">Analytics</span>\n  </div>\n</li>\n<li class="last">\n  <div class="details">\n    <span class="text_label">Details</span>\n  </div>\n</li>\n');window.JST["questions/_bug_report_modal"]=_.jammit_template('<p>To provide you with a better support experience, we&apos;re now using Facebook&apos;s bug reporting tool. It gives you greater capability to follow progress on your reports, and allows us to respond to your issues faster.</p>\n<p class="requires_apps">Which app is this regarding?</p>\n<div class="dropdown_wrap requires_apps">\n  <div class="ui_dropdown" />\n</div>\n<p>Note: to use the <a href="https://developers.facebook.com">developers.facebook.com</a> bug reporting tool, you&apos;ll first need a Facebook account.</p>\n<a href="#" class="facebook_link_button">Continue to Facebook</a>\n');window.JST["support/_billing_inquiry_modal"]=_.jammit_template('<div class="inquiry_confirmation" style="display:none">\n	<h2>Successfully sent! We\'ll get back to you through your account contact email.</h2>\n</div>\n<form class="billing_inquiry_form">\n  <div class="errors" style="display:none"></div>\n\n	<label>What do you need help with?</label>\n	<textarea name="question"></textarea>\n	<p>		\n		<small>\n			You may review your billing information in your <a href="/account">account overview</a>. Don\'t forget to check out our <a href="/plans/faq">answers to common questions</a>.\n		</small>\n	</p>\n\n	<button class="submit">Submit</button>\n</form>\n\n');window.JST["tutorials/_app_keys"]=_.jammit_template('<div class="caption" id="appKeys">\n	<div class="number">2</div>\n	<p><%= title %></p>\n</div>\n\n<p class="title">App ID</p>\n<div class="copy_container">\n	<input type="text" value="<%= appKey %>" />\n	<a href="copy" id="copy_client_key">Copy</a>\n</div>\n\n<p class="title">Client Key</p>\n<div class="copy_container"> \n	<input type="text" value="<%= appSecret %>" />\n	<a href="#"" id="copy_client_secret">Copy</a>\n</div>');window.JST["users/_name_widget"]=_.jammit_template('<div id=\'name_widget\'>\n    <div id=\'form_wrapper\'>\n        <a href="#" class="close">close</a>\n        <div class="header_2">Please enter your name before posting</div>\n        <form>\n            <div class="errors" style="display:none"></div>\n\n            <label>Name</label>\n            <input type="text" name="name" value="" />\n\n            <small>\n                We use your name as your identifier throughout Parse Questions\n            </small>\n            \n            <button class="small">Submit</button>\n        </form>\n    </div>\n</div>\n');window.JST["videos/_video"]=_.jammit_template('<div class="video <%= size %>">\n	<div class="thumbnail">\n		<img src="<%= video.get(\'thumbnail\').url() %>" />\n    <div class="play"></div>\n	</div>\n  <div class="video_container">\n    <iframe width="711" height="428" src="//www.youtube.com/embed/<%= video.get(\'youtubeId\') %>?version=3&enablejsapi=1" frameborder="0" allowfullscreen></iframe>\n  </div>\n	<div class="caption">\n    <div class="speakerPicture">\n      <img src="<%= video.get(\'speakerPicture\').url() %>" />\n    </div>\n    <div class="description">\n      <div class="title">\n        <%= video.get(\'title\') %>\n      </div>\n      <div class="speakerName">\n        <%= video.get(\'speakerName\') %>, <%= video.get(\'speakerTitle\') %>\n      </div>\n    </div>\n	</div>\n</div>')})();